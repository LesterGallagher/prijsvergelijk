/* onsenui v2.10.1 - 2018-05-28 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ons=e()}(this,function(){"use strict";function t(t){kt.set(t,!0)}function e(t){var e=wt.get(t,[])||[];wt.delete(t),e.forEach(function(t){return t()})}function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(void 0===kt&&(kt=new WeakMap,wt=new WeakMap),function(t,e){wt.has(t)||wt.set(t,[]),wt.get(t).push(e)}(n,i),function(e){return e.childNodes.length>0&&t(e),kt.has(e)}(n))e(n);else{new MutationObserver(function(i){t(n),e(n)}).observe(n,{childList:!0,characterData:!0}),setImmediate(function(){t(n),e(n)})}}function i(t){t._destroy instanceof Function?t._destroy():t.remove()}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e=gi.has(t),n=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t);return!e&&n}function a(t){var e=t.isConnected;if(void 0!==e)return e;for(var n=t;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function s(t,e){for(var n=e;n&&n!==t&&!n.nextSibling;)n=n.parentNode;return n&&n!==t?n.nextSibling:null}function l(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=t;i;){if(i.nodeType===Node.ELEMENT_NODE){var o=i;e(o);var r=o.localName;if("link"===r&&"import"===o.getAttribute("rel")){var a=o.import;if(a instanceof Node&&!n.has(a)){n.add(a);for(var u=a.firstChild;u;u=u.nextSibling)l(u,e,n)}i=s(t,o);continue}if("template"===r){i=s(t,o);continue}var c=o.__CE_shadowRoot;if(c)for(var h=c.firstChild;h;h=h.nextSibling)l(h,e,n)}i=function(t,e){return e.firstChild?e.firstChild:s(t,e)}(t,i)}}function u(t,e,n){t[e]=n}var c={},h=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return function(t){return"-"+e+"-"+Q.hyphenate(t)}}(),d=function(t,e){return Object.keys(e).forEach(function(n){n in t.style?t.style[n]=e[n]:h(n)in t.style?t.style[h(n)]=e[n]:Q.warn("No such style property: "+n)}),t};d.clear=function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(/\s+/).reduce(function(t,e){return t.concat([Q.hyphenate(e),h(e)])},[]),n=[],i=t.style.length-1;i>=0;i--)!function(i){var o=t.style[i];(0===e.length||e.some(function(t){return 0===o.indexOf(t)}))&&n.push(o)}(i);n.forEach(function(e){return t.style[e]=""}),""===t.getAttribute("style")&&t.removeAttribute("style")};var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},k=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},w=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},E=window.HTMLElement,C=new(function(){function t(){p(this,t),this._selectedPlatform=null,this._ignorePlatformSelect=!1}return g(t,[{key:"select",value:function(t){"string"==typeof t&&(this._selectedPlatform=t.trim().toLowerCase())}},{key:"_getSelectedPlatform",value:function(){return this._ignorePlatformSelect?null:this._selectedPlatform}},{key:"_runOnActualPlatform",value:function(t){this._ignorePlatformSelect=!0;var e=t();return this._ignorePlatformSelect=!1,e}},{key:"isWebView",value:function(){if("loading"===document.readyState||"uninitialized"==document.readyState)throw new Error("isWebView() method is available after dom contents loaded.");return!!(window.cordova||window.phonegap||window.PhoneGap)}},{key:"isIPhone",value:function(){return/iPhone/i.test(navigator.userAgent)}},{key:"isIPhoneX",value:function(){return this.isIPhone()&&(375===window.screen.width&&812===window.screen.height||812===window.screen.width&&375===window.screen.height)}},{key:"isIPad",value:function(){return/iPad/i.test(navigator.userAgent)}},{key:"isIPod",value:function(){return/iPod/i.test(navigator.userAgent)}},{key:"isIOS",value:function(){return this._getSelectedPlatform()?"ios"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/iPhone|iPad|iPod/i.test(navigator.userAgent):/iOS/i.test(device.platform)}},{key:"isIOS7above",value:function(){if("object"===("undefined"==typeof device?"undefined":f(device))&&!/browser/i.test(device.platform))return/iOS/i.test(device.platform)&&parseInt(device.version.split(".")[0])>=7;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".");return parseInt(t.split(".")[0])>=7}return!1}},{key:"isIOSSafari",value:function(){var t=window.navigator,e=t.userAgent;return!(!this.isIOS()||-1===e.indexOf("Safari")||-1===e.indexOf("Version")||t.standalone)}},{key:"isWKWebView",value:function(){var t=/constructor/i.test(E);return!(!(this.isIOS()&&window.webkit&&window.webkit.messageHandlers&&window.indexedDB)||t)}},{key:"isUIWebView",value:function(){return!(!this.isIOS()||this.isIOSSafari()||this.isWKWebView())}},{key:"isAndroidPhone",value:function(){return/Android/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)}},{key:"isAndroidTablet",value:function(){return/Android/i.test(navigator.userAgent)&&!/Mobile/i.test(navigator.userAgent)}},{key:"isAndroid",value:function(){return this._getSelectedPlatform()?"android"===this._getSelectedPlatform():/Android/i.test("object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?navigator.userAgent:device.platform)}},{key:"isWP",value:function(){return this._getSelectedPlatform()?"wp"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/Windows Phone|IEMobile|WPDesktop/i.test(navigator.userAgent):/Win32NT|WinCE/i.test(device.platform)}},{key:"isBlackBerry",value:function(){return this._getSelectedPlatform()?"blackberry"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/BlackBerry|RIM Tablet OS|BB10/i.test(navigator.userAgent):/BlackBerry/i.test(device.platform)}},{key:"isOpera",value:function(){return this._getSelectedPlatform()?"opera"===this._getSelectedPlatform():!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0}},{key:"isFirefox",value:function(){return this._getSelectedPlatform()?"firefox"===this._getSelectedPlatform():"undefined"!=typeof InstallTrigger}},{key:"isSafari",value:function(){return this._getSelectedPlatform()?"safari"===this._getSelectedPlatform():Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window["safari"]||safari.pushNotification).toString()}},{key:"isChrome",value:function(){return this._getSelectedPlatform()?"chrome"===this._getSelectedPlatform():!(!window.chrome||window.opera||navigator.userAgent.indexOf(" OPR/")>=0||navigator.userAgent.indexOf(" Edge/")>=0)}},{key:"isIE",value:function(){return this._getSelectedPlatform()?"ie"===this._getSelectedPlatform():!!document.documentMode}},{key:"isEdge",value:function(){return this._getSelectedPlatform()?"edge"===this._getSelectedPlatform():navigator.userAgent.indexOf(" Edge/")>=0}},{key:"getMobileOS",value:function(){return this.isAndroid()?"android":this.isIOS()?"ios":this.isWP()?"wp":"other"}},{key:"getIOSDevice",value:function(){return this.isIPhone()?"iphone":this.isIPad()?"ipad":this.isIPod()?"ipod":"na"}}]),t}()),A=function(t){return Q.throw("In PageAttributeExpression: "+t)},S={_variables:{},defineVariable:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"!=typeof t?A("Variable name must be a string"):"string"!=typeof e&&"function"!=typeof e?A("Variable value must be a string or a function"):this._variables.hasOwnProperty(t)&&!n&&A('"'+t+'" is already defined'),this._variables[t]=e},getVariable:function(t){return this._variables.hasOwnProperty(t)?this._variables[t]:null},removeVariable:function(t){delete this._variables[t]},getAllVariables:function(){return this._variables},_parsePart:function(t){var e=void 0,n=!1,i=0,o=[];0===t.length&&A("Unable to parse empty string");for(var r=0;r<t.length;r++)if("$"===(e=t.charAt(r))&&"{"===t.charAt(r+1)){n&&A("Nested interpolation not supported");t.substring(i,r).length>0&&o.push(t.substring(i,r)),i=r,n=!0}else if("}"===e){n||A("} must be preceeded by ${");t.substring(i,r+1).length>0&&o.push(t.substring(i,r+1)),i=r+1,n=!1}return n&&A("Unterminated interpolation"),o.push(t.substring(i,t.length)),o},_replaceToken:function(t){var e=t.match(/^\${(.*?)}$/);if(!e)return t;var n=e[1].trim(),i=this.getVariable(n);if(null!==i){if("string"==typeof i)return i;var o=i();return"string"!=typeof o&&A("Must return a string"),o}A('Variable "'+n+'" does not exist')},_replaceTokens:function(t){return t.map(this._replaceToken.bind(this))},_parseExpression:function(t){return t.split(",").map(function(t){return t.trim()}).map(this._parsePart.bind(this)).map(this._replaceTokens.bind(this)).map(function(t){return t.join("")})},evaluate:function(t){return t?this._parseExpression(t):[]}};S.defineVariable("mobileOS",C.getMobileOS()),S.defineVariable("iOSDevice",C.getIOSDevice()),S.defineVariable("runtime",function(){return C.isWebView()?"cordova":"browser"});var P={};P.config={autoStatusBarFill:!0,animationsDisabled:!1,warningsDisabled:!1},P.nullElement=window.document.createElement("div"),P.isEnabledAutoStatusBarFill=function(){return!!P.config.autoStatusBarFill},P.normalizePageHTML=function(t){return(""+t).trim()},P.waitDOMContentLoaded=function(t){if("loading"===window.document.readyState||"uninitialized"==window.document.readyState){window.document.addEventListener("DOMContentLoaded",function e(){t(),window.document.removeEventListener("DOMContentLoaded",e)})}else setImmediate(t)},P.autoStatusBarFill=function(t){var e=function e(){P.shouldFillStatusBar()&&t(),document.removeEventListener("deviceready",e)};"object"===("undefined"==typeof device?"undefined":f(device))?document.addEventListener("deviceready",e):-1===["complete","interactive"].indexOf(document.readyState)?P.waitDOMContentLoaded(e):e()},P.shouldFillStatusBar=function(){return P.isEnabledAutoStatusBarFill()&&(C.isWebView()&&C.isIOS7above()&&!C.isIPhoneX()||document.body.querySelector(".ons-status-bar-mock.ios"))},P.templateStore={_storage:{},get:function(t){return P.templateStore._storage[t]||null},set:function(t,e){P.templateStore._storage[t]=e}},window.document.addEventListener("_templateloaded",function(t){"ons-template"===t.target.nodeName.toLowerCase()&&P.templateStore.set(t.templateId,t.template)},!1),P.waitDOMContentLoaded(function(){function t(t){for(var e=window.document.querySelectorAll(t),n=0;n<e.length;n++)P.templateStore.set(e[n].getAttribute("id"),e[n].textContent||e[n].content)}t('script[type="text/ons-template"]'),t('script[type="text/template"]'),t('script[type="text/ng-template"]'),t("template")}),P.getTemplateHTMLAsync=function(t){return new Promise(function(e,n){P.waitDOMContentLoaded(function(){var i=P.templateStore.get(t);if(i){if(i instanceof DocumentFragment)return e(i);var o="string"==typeof i?i:i[1];return e(P.normalizePageHTML(o))}var r=window.document.getElementById(t);if(r){var a=r.textContent||r.content;return e(a)}var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){var i=s.responseText;if(s.status>=400&&s.status<600)n(i);else{var o=Q.createFragment(i);Q.arrayFrom(o.querySelectorAll("script")).forEach(function(t){var e=document.createElement("script");e.type=t.type||"text/javascript",e.appendChild(document.createTextNode(t.text||t.textContent||t.innerHTML)),t.parentNode.replaceChild(e,t)}),P.templateStore.set(t,o),e(o)}},s.onerror=function(){Q.throw("Page template not found: "+t)},s.send(null)})})},P.getPageHTMLAsync=function(t){var e=S.evaluate(t);return function t(n){return"string"!=typeof n?Promise.reject("Must specify a page."):P.getTemplateHTMLAsync(n).catch(function(n){return 0===e.length?Promise.reject(n):t(e.shift())})}(e.shift())};var O=function(){function t(e){p(this,t),this._animators=e.animators,this._baseClass=e.baseClass,this._baseClassName=e.baseClassName||e.baseClass.name,this._animation=e.defaultAnimation||"default",this._animationOptions=e.defaultAnimationOptions||{},this._animators[this._animation]||Q.throw("No such animation: "+this._animation)}return g(t,[{key:"setAnimationOptions",value:function(t){this._animationOptions=t}},{key:"newAnimator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=null;if(t.animation instanceof this._baseClass)return t.animation;var i=null;if("string"==typeof t.animation&&(i=this._animators[t.animation]),!i&&e)n=e;else{i=i||this._animators[this._animation];var o=Q.extend({},this._animationOptions,t.animationOptions||{},P.config.animationsDisabled?{duration:0,delay:0}:{});"function"==typeof(n=new i(o))&&(n=new n(o))}return n instanceof this._baseClass||Q.throw('"animator" is not an instance of '+this._baseClassName),n}}],[{key:"parseAnimationOptionsString",value:function(t){try{if("string"==typeof t){var e=Q.animationOptionsParse(t);if("object"===(void 0===e?"undefined":f(e))&&null!==e)return e;console.error('"animation-options" attribute must be a JSON object string: '+t)}return{}}catch(e){return console.error('"animation-options" attribute must be a JSON object string: '+t),{}}}}]),t}(),x=!0,T={quiet:"material--flat",light:"material--flat",outline:"material--flat",cta:"","large--quiet":"material--flat large","large--cta":"large",noborder:"",tappable:""},L={};L.android=function(t){var e=t.tagName.toLowerCase();if(!Q.hasModifier(t,"material")){var n=(t.getAttribute("modifier")||"").trim().split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t});n.unshift("material"),t.setAttribute("modifier",n.join(" ").trim())}-1===["ons-alert-dialog-button","ons-toolbar-button","ons-back-button","ons-button","ons-list-item","ons-fab","ons-speed-dial","ons-speed-dial-item","ons-tab"].indexOf(e)||t.hasAttribute("ripple")||t.querySelector("ons-ripple")||("ons-list-item"===e?t.hasAttribute("tappable")&&(t.setAttribute("ripple",""),t.removeAttribute("tappable")):t.setAttribute("ripple",""))},L.ios=function(t){Q.removeModifier(t,"material")&&(Q.removeModifier(t,"material--flat")&&Q.addModifier(t,Q.removeModifier(t,"large")?"large--quiet":"quiet"),t.getAttribute("modifier")||t.removeAttribute("modifier")),t.hasAttribute("ripple")&&("ons-list-item"===t.tagName.toLowerCase()&&t.setAttribute("tappable",""),t.removeAttribute("ripple"))};var M={android:!0},D=function(t,e){if(x&&!t.hasAttribute("disable-auto-styling")){var n=C.getMobileOS();if(L.hasOwnProperty(n)&&(M.hasOwnProperty(n)||e))return n}return null},I=function(t,e,n){return D(e,n)?t.split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t}).join(" "):t},N={isEnabled:function(){return x},enable:function(){return x=!0},disable:function(){return x=!1},prepare:function(t,e){var n=D(t,e);n&&L[n](t)},mapModifier:I,getPlatform:D,restoreModifier:function(t){if("android"===D(t)){var e=t.getAttribute("modifier")||"",n=I(e,t);if(/(^|\s+)material($|\s+)/i.test(e)||(n="material "+n),n!==e)return t.setAttribute("modifier",n.trim()),!0}return!1}},B=function(){function t(){p(this,t)}return g(t,null,[{key:"diff",value:function(e,n){function i(e){var n={};return t.split(e).forEach(function(t){return n[t]=t}),n}e=i((""+e).trim()),n=i((""+n).trim());var o=Object.keys(e).reduce(function(t,e){return n[e]||t.push(e),t},[]);return{added:Object.keys(n).reduce(function(t,n){return e[n]||t.push(n),t},[]),removed:o}}},{key:"applyDiffToClassList",value:function(t,e,n){t.added.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.add(t)})}),t.removed.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.remove(t)})})}},{key:"applyDiffToElement",value:function(e,n,i){Object.keys(i).forEach(function(o){for(var r=!o||Q.match(n,o)?[n]:Array.prototype.filter.call(n.querySelectorAll(o),function(t){return!Q.findParent(t,n.tagName,function(t){return t===n})}),a=0;a<r.length;a++)t.applyDiffToClassList(e,r[a].classList,i[o])})}},{key:"onModifierChanged",value:function(e,n,i,o){t.applyDiffToElement(t.diff(e,n),i,o),N.restoreModifier(i)}},{key:"refresh",value:function(e,n){t.applyDiffToElement(t.diff("",e.getAttribute("modifier")||""),e,n)}},{key:"initModifier",value:function(e,n){var i=e.getAttribute("modifier");"string"==typeof i&&t.applyDiffToElement({removed:[],added:t.split(i)},e,n)}},{key:"split",value:function(t){return"string"!=typeof t?[]:t.trim().split(/ +/).filter(function(t){return""!==t})}},{key:"addModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier"));-1==i.indexOf(n)&&(i.push(n),e.setAttribute("modifier",i.join(" ")))}else e.setAttribute("modifier",n)}},{key:"removeModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier")),o=i.indexOf(n);-1!==o&&(i.splice(o,1),e.setAttribute("modifier",i.join(" ")))}}}]),t}(),j={_ready:!1,_domContentLoaded:!1,_onDOMContentLoaded:function(){j._domContentLoaded=!0,C.isWebView()?window.document.addEventListener("deviceready",function(){j._ready=!0},!1):j._ready=!0},addBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.addEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.addEventListener("backbutton",t,!1)})},removeBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.removeEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.removeEventListener("backbutton",t,!1)})}};window.addEventListener("DOMContentLoaded",function(){return j._onDOMContentLoaded()},!1);var H={_store:{},_genId:function(){var t=0;return function(){return t++}}(),set:function(t,e){t.dataset.deviceBackButtonHandlerId&&this.remove(t);var n=t.dataset.deviceBackButtonHandlerId=H._genId();this._store[n]=e},remove:function(t){t.dataset.deviceBackButtonHandlerId&&(delete this._store[t.dataset.deviceBackButtonHandlerId],delete t.dataset.deviceBackButtonHandlerId)},get:function(t){if(t.dataset.deviceBackButtonHandlerId){var e=t.dataset.deviceBackButtonHandlerId;if(!this._store[e])throw new Error;return this._store[e]}},has:function(t){if(!t.dataset)return!1;var e=t.dataset.deviceBackButtonHandlerId;return!!this._store[e]}},R=new(function(){function t(){p(this,t),this._isEnabled=!1,this._boundCallback=this._callback.bind(this)}return g(t,[{key:"enable",value:function(){this._isEnabled||(j.addBackButtonListener(this._boundCallback),this._isEnabled=!0)}},{key:"disable",value:function(){this._isEnabled&&(j.removeBackButtonListener(this._boundCallback),this._isEnabled=!1)}},{key:"fireDeviceBackButtonEvent",value:function(){var t=document.createEvent("Event");t.initEvent("backbutton",!0,!0),document.dispatchEvent(t)}},{key:"_callback",value:function(){this._dispatchDeviceBackButtonEvent()}},{key:"createHandler",value:function(t,e){if(!(t instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");if(!(e instanceof Function))throw new Error("callback must be an instance of Function");var n={_callback:e,_element:t,disable:function(){H.remove(t)},setListener:function(t){this._callback=t},enable:function(){H.set(t,this)},isEnabled:function(){return H.get(t)===this},destroy:function(){H.remove(t),this._callback=this._element=null}};return n.enable(),n}},{key:"_dispatchDeviceBackButtonEvent",value:function(){function t(e){return{_element:e,callParentHandler:function(){for(var e=this._element.parentNode;e;){if(i=H.get(e))return i._callback(t(e));e=e.parentNode}}}}var e=this._captureTree(),n=this._findHandlerLeafElement(e),i=H.get(n);i._callback(t(n))}},{key:"_captureTree",value:function(){function t(e){var n={element:e,children:Array.prototype.concat.apply([],function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}(e.children).map(function(e){if("none"===e.style.display||!1===e._isShown)return[];if(0===e.children.length&&!H.has(e))return[];var n=t(e);return 0!==n.children.length||H.has(n.element)?[n]:[]}))};if(!H.has(n.element))for(var i=0;i<n.children.length;i++){var o=n.children[i];if(H.has(o.element))return o}return n}return t(document.body)}},{key:"_findHandlerLeafElement",value:function(t){function e(t){return 0===t.children.length?t.element:1===t.children.length?e(t.children[0]):t.children.map(function(t){return t.element}).reduce(function(t,e){if(!t)return e;var n=parseInt(window.getComputedStyle(t,"").zIndex,10),i=parseInt(window.getComputedStyle(e,"").zIndex,10);if(!isNaN(n)&&!isNaN(i))return n>i?t:e;throw new Error("Capturing backbutton-handler is failure.")},null)}return e(t)}}]),t}());P.AnimatorFactory=O,P.ModifierUtil=B,P.dbbDispatcher=R;var F=function(t,e){return t.substr(0,e.length)===e},q=function(t,e){return t.substr(t.length-e.length,e.length)===e},z=function(t){return t.slice(1,-1)},V=function(t){return F(t,"{")&&q(t,"}")},W=function(t){return F(t,"[")&&q(t,"]")},U=function(t){return F(t,"'")&&q(t,"'")||F(t,'"')&&q(t,'"')},X=function(t,e,n){throw new Error("Unexpected token '"+t+"' at position "+(n.length-e.length-1)+" in string: '"+n+"'")},Y=function(t,e,n){return"true"===t||"false"===t?"true"===t:U(t)?z(t):isNaN(t)?V(t)?$(z(t)):W(t)?K(z(t)):void X(t,e,n):+t},G=function(t){var e=(t=t.trim()).length;if(":"===t[0]||","===t[0])e=1;else if("{"===t[0]||"["===t[0]){for(var n=t.charCodeAt(0),i=1,o=1;o<t.length;o++)if(t.charCodeAt(o)===n)i++;else if(t.charCodeAt(o)===n+2&&0==--i){e=o+1;break}}else if("'"===t[0]||'"'===t[0]){for(var r=1;r<t.length;r++)if(t[r]===t[0]){e=r+1;break}}else for(var a=1;a<t.length;a++)if(-1!==[" ",",",":"].indexOf(t[a])){e=a;break}return t.slice(0,e)},$=function(t){for(var e=t=t.trim(),n={},i=!0,o=void 0,r=void 0,a=void 0;t.length>0;)if(r=a,a=G(t),t=t.slice(a.length,t.length).trim(),":"===a&&(!i||!r||","===r)||","===a&&i||":"!==a&&","!==a&&r&&","!==r&&":"!==r)X(a,t,e);else if(":"===a&&i&&r){if(r=U(r)?z(r):r,!function(t){return/^[A-Z_$][A-Z0-9_$]*$/i.test(t)}(r))throw new Error("Invalid key token '"+r+"' at position 0 in string: '"+e+"'");o=r,i=!1}else","===a&&!i&&r&&(n[o]=Y(r,t,e),i=!0);return a&&(n[o]=Y(a,t,e)),n},K=function(t){for(var e=t=t.trim(),n=[],i=void 0,o=void 0;t.length>0;)i=o,o=G(t),t=t.slice(o.length,t.length).trim(),","!==o||i&&","!==i?","===o&&n.push(Y(i,t,e)):X(o,t,e);return o&&(","!==o?n.push(Y(o,t,e)):X(o,t,e)),n},Q={},J="[Onsen UI]";Q.globals={fabOffset:0,errorPrefix:J,supportsPassive:!1},C._runOnActualPlatform(function(){Q.globals.actualMobileOS=C.getMobileOS(),Q.globals.isUIWebView=C.isUIWebView(),Q.globals.isWKWebView=C.isWKWebView()});try{var Z=Object.defineProperty({},"passive",{get:function(){Q.globals.supportsPassive=!0}});window.addEventListener("testPassive",null,Z),window.removeEventListener("testPassive",null,Z)}catch(t){}Q.addEventListener=function(t,e,n,i,o){t.addEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.removeEventListener=function(t,e,n,i,o){t.removeEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.prepareQuery=function(t){return t instanceof Function?t:function(e){return Q.match(e,t)}},Q.match=function(t,e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector).call(t,e)},Q.findChild=function(t,e){for(var n=Q.prepareQuery(e),i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(o.nodeType===Node.ELEMENT_NODE&&n(o))return o}return null},Q.findParent=function(t,e,n){for(var i=Q.prepareQuery(e),o=t.parentNode;;){if(!o||o===document||o instanceof DocumentFragment||n&&n(o))return null;if(i(o))return o;o=o.parentNode}},Q.isAttached=function(t){return document.body.contains(t)},Q.hasAnyComponentAsParent=function(t){for(;t&&document.documentElement!==t;)if((t=t.parentNode)&&t.nodeName.toLowerCase().match(/(ons-navigator|ons-tabbar|ons-modal)/))return!0;return!1},Q.getAllChildNodes=function(t){var e;return(e=[t]).concat.apply(e,w(Array.from(t.children).map(function(t){return Q.getAllChildNodes(t)})))},Q.isPageControl=function(t){return t.nodeName.match(/^ons-(navigator|splitter|tabbar|page)$/i)},Q.propagateAction=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];i[e]instanceof Function?i[e]():Q.propagateAction(i,e)}},Q.camelize=function(t){return t.toLowerCase().replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})},Q.hyphenate=function(t){return t.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase()},Q.create=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.split("."),i=document.createElement(n.shift()||"div");return n.length&&(i.className=n.join(" ")),d(i,e),i},Q.createElement=function(t){var e=document.createElement("div");t instanceof DocumentFragment?e.appendChild(document.importNode(t,!0)):e.innerHTML=t.trim(),e.children.length>1&&Q.throw("HTML template must contain a single root element");var n=e.children[0];return e.children[0].remove(),n},Q.createFragment=function(t){var e=document.createElement("template");return e.innerHTML=t,document.importNode(e.content,!0)},Q.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++)if(n[o])for(var r=Object.keys(n[o]),a=0;a<r.length;a++){var s=r[a];t[s]=n[o][s]}return t},Q.arrayFrom=function(t){return Array.prototype.slice.apply(t)},Q.parseJSONObjectSafely=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=JSON.parse(""+t);if("object"===(void 0===n?"undefined":f(n))&&null!==n)return n}catch(t){return e}return e},Q.findFromPath=function(t){t=t.split(".");for(var e,n=window;e=t.shift();)n=n[e];return n},Q.getTopPage=function(t){return t&&("ons-page"===t.tagName.toLowerCase()?t:t.topPage)||null},Q.findToolbarPage=function(t){var e=Q.getTopPage(t);if(e){if(e._canAnimateToolbar())return e;for(var n=0;n<e._contentElement.children.length;n++){var i=Q.getTopPage(e._contentElement.children[n]);if(i&&!/ons-tabbar/i.test(e._contentElement.children[n].tagName))return Q.findToolbarPage(i)}}return null},Q.triggerElementEvent=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});return Object.keys(n).forEach(function(t){i[t]=n[t]}),t.dispatchEvent(i),i},Q.hasModifier=function(t,e){return!!t.hasAttribute("modifier")&&RegExp("(^|\\s+)"+e+"($|\\s+)","i").test(t.getAttribute("modifier"))},Q.addModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!Q.hasModifier(t,e)&&(t.setAttribute("modifier",((t.getAttribute("modifier")||"")+" "+e).trim()),!0)},Q.removeModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!t.getAttribute("modifier")||!Q.hasModifier(t,e))return!1;var i=t.getAttribute("modifier").split(/\s+/).filter(function(t){return t&&t!==e});return i.length?t.setAttribute("modifier",i.join(" ")):t.removeAttribute("modifier"),!0},Q.toggleModifier=function(){var t=arguments.length>2?arguments.length<=2?void 0:arguments[2]:{},e="boolean"==typeof t?t:t.force;("boolean"==typeof e?e:!Q.hasModifier.apply(Q,arguments))?Q.addModifier.apply(Q,arguments):Q.removeModifier.apply(Q,arguments)},Q.restoreClass=function(t,e,n){e.split(/\s+/).forEach(function(e){return""!==e&&!t.classList.contains(e)&&t.classList.add(e)}),t.hasAttribute("modifier")&&B.refresh(t,n)},Q.updateParentPosition=function(t){!t._parentUpdated&&t.parentElement&&("static"===window.getComputedStyle(t.parentElement).getPropertyValue("position")&&(t.parentElement.style.position="relative"),t._parentUpdated=!0)},Q.toggleAttribute=function(t,e,n){n?t.setAttribute(e,"boolean"==typeof n?"":n):t.removeAttribute(e)},Q.bindListeners=function(t,e){e.forEach(function(e){var n=e.replace(/^_[a-z]/,"_bound"+e[1].toUpperCase());t[n]=t[n]||t[e].bind(t)})},Q.each=function(t,e){return Object.keys(t).forEach(function(n){return e(n,t[n])})},Q.updateRipple=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0===e&&(e=t.hasAttribute("ripple"));var i=Q.findChild(t,"ons-ripple");if(e){if(!i){var o=document.createElement("ons-ripple");Object.keys(n).forEach(function(t){return o.setAttribute(t,n[t])}),t.insertBefore(o,t.firstChild)}}else i&&i.remove()},Q.animationOptionsParse=function(t){if(t=t.trim(),V(t))return $(z(t));if(W(t))return K(z(t));throw new Error("Provided string must be object or array like: "+t)},Q.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Q.defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},Q.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!P.config.warningsDisabled){var i;(i=console).warn.apply(i,[J].concat(e))}},Q.throw=function(t){throw new Error(J+" "+t)},Q.throwAbstract=function(){return Q.throw("Cannot instantiate abstract class")},Q.throwMember=function(){return Q.throw("Class member must be implemented")},Q.throwPageLoader=function(){return Q.throw("First parameter should be an instance of PageLoader")},Q.throwAnimator=function(t){return Q.throw('"Animator" param must inherit '+t+"Animator")};var tt=function(t){return t.cancelable&&t.preventDefault()};Q.iosPreventScroll=function(t){if("ios"===Q.globals.actualMobileOS){t.on("touchmove",tt),t.on("dragend",function e(n){t.off("touchmove",tt),t.off("dragend",e)})}},Q.iosPageScrollFix=function(t){"ios"===Q.globals.actualMobileOS&&(document.body.classList.toggle("ons-ios-scroll",t),Q.globals.isUIWebView&&!P.config.forceUIWebViewScrollFix||document.body.classList.toggle("ons-ios-scroll-fix",t))},Q.iosMaskScrollFix=function(t,e){if(Q.globals.isUIWebView){t[(e?"add":"remove")+"EventListener"]("touchmove",tt,!1)}},Q.isValidGesture=function(t){return void 0!==t.gesture&&(t.gesture.distance<=15||t.gesture.deltaTime<=100)},Q.checkMissingImport=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){c[t]||Q.throw("Ons"+t+" is required but was not imported (Custom Elements)")})};var et={};et.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},et.buildTransitionValue=function(t){t.property=t.property||"all",t.duration=t.duration||.4,t.timing=t.timing||"linear";return t.property.split(/ +/).map(function(e){return e+" "+t.duration+"s "+t.timing}).join(", ")},et.onceOnTransitionEnd=function(t,e){if(!t)return function(){};var n=function(n){t==n.target&&(n.stopPropagation(),i(),e())},i=function(){et._transitionEndEvents.forEach(function(e){t.removeEventListener(e,n,!1)})};return et._transitionEndEvents.forEach(function(e){t.addEventListener(e,n,!1)}),i},et._transitionEndEvents="ontransitionend"in window?["transitionend"]:"onwebkittransitionend"in window?["webkitTransitionEnd"]:"webkit"===et.vendorPrefix||"o"===et.vendorPrefix||"moz"===et.vendorPrefix||"ms"===et.vendorPrefix?[et.vendorPrefix+"TransitionEnd","transitionend"]:[],et._cssPropertyDict=function(){for(var t=window.getComputedStyle(document.documentElement,""),e={},n="A".charCodeAt(0),i="z".charCodeAt(0),o=0;o<t.length;o++){var r=t[o].replace(/^[-]+/,"").replace(/[-][a-z]/g,function(t){return t.substr(1).toUpperCase()}).replace(/^moz/,"Moz");n<=r.charCodeAt(0)&&i>=r.charCodeAt(0)&&"cssText"!==r&&"parentText"!==r&&(e[r]=!0)}return e}(),et.hasCssProperty=function(t){return t in et._cssPropertyDict},et.vendorPrefix=function(){var t=window.getComputedStyle(document.documentElement,"");return(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1]}(),et.forceLayoutAtOnce=function(t,e){this.batchImmediate(function(){t.forEach(function(t){t.offsetHeight}),e()})},et.batchImmediate=function(){var t=[];return function(e){0===t.length&&setImmediate(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(e)}}(),et.batchAnimationFrame=function(){var t=[],e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};return function(n){0===t.length&&e(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(n)}}(),et.transitionPropertyName=function(){if(et.hasCssProperty("transitionDuration"))return"transition";if(et.hasCssProperty(et.vendorPrefix+"TransitionDuration"))return et.vendorPrefix+"Transition";throw new Error("Invalid state")}();var nt=function t(e,n){if(!(this instanceof t))return new t(e,n);if(e instanceof HTMLElement)this.elements=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("First argument must be an array or an instance of HTMLElement.");this.elements=e}this.defaults=n,this.transitionQueue=[],this.lastStyleAttributeDict=[]};nt.prototype={transitionQueue:void 0,elements:void 0,defaults:void 0,play:function(t){return"function"==typeof t&&this.transitionQueue.push(function(e){t(),e()}),this.startAnimation(),this},default:function(t,e,n){function i(t,e,n){return void 0!==t.duration&&(e=t.duration),void 0!==t.timing&&(n=t.timing),{css:t.css||t,duration:e,timing:n}}return this.saveStyle().queue(i(t,0,this.defaults.timing)).wait(void 0===n?this.defaults.delay:n).queue(i(e,this.defaults.duration,this.defaults.timing)).restoreStyle()},queue:function(t,e){var n=this.transitionQueue;if(t&&e&&(e.css=t,t=new nt.Transition(e)),t instanceof Function||t instanceof nt.Transition||(t=new nt.Transition(t.css?t:{css:t})),t instanceof Function)n.push(t);else{if(!(t instanceof nt.Transition))throw new Error("Invalid arguments");n.push(t.build())}return this},wait:function(t){return t>0&&this.transitionQueue.push(function(e){setTimeout(e,1e3*t)}),this},saveStyle:function(){return this.transitionQueue.push(function(t){this.elements.forEach(function(t,e){for(var n=this.lastStyleAttributeDict[e]={},i=0;i<t.style.length;i++)n[t.style[i]]=t.style[t.style[i]]}.bind(this)),t()}.bind(this)),this},restoreStyle:function(t){var e=this;if((t=t||{}).transition&&!t.duration)throw new Error('"options.duration" is required when "options.transition" is enabled.');var n=et.transitionPropertyName;if(t.transition||t.duration&&t.duration>0){var i=t.transition||"all "+t.duration+"s "+(t.timing||"linear");this.transitionQueue.push(function(o){var r,a=this.elements,s=function(){a.forEach(function(t){t.style[n]=""})},l=et.onceOnTransitionEnd(a[0],function(){clearTimeout(r),s(),o()});r=setTimeout(function(){l(),s(),o()},1e3*t.duration*1.4),a.forEach(function(t,o){var r=e.lastStyleAttributeDict[o];if(!r)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[o]=void 0;for(var a,s=0,l=t.style.length;s<l;s++)a=t.style[s],void 0===r[a]&&(r[a]="");t.style[n]=i,Object.keys(r).forEach(function(e){e!==n&&(t.style[e]=r[e])}),t.style[n]=i})})}else this.transitionQueue.push(function(t){e.elements.forEach(function(t,i){t.style[n]="none";var o=e.lastStyleAttributeDict[i];if(!o)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[i]=void 0;for(var r=0;r<t.style.length;r++)t.style[r],void 0===o[t.style[r]]&&(o[t.style[r]]="");Object.keys(o).forEach(function(e){t.style[e]=o[e]})}),t()});return this},startAnimation:function(){return this._dequeueTransition(),this},_dequeueTransition:function(){var t=this.transitionQueue.shift();if(this._currentTransition)throw new Error("Current transition exists.");this._currentTransition=t;var e=this,n=!1;t&&t.call(this,function(){if(n)throw new Error("Invalid state: This callback is called twice.");n=!0,e._currentTransition=void 0,e._dequeueTransition()})}},nt.runAll=function(){for(var t=0;t<arguments.length;t++)arguments[t].play()},(nt.Transition=function(t){this.options=t||{},this.options.duration=this.options.duration||0,this.options.timing=this.options.timing||"linear",this.options.css=this.options.css||{},this.options.property=this.options.property||"all"}).prototype={build:function(){if(0===Object.keys(this.options.css).length)throw new Error("options.css is required.");var t=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(et.hasCssProperty(n))e[n]=i;else{var o=et.vendorPrefix+et.capitalize(n);et.hasCssProperty(o)?e[o]=i:(e[o]=i,e[n]=i)}}),e}(this.options.css);if(this.options.duration>0){var e=et.buildTransitionValue(this.options),n=this;return function(i){var o,r=this.elements,a=1e3*n.options.duration*1.4,s=et.onceOnTransitionEnd(r[0],function(){clearTimeout(o),i()});o=setTimeout(function(){s(),i()},a),r.forEach(function(n){n.style[et.transitionPropertyName]=e,Object.keys(t).forEach(function(e){n.style[e]=t[e]})})}}if(this.options.duration<=0)return function(e){var n=this.elements;n.forEach(function(e){e.style[et.transitionPropertyName]="",Object.keys(t).forEach(function(n){e.style[n]=t[n]})}),n.length>0?et.forceLayoutAtOnce(n,function(){et.batchAnimationFrame(e)}):et.batchAnimationFrame(e)}}};var it,ot,rt,at,st=function t(e,n){return new t.Instance(e,n||{})};st.defaults={behavior:{touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},st.DOCUMENT=document,st.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,st.HAS_TOUCHEVENTS="ontouchstart"in window,st.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),st.NO_MOUSEEVENTS=st.HAS_TOUCHEVENTS&&st.IS_MOBILE||st.HAS_POINTEREVENTS,st.CALCULATE_INTERVAL=25;var lt={},ut=st.DIRECTION_DOWN="down",ct=st.DIRECTION_LEFT="left",ht=st.DIRECTION_UP="up",dt=st.DIRECTION_RIGHT="right",ft=st.POINTER_MOUSE="mouse",pt=st.POINTER_TOUCH="touch",gt=st.POINTER_PEN="pen",mt=st.EVENT_START="start",_t=st.EVENT_MOVE="move",vt=st.EVENT_END="end",bt=st.EVENT_RELEASE="release",yt=st.EVENT_TOUCH="touch";st.READY=!1,st.plugins=st.plugins||{},st.gestures=st.gestures||{},ot=st.utils={extend:function(t,e,n){for(var i in e)!e.hasOwnProperty(i)||void 0!==t[i]&&n||(t[i]=e[i]);return t},on:function(t,e,n,i){Q.addEventListener(t,e,n,i,!0)},off:function(t,e,n,i){Q.removeEventListener(t,e,n,i,!0)},each:function(t,e,n){var i,o;if("forEach"in t)t.forEach(e,n);else if(void 0!==t.length){for(i=0,o=t.length;i<o;i++)if(!1===e.call(n,t[i],i,t))return}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return},inStr:function(t,e){return t.indexOf(e)>-1},inArray:function(t,e,n){if(n){for(var i=0,o=t.length;i<o;i++)if(Object.keys(e).every(function(n){return t[i][n]===e[n]}))return i;return-1}if(t.indexOf)return t.indexOf(e);for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1},toArray:function(t){return Array.prototype.slice.call(t,0)},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],n=[],i=[],o=[],r=Math.min,a=Math.max;return 1===t.length?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(ot.each(t,function(t){e.push(t.pageX),n.push(t.pageY),i.push(t.clientX),o.push(t.clientY)}),{pageX:(r.apply(Math,e)+a.apply(Math,e))/2,pageY:(r.apply(Math,n)+a.apply(Math,n))/2,clientX:(r.apply(Math,i)+a.apply(Math,i))/2,clientY:(r.apply(Math,o)+a.apply(Math,o))/2})},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(t,e){return Math.abs(t.clientX-e.clientX)>=Math.abs(t.clientY-e.clientY)?t.clientX-e.clientX>0?ct:dt:t.clientY-e.clientY>0?ht:ut},getDistance:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==ht||t==ut},setPrefixedCss:function(t,e,n,i){var o=["","Webkit","Moz","O","ms"];e=ot.toCamelCase(e);for(var r=0;r<o.length;r++){var a=e;if(o[r]&&(a=o[r]+a.slice(0,1).toUpperCase()+a.slice(1)),a in t.style){t.style[a]=(null===i||i)&&n||"";break}}},toggleBehavior:function(t,e,n){if(e&&t&&t.style){ot.each(e,function(e,i){ot.setPrefixedCss(t,i,e,n)});var i=n&&function(){return!1};"none"==e.userSelect&&(t.onselectstart=i),"none"==e.userDrag&&(t.ondragstart=i)}},toCamelCase:function(t){return t.replace(/[_-]([a-z])/g,function(t){return t[1].toUpperCase()})}},it=st.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.on(t,e,n,i),o&&o(e)})},off:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.off(t,e,n,i),o&&o(e)})},onTouch:function(t,e,n,i){var o=this,r=function(i){var r,a=i.type.toLowerCase(),s=st.HAS_POINTEREVENTS,l=ot.inStr(a,"mouse");l&&o.preventMouseEvents||(l&&e==mt&&0===i.button?(o.preventMouseEvents=!1,o.shouldDetect=!0):s&&e==mt?o.shouldDetect=1===i.buttons||at.matchType(pt,i):l||e!=mt||(o.preventMouseEvents=!0,o.shouldDetect=!0),s&&e!=vt&&at.updatePointer(e,i),o.shouldDetect&&(r=o.doDetect.call(o,i,e,t,n)),r==vt&&(o.preventMouseEvents=!1,o.shouldDetect=!1,at.reset()),s&&e==vt&&at.updatePointer(e,i))};return this.on(t,lt[e],r,i),r},doDetect:function(t,e,n,i){var o=this.getTouchList(t,e),r=o.length,a=e,s=o.trigger,l=r;e==mt?s=yt:e==vt&&(s=bt,l=o.length-(t.changedTouches?t.changedTouches.length:1)),l>0&&this.started&&(a=_t),this.started=!0;var u=this.collectEventData(n,a,o,t);return e!=vt&&i.call(rt,u),s&&(u.changedLength=l,u.eventType=s,i.call(rt,u),u.eventType=a,delete u.changedLength),a==vt&&(i.call(rt,u),this.started=!1),a},determineEventTypes:function(){var t;return t=st.HAS_POINTEREVENTS?window.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:st.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],lt[mt]=t[0],lt[_t]=t[1],lt[vt]=t[2],lt},getTouchList:function(t,e){if(st.HAS_POINTEREVENTS)return at.getTouchList();if(t.touches){if(e==_t)return t.touches;var n=[],i=[].concat(ot.toArray(t.touches),ot.toArray(t.changedTouches)),o=[];return ot.each(i,function(t){-1===ot.inArray(n,t.identifier)&&o.push(t),n.push(t.identifier)}),o}return t.identifier=1,[t]},collectEventData:function(t,e,n,i){var o=pt;return ot.inStr(i.type,"mouse")||at.matchType(ft,i)?o=ft:at.matchType(gt,i)&&(o=gt),{center:ot.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:e,pointerType:o,srcEvent:i,preventDefault:function(){var t=this.srcEvent;t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return rt.stopDetect()}}}},at=st.PointerEvent={pointers:{},getTouchList:function(){var t=[];return ot.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,e){t==vt||t!=vt&&1!==e.buttons?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e)},matchType:function(t,e){if(!e.pointerType)return!1;var n=e.pointerType,i={};return i[ft]=n===(e.MSPOINTER_TYPE_MOUSE||ft),i[pt]=n===(e.MSPOINTER_TYPE_TOUCH||pt),i[gt]=n===(e.MSPOINTER_TYPE_PEN||gt),i[t]},reset:function(){this.pointers={}}},rt=st.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:ot.extend({},e),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst,n=e.options;return ot.each(this.gestures,function(i){!this.stopped&&e.enabled&&n[i.name]&&i.handler.call(i,t,e)},this),this.current&&(this.current.lastEvent=t),t.eventType==vt&&this.stopDetect(),t}},stopDetect:function(){this.previous=ot.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(t,e,n,i,o){var r=this.current,a=!1,s=r.lastCalcEvent,l=r.lastCalcData;s&&t.timeStamp-s.timeStamp>st.CALCULATE_INTERVAL&&(e=s.center,n=t.timeStamp-s.timeStamp,i=t.center.clientX-s.center.clientX,o=t.center.clientY-s.center.clientY,a=!0),t.eventType!=yt&&t.eventType!=bt||(r.futureCalcEvent=t),r.lastCalcEvent&&!a||(l.velocity=ot.getVelocity(n,i,o),l.angle=ot.getAngle(e,t.center),l.direction=ot.getDirection(e,t.center),r.lastCalcEvent=r.futureCalcEvent||t,r.futureCalcEvent=t),t.velocityX=l.velocity.x,t.velocityY=l.velocity.y,t.interimAngle=l.angle,t.interimDirection=l.direction},extendEventData:function(t){var e=this.current,n=e.startEvent,i=e.lastEvent||n;t.eventType!=yt&&t.eventType!=bt||(n.touches=[],ot.each(t.touches,function(t){n.touches.push({clientX:t.clientX,clientY:t.clientY})}));var o=t.timeStamp-n.timeStamp,r=t.center.clientX-n.center.clientX,a=t.center.clientY-n.center.clientY;return this.getCalculatedData(t,i.center,o,r,a),ot.extend(t,{startEvent:n,deltaTime:o,deltaX:r,deltaY:a,distance:ot.getDistance(n.center,t.center),angle:ot.getAngle(n.center,t.center),direction:ot.getDirection(n.center,t.center),scale:ot.getScale(n.touches,t.touches),rotation:ot.getRotation(n.touches,t.touches)}),t},register:function(t){var e=t.defaults||{};return void 0===e[t.name]&&(e[t.name]=!0),ot.extend(st.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},st.Instance=function(t,e){var n=this,i=e&&e.passive?{passive:!0}:void 0;!function(t){st.READY||(it.determineEventTypes(),ot.each(st.gestures,function(t){rt.register(t)}),it.onTouch(st.DOCUMENT,_t,rt.detect,t),it.onTouch(st.DOCUMENT,vt,rt.detect,t),st.READY=!0)}(i),this.element=t,this.enabled=!0,ot.each(e,function(t,n){delete e[n],e[ot.toCamelCase(n)]=t}),this.options=ot.extend(ot.extend({},st.defaults),e||{}),this.options.listenerOptions=i,this.options.behavior&&ot.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=it.onTouch(t,mt,function(t){n.enabled&&t.eventType==mt?rt.startDetect(n,t):t.eventType==yt&&rt.detect(t)},i),this.eventHandlers=[]},st.Instance.prototype={on:function(t,e,n){var i=this;return it.on(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){i.eventHandlers.push({gesture:t,handler:e})}),i},off:function(t,e,n){var i=this;return it.off(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){var n=ot.inArray(i.eventHandlers,{gesture:t,handler:e},!0);n>=0&&i.eventHandlers.splice(n,1)}),i},trigger:function(t,e){e||(e={});var n=st.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var i=this.element;return ot.hasParent(e.target,i)&&(i=e.target),i.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,e;for(ot.toggleBehavior(this.element,this.options.behavior,!1),t=-1;e=this.eventHandlers[++t];)ot.off(this.element,e.gesture,e.handler);return this.eventHandlers=[],it.off(this.element,lt[mt],this.eventStartHandler),null}},function(t){var e=!1;st.gestures.Drag={name:t,index:50,handler:function(n,i){var o=rt.current;if(!(i.options.dragMaxTouches>0&&n.touches.length>i.options.dragMaxTouches))switch(n.eventType){case mt:e=!1;break;case _t:if(n.distance<i.options.dragMinDistance&&o.name!=t)return;var r=o.startEvent.center;if(o.name!=t&&(o.name=t,i.options.dragDistanceCorrection&&n.distance>0)){var a=Math.abs(i.options.dragMinDistance/n.distance);r.pageX+=n.deltaX*a,r.pageY+=n.deltaY*a,r.clientX+=n.deltaX*a,r.clientY+=n.deltaY*a,n=rt.extendEventData(n)}(o.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=n.distance)&&(n.dragLockToAxis=!0);var s=o.lastEvent.direction;n.dragLockToAxis&&s!==n.direction&&(ot.isVertical(s)?n.direction=n.deltaY<0?ht:ut:n.direction=n.deltaX<0?ct:dt),e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),i.trigger(t+n.direction,n);var l=ot.isVertical(n.direction);(i.options.dragBlockVertical&&l||i.options.dragBlockHorizontal&&!l)&&n.preventDefault();break;case bt:e&&n.changedLength<=i.options.dragMaxTouches&&(i.trigger(t+"end",n),e=!1);break;case vt:e=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),st.gestures.Gesture={name:"gesture",index:1337,handler:function(t,e){e.trigger(this.name,t)}},function(t){var e;st.gestures.Hold={name:t,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(n,i){var o=i.options,r=rt.current;switch(n.eventType){case mt:clearTimeout(e),r.name=t,e=setTimeout(function(){r&&r.name==t&&i.trigger(t,n)},o.holdTimeout);break;case _t:n.distance>o.holdThreshold&&clearTimeout(e);break;case bt:clearTimeout(e)}}}}("hold"),st.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==bt&&e.trigger(this.name,t)}},st.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(t,e){if(t.eventType==bt){var n=t.touches.length,i=e.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(t.velocityX>i.swipeVelocityX||t.velocityY>i.swipeVelocityY)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},function(t){var e=!1;st.gestures.Tap={name:t,index:100,handler:function(n,i){var o,r,a=i.options,s=rt.current,l=rt.previous;switch(n.eventType){case mt:e=!1;break;case _t:e=e||n.distance>a.tapMaxDistance;break;case vt:!ot.inStr(n.srcEvent.type,"cancel")&&n.deltaTime<a.tapMaxTime&&!e&&(o=l&&l.lastEvent&&n.timeStamp-l.lastEvent.timeStamp,r=!1,l&&l.name==t&&o&&o<a.doubleTapInterval&&n.distance<a.doubleTapDistance&&(i.trigger("doubletap",n),r=!0),r&&!a.tapAlways||(s.name=t,i.trigger(s.name,n)))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),st.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(t,e){e.options.preventMouse&&t.pointerType==ft?t.stopDetect():(e.options.preventDefault&&t.preventDefault(),t.eventType==yt&&e.trigger("touch",t))}},function(t){var e=!1;st.gestures.Transform={name:t,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(n,i){switch(n.eventType){case mt:e=!1;break;case _t:if(n.touches.length<2)return;var o=Math.abs(1-n.scale),r=Math.abs(n.rotation);if(o<i.options.transformMinScale&&r<i.options.transformMinRotation)return;rt.current.name=t,e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),r>i.options.transformMinRotation&&i.trigger("rotate",n),o>i.options.transformMinScale&&(i.trigger("pinch",n),i.trigger("pinch"+(n.scale<1?"in":"out"),n));break;case bt:e&&n.changedLength<2&&(i.trigger(t+"end",n),e=!1)}}}}("transform");var kt=void 0,wt=void 0,Et=new(function(){function t(){p(this,t),this.queue=[]}return g(t,[{key:"add",value:function(t,e){var n=this;this.queue.push(t),1===this.queue.length&&setImmediate(this.queue[0]),e.then(function(){n.queue.shift(),n.queue.length>0&&setTimeout(n.queue[0],1e3/30)})}}]),t}()),Ct=function(t,e){["id","class","animation"].forEach(function(n){return e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}),e.modifier&&Q.addModifier(t,e.modifier)},At=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=_({},e),"string"==typeof t?e.message=t:e=t,e&&(e.message||e.messageHTML)||Q.throw("Notifications must contain a message"),(e.hasOwnProperty("buttonLabels")||e.hasOwnProperty("buttonLabel"))&&(e.buttonLabels=e.buttonLabels||e.buttonLabel,Array.isArray(e.buttonLabels)||(e.buttonLabels=[e.buttonLabels||""])),Q.extend({compile:function(t){return t},callback:function(t){return t},animation:"default",cancelable:!1,primaryButtonIndex:(e.buttonLabels||n.buttonLabels||[]).length-1},n,e)},St={};St._createAlertDialog=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new Promise(function(t){var i=At.apply(void 0,e);Q.checkMissingImport("AlertDialog","AlertDialogButton");var o="";i.isPrompt&&(o='\n      <input\n        class="text-input text-input--underbar"\n        type="'+(i.inputType||"text")+'"\n        placeholder="'+(i.placeholder||"")+'"\n        value="'+(i.defaultValue||"")+'"\n        style="width: 100%; margin-top: 10px;"\n      />\n    ');var r="";i.buttonLabels.forEach(function(t,e){r+='\n      <ons-alert-dialog-button\n        class="\n          '+(e===i.primaryButtonIndex?" alert-dialog-button--primal":"")+"\n          "+(i.buttonLabels.length<=2?" alert-dialog-button--rowfooter":"")+'\n        "\n        style="position: relative;">\n        '+t+"\n      </ons-alert-dialog-button>\n    "});var a={},s=function(){a.dialog.onDialogCancel&&a.dialog.removeEventListener("dialog-cancel",a.dialog.onDialogCancel),Object.keys(a).forEach(function(t){return delete a[t]}),a=null,i.destroy instanceof Function&&i.destroy()};a.dialog=document.createElement("ons-alert-dialog"),a.dialog.innerHTML='\n    <div class="alert-dialog-mask"\n      style="\n        '+(i.maskColor?"background-color: "+i.maskColor:"")+'\n      "></div>\n    <div class="alert-dialog">\n      <div class="alert-dialog-container">\n        <div class="alert-dialog-title">\n          '+(i.title||"")+'\n        </div>\n        <div class="alert-dialog-content">\n          '+(i.message||i.messageHTML)+"\n          "+o+'\n        </div>\n        <div class="\n          alert-dialog-footer\n          '+(i.buttonLabels.length<=2?" alert-dialog-footer--rowfooter":"")+'\n        ">\n          '+r+"\n        </div>\n      </div>\n    </div>\n  ",n(a.dialog),Ct(a.dialog,i),i.isPrompt&&i.submitOnEnter&&(a.input=a.dialog.querySelector(".text-input"),a.input.onkeypress=function(e){13===e.keyCode&&a.dialog.hide().then(function(){if(a){var e=a.input.value;s(),i.callback(e),t(e)}})}),a.footer=a.dialog.querySelector(".alert-dialog-footer"),Q.arrayFrom(a.dialog.querySelectorAll(".alert-dialog-button")).forEach(function(e,n){e.onclick=function(){a.dialog.hide().then(function(){if(a){var e=n;i.isPrompt&&(e=n===i.primaryButtonIndex?a.input.value:null),a.dialog.remove(),s(),i.callback(e),t(e)}})},a.footer.appendChild(e)}),i.cancelable&&(a.dialog.cancelable=!0,a.dialog.onDialogCancel=function(){setImmediate(function(){a.dialog.remove(),s()});var e=i.isPrompt?null:-1;i.callback(e),t(e)},a.dialog.addEventListener("dialog-cancel",a.dialog.onDialogCancel,!1)),document.body.appendChild(a.dialog),i.compile(a.dialog),setImmediate(function(){a.dialog.show().then(function(){if(a.input&&i.isPrompt&&i.autofocus){var t=a.input.value.length;a.input.focus(),a.input.setSelectionRange(t,t)}})})})},St.alert=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert"})},St.confirm=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["Cancel","OK"],title:"Confirm"})},St.prompt=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert",isPrompt:!0,autofocus:!0,submitOnEnter:!0})},St.toast=function(t,e){var n=new Promise(function(i){Q.checkMissingImport("Toast"),e=At(t,e,{timeout:0,force:!1});var o=Q.createElement("\n      <ons-toast>\n        "+e.message+"\n        "+(e.buttonLabels?"<button>"+e.buttonLabels[0]+"</button>":"")+"\n      </ons-toast>\n    ");Ct(o,e);var r=function(t){o&&o.hide().then(function(){o&&(o.remove(),o=null,e.callback(t),i(t))})};e.buttonLabels&&(Q.findChild(o._toast,"button").onclick=function(){return r(0)}),document.body.appendChild(o),e.compile(o);var a=function(){o.parentElement&&o.show(e).then(function(){e.timeout&&setTimeout(function(){return r(-1)},e.timeout)})};setImmediate(function(){return e.force?a():Et.add(a,n)})});return n};var Pt=function(){};Pt.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},once:function(t,e){var n=this;this.on(t,function i(){return n.off(t,i),e.apply(null,arguments)})},off:function(t,e){this._events=this._events||{},t in this._events!=!1&&(this._events[t]=this._events[t].filter(function(t){return!!e&&e!==t}))},emit:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},Pt.mixin=function(t){for(var e=["on","once","off","emit"],n=0;n<e.length;n++)"function"==typeof t?t.prototype[e[n]]=Pt.prototype[e[n]]:t[e[n]]=Pt.prototype[e[n]]},window.MicroEvent=Pt;var Ot=function(){var t={_isPortrait:!1,isPortrait:function(){return this._isPortrait()},isLandscape:function(){return!this.isPortrait()},_init:function(){return document.addEventListener("DOMContentLoaded",this._onDOMContentLoaded.bind(this),!1),"orientation"in window?window.addEventListener("orientationchange",this._onOrientationChange.bind(this),!1):window.addEventListener("resize",this._onResize.bind(this),!1),this._isPortrait=function(){return window.innerHeight>window.innerWidth},this},_onDOMContentLoaded:function(){this._installIsPortraitImplementation(),this.emit("change",{isPortrait:this.isPortrait()})},_installIsPortraitImplementation:function(){var t=window.innerWidth<window.innerHeight;"orientation"in window?window.orientation%180==0?this._isPortrait=function(){return 0===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return 90===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return window.innerHeight>window.innerWidth}},_onOrientationChange:function(){var t=this,e=this._isPortrait(),n=0,i=setInterval(function(){n++;var o=window.innerWidth,r=window.innerHeight;e&&o<=r||!e&&o>=r?(t.emit("change",{isPortrait:e}),clearInterval(i)):50===n&&(t.emit("change",{isPortrait:e}),clearInterval(i))},20)},_onResize:function(){this.emit("change",{isPortrait:this.isPortrait()})}};return Pt.mixin(t),t}()._init(),xt={add:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.addModifier(t,e)})},remove:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.removeModifier(t,e)})},contains:Q.hasModifier,toggle:Q.toggleModifier},Tt=new Pt;Tt._visible=!1;var Lt=function(){Tt._visible=!0,Tt.emit("show")},Mt=function(){Tt._visible=!1,Tt.emit("hide")},Dt=function(){Q.warn("ons-keyboard: Cordova Keyboard plugin is not present.")};document.addEventListener("deviceready",function(){("undefined"!=typeof Keyboard?(Keyboard.onshow=Lt,Keyboard.onhide=Mt,Tt.emit("init",{visible:Keyboard.isVisible}),!0):void 0!==cordova.plugins&&void 0!==cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",Lt),window.addEventListener("native.keyboardhide",Mt),Tt.emit("init",{visible:cordova.plugins.Keyboard.isVisible}),!0))||((document.querySelector("[ons-keyboard-active]")||document.querySelector("[ons-keyboard-inactive]"))&&Dt(),Tt.on=Dt)});var It=function(){var t=0;return function(){return t++}}(),Nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this._lockList=[],this._waitList=[],this._log=e.log||function(){}}return g(t,[{key:"lock",value:function(){var t=this,e=function e(){t._unlock(e)};return e.id=It(),this._lockList.push(e),this._log("lock: "+e.id),e}},{key:"_unlock",value:function(t){var e=this._lockList.indexOf(t);if(-1===e)throw new Error("This function is not registered in the lock list.");this._lockList.splice(e,1),this._log("unlock: "+t.id),this._tryToFreeWaitList()}},{key:"_tryToFreeWaitList",value:function(){for(;!this.isLocked()&&this._waitList.length>0;)this._waitList.shift()()}},{key:"waitUnlock",value:function(t){if(!(t instanceof Function))throw new Error("The callback param must be a function.");this.isLocked()?this._waitList.push(t):t()}},{key:"isLocked",value:function(){return this._lockList.length>0}}]),t}(),Bt=function(){function t(e,n){p(this,t),this._loader=e instanceof Function?e:function(t,e){var n=t.page,i=t.parent;t.params,P.getPageHTMLAsync(n).then(function(t){var n=Q.createElement(t);i.appendChild(n),e(n)})},this._unloader=n instanceof Function?n:i}return g(t,[{key:"load",value:function(t,e){var n=t.page,i=t.parent,o=t.params,r=void 0===o?{}:o;this._loader({page:n,parent:i,params:r},function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");e(t)})}},{key:"unload",value:function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");this._unloader(t)}},{key:"internalLoader",set:function(t){if(!(t instanceof Function))throw Error("First parameter must be an instance of Function");this._loader=t},get:function(){return this._loader}}]),t}(),jt=new Bt,Ht=new Bt(function(t,e){var n=t.page,i=t.parent,o=(t.params,Q.createElement(n.trim()));i.appendChild(o),e(o)},i),Rt={animit:nt,defaultPageLoader:jt,elements:c,GestureDetector:st,modifier:xt,notification:St,orientation:Ot,pageAttributeExpression:S,PageLoader:Bt,platform:C,softwareKeyboard:Tt,_autoStyle:N,_internal:P,_readyLock:new Nt,_util:Q};Rt.platform.select((window.location.search.match(/platform=([\w-]+)/)||[])[1]),function(){var t=Rt._readyLock.lock();window.addEventListener("DOMContentLoaded",function(){Rt.isWebView()?window.document.addEventListener("deviceready",t,!1):t()},!1)}();var Ft=function(t){return Q.throw("This method must be called "+(t?"after":"before")+" ons.isReady() is true")};Rt.isReady=function(){return!Rt._readyLock.isLocked()},Rt.isWebView=Rt.platform.isWebView,Rt.ready=function(t){Rt.isReady()?t():Rt._readyLock.waitUnlock(t)},Rt.setDefaultDeviceBackButtonListener=function(t){Rt.isReady()||Ft(!0),Rt._defaultDeviceBackButtonHandler.setListener(t)},Rt.disableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.disable()},Rt.enableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.enable()},Rt.fireDeviceBackButtonEvent=function(){P.dbbDispatcher.fireDeviceBackButtonEvent()},Rt.enableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!0},Rt.disableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!1},Rt.mockStatusBar=function(){Rt.isReady()&&Ft(!1);var t=function(){if(!document.body.children[0]||!document.body.children[0].classList.contains("ons-status-bar-mock")){var t=C.isAndroid(),e=function(t){return'<i class="'+t.split("-")[0]+" "+t+'"></i>'},n=t?e("zmdi-twitter")+" "+e("zmdi-google-play"):"No SIM "+e("fa-wifi"),i=t?"":"12:28 PM",o=t?e("zmdi-network")+" "+e("zmdi-wifi")+" "+e("zmdi-battery")+" 12:28 PM":"80% "+e("fa-battery-three-quarters");document.body.insertBefore(Q.createElement('<div class="ons-status-bar-mock '+(t?"android":"ios")+'"><div>'+n+"</div><div>"+i+"</div><div>"+o+"</div></div>"),document.body.firstChild)}};document.body?t():P.waitDOMContentLoaded(t)},Rt.disableAnimations=function(){P.config.animationsDisabled=!0},Rt.enableAnimations=function(){P.config.animationsDisabled=!1},Rt._disableWarnings=function(){P.config.warningsDisabled=!0},Rt._enableWarnings=function(){P.config.warningsDisabled=!1},Rt.disableAutoStyling=N.disable,Rt.enableAutoStyling=N.enable,Rt.disableIconAutoPrefix=function(){Q.checkMissingImport("Icon"),c.Icon.setAutoPrefix(!1)},Rt.forceUIWebViewScrollFix=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];P.config.forceUIWebViewScrollFix=t},Rt.forcePlatformStyling=function(t){Rt.enableAutoStyling(),Rt.platform.select(t||"ios"),Rt._util.arrayFrom(document.querySelectorAll("*")).forEach(function(t){"ons-if"===t.tagName.toLowerCase()?t._platformUpdate():t.tagName.match(/^ons-/i)&&(N.prepare(t,!0),"ons-tabbar"===t.tagName.toLowerCase()&&t._updatePosition())})},Rt.preload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all((t instanceof Array?t:[t]).map(function(t){return"string"!=typeof t&&Q.throw("Expected string arguments but got "+(void 0===t?"undefined":f(t))),P.getTemplateHTMLAsync(t)}))},Rt.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(t){var n=Rt._util.createElement(t);if(n.remove(),e.append){(e.append instanceof HTMLElement?e.append:document.body).insertBefore(n,e.insertBefore||null),e.link instanceof Function&&e.link(n)}return n};return"<"===(t=t.trim()).charAt(0)?n(t):P.getPageHTMLAsync(t).then(n)},Rt.createPopover=Rt.createDialog=Rt.createAlertDialog=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rt.createElement(t,_({append:!0},e))},Rt.openActionSheet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e){Q.checkMissingImport("ActionSheet"),function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Function";return Q.throw('"options.'+t+'" must be an instance of '+e)},n=function(e){return Object.hasOwnProperty.call(t,e)},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function;return t[e]instanceof n},o="buttons",r="callback",a="compile",s="destroy";(!n(o)||!i(o,Array))&&e(o,"Array"),n(r)&&!i(r)&&e(r),n(a)&&!i(a)&&e(a),n(s)&&!i(s)&&e(s)}(t);var n=Q.createElement("\n    <ons-action-sheet\n      "+(t.title?'title="'+t.title+'"':"")+"\n      "+(t.cancelable?"cancelable":"")+"\n      "+(t.modifier?'modifier="'+t.modifier+'"':"")+"\n      "+(t.maskColor?'mask-color="'+t.maskColor+'"':"")+"\n      "+(t.id?'id="'+t.id+'"':"")+"\n      "+(t.class?'class="'+t.class+'"':"")+'\n    >\n      <div class="action-sheet"></div>\n    </ons-action-sheet>\n  '),i=function i(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n&&(t.destroy&&t.destroy(n),n.removeEventListener("dialog-cancel",i,!1),n.remove(),n=null,t.callback&&t.callback(r),e(r))};n.addEventListener("dialog-cancel",i,!1);var o=document.createDocumentFragment();t.buttons.forEach(function(e,r){var a="string"==typeof e?{label:e}:_({},e);t.destructive===r&&(a.modifier=(a.modifier||"")+" destructive");var s=Q.createElement("\n      <ons-action-sheet-button\n        "+(a.icon?'icon="'+a.icon+'"':"")+"\n        "+(a.modifier?'modifier="'+a.modifier+'"':"")+"\n      >\n        "+a.label+"\n      </ons-action-sheet-button>\n    ");s.onclick=function(t){return n.hide().then(function(){return i(t,r)})},o.appendChild(s)}),Q.findChild(n,".action-sheet").appendChild(o),document.body.appendChild(n),t.compile&&t.compile(el.dialog),setImmediate(function(){return n.show({animation:t.animation,animationOptions:t.animationOptions})})})},Rt.resolveLoadingPlaceholder=function(t,e){var n=Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]"));0===n.length&&Q.throw("No ons-loading-placeholder exists"),n.filter(function(t){return!t.getAttribute("page")}).forEach(function(n){n.setAttribute("ons-loading-placeholder",t),Rt._resolveLoadingPlaceholder(n,t,e)})},Rt._setupLoadingPlaceHolders=function(){Rt.ready(function(){Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]")).forEach(function(t){var e=t.getAttribute("ons-loading-placeholder");"string"==typeof e&&Rt._resolveLoadingPlaceholder(t,e)})})},Rt._resolveLoadingPlaceholder=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return e()};e&&Rt.createElement(e).then(function(e){e.style.display="none",t.appendChild(e),n(e,function(){for(;t.firstChild&&t.firstChild!==e;)t.removeChild(t.firstChild);e.style.display=""})}).catch(function(t){return Promise.reject("Unabled to resolve placeholder: "+t)})};var qt="currentScript"in document?function(){return document.currentScript}:function(){return document.scripts[document.scripts.length-1]};Rt.getScriptPage=function(){return qt()&&/ons-page/i.test(qt().parentElement.tagName)&&qt().parentElement||null};var zt=o(function(t){!function(){function e(t,n){var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=0,s=r.length;a<s;a++)this[r[a]]=function(t,e){return function(){return t.apply(e,arguments)}}(this[r[a]],this);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(t){o(t)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!n,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=o&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0,l=["email","number","password","search","tel","text","url"];e.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},e.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},e.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},e.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type&&"email"!==t.type&&"number"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},e.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},e.prototype.isTextField=function(t){return"textarea"===t.tagName.toLowerCase()||-1!==l.indexOf(t.type)},e.prototype.onTouchStart=function(t){var e,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],e.isContentEditable)return!0;if(o){if(e===document.activeElement&&this.isTextField(e))return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1&&t.preventDefault(),!0},e.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(t){var e,n,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(u=t.changedTouches[0],(c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=c.tagName.toLowerCase())){if(e=this.findControl(c)){if(this.focus(c),i)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-n>100||o&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),r&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return!(!o||r||!(l=c.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},e.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},e.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(t){var e,n,o;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},e.attach=function(t,n){return new e(t,n)},t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()}).FastClick;window.customElements&&(window.customElements.forcePolyfill=!0);var Vt=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Wt=o(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),Ut=(Wt.version,function(t){return"object"===(void 0===t?"undefined":f(t))?null!==t:"function"==typeof t}),Xt=function(t){if(!Ut(t))throw TypeError(t+" is not an object!");return t},Yt=function(t){try{return!!t()}catch(t){return!0}},Gt=!Yt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),$t=Vt.document,Kt=Ut($t)&&Ut($t.createElement),Qt=function(t){return Kt?$t.createElement(t):{}},Jt=!Gt&&!Yt(function(){return 7!=Object.defineProperty(Qt("div"),"a",{get:function(){return 7}}).a}),Zt=function(t,e){if(!Ut(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Ut(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},te=Object.defineProperty,ee={f:Gt?Object.defineProperty:function(t,e,n){if(Xt(t),e=Zt(e,!0),Xt(n),Jt)try{return te(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},ne=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ie=Gt?function(t,e,n){return ee.f(t,e,ne(1,n))}:function(t,e,n){return t[e]=n,t},oe={}.hasOwnProperty,re=function(t,e){return oe.call(t,e)},ae=0,se=Math.random(),le=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ae+se).toString(36))},ue=o(function(t){var e=le("src"),n=Function.toString,i=(""+n).split("toString");Wt.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,o,r){var a="function"==typeof o;a&&(re(o,"name")||ie(o,"name",n)),t[n]!==o&&(a&&(re(o,e)||ie(o,e,t[n]?""+t[n]:i.join(String(n)))),t===Vt?t[n]=o:r?t[n]?t[n]=o:ie(t,n,o):(delete t[n],ie(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),ce=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},he=function(t,e,n){if(ce(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},de=function t(e,n,i){var o,r,a,s,l=e&t.F,u=e&t.G,c=e&t.P,h=e&t.B,d=u?Vt:e&t.S?Vt[n]||(Vt[n]={}):(Vt[n]||{}).prototype,f=u?Wt:Wt[n]||(Wt[n]={}),p=f.prototype||(f.prototype={});u&&(i=n);for(o in i)a=((r=!l&&d&&void 0!==d[o])?d:i)[o],s=h&&r?he(a,Vt):c&&"function"==typeof a?he(Function.call,a):a,d&&ue(d,o,a,e&t.U),f[o]!=a&&ie(f,o,s),c&&p[o]!=a&&(p[o]=a)};Vt.core=Wt,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128;var fe=de,pe={f:{}.propertyIsEnumerable},ge={}.toString,me=function(t){return ge.call(t).slice(8,-1)},_e=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==me(t)?t.split(""):Object(t)},ve=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},be=function(t){return _e(ve(t))},ye=Object.getOwnPropertyDescriptor,ke={f:Gt?ye:function(t,e){if(t=be(t),e=Zt(e,!0),Jt)try{return ye(t,e)}catch(t){}if(re(t,e))return ne(!pe.f.call(t,e),t[e])}},we=function(t,e){if(Xt(t),!Ut(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ee={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=he(Function.call,ke.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return we(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:we};fe(fe.S,"Object",{setPrototypeOf:Ee.set});Wt.Object.setPrototypeOf;var Ce=Vt["__core-js_shared__"]||(Vt["__core-js_shared__"]={}),Ae=function(t){return Ce[t]||(Ce[t]={})},Se=o(function(t){var e=Ae("wks"),n=Vt.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:le)("Symbol."+t))}).store=e}),Pe=Se("toStringTag"),Oe="Arguments"==me(function(){return arguments}()),xe=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Pe))?n:Oe?me(e):"Object"==(i=me(e))&&"function"==typeof e.callee?"Arguments":i},Te={};Te[Se("toStringTag")]="z",Te+""!="[object z]"&&ue(Object.prototype,"toString",function(){return"[object "+xe(this)+"]"},!0);var Le=Math.ceil,Me=Math.floor,De=function(t){return isNaN(t=+t)?0:(t>0?Me:Le)(t)},Ie={},Ne=Math.min,Be=function(t){return t>0?Ne(De(t),9007199254740991):0},je=Math.max,He=Math.min,Re=Ae("keys"),Fe=function(t){return Re[t]||(Re[t]=le(t))},qe=function(t){return function(e,n,i){var o,r=be(e),a=Be(r.length),s=function(t,e){return(t=De(t))<0?je(t+e,0):He(t,e)}(i,a);if(t&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}}(!1),ze=Fe("IE_PROTO"),Ve="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),We=Object.keys||function(t){return function(t,e){var n,i=be(t),o=0,r=[];for(n in i)n!=ze&&re(i,n)&&r.push(n);for(;e.length>o;)re(i,n=e[o++])&&(~qe(r,n)||r.push(n));return r}(t,Ve)},Ue=Gt?Object.defineProperties:function(t,e){Xt(t);for(var n,i=We(e),o=i.length,r=0;o>r;)ee.f(t,n=i[r++],e[n]);return t},Xe=Vt.document,Ye=Xe&&Xe.documentElement,Ge=Fe("IE_PROTO"),$e=function(){},Ke=function(){var t,e=Qt("iframe"),n=Ve.length;for(e.style.display="none",Ye.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ke=t.F;n--;)delete Ke.prototype[Ve[n]];return Ke()},Qe=Object.create||function(t,e){var n;return null!==t?($e.prototype=Xt(t),n=new $e,$e.prototype=null,n[Ge]=t):n=Ke(),void 0===e?n:Ue(n,e)},Je=ee.f,Ze=Se("toStringTag"),tn=function(t,e,n){t&&!re(t=n?t:t.prototype,Ze)&&Je(t,Ze,{configurable:!0,value:e})},en={};ie(en,Se("iterator"),function(){return this});var nn=function(t,e,n){t.prototype=Qe(en,{next:ne(1,n)}),tn(t,e+" Iterator")},on=function(t){return Object(ve(t))},rn=Fe("IE_PROTO"),an=Object.prototype,sn=Object.getPrototypeOf||function(t){return t=on(t),re(t,rn)?t[rn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?an:null},ln=Se("iterator"),un=!([].keys&&"next"in[].keys()),cn=function(){return this},hn=function(t,e,n,i,o,r,a){nn(n,e,i);var s,l,u,c=function(t){if(!un&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",d="values"==o,f=!1,p=t.prototype,g=p[ln]||p["@@iterator"]||o&&p[o],m=g||c(o),_=o?d?c("entries"):m:void 0,v="Array"==e?p.entries||g:g;if(v&&(u=sn(v.call(new t)))!==Object.prototype&&u.next&&(tn(u,h,!0),re(u,ln)||ie(u,ln,cn)),d&&g&&"values"!==g.name&&(f=!0,m=function(){return g.call(this)}),(un||f||!p[ln])&&ie(p,ln,m),Ie[e]=m,Ie[h]=cn,o)if(s={values:d?m:c("values"),keys:r?m:c("keys"),entries:_},a)for(l in s)l in p||ue(p,l,s[l]);else fe(fe.P+fe.F*(un||f),e,s);return s},dn=function(t){return function(e,n){var i,o,r=String(ve(e)),a=De(n),s=r.length;return a<0||a>=s?t?"":void 0:(i=r.charCodeAt(a))<55296||i>56319||a+1===s||(o=r.charCodeAt(a+1))<56320||o>57343?t?r.charAt(a):i:t?r.slice(a,a+2):o-56320+(i-55296<<10)+65536}}(!0);hn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=dn(e,n),this._i+=t.length,{value:t,done:!1})});var fn=Se("unscopables"),pn=Array.prototype;void 0==pn[fn]&&ie(pn,fn,{});var gn=function(t){pn[fn][t]=!0},mn=function(t,e){return{value:e,done:!!t}},_n=hn(Array,"Array",function(t,e){this._t=be(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,mn(1)):"keys"==e?mn(0,n):"values"==e?mn(0,t[n]):mn(0,[n,t[n]])},"values");Ie.Arguments=Ie.Array,gn("keys"),gn("values"),gn("entries");for(var vn=Se("iterator"),bn=Se("toStringTag"),yn=Ie.Array,kn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wn=We(kn),En=0;En<wn.length;En++){var Cn,An=wn[En],Sn=kn[An],Pn=Vt[An],On=Pn&&Pn.prototype;if(On&&(On[vn]||ie(On,vn,yn),On[bn]||ie(On,bn,An),Ie[An]=yn,Sn))for(Cn in _n)On[Cn]||ue(On,Cn,_n[Cn],!0)}var xn=function(t,e,n){for(var i in e)ue(t,i,e[i],n);return t},Tn=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},Ln=function(t,e,n,i){try{return i?e(Xt(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&Xt(o.call(t)),e}},Mn=Se("iterator"),Dn=Array.prototype,In=function(t){return void 0!==t&&(Ie.Array===t||Dn[Mn]===t)},Nn=Se("iterator"),Bn=Wt.getIteratorMethod=function(t){if(void 0!=t)return t[Nn]||t["@@iterator"]||Ie[xe(t)]},jn=o(function(t){var e={},n={},i=t.exports=function(t,i,o,r,a){var s,l,u,c,h=a?function(){return t}:Bn(t),d=he(o,r,i?2:1),f=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(In(h)){for(s=Be(t.length);s>f;f++)if((c=i?d(Xt(l=t[f])[0],l[1]):d(t[f]))===e||c===n)return c}else for(u=h.call(t);!(l=u.next()).done;)if((c=Ln(u,d,l.value,i))===e||c===n)return c};i.BREAK=e,i.RETURN=n}),Hn=Se("species"),Rn=o(function(t){var e=le("meta"),n=ee.f,i=0,o=Object.isExtensible||function(){return!0},r=!Yt(function(){return o(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!Ut(t))return"symbol"==(void 0===t?"undefined":f(t))?t:("string"==typeof t?"S":"P")+t;if(!re(t,e)){if(!o(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!re(t,e)){if(!o(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return r&&s.NEED&&o(t)&&!re(t,e)&&a(t),t}}}),Fn=(Rn.KEY,Rn.NEED,Rn.fastKey,Rn.getWeak,Rn.onFreeze,function(t,e){if(!Ut(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),qn=ee.f,zn=Rn.fastKey,Vn=Gt?"_s":"size",Wn=function(t,e){var n,i=zn(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n},Un={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=Qe(null),t._f=void 0,t._l=void 0,t[Vn]=0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{clear:function(){for(var t=Fn(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[Vn]=0},delete:function(t){var n=Fn(this,e),i=Wn(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[Vn]--}return!!i},forEach:function(t){Fn(this,e);for(var n,i=he(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Wn(Fn(this,e),t)}}),Gt&&qn(o.prototype,"size",{get:function(){return Fn(this,e)[Vn]}}),o},def:function(t,e,n){var i,o,r=Wn(t,e);return r?r.v=n:(t._l=r={i:o=zn(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[Vn]++,"F"!==o&&(t._i[o]=r)),t},getEntry:Wn,setStrong:function(t,e,n){hn(t,e,function(t,n){this._t=Fn(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?"keys"==t?mn(0,e.k):"values"==t?mn(0,e.v):mn(0,[e.k,e.v]):(this._t=void 0,mn(1))},n?"entries":"values",!n,!0),function(t){var e=Vt[t];Gt&&e&&!e[Hn]&&ee.f(e,Hn,{configurable:!0,get:function(){return this}})}(e)}},Xn=Se("iterator"),Yn=!1;try{[7][Xn]().return=function(){Yn=!0}}catch(t){}var Gn=function(t,e){if(!e&&!Yn)return!1;var n=!1;try{var i=[7],o=i[Xn]();o.next=function(){return{done:n=!0}},i[Xn]=function(){return o},t(i)}catch(t){}return n},$n=Ee.set,Kn=function(t,e,n,i,o,r){var a=Vt[t],s=a,l=o?"set":"add",u=s&&s.prototype,c={},h=function(t){var e=u[t];ue(u,t,"delete"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!Ut(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(r||u.forEach&&!Yt(function(){(new s).entries().next()}))){var d=new s,f=d[l](r?{}:-0,1)!=d,p=Yt(function(){d.has(1)}),g=Gn(function(t){new s(t)}),m=!r&&Yt(function(){for(var t=new s,e=5;e--;)t[l](e,e);return!t.has(-0)});g||((s=e(function(e,n){Tn(e,s,t);var i=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&Ut(i)&&$n&&$n(t,i),t}(new a,e,s);return void 0!=n&&jn(n,o,i[l],i),i})).prototype=u,u.constructor=s),(p||m)&&(h("delete"),h("has"),o&&h("get")),(m||f)&&h(l),r&&u.clear&&delete u.clear}else s=i.getConstructor(e,t,o,l),xn(s.prototype,n),Rn.NEED=!0;return tn(s,t),c[t]=s,fe(fe.G+fe.W+fe.F*(s!=a),c),r||i.setStrong(s,t,o),s},Qn=(Kn("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Un.def(Fn(this,"Set"),t=0===t?0:t,t)}},Un),function(t){return function(){if(xe(this)!=t)throw TypeError(t+"#toJSON isn't generic");return function(t,e){var n=[];return jn(t,!1,n.push,n,e),n}(this)}});fe(fe.P+fe.R,"Set",{toJSON:Qn("Set")});var Jn=function(t){fe(fe.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Jn("Set");var Zn=function(t){fe(fe.S,t,{from:function(t){var e,n,i,o,r=arguments[1];return ce(this),(e=void 0!==r)&&ce(r),void 0==t?new this:(n=[],e?(i=0,o=he(r,arguments[2],2),jn(t,!1,function(t){n.push(o(t,i++))})):jn(t,!1,n.push,n),new this(n))}})};Zn("Set");Wt.Set,Kn("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=Un.getEntry(Fn(this,"Map"),t);return e&&e.v},set:function(t,e){return Un.def(Fn(this,"Map"),0===t?0:t,e)}},Un,!0);fe(fe.P+fe.R,"Map",{toJSON:Qn("Map")}),Jn("Map"),Zn("Map");Wt.Map;var ti=Array.isArray||function(t){return"Array"==me(t)},ei=Se("species"),ni=function(t,e){var n=1==t,i=2==t,o=3==t,r=4==t,a=6==t,s=5==t||a,l=e||function(t,e){return new(function(t){var e;return ti(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!ti(e.prototype)||(e=void 0),Ut(e)&&null===(e=e[ei])&&(e=void 0)),void 0===e?Array:e}(t))(e)};return function(e,u,c){for(var h,d,f=on(e),p=_e(f),g=he(u,c,3),m=Be(p.length),_=0,v=n?l(e,m):i?l(e,0):void 0;m>_;_++)if((s||_ in p)&&(h=p[_],d=g(h,_,f),t))if(n)v[_]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return _;case 2:v.push(h)}else if(r)return!1;return a?-1:o||r?r:v}},ii={f:Object.getOwnPropertySymbols},oi=Object.assign,ri=!oi||Yt(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=oi({},t)[n]||Object.keys(oi({},e)).join("")!=i})?function(t,e){for(var n=on(t),i=arguments.length,o=1,r=ii.f,a=pe.f;i>o;)for(var s,l=_e(arguments[o++]),u=r?We(l).concat(r(l)):We(l),c=u.length,h=0;c>h;)a.call(l,s=u[h++])&&(n[s]=l[s]);return n}:oi,ai=Rn.getWeak,si=ni(5),li=ni(6),ui=0,ci=function(t){return t._l||(t._l=new hi)},hi=function(){this.a=[]},di=function(t,e){return si(t.a,function(t){return t[0]===e})};hi.prototype={get:function(t){var e=di(this,t);if(e)return e[1]},has:function(t){return!!di(this,t)},set:function(t,e){var n=di(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=li(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var fi={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=ui++,t._l=void 0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{delete:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).delete(t):n&&re(n,this._i)&&delete n[this._i]},has:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).has(t):n&&re(n,this._i)}}),o},def:function(t,e,n){var i=ai(Xt(e),!0);return!0===i?ci(t).set(e,n):i[t._i]=n,t},ufstore:ci};o(function(t){var e,n=ni(0),i=Rn.getWeak,o=Object.isExtensible,r=fi.ufstore,a={},s=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},l={get:function(t){if(Ut(t)){var e=i(t);return!0===e?r(Fn(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return fi.def(Fn(this,"WeakMap"),t,e)}},u=t.exports=Kn("WeakMap",s,l,fi,!0,!0);Yt(function(){return 7!=(new u).set((Object.freeze||Object)(a),7).get(a)})&&(e=fi.getConstructor(s,"WeakMap"),ri(e.prototype,l),Rn.NEED=!0,n(["delete","has","get","set"],function(t){var n=u.prototype,i=n[t];ue(n,t,function(n,r){if(Ut(n)&&!o(n)){this._f||(this._f=new e);var a=this._f[t](n,r);return"set"==t?this:a}return i.call(this,n,r)})}))});Jn("WeakMap"),Zn("WeakMap");Wt.WeakMap;var pi=function(t,e,n){e in t?ee.f(t,e,ne(0,n)):t[e]=n};fe(fe.S+fe.F*!Gn(function(t){}),"Array",{from:function(t){var e,n,i,o,r=on(t),a="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,u=void 0!==l,c=0,h=Bn(r);if(u&&(l=he(l,s>2?arguments[2]:void 0,2)),void 0==h||a==Array&&In(h))for(n=new a(e=Be(r.length));e>c;c++)pi(n,c,u?l(r[c],c):r[c]);else for(o=h.call(r),n=new a;!(i=o.next()).done;c++)pi(n,c,u?Ln(o,l,[i.value,c],!0):i.value);return n.length=c,n}});Wt.Array.from;var gi=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),mi={custom:1,failed:2},_i=function(){function t(){p(this,t),this._localNameToDefinition=new Map,this._constructorToDefinition=new Map,this._patches=[],this._hasPatches=!1}return g(t,[{key:"setDefinition",value:function(t,e){this._localNameToDefinition.set(t,e),this._constructorToDefinition.set(e.constructor,e)}},{key:"localNameToDefinition",value:function(t){return this._localNameToDefinition.get(t)}},{key:"constructorToDefinition",value:function(t){return this._constructorToDefinition.get(t)}},{key:"addPatch",value:function(t){this._hasPatches=!0,this._patches.push(t)}},{key:"patchTree",value:function(t){var e=this;this._hasPatches&&l(t,function(t){return e.patch(t)})}},{key:"patch",value:function(t){if(this._hasPatches&&!t.__CE_patched){t.__CE_patched=!0;for(var e=0;e<this._patches.length;e++)this._patches[e](t)}}},{key:"connectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom?a(i)&&this.connectedCallback(i):this.upgradeElement(i)}}},{key:"disconnectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom&&this.disconnectedCallback(i)}}},{key:"patchAndUpgradeTree",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=[];if(l(t,function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var o=t.import;o instanceof Node&&"complete"===o.readyState?(o.__CE_isImportDocument=!0,o.__CE_hasRegistry=!0):t.addEventListener("load",function(){var i=t.import;i.__CE_documentLoadHandled||(i.__CE_documentLoadHandled=!0,i.__CE_isImportDocument=!0,i.__CE_hasRegistry=!0,n.delete(i),e.patchAndUpgradeTree(i,n))})}else i.push(t)},n),this._hasPatches)for(var o=0;o<i.length;o++)this.patch(i[o]);for(var r=0;r<i.length;r++)this.upgradeElement(i[r])}},{key:"upgradeElement",value:function(t){if(void 0===t.__CE_state){var e=this.localNameToDefinition(t.localName);if(e){e.constructionStack.push(t);var n=e.constructor;try{try{if(new n!==t)throw new Error("The custom element constructor did not produce the element being upgraded.")}finally{e.constructionStack.pop()}}catch(e){throw t.__CE_state=mi.failed,e}if(t.__CE_state=mi.custom,t.__CE_definition=e,e.attributeChangedCallback)for(var i=e.observedAttributes,o=0;o<i.length;o++){var r=i[o],s=t.getAttribute(r);null!==s&&this.attributeChangedCallback(t,r,null,s,null)}a(t)&&this.connectedCallback(t)}}}},{key:"connectedCallback",value:function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t),t.__CE_isConnectedCallbackCalled=!0}},{key:"disconnectedCallback",value:function(t){t.__CE_isConnectedCallbackCalled||this.connectedCallback(t);var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t),t.__CE_isConnectedCallbackCalled=void 0}},{key:"attributeChangedCallback",value:function(t,e,n,i,o){var r=t.__CE_definition;r.attributeChangedCallback&&r.observedAttributes.indexOf(e)>-1&&r.attributeChangedCallback.call(t,e,n,i,o)}}]),t}(),vi=function(){function t(e,n){p(this,t),this._internals=e,this._document=n,this._observer=void 0,this._internals.patchAndUpgradeTree(this._document),"loading"===this._document.readyState&&(this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this._document,{childList:!0,subtree:!0}))}return g(t,[{key:"disconnect",value:function(){this._observer&&this._observer.disconnect()}},{key:"_handleMutations",value:function(t){var e=this._document.readyState;"interactive"!==e&&"complete"!==e||this.disconnect();for(var n=0;n<t.length;n++)for(var i=t[n].addedNodes,o=0;o<i.length;o++){var r=i[o];this._internals.patchAndUpgradeTree(r)}}}]),t}(),bi=function(){function t(){var e=this;p(this,t),this._value=void 0,this._resolve=void 0,this._promise=new Promise(function(t){e._resolve=t,e._value&&t(e._value)})}return g(t,[{key:"resolve",value:function(t){if(this._value)throw new Error("Already resolved.");this._value=t,this._resolve&&this._resolve(t)}},{key:"toPromise",value:function(){return this._promise}}]),t}(),yi=function(){function t(e){p(this,t),this._elementDefinitionIsRunning=!1,this._internals=e,this._whenDefinedDeferred=new Map,this._flushCallback=function(t){return t()},this._flushPending=!1,this._unflushedLocalNames=[],this._documentConstructionObserver=new vi(e,document)}return g(t,[{key:"define",value:function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!r(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this._internals.localNameToDefinition(t))throw new Error("A custom element with name '"+t+"' has already been defined.");if(this._elementDefinitionIsRunning)throw new Error("A custom element is already being defined.");this._elementDefinitionIsRunning=!0;var i=void 0,o=void 0,a=void 0,s=void 0,l=void 0;try{var u=function(t){var e=c[t];if(void 0!==e&&!(e instanceof Function))throw new Error("The '"+t+"' callback must be a function.");return e},c=e.prototype;if(!(c instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");i=u("connectedCallback"),o=u("disconnectedCallback"),a=u("adoptedCallback"),s=u("attributeChangedCallback"),l=e.observedAttributes||[]}catch(t){return}finally{this._elementDefinitionIsRunning=!1}var h={localName:t,constructor:e,connectedCallback:i,disconnectedCallback:o,adoptedCallback:a,attributeChangedCallback:s,observedAttributes:l,constructionStack:[]};this._internals.setDefinition(t,h),this._unflushedLocalNames.push(t),this._flushPending||(this._flushPending=!0,this._flushCallback(function(){return n._flush()}))}},{key:"_flush",value:function(){if(!1!==this._flushPending)for(this._flushPending=!1,this._internals.patchAndUpgradeTree(document);this._unflushedLocalNames.length>0;){var t=this._unflushedLocalNames.shift(),e=this._whenDefinedDeferred.get(t);e&&e.resolve(void 0)}}},{key:"get",value:function(t){var e=this._internals.localNameToDefinition(t);if(e)return e.constructor}},{key:"whenDefined",value:function(t){if(!r(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this._whenDefinedDeferred.get(t);if(e)return e.toPromise();var n=new bi;this._whenDefinedDeferred.set(t,n);return this._internals.localNameToDefinition(t)&&-1===this._unflushedLocalNames.indexOf(t)&&n.resolve(void 0),n.toPromise()}},{key:"polyfillWrapFlushCallback",value:function(t){this._documentConstructionObserver.disconnect();var e=this._flushCallback;this._flushCallback=function(n){return t(function(){return e(n)})}}}]),t}();window.CustomElementRegistry=yi,yi.prototype.define=yi.prototype.define,yi.prototype.get=yi.prototype.get,yi.prototype.whenDefined=yi.prototype.whenDefined,yi.prototype.polyfillWrapFlushCallback=yi.prototype.polyfillWrapFlushCallback;var ki={Document_createElement:window.Document.prototype.createElement,Document_createElementNS:window.Document.prototype.createElementNS,Document_importNode:window.Document.prototype.importNode,Document_prepend:window.Document.prototype.prepend,Document_append:window.Document.prototype.append,Node_cloneNode:window.Node.prototype.cloneNode,Node_appendChild:window.Node.prototype.appendChild,Node_insertBefore:window.Node.prototype.insertBefore,Node_removeChild:window.Node.prototype.removeChild,Node_replaceChild:window.Node.prototype.replaceChild,Node_textContent:Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),Element_attachShadow:window.Element.prototype.attachShadow,Element_innerHTML:Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Element_getAttribute:window.Element.prototype.getAttribute,Element_setAttribute:window.Element.prototype.setAttribute,Element_removeAttribute:window.Element.prototype.removeAttribute,Element_getAttributeNS:window.Element.prototype.getAttributeNS,Element_setAttributeNS:window.Element.prototype.setAttributeNS,Element_removeAttributeNS:window.Element.prototype.removeAttributeNS,Element_insertAdjacentElement:window.Element.prototype.insertAdjacentElement,Element_prepend:window.Element.prototype.prepend,Element_append:window.Element.prototype.append,Element_before:window.Element.prototype.before,Element_after:window.Element.prototype.after,Element_replaceWith:window.Element.prototype.replaceWith,Element_remove:window.Element.prototype.remove,HTMLElement:window.HTMLElement,HTMLElement_innerHTML:Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),HTMLElement_insertAdjacentElement:window.HTMLElement.prototype.insertAdjacentElement},wi=new function t(){p(this,t)},Ei=function(t,e,n){e.prepend=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.prepend.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.append=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.append.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}}},Ci=window.customElements;if(!Ci||Ci.forcePolyfill||"function"!=typeof Ci.define||"function"!=typeof Ci.get){var Ai=new _i;!function(t){window.HTMLElement=function(){function e(){var e=this.constructor,n=t.constructorToDefinition(e);if(!n)throw new Error("The custom element being constructed was not registered with `customElements`.");var i=n.constructionStack;if(0===i.length){var o=ki.Document_createElement.call(document,n.localName);return Object.setPrototypeOf(o,e.prototype),o.__CE_state=mi.custom,o.__CE_definition=n,t.patch(o),o}var r=i.length-1,a=i[r];if(a===wi)throw new Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return i[r]=wi,Object.setPrototypeOf(a,e.prototype),t.patch(a),a}return e.prototype=ki.HTMLElement.prototype,e}()}(Ai),function(t){u(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.localNameToDefinition(e);if(n)return new n.constructor}var i=ki.Document_createElement.call(this,e);return t.patch(i),i}),u(Document.prototype,"importNode",function(e,n){var i=ki.Document_importNode.call(this,e,n);return this.__CE_hasRegistry?t.patchAndUpgradeTree(i):t.patchTree(i),i});u(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var i=t.localNameToDefinition(n);if(i)return new i.constructor}var o=ki.Document_createElementNS.call(this,e,n);return t.patch(o),o}),Ei(t,Document.prototype,{prepend:ki.Document_prepend,append:ki.Document_append})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType!==Node.TEXT_NODE){var i=void 0;if(this.firstChild){var o=this.childNodes,r=o.length;if(r>0&&a(this)){i=new Array(r);for(var s=0;s<r;s++)i[s]=o[s]}}if(n.set.call(this,e),i)for(var l=0;l<i.length;l++)t.disconnectTree(i[l])}else n.set.call(this,e)}})}u(Node.prototype,"insertBefore",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_insertBefore.call(this,e,n);if(a(this))for(var r=0;r<i.length;r++)t.connectTree(i[r]);return o}var s=a(e),l=ki.Node_insertBefore.call(this,e,n);return s&&t.disconnectTree(e),a(this)&&t.connectTree(e),l}),u(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var n=Array.prototype.slice.apply(e.childNodes),i=ki.Node_appendChild.call(this,e);if(a(this))for(var o=0;o<n.length;o++)t.connectTree(n[o]);return i}var r=a(e),s=ki.Node_appendChild.call(this,e);return r&&t.disconnectTree(e),a(this)&&t.connectTree(e),s}),u(Node.prototype,"cloneNode",function(e){var n=ki.Node_cloneNode.call(this,e);return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(n):t.patchTree(n),n}),u(Node.prototype,"removeChild",function(e){var n=a(e),i=ki.Node_removeChild.call(this,e);return n&&t.disconnectTree(e),i}),u(Node.prototype,"replaceChild",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_replaceChild.call(this,e,n);if(a(this)){t.disconnectTree(n);for(var r=0;r<i.length;r++)t.connectTree(i[r])}return o}var s=a(e),l=ki.Node_replaceChild.call(this,e,n),u=a(this);return u&&t.disconnectTree(n),s&&t.disconnectTree(e),u&&t.connectTree(e),l}),ki.Node_textContent&&ki.Node_textContent.get?e(Node.prototype,ki.Node_textContent):t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)ki.Node_removeChild.call(this,this.firstChild);ki.Node_appendChild.call(this,document.createTextNode(t))}})})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var i=this,o=void 0;if(a(this)&&(o=[],l(this,function(t){t!==i&&o.push(t)})),n.set.call(this,e),o)for(var r=0;r<o.length;r++){var s=o[r];s.__CE_state===mi.custom&&t.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(this):t.patchTree(this),e}})}function n(e,n){u(e,"insertAdjacentElement",function(e,i){var o=a(i),r=n.call(this,e,i);return o&&t.disconnectTree(i),a(r)&&t.connectTree(i),r})}if(ki.Element_attachShadow?u(Element.prototype,"attachShadow",function(t){var e=ki.Element_attachShadow.call(this,t);return this.__CE_shadowRoot=e,e}):console.warn("Custom Elements: `Element#attachShadow` was not patched."),ki.Element_innerHTML&&ki.Element_innerHTML.get)e(Element.prototype,ki.Element_innerHTML);else if(ki.HTMLElement_innerHTML&&ki.HTMLElement_innerHTML.get)e(HTMLElement.prototype,ki.HTMLElement_innerHTML);else{var i=ki.Document_createElement.call(document,"div");t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){return ki.Node_cloneNode.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName?this.content:this;for(i.innerHTML=t;e.childNodes.length>0;)ki.Node_removeChild.call(e,e.childNodes[0]);for(;i.childNodes.length>0;)ki.Node_appendChild.call(e,i.childNodes[0])}})})}u(Element.prototype,"setAttribute",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_setAttribute.call(this,e,n);var i=ki.Element_getAttribute.call(this,e);ki.Element_setAttribute.call(this,e,n),n=ki.Element_getAttribute.call(this,e),t.attributeChangedCallback(this,e,i,n,null)}),u(Element.prototype,"setAttributeNS",function(e,n,i){if(this.__CE_state!==mi.custom)return ki.Element_setAttributeNS.call(this,e,n,i);var o=ki.Element_getAttributeNS.call(this,e,n);ki.Element_setAttributeNS.call(this,e,n,i),i=ki.Element_getAttributeNS.call(this,e,n),t.attributeChangedCallback(this,n,o,i,e)}),u(Element.prototype,"removeAttribute",function(e){if(this.__CE_state!==mi.custom)return ki.Element_removeAttribute.call(this,e);var n=ki.Element_getAttribute.call(this,e);ki.Element_removeAttribute.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)}),u(Element.prototype,"removeAttributeNS",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_removeAttributeNS.call(this,e,n);var i=ki.Element_getAttributeNS.call(this,e,n);ki.Element_removeAttributeNS.call(this,e,n);var o=ki.Element_getAttributeNS.call(this,e,n);i!==o&&t.attributeChangedCallback(this,n,i,o,e)}),ki.HTMLElement_insertAdjacentElement?n(HTMLElement.prototype,ki.HTMLElement_insertAdjacentElement):ki.Element_insertAdjacentElement?n(Element.prototype,ki.Element_insertAdjacentElement):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Ei(t,Element.prototype,{prepend:ki.Element_prepend,append:ki.Element_append}),function(t,e,n){e.before=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.before.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.after=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.after.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.replaceWith=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)}),s=a(this);n.replaceWith.apply(this,i);for(var l=0;l<r.length;l++)t.disconnectTree(r[l]);if(s){t.disconnectTree(this);for(var u=0;u<i.length;u++){var c=i[u];c instanceof Element&&t.connectTree(c)}}},e.remove=function(){var e=a(this);n.remove.call(this),e&&t.disconnectTree(this)}}(t,Element.prototype,{before:ki.Element_before,after:ki.Element_after,replaceWith:ki.Element_replaceWith,remove:ki.Element_remove})}(Ai),document.__CE_hasRegistry=!0;var Si=new yi(Ai);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:Si})}!function(t){function e(){d=!1;var t=f;f=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();!function(t){t.nodes_.forEach(function(e){var n=u.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function n(t,e){for(var n=t;n;n=n.parentNode){var i=u.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],a=r.options;if(n===t||a.subtree){var s=e(a);s&&r.enqueue(s)}}}}function i(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++p}function o(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function r(t,e){return g=new o(t,e)}function a(t){return m||(m=function(t){var e=new o(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(g),m.oldValue=t,m)}function s(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var l,u=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))l=setTimeout;else if(window.setImmediate)l=window.setImmediate;else{var c=[],h=String(Math.random());window.addEventListener("message",function(t){if(t.data===h){var e=c;c=[],e.forEach(function(t){t()})}}),l=function(t){c.push(t),window.postMessage(h,"*")}}var d=!1,f=[],p=0;i.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=u.get(t);n||u.set(t,n=[]);for(var i,o=0;o<n.length;o++)if(n[o].observer===this){(i=n[o]).removeListeners(),i.options=e;break}i||(i=new s(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=u.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var g,m;s.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var o=function(t,e){return t===e?t:m&&function(t){return t===m||t===g}(t)?m:null}(n[i-1],t);if(o)return void(n[i-1]=o)}else!function(t){f.push(t),d||(d=!0,l(e))}(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=u.get(t);e||u.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=u.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,o=t.target;(s=new r("attributes",o)).attributeName=e,s.attributeNamespace=i;l=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;n(o,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(e)||-1!==t.attributeFilter.indexOf(i)))return t.attributeOldValue?a(l):s});break;case"DOMCharacterDataModified":var s=r("characterData",o=t.target),l=t.prevValue;n(o,function(t){if(t.characterData)return t.characterDataOldValue?a(l):s});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var u,c,h=t.target;"DOMNodeInserted"===t.type?(u=[h],c=[]):(u=[],c=[h]);var d=h.previousSibling,f=h.nextSibling;(s=r("childList",t.target.parentNode)).addedNodes=u,s.removedNodes=c,s.previousSibling=d,s.nextSibling=f,n(t.relatedNode,function(t){if(t.childList)return s})}g=m=void 0}},t.JsMutationObserver=i,t.MutationObserver||(t.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(t,e){function n(t){return l[s]=i.apply(e,t),s++}function i(t){var n=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,n):new Function(""+t)()}}function o(t){if(u)setTimeout(i(o,t),0);else{var e=l[t];if(e){u=!0;try{e()}finally{r(t),u=!1}}}}function r(t){delete l[t]}if(!t.setImmediate){var a,s=1,l={},u=!1,c=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(){var t=n(arguments);return process.nextTick(i(o,t)),t}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(){var i=n(arguments);return t.postMessage(e+i,"*"),i}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(){var e=n(arguments);return t.port2.postMessage(e),e}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;a=function(){var e=n(arguments),i=c.createElement("script");return i.onreadystatechange=function(){o(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i),e}}():a=function(){var t=n(arguments);return setTimeout(i(o,t),0),t},h.setImmediate=a,h.clearImmediate=r}}(self),function(){var t={ensureViewportElement:function(){var t=document.querySelector("meta[name=viewport]");return t||((t=document.createElement("meta")).name="viewport",document.head.appendChild(t)),t},setup:function(){var e=t.ensureViewportElement();e&&(e.hasAttribute("content")||e.setAttribute("content","width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"))}};window.Viewport=t}();var Pi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return b(e,t),e}(function(){if("function"!=typeof HTMLElement){var t=function(){};return t.prototype=document.createElement("div"),t}return HTMLElement}()),Oi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(t.template=t.innerHTML;t.firstChild;)t.removeChild(t.firstChild);return t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.parentNode&&this.parentNode!==document.body&&Q.warn("ons-template (id = "+this.getAttribute("id")+") must be located just under document.body"+(this.parentNode.outerHTML?":\n\n"+this.parentNode.outerHTML:"."));var t=new CustomEvent("_templateloaded",{bubbles:!0,cancelable:!0});t.template=this.template,t.templateId=this.getAttribute("id"),this.dispatchEvent(t)}}]),e}();c.Template=Oi,customElements.define("ons-template",Oi);var xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){if(null!==C._getSelectedPlatform())t._platformUpdate();else if(!t._isAllowedPlatform()){for(;t.childNodes[0];)t.childNodes[0].remove();t._platformUpdate()}}),t._onOrientationChange(),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Ot.on("change",this._onOrientationChange.bind(this))}},{key:"attributeChangedCallback",value:function(t){"orientation"===t&&this._onOrientationChange()}},{key:"disconnectedCallback",value:function(){Ot.off("change",this._onOrientationChange)}},{key:"_platformUpdate",value:function(){this.style.display=this._isAllowedPlatform()?"":"none"}},{key:"_isAllowedPlatform",value:function(){return!this.getAttribute("platform")||this.getAttribute("platform").split(/\s+/).indexOf(C.getMobileOS())>=0}},{key:"_onOrientationChange",value:function(){if(this.hasAttribute("orientation")&&this._isAllowedPlatform()){var t=this.getAttribute("orientation").toLowerCase(),e=Ot.isPortrait()?"portrait":"landscape";this.style.display=t===e?"":"none"}}}],[{key:"observedAttributes",get:function(){return["orientation"]}}]),e}();c.If=xi,customElements.define("ons-if",xi);var Ti=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.timing=e.timing||"linear",this.duration=e.duration||0,this.delay=e.delay||0,this.def={timing:this.timing,duration:this.duration,delay:this.delay}}return g(t,null,[{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=function(){e.apply(this,arguments),Q.extend(this,t)};return n.prototype=this.prototype,n}}]),t}(),Li={};Li.isIPhoneXPortraitPatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-portrait")&&window.innerWidth<window.innerHeight},Li.isIPhoneXLandscapePatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-landscape")&&window.innerWidth>=window.innerHeight},Li.getSafeAreaLengths=function(){return Li.isIPhoneXPortraitPatchActive()?{top:44,right:0,bottom:34,left:0}:Li.isIPhoneXLandscapePatchActive()?{top:0,right:44,bottom:21,left:44}:{top:0,right:0,bottom:0,left:0}},Li.getSafeAreaDOMRect=function(){var t=void 0;return t=Li.isIPhoneXPortraitPatchActive()?{x:0,y:44,width:window.innerWidth,height:window.innerHeight-78}:Li.isIPhoneXLandscapePatchActive()?{x:44,y:0,width:window.innerWidth-88,height:window.innerHeight-21}:{x:0,y:0,width:window.innerWidth,height:window.innerHeight},_({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})};var Mi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Di=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 80%, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, 80%, 0)",opacity:0}).queue(function(t){e&&e(),t()}))}}]),e}(),Ii=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 48px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 33px)":l.liftAmount=document.body.clientHeight/2-1+"px",l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.liftAmount+", 0)"}).queue(function(t){e&&e(),t()}))}}]),e}(),Ni=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),t._visible=!1,t._doorLock=new Nt,t._cancel=t._cancel.bind(t),t._selfCamelName=Q.camelize(t.tagName.slice(4)),t._defaultDBB=function(e){return t.cancelable?t._cancel():e.callParentHandler()},t._animatorFactory=t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"_updateAnimatorFactory",value:function(){Q.throwMember()}},{key:"_toggleStyle",value:function(t){this.style.display=t?"block":"none"}},{key:"_scheme",get:function(){Q.throwMember()}}]),g(e,[{key:"_cancel",value:function(){var t=this;this.cancelable&&!this._running&&(this._running=!0,this.hide().then(function(){t._running=!1,Q.triggerElementEvent(t,"dialog-cancel")},function(){return t._running=!1}))}},{key:"show",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!0].concat(e))}},{key:"hide",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!1].concat(e))}},{key:"toggle",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!this.visible].concat(e))}},{key:"_setVisible",value:function(t){var e,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?"show":"hide";(o=_({},o)).animationOptions=Q.extend(o.animationOptions||{},O.parseAnimationOptionsString(this.getAttribute("animation-options")));var a=!1;return Q.triggerElementEvent(this,"pre"+r,(e={},m(e,this._selfCamelName,this),m(e,"cancel",function(){return a=!0}),e)),a?Promise.reject("Canceled in pre"+r+" event."):new Promise(function(e){i._doorLock.waitUnlock(function(){var a=i._doorLock.lock(),s=i._animatorFactory.newAnimator(o);t&&i._toggleStyle(!0,o),i._visible=t,Q.iosPageScrollFix(t),n(i,function(){s[r](i,function(){!t&&i._toggleStyle(!1,o),a(),Q.propagateAction(i,"_"+r),Q.triggerElementEvent(i,"post"+r,m({},i._selfCamelName,i)),o.callback instanceof Function&&o.callback(i),e(i)})})})})}},{key:"_updateMask",value:function(){var t=this;n(this,function(){t._mask&&t.getAttribute("mask-color")&&(t._mask.style.backgroundColor=t.getAttribute("mask-color"))})}},{key:"connectedCallback",value:function(){var t=this;this.onDeviceBackButton=this._defaultDBB.bind(this),n(this,function(){t._mask&&(t._mask.addEventListener("click",t._cancel,!1),Q.iosMaskScrollFix(t._mask,!0))})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._mask&&(this._mask.removeEventListener("click",this._cancel,!1),Q.iosMaskScrollFix(this._mask,!1))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"animation":this._animatorFactory=this._updateAnimatorFactory();break;case"mask-color":this._updateMask()}}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"visible",get:function(){return this._visible}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"cancelable",set:function(t){return Q.toggleAttribute(this,"cancelable",t)},get:function(){return this.hasAttribute("cancelable")}}],[{key:"observedAttributes",get:function(){return["modifier","animation","mask-color"]}},{key:"events",get:function(){return["preshow","postshow","prehide","posthide","dialog-cancel"]}}]),e}(),Bi={".action-sheet":"action-sheet--*",".action-sheet-mask":"action-sheet-mask--*",".action-sheet-title":"action-sheet-title--*"},ji={default:function(){return C.isAndroid()?Di:Ii},none:Mi},Hi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:ji,baseClass:Mi,baseClassName:"ActionSheetAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._sheet){var t=document.createElement("div");for(t.classList.add("action-sheet");this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}if(!this._title&&this.hasAttribute("title")){var e=document.createElement("div");e.innerHTML=this.getAttribute("title"),e.classList.add("action-sheet-title"),this._sheet.insertBefore(e,this._sheet.firstChild)}if(!this._mask){var n=document.createElement("div");n.classList.add("action-sheet-mask"),this.insertBefore(n,this.firstChild)}this._sheet.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_updateTitle",value:function(){this._title&&(this._title.innerHTML=this.getAttribute("title"))}},{key:"attributeChangedCallback",value:function(t,n,i){"title"===t?this._updateTitle():v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Bi}},{key:"_mask",get:function(){return Q.findChild(this,".action-sheet-mask")}},{key:"_sheet",get:function(){return Q.findChild(this,".action-sheet")}},{key:"_title",get:function(){return this.querySelector(".action-sheet-title")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Mi||Q.throwAnimator("ActionSheet"),ji[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["title"])}},{key:"animators",get:function(){return ji}},{key:"ActionSheetAnimator",get:function(){return Mi}}]),e}();c.ActionSheet=Hi,customElements.define("ons-action-sheet",Hi);var Ri=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_scheme",get:function(){Q.throwMember()}},{key:"_defaultClassName",get:function(){Q.throwMember()}},{key:"_rippleOpt",get:function(){return[this]}}]),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add(this._defaultClassName),!this._icon&&this.hasAttribute("icon")){Q.checkMissingImport("Icon");var t=Q.createElement('<ons-icon icon="'+this.getAttribute("icon")+'"></ons-icon>');t.classList.add(this._defaultClassName.replace("button","icon")),this.insertBefore(t,this.firstChild)}this._updateRipple(),B.initModifier(this,this._scheme)}},{key:"_updateIcon",value:function(){this._icon&&this._icon.setAttribute("icon",this.getAttribute("icon"))}},{key:"_updateRipple",value:function(){this._rippleOpt&&Q.updateRipple.apply(Q,w(this._rippleOpt))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,this._defaultClassName,this._scheme);break;case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"icon":this._updateIcon();break;case"ripple":this.classList.contains(this._defaultClassName)&&this._updateRipple()}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"_icon",get:function(){return Q.findChild(this,"ons-icon")}}],[{key:"observedAttributes",get:function(){return["modifier","class","icon","ripple"]}}]),e}(),Fi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"action-sheet-button--*",".action-sheet-icon":"action-sheet-icon--*"}}},{key:"_defaultClassName",get:function(){return"action-sheet-button"}},{key:"_rippleOpt",get:function(){}}]),e}();c.ActionSheetButton=Fi,customElements.define("ons-action-sheet-button",Fi);var qi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),zi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1},{transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Vi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1.3, 1.3, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Wi={".alert-dialog":"alert-dialog--*",".alert-dialog-container":"alert-dialog-container--*",".alert-dialog-title":"alert-dialog-title--*",".alert-dialog-content":"alert-dialog-content--*",".alert-dialog-footer":"alert-dialog-footer--*",".alert-dialog-footer--rowfooter":"alert-dialog-footer--rowfooter--*",".alert-dialog-button--rowfooter":"alert-dialog-button--rowfooter--*",".alert-dialog-button--primal":"alert-dialog-button--primal--*",".alert-dialog-button":"alert-dialog-button--*","ons-alert-dialog-button":"alert-dialog-button--*",".alert-dialog-mask":"alert-dialog-mask--*",".text-input":"text-input--*"},Ui={none:qi,default:function(){return C.isAndroid()?zi:Vi},fade:function(){return C.isAndroid()?zi:Vi}},Xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Ui,baseClass:qi,baseClassName:"AlertDialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=10001;var t=document.createDocumentFragment();if(!this._mask&&!this._dialog)for(;this.firstChild;)t.appendChild(this.firstChild);if(!this._mask){var e=document.createElement("div");e.classList.add("alert-dialog-mask"),this.insertBefore(e,this.children[0])}if(!this._dialog){var n=document.createElement("div");n.classList.add("alert-dialog"),this.insertBefore(n,null)}if(!Q.findChild(this._dialog,".alert-dialog-container")){var i=document.createElement("div");i.classList.add("alert-dialog-container"),this._dialog.appendChild(i)}this._dialog.children[0].appendChild(t),this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Wi}},{key:"_mask",get:function(){return Q.findChild(this,".alert-dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".alert-dialog")}},{key:"_titleElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-title")}},{key:"_contentElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-content")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof qi||Q.throwAnimator("AlertDialog"),Ui[t]=e}},{key:"animators",get:function(){return Ui}},{key:"AlertDialogAnimator",get:function(){return qi}}]),e}();c.AlertDialog=Xi,customElements.define("ons-alert-dialog",Xi);var Yi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"alert-dialog-button--*"}}},{key:"_defaultClassName",get:function(){return"alert-dialog-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{modifier:"light-gray"}]}}]),e}();c.AlertDialogButton=Yi,customElements.define("ons-alert-dialog-button",Yi);var Gi={"":"back-button--*",".back-button__icon":"back-button--*__icon",".back-button__label":"back-button--*__label"},$i=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._options={},t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_updateIcon",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q.findChild(this,".back-button__icon")).innerHTML="android"===N.getPlatform(this)||Q.hasModifier(this,"material")?'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>md-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="android" transform="translate(-32.000000, -32.000000)" fill-rule="nonzero">\n            <polygon id="md-back-button-icon" points="48 39 35.83 39 41.42 33.41 40 32 32 40 40 48 41.41 46.59 35.83 41 48 41"></polygon>\n        </g>\n    </g>\n</svg>\n':'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="13px" height="21px" viewBox="0 0 13 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ios-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="ios" transform="translate(-34.000000, -30.000000)">\n            <polygon id="ios-back-button-icon" points="34 40.5 44.5 30 46.5 32 38 40.5 46.5 49 44.5 51"></polygon>\n        </g>\n    </g>\n</svg>\n'}},{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("back-button"),!Q.findChild(this,".back-button__label")){for(var t=Q.create("span.back-button__label");this.childNodes[0];)t.appendChild(this.childNodes[0]);this.appendChild(t)}if(!Q.findChild(this,".back-button__icon")){var e=Q.create("span.back-button__icon");this._updateIcon(e),this.insertBefore(e,this.children[0])}Q.updateRipple(this,void 0,{center:"",size:"contain",background:"transparent"}),B.initModifier(this,Gi)}},{key:"_onClick",value:function(){if(this.onClick)this.onClick.apply(this);else{var t=Q.findParent(this,"ons-navigator");t&&t.popPage(this.options)}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"back-button",Gi);break;case"modifier":B.onModifierChanged(e,n,this,Gi)&&this._updateIcon()}}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"show",value:function(){this.style.display="inline-block"}},{key:"hide",value:function(){this.style.display="none"}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BackButton=$i,customElements.define("ons-back-button",$i);var Ki="bottom-bar",Qi={"":"bottom-bar--*"},Ji=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.classList.add(Ki),B.initModifier(t,Qi),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-page")&&this.parentNode.classList.add("page-with-bottom-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,Ki,Qi);break;case"modifier":B.onModifierChanged(e,n,this,Qi)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BottomToolbar=Ji,customElements.define("ons-bottom-toolbar",Ji);var Zi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"button--*"}}},{key:"_defaultClassName",get:function(){return"button"}}]),e}();c.Button=Zi,customElements.define("ons-button",Zi);var to={"":"card--*",".card__title":"card--*__title",".card__content":"card--*__content"},eo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.classList.contains("title")?e.classList.add("card__title"):e.classList.contains("content")&&e.classList.add("card__content")}N.prepare(this),this.classList.add("card"),B.initModifier(this,to)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"card",to);break;case"modifier":B.onModifierChanged(e,n,this,to)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Card=eo,customElements.define("ons-card",eo);var no={"":"carousel-item--*"},io=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.style.width="100%",B.initModifier(t,no),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t)return B.onModifierChanged(e,n,this,no)}}],[{key:"observedAttributes",get:function(){return["modifier"]}}]),e}();c.CarouselItem=io,customElements.define("ons-carousel-item",io);var oo={vertical:{axis:"Y",size:"Height",dir:["up","down"],t3d:["0px, ","px, 0px"]},horizontal:{axis:"X",size:"Width",dir:["left","right"],t3d:["","px, 0px, 0px"]}},ro=function(){function t(e){var n=this;p(this,t);"getInitialIndex getBubbleWidth isVertical isOverScrollable isCentered\n    isAutoScrollable refreshHook preChangeHook postChangeHook overScrollHook".split(/\s+/).forEach(function(t){return n[t]=e[t]||function(){return!1}}),this.getElement=e.getElement,this.scrollHook=e.scrollHook,this.itemSize=e.itemSize||"100%",this.getAutoScrollRatio=function(){var t=e.getAutoScrollRatio&&e.getAutoScrollRatio.apply(e,arguments);return((t="number"==typeof t&&t==t?t:.5)<0||t>1)&&Q.throw("Invalid auto-scroll-ratio "+t+". Must be between 0 and 1"),t},this.shouldBlock="other"===Q.globals.actualMobileOS,this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onResize=this.onResize.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.swipeable,i=e.autoRefresh;this.initialized=!0,this.target=this.getElement().children[0],this.blocker=this.getElement().children[1],this.target&&this.blocker||Q.throw('Expected "target" and "blocker" elements to exist before initializing Swiper'),this.shouldBlock||(this.blocker.style.display="none"),this.getElement().classList.add("ons-swiper"),this.target.classList.add("ons-swiper-target"),this.blocker.classList.add("ons-swiper-blocker"),this._gestureDetector=new st(this.getElement(),{dragMinDistance:1,dragLockToAxis:!0,passive:!this._shouldFixScroll}),this._mutationObserver=new MutationObserver(function(){return t.refresh()}),this.updateSwipeable(n),this.updateAutoRefresh(i),this._scroll=this._offset=this._lastActiveIndex=0,this._updateLayout(),this._setupInitialIndex(),setImmediate(function(){return t.initialized&&t._setupInitialIndex()}),window===window.parent&&0!==this.offsetHeight||window.requestAnimationFrame(function(){return t.initialized&&t.onResize()})}},{key:"dispose",value:function(){this.initialized=!1,this.updateSwipeable(!1),this.updateAutoRefresh(!1),this._gestureDetector&&this._gestureDetector.dispose(),this.target=this.blocker=this._gestureDetector=this._mutationObserver=null,this.setupResize(!1)}},{key:"onResize",value:function(){var t=this._scroll/this.targetSize;this._reset(),this.setActiveIndex(t),this.refresh()}},{key:"_calculateItemSize",value:function(){var t=this.itemSize.match(/^(\d+)(px|%)/);t||Q.throw("Invalid state: swiper's size unit must be '%' or 'px'");var e=parseInt(t[1],10);return"%"===t[2]?Math.round(e/100*this.targetSize):e}},{key:"_setupInitialIndex",value:function(){this._reset(),this._lastActiveIndex=Math.max(Math.min(Number(this.getInitialIndex()),this.itemCount),0),this._scroll=this._offset+this.itemNumSize*this._lastActiveIndex,this._scrollTo(this._scroll)}},{key:"_setSwiping",value:function(t){this.target.classList.toggle("swiping",t)}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._setSwiping(!0),t=Math.max(0,Math.min(t,this.itemCount-1));var i=Math.max(0,Math.min(this.maxScroll,this._offset+this.itemNumSize*t));if(C.isUIWebView()){var o=function(t){return Array.prototype.concat.apply([],t)}(Q.arrayFrom(this.target.children).map(function(t){return Q.arrayFrom(t.children).filter(function(t){return t.classList.contains("page__content")})})),r=new Map;return new Promise(function(t){o.forEach(function(t){r.set(t,t.getAttribute("class")),t.classList.add("page__content--suppress-layer-creation")}),requestAnimationFrame(t)}).then(function(){return e._changeTo(i,n)}).then(function(){return new Promise(function(t){o.forEach(function(t){t.setAttribute("class",r.get(t))}),requestAnimationFrame(t)})})}return this._changeTo(i,n)}},{key:"getActiveIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._scroll;t-=this._offset;var e=this.itemCount,n=this.itemNumSize;if(0===this.itemNumSize||!Q.isInteger(t))return this._lastActiveIndex;if(t<=0)return 0;for(var i=0;i<e;i++)if(n*i<=t&&n*(i+1)>t)return i;return e-1}},{key:"setupResize",value:function(t){window[(t?"add":"remove")+"EventListener"]("resize",this.onResize,!0)}},{key:"show",value:function(){var t=this;this.setupResize(!0),this.onResize(),setTimeout(function(){return t.target&&t.target.classList.add("active")},1e3/60)}},{key:"hide",value:function(){this.setupResize(!1),this.target.classList.remove("active")}},{key:"updateSwipeable",value:function(t){if(this._gestureDetector){var e=t?"on":"off";this._gestureDetector[e]("drag",this.onDrag),this._gestureDetector[e]("dragstart",this.onDragStart),this._gestureDetector[e]("dragend",this.onDragEnd)}}},{key:"updateAutoRefresh",value:function(t){this._mutationObserver&&(t?this._mutationObserver.observe(this.target,{childList:!0}):this._mutationObserver.disconnect())}},{key:"updateItemSize",value:function(t){this.itemSize=t||"100%",this.refresh()}},{key:"toggleBlocker",value:function(t){this.blocker.style.pointerEvents=t?"auto":"none"}},{key:"_canConsumeGesture",value:function(t){var e=t.direction,n=0===this._scroll&&!this.isOverScrollable(),i=this._scroll===this.maxScroll&&!this.isOverScrollable();return this.isVertical()?"down"===e&&!n||"up"===e&&!i:"right"===e&&!n||"left"===e&&!i}},{key:"onDragStart",value:function(t){var e=this;if(this._ignoreDrag=t.consumed||!Q.isValidGesture(t),!this._ignoreDrag){var n=t.consume;if(t.consume=function(){n&&n(),e._ignoreDrag=!0},this._canConsumeGesture(t.gesture)){var i=t.gesture.center&&t.gesture.center.clientX||0,o=this.getBubbleWidth()||0,r=function(){n&&n(),t.consumed=!0,e._started=!0,e.shouldBlock&&e.toggleBlocker(!0),e._setSwiping(!0),Q.iosPreventScroll(e._gestureDetector)};i<o||i>this.targetSize-o?setImmediate(function(){return!e._ignoreDrag&&r()}):r()}}}},{key:"onDrag",value:function(t){t.gesture&&!this._ignoreDrag&&this._started&&(this._continued=!0,t.stopPropagation(),this._scrollTo(this._scroll-this._getDelta(t),{throttle:!0}))}},{key:"onDragEnd",value:function(t){if(this._started=!1,t.gesture&&!this._ignoreDrag&&this._continued){this._continued=!1,t.stopPropagation();var e=this._scroll-this._getDelta(t),n=this._normalizeScroll(e);e===n?this._startMomentumScroll(e,t):this._killOverScroll(n),this.shouldBlock&&this.toggleBlocker(!1)}else this._ignoreDrag=!0}},{key:"_startMomentumScroll",value:function(t,e){var n=this._getVelocity(e),i=e.gesture.interimDirection===this.dM.dir[this._getDelta(e)<0?0:1],o=this._getAutoScroll(t,n,i),r=Math.abs(o-t)/(n+.01)/1e3;r=Math.min(.25,Math.max(.1,r)),this._changeTo(o,{swipe:!0,animationOptions:{duration:r,timing:"cubic-bezier(.4, .7, .5, 1)"}})}},{key:"_killOverScroll",value:function(t){var e=this;this._scroll=t;var n=this.dM.dir[Number(t>0)],i=function(){return e._changeTo(t,{animationOptions:{duration:.4,timing:"cubic-bezier(.1, .4, .1, 1)"}})};this.overScrollHook({direction:n,killOverScroll:i})||i()}},{key:"_changeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={activeIndex:this.getActiveIndex(t),lastActiveIndex:this._lastActiveIndex,swipe:n.swipe||!1},o=i.activeIndex!==i.lastActiveIndex,r=!!o&&this.preChangeHook(i);return this._scroll=r?this._offset+i.lastActiveIndex*this.itemNumSize:t,this._lastActiveIndex=r?i.lastActiveIndex:i.activeIndex,this._scrollTo(this._scroll,n).then(function(){if(t!==e._scroll||r){if(n.reject)return e._setSwiping(!1),Promise.reject("Canceled")}else e._setSwiping(!1),o&&e.postChangeHook(i)})}},{key:"_scrollTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.throttle){if(t<0)t=this.isOverScrollable()?Math.round(.35*t):0;else{var i=this.maxScroll;i<t&&(t=this.isOverScrollable()?i+Math.round(.35*(t-i)):i)}}var o="none"===n.animation?{}:n.animationOptions;return this.scrollHook&&this.itemNumSize>0&&this.scrollHook((t/this.itemNumSize).toFixed(2),n.animationOptions||{}),new Promise(function(n){return nt(e.target).queue({transform:e._getTransform(t)},o).play(n)})}},{key:"_getAutoScroll",value:function(t,e,n){var i=this.maxScroll,o=this._offset,r=this.itemNumSize;if(!this.isAutoScrollable())return Math.max(0,Math.min(i,t));for(var a=[],s=o;s<i;s+=r)a.push(s);a.push(i);var l=(a=a.sort(function(e,n){return Math.abs(e-t)-Math.abs(n-t)}).filter(function(t,e){return!e||t!==a[e-1]}))[0],u=this._lastActiveIndex*r+o,c=Math.abs(t-u)/r;return c<=this.getAutoScrollRatio(n,e,r)?l=u:c<1&&a[0]===u&&a.length>1&&(l=a[1]),Math.max(0,Math.min(i,l))}},{key:"_reset",value:function(){this._targetSize=this._itemNumSize=void 0}},{key:"_normalizeScroll",value:function(t){return Math.max(Math.min(t,this.maxScroll),0)}},{key:"refresh",value:function(){if(this._reset(),this._updateLayout(),Q.isInteger(this._scroll)){var t=this._normalizeScroll(this._scroll);t!==this._scroll?this._killOverScroll(t):this._changeTo(t)}else this._setupInitialIndex();this.refreshHook()}},{key:"_getDelta",value:function(t){return t.gesture["delta"+this.dM.axis]}},{key:"_getVelocity",value:function(t){return t.gesture["velocity"+this.dM.axis]}},{key:"_getTransform",value:function(t){return"translate3d("+this.dM.t3d[0]+-t+this.dM.t3d[1]+")"}},{key:"_updateLayout",value:function(){this.dM=oo[this.isVertical()?"vertical":"horizontal"],this.target.classList.toggle("ons-swiper-target--vertical",this.isVertical());for(var t=this.target.children[0];t;t=t.nextElementSibling)t.style[this.dM.size.toLowerCase()]=this.itemSize;this.isCentered()&&(this._offset=(this.targetSize-this.itemNumSize)/-2||0)}},{key:"itemCount",get:function(){return this.target.children.length}},{key:"itemNumSize",get:function(){return"number"==typeof this._itemNumSize&&this._itemNumSize==this._itemNumSize||(this._itemNumSize=this._calculateItemSize()),this._itemNumSize}},{key:"maxScroll",get:function(){var t=this.itemCount*this.itemNumSize-this.targetSize;return Math.ceil(t<0?0:t)}},{key:"targetSize",get:function(){return this._targetSize||(this._targetSize=this.target["offset"+this.dM.size]),this._targetSize}}]),t}(),ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this.children[0]&&"ONS-CAROUSEL-ITEM"!==this.children[0].tagName&&this.children[0]||document.createElement("div");if(!t.parentNode){for(;this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}!this.children[1]&&this.appendChild(document.createElement("div")),this.appendChild=this.appendChild.bind(t),this.insertBefore=this.insertBefore.bind(t)}},{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t},getInitialIndex:function(){return t.getAttribute("initial-index")},getAutoScrollRatio:function(){return t.autoScrollRatio},isVertical:function(){return t.vertical},isOverScrollable:function(){return t.overscrollable},isCentered:function(){return t.centered},isAutoScrollable:function(){return t.autoScroll},itemSize:this.itemSize,overScrollHook:this._onOverScroll.bind(this),preChangeHook:this._onChange.bind(this,"prechange"),postChangeHook:this._onChange.bind(this,"postchange"),refreshHook:this._onRefresh.bind(this),scrollHook:function(){return t._onSwipe&&t._onSwipe.apply(t,arguments)}}),n(this,function(){return t._swiper.init({swipeable:t.hasAttribute("swipeable"),autoRefresh:t.hasAttribute("auto-refresh")})}))}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null)}},{key:"attributeChangedCallback",value:function(t,e,n){if(this._swiper)switch(t){case"swipeable":this._swiper.updateSwipeable(this.hasAttribute("swipeable"));break;case"auto-refresh":this._swiper.updateAutoRefresh(this.hasAttribute("auto-refresh"));break;case"item-height":this.vertical&&this._swiper.updateItemSize(this.itemSize);break;case"item-width":this.vertical||this._swiper.updateItemSize(this.itemSize);break;case"direction":this._swiper.refresh()}}},{key:"_show",value:function(){this._swiper.show()}},{key:"_hide",value:function(){this._swiper.hide()}},{key:"_onOverScroll",value:function(t){var e=t.direction,n=t.killOverScroll,i=!1;return Q.triggerElementEvent(this,"overscroll",{carousel:this,activeIndex:this.getActiveIndex(),direction:e,waitToReturn:function(t){i=!0,t.then(n)}}),i}},{key:"_onChange",value:function(t,e){var n=e.activeIndex,i=e.lastActiveIndex;Q.triggerElementEvent(this,t,{carousel:this,activeIndex:n,lastActiveIndex:i})}},{key:"_onRefresh",value:function(){Q.triggerElementEvent(this,"refresh",{carousel:this})}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=_({animation:this.getAttribute("animation"),animationOptions:this.hasAttribute("animation-options")?Q.animationOptionsParse(this.getAttribute("animation-options")):{duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"}},n),this._swiper.setActiveIndex(t,n).then(function(){return n.callback instanceof Function&&n.callback(e),Promise.resolve(e)})}},{key:"getActiveIndex",value:function(){return this._swiper.getActiveIndex()}},{key:"next",value:function(t){return this.setActiveIndex(this.getActiveIndex()+1,t)}},{key:"prev",value:function(t){return this.setActiveIndex(this.getActiveIndex()-1,t)}},{key:"first",value:function(t){return this.setActiveIndex(0,t)}},{key:"last",value:function(t){this.setActiveIndex(Math.max(this.itemCount-1,0),t)}},{key:"refresh",value:function(){this._swiper.refresh()}},{key:"itemCount",get:function(){return this._swiper.itemCount}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"autoScroll",get:function(){return this.hasAttribute("auto-scroll")},set:function(t){return Q.toggleAttribute(this,"auto-scroll",t)}},{key:"vertical",get:function(){return"vertical"===this.getAttribute("direction")}},{key:"itemSize",get:function(){var t=(this.getAttribute("item-"+(this.vertical?"height":"width"))||"").trim();return t.match(/^\d+(px|%)$/)?t:"100%"}},{key:"autoScrollRatio",get:function(){return parseFloat(this.getAttribute("auto-scroll-ratio"))},set:function(t){this.setAttribute("auto-scroll-ratio",t)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(t){return Q.toggleAttribute(this,"disabled",t)}},{key:"overscrollable",get:function(){return this.hasAttribute("overscrollable")},set:function(t){return Q.toggleAttribute(this,"overscrollable",t)}},{key:"centered",get:function(){return this.hasAttribute("centered")},set:function(t){return Q.toggleAttribute(this,"centered",t)}}],[{key:"observedAttributes",get:function(){return["swipeable","auto-refresh","direction","item-height","item-width"]}},{key:"events",get:function(){return["postchange","refresh","overscroll"]}}]),e}();c.Carousel=ao,customElements.define("ons-carousel",ao);var so=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.getAttribute("width")&&t._updateWidth(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"width"===t&&this._updateWidth()}},{key:"_updateWidth",value:function(){var t=this.getAttribute("width");t?(t=t.trim().match(/^\d+$/)?t+"%":t,d(this,{flex:"0 0 "+t,maxWidth:t})):d.clear(this,"flex maxWidth")}}],[{key:"observedAttributes",get:function(){return["width"]}}]),e}();c.Col=so,customElements.define("ons-col",so);var lo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -60%, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)",opacity:1},{transform:"translate3d(-50%, -60%, 0)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),co=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),ho={".dialog":"dialog--*",".dialog-container":"dialog-container--*",".dialog-mask":"dialog-mask--*"},fo={default:function(){return C.isAndroid()?uo:co},slide:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),none:lo},po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:fo,baseClass:lo,baseClassName:"DialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._dialog){var t=document.createElement("div");t.classList.add("dialog");var e=document.createElement("div");for(e.classList.add("dialog-container");this.firstChild;)e.appendChild(this.firstChild);t.appendChild(e),this.appendChild(t)}if(!this._mask){var n=document.createElement("div");n.classList.add("dialog-mask"),this.insertBefore(n,this.firstChild)}this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,this.setAttribute("status-bar-fill",""),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return ho}},{key:"_mask",get:function(){return Q.findChild(this,".dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".dialog")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof lo||Q.throwAnimator("Dialog"),fo[t]=e}},{key:"animators",get:function(){return fo}},{key:"DialogAnimator",get:function(){return lo}}]),e}();c.Dialog=po,customElements.define("ons-dialog",po);var go="fab",mo={"":"fab--*",".fab__icon":"fab--*__icon"},_o=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.hide(),t.classList.add(go),n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),!Q.findChild(this,".fab__icon")){var t=document.createElement("span");t.classList.add("fab__icon"),Q.arrayFrom(this.childNodes).forEach(function(e){e.tagName&&"ons-ripple"===e.tagName.toLowerCase()||t.appendChild(e)}),this.appendChild(t)}this._updateRipple(),B.initModifier(this,mo),this._updatePosition()}},{key:"connectedCallback",value:function(){var t=this;setImmediate(function(){return t.show()})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,go,mo);break;case"modifier":B.onModifierChanged(e,n,this,mo);break;case"ripple":this._updateRipple();break;case"position":this._updatePosition()}}},{key:"_show",value:function(){this.show()}},{key:"_hide",value:function(){var t=this;setImmediate(function(){return t.hide()})}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"show",value:function(){this.toggle(!0)}},{key:"hide",value:function(){this.toggle(!1)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible,e=(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px)":"";d(this,{transform:e+" scale("+Number(t)+")"})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"visible",get:function(){return-1===this.style.transform.indexOf("scale(0)")&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","position","class"]}}]),e}();c.Fab=_o,customElements.define("ons-fab",_o);var vo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._gestureDetector=new st(t,{passive:!0}),t}return b(e,Pi),e}();c.GestureDetector=vo,customElements.define("ons-gesture-detector",vo);var bo="fa",yo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){this._cleanClassAttribute("icon"===t?e:this.getAttribute("icon"),"modifier"===t?e:void 0),this._update()}},{key:"_compile",value:function(){N.prepare(this),this._update()}},{key:"_update",value:function(){var t=this,e=this._buildClassAndStyle(this._parseAttr("icon"),this._parseAttr("size")),n=e.classList,i=e.style;Q.extend(this.style,i),n.forEach(function(e){return t.classList.add(e)})}},{key:"_parseAttr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAttribute("modifier")||"",n=(this.getAttribute(t)||t||"").split(/\s*,\s*/),i=n[0],o=n[1];return o=(o||"").split(/\s*:\s*/),(e&&RegExp("(^|\\s+)"+o[0]+"($|\\s+)","i").test(e)?o[1]:i)||""}},{key:"_cleanClassAttribute",value:function(t,e){var n=this,i=this._prefixIcon(this._parseAttr(t,e)),o=i.className,r=i.prefix,a=o!==r?"|"+r+"$|"+r+"-":"|"+o+"$"||"",s=new RegExp("^(fa$|fa-|ion-|zmdi$|zmdi-|ons-icon--"+a+")");Q.arrayFrom(this.classList).filter(function(t){return s.test(t)}).forEach(function(t){return n.classList.remove(t)})}},{key:"_prefixIcon",value:function(t){var e=bo+(bo?"-":"")+t;return{className:e,prefix:e.split("-")[0]}}},{key:"_buildClassAndStyle",value:function(t,e){var n=["ons-icon"],i={};if(0===t.indexOf("ion-"))n.push(t),n.push("ons-icon--ion");else if(0===t.indexOf("fa-"))n.push(t),n.push("fa");else if(0===t.indexOf("md-"))n.push("zmdi"),n.push("zmdi-"+t.split(/-(.+)?/)[1]);else{var o=this._prefixIcon(t),r=o.className,a=o.prefix;a&&n.push(a),r&&n.push(r)}return e.match(/^[1-5]x|lg$/)?(n.push("ons-icon--"+e),this.style.removeProperty("font-size")):i.fontSize=e,{classList:n,style:i}}}],[{key:"setAutoPrefix",value:function(t){bo=t?"string"==typeof t&&t||"fa":""}},{key:"observedAttributes",get:function(){return["icon","size","modifier","class"]}}]),e}();c.Icon=yo,customElements.define("ons-icon",yo);var ko=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;p(this,t),"object"===(void 0===e?"undefined":f(e))&&null!==e||Q.throw('"delegate" parameter must be an object'),this._userDelegate=e,n instanceof Element||null===n||Q.throw('"templateElement" parameter must be an instance of Element or null'),this._templateElement=n}return g(t,[{key:"hasRenderFunction",value:function(){return this._userDelegate._render instanceof Function}},{key:"_render",value:function(){this._userDelegate._render.apply(this._userDelegate,arguments)}},{key:"loadItemElement",value:function(t,e){if(this._userDelegate.loadItemElement instanceof Function)this._userDelegate.loadItemElement(t,e);else{var n=this._userDelegate.createItemContent(t,this._templateElement);n instanceof Element||Q.throw('"createItemContent" must return an instance of Element'),e({element:n})}}},{key:"countItems",value:function(){var t=this._userDelegate.countItems();return"number"!=typeof t&&Q.throw('"countItems" must return a number'),t}},{key:"updateItem",value:function(t,e){this._userDelegate.updateItemContent instanceof Function&&this._userDelegate.updateItemContent(t,e)}},{key:"calculateItemHeight",value:function(t){if(this._userDelegate.calculateItemHeight instanceof Function){var e=this._userDelegate.calculateItemHeight(t);return"number"!=typeof e&&Q.throw('"calculateItemHeight" must return a number'),e}return 0}},{key:"destroyItem",value:function(t,e){this._userDelegate.destroyItem instanceof Function&&this._userDelegate.destroyItem(t,e)}},{key:"destroy",value:function(){this._userDelegate.destroy instanceof Function&&this._userDelegate.destroy(),this._userDelegate=this._templateElement=null}},{key:"itemHeight",get:function(){return this._userDelegate.itemHeight}}]),t}(),wo=function(){function t(e,n){p(this,t),n instanceof ko||Q.throw('"delegate" parameter must be an instance of LazyRepeatDelegate'),this._wrapperElement=e,this._delegate=n,this._insertIndex=this._wrapperElement.children[0]&&"ONS-LAZY-REPEAT"===this._wrapperElement.children[0].tagName?1:0,"ons-list"===e.tagName.toLowerCase()&&e.classList.add("lazy-list"),this._pageContent=this._findPageContentElement(e),this._pageContent||Q.throw("LazyRepeat must be descendant of a Page element"),this.lastScrollTop=this._pageContent.scrollTop,this.padding=0,this._topPositions=[0],this._renderedItems={},this._delegate.itemHeight||this._delegate.calculateItemHeight(0)||(this._unknownItemHeight=!0),this._addEventListeners(),this._onChange()}return g(t,[{key:"_findPageContentElement",value:function(t){var e=Q.findParent(t,".page__content");if(e)return e;var n=Q.findParent(t,"ons-page");if(n){var i=Q.findChild(n,".content");if(i)return i}return null}},{key:"_checkItemHeight",value:function(t){var e=this;this._delegate.loadItemElement(0,function(n){e._unknownItemHeight||Q.throw("Invalid state"),e._wrapperElement.appendChild(n.element);var i=function(){e._delegate.destroyItem(0,n),n.element&&n.element.remove(),delete e._unknownItemHeight,t()};e._itemHeight=n.element.offsetHeight,e._itemHeight>0?i():(e._wrapperElement.style.visibility="hidden",n.element.style.visibility="hidden",setImmediate(function(){e._itemHeight=n.element.offsetHeight,0==e._itemHeight&&Q.throw('Invalid state: "itemHeight" must be greater than zero'),e._wrapperElement.style.visibility="",i()}))})}},{key:"_countItems",value:function(){return this._delegate.countItems()}},{key:"_getItemHeight",value:function(t){return this._renderedItems.hasOwnProperty(t)?(this._renderedItems[t].hasOwnProperty("height")||(this._renderedItems[t].height=this._renderedItems[t].element.offsetHeight),this._renderedItems[t].height):this._topPositions[t+1]&&this._topPositions[t]?this._topPositions[t+1]-this._topPositions[t]:this.staticItemHeight||this._delegate.calculateItemHeight(t)}},{key:"_calculateRenderedHeight",value:function(){var t=this;return Object.keys(this._renderedItems).reduce(function(e,n){return e+t._getItemHeight(+n)},0)}},{key:"_onChange",value:function(){this._render()}},{key:"_lastItemRendered",value:function(){return Math.max.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"_firstItemRendered",value:function(){return Math.min.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"refresh",value:function(){var t={forceScrollDown:!0},e=Math.min(this._lastItemRendered(),this._countItems()-1),n=this._firstItemRendered();Q.isInteger(e)&&(t.forceLastIndex=e),Q.isInteger(n)&&(this._wrapperElement.style.height=this._topPositions[n]+this._calculateRenderedHeight()+"px",this.padding=this._topPositions[n],t.forceFirstIndex=n),this._removeAllElements(),this._render(t),this._wrapperElement.style.height="inherit"}},{key:"_render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.forceScrollDown,i=void 0!==n&&n,o=e.forceFirstIndex,r=e.forceLastIndex;if(this._unknownItemHeight)return this._checkItemHeight(this._render.bind(this,arguments[0]));var a=!i&&this.lastScrollTop>this._pageContent.scrollTop;this.lastScrollTop=this._pageContent.scrollTop;for(var s={},l=this._wrapperElement.getBoundingClientRect().top,u=4*window.innerHeight-l,c=this._countItems(),h=o||Math.max(0,this._calculateStartIndex(l)-30),d=h,f=this._topPositions[d];d<c&&f<u;d++)d>=this._topPositions.length&&(this._topPositions.length+=100),this._topPositions[d]=f,f+=this._getItemHeight(d);if(this._delegate.hasRenderFunction&&this._delegate.hasRenderFunction())return this._delegate._render(h,d,function(){t.padding=t._topPositions[h]});if(a)for(var p=d-1;p>=h;p--)s[p]=!0,this._renderElement(p,a);else for(var g=r||Math.max.apply(Math,[d-1].concat(w(Object.keys(this._renderedItems)))),m=h;m<=g;m++)s[m]=!0,this._renderElement(m,a);Object.keys(this._renderedItems).forEach(function(e){return s[e]||t._removeElement(e,a)})}},{key:"_renderElement",value:function(t,e){var n=this,i=this._renderedItems[t];i?this._delegate.updateItem(t,i):this._delegate.loadItemElement(t,function(i){e?(n._wrapperElement.insertBefore(i.element,n._wrapperElement.children[n._insertIndex]),n.padding=n._topPositions[t],i.height=n._topPositions[t+1]-n._topPositions[t]):n._wrapperElement.appendChild(i.element),n._renderedItems[t]=i})}},{key:"_removeElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=+t;var n=this._renderedItems[t];this._delegate.destroyItem(t,n),e?this._topPositions[t+1]=void 0:this.padding=this.padding+this._getItemHeight(t),n.element.parentElement&&n.element.parentElement.removeChild(n.element),delete this._renderedItems[t]}},{key:"_removeAllElements",value:function(){var t=this;Object.keys(this._renderedItems).forEach(function(e){return t._removeElement(e)})}},{key:"_recalculateTopPositions",value:function(t,e){for(var n=t;n<=e;n++)this._topPositions[n+1]=this._topPositions[n]+this._getItemHeight(n)}},{key:"_calculateStartIndex",value:function(t){var e=this._firstItemRendered(),n=this._lastItemRendered();this._recalculateTopPositions(e,n);for(var i=0,o=this._countItems()-1;;){var r=Math.floor((i+o)/2),a=t+this._topPositions[r];if(o<i)return 0;if(a<=0&&a+this._getItemHeight(r)>0)return r;isNaN(a)||a>=0?o=r-1:i=r+1}}},{key:"_debounce",value:function(t,e,n){var i=void 0;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),a?t.apply(this,arguments):i=setTimeout(function(){i=null,t.apply(o,r)},e)}}},{key:"_doubleFireOnTouchend",value:function(){this._render(),this._debounce(this._render.bind(this),100)}},{key:"_addEventListeners",value:function(){Q.bindListeners(this,["_onChange","_doubleFireOnTouchend"]),C.isIOS()&&(this._boundOnChange=this._debounce(this._boundOnChange,30)),this._pageContent.addEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.addEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.addEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.addEventListener("resize",this._boundOnChange,!0)}},{key:"_removeEventListeners",value:function(){this._pageContent.removeEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.removeEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.removeEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.removeEventListener("resize",this._boundOnChange,!0)}},{key:"destroy",value:function(){this._removeAllElements(),this._delegate.destroy(),this._parentElement=this._delegate=this._renderedItems=null,this._removeEventListeners()}},{key:"padding",get:function(){return parseInt(this._wrapperElement.style.paddingTop,10)},set:function(t){this._wrapperElement.style.paddingTop=t+"px"}},{key:"staticItemHeight",get:function(){return this._delegate.itemHeight||this._itemHeight}}]),t}(),Eo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.hasAttribute("delegate")&&(this.delegate=window[this.getAttribute("delegate")])}},{key:"refresh",value:function(){this._lazyRepeatProvider&&this._lazyRepeatProvider.refresh()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"disconnectedCallback",value:function(){this._lazyRepeatProvider&&(this._lazyRepeatProvider.destroy(),this._lazyRepeatProvider=null)}},{key:"delegate",set:function(t){this._lazyRepeatProvider&&this._lazyRepeatProvider.destroy(),!this._templateElement&&this.children[0]&&(this._templateElement=this.removeChild(this.children[0]));var e=new ko(t,this._templateElement||null);this._lazyRepeatProvider=new wo(this.parentElement,e)},get:function(){Q.throw("No delegate getter")}}]),e}();P.LazyRepeatDelegate=ko,P.LazyRepeatProvider=wo,c.LazyRepeat=Eo,customElements.define("ons-lazy-repeat",Eo);var Co={"":"list-header--*"},Ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-header"),B.initModifier(this,Co)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-header",Co);break;case"modifier":B.onModifierChanged(e,n,this,Co)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListHeader=Ao,customElements.define("ons-list-header",Ao);var So={"":"list-title--*"},Po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-title"),B.initModifier(this,So)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-title",So);break;case"modifier":B.onModifierChanged(e,n,this,So)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListTitle=Po,customElements.define("ons-list-title",Po);var Oo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"showExpansion",value:function(t,e){e()}},{key:"hideExpansion",value:function(t,e){e()}}]),e}(),xo={".list-item":"list-item--*",".list-item__left":"list-item--*__left",".list-item__center":"list-item--*__center",".list-item__right":"list-item--*__right",".list-item__label":"list-item--*__label",".list-item__title":"list-item--*__title",".list-item__subtitle":"list-item--*__subtitle",".list-item__thumbnail":"list-item--*__thumbnail",".list-item__icon":"list-item--*__icon"},To={default:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Oo),g(e,[{key:"showExpansion",value:function(t,e){this._animateExpansion(t,!0,e)}},{key:"hideExpansion",value:function(t,e){this._animateExpansion(t,!1,e)}},{key:"_animateExpansion",value:function(t,e,n){var i,o=t.expandableContent.style.height,r=t.expandableContent.style.display;t.expandableContent.style.height="auto",t.expandableContent.style.display="block";var a=window.getComputedStyle(t.expandableContent),s=[{height:0,paddingTop:0,paddingBottom:0},{height:a.height,paddingTop:a.paddingTop,paddingBottom:a.paddingBottom}],l=[{transform:"rotate(45deg)"},{transform:"rotate(225deg)"}];if(t.expandableContent.style.height=o,(i=nt(t.expandableContent,{duration:this.duration,property:"height padding-top padding-bottom"})).default.apply(i,w(e?s:s.reverse())).play(function(){t.expandableContent.style.display=r,n&&n()}),t.expandChevron){var u;(u=nt(t.expandChevron,{duration:this.duration,property:"transform"})).default.apply(u,w(e?l:l.reverse())).play()}}}]),e}(),none:Oo},Lo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._animatorFactory=t._updateAnimatorFactory(),t.toggleExpansion=t.toggleExpansion.bind(t);var i=/^ons-(?!col$|row$|if$)/i;return t._shouldIgnoreTap=function(t){return t.hasAttribute("prevent-tap")||i.test(t.tagName)},t.show=t.showExpansion,t.hide=t.hideExpansion,n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-item"),this.hasAttribute("expandable")&&this.classList.add("list-item--expandable");for(var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,r=Q.getAllChildNodes(this),a=0;a<r.length;a++){var s=r[a];s.classList.contains("left")?(s.classList.add("list-item__left"),t=s):s.classList.contains("center")?e=s:s.classList.contains("right")?(s.classList.add("list-item__right"),n=s):s.classList.contains("top")?(s.classList.add("list-item__top"),i=s):s.classList.contains("expandable-content")&&(s.classList.add("list-item__expandable-content"),o=s)}if(!n&&this.hasAttribute("expandable")){(n=document.createElement("div")).classList.add("list-item__right","right");var l=document.createElement("span");l.classList.add("list-item__expand-chevron"),n.appendChild(l)}if(!e){if(e=document.createElement("div"),t||n||o)for(var u=this.childNodes.length-1;u>=0;u--){var c=this.childNodes[u];c!==t&&c!==n&&c!==o&&"ONS-RIPPLE"!==c.tagName&&e.insertBefore(c,e.firstChild)}else for(;this.childNodes[0];)e.appendChild(this.childNodes[0]);o||this.insertBefore(e,n||null)}e.classList.add("center","list-item__center"),o&&(this._top=i||document.createElement("div"),this._top.classList.add("top","list-item__top"),this.appendChild(this._top),this._top.appendChild(e),t&&this._top.appendChild(t),n&&this._top.appendChild(n)),Q.updateRipple(this),B.initModifier(this,xo)}},{key:"showExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!0,this._expanding=!0;this._animatorFactory.newAnimator().showExpansion(this,function(){t.classList.add("expanded"),t._expanding=!1})}}},{key:"hideExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!1,this._expanding=!0;this._animatorFactory.newAnimator().hideExpansion(this,function(){t.classList.remove("expanded"),t._expanding=!1})}}},{key:"toggleExpansion",value:function(){this.classList.contains("expanded")?this.hideExpansion():this.showExpansion()}},{key:"_updateAnimatorFactory",value:function(){return new O({animators:To,baseClass:Oo,baseClassName:"ListItemAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-item",xo);break;case"modifier":B.onModifierChanged(e,n,this,xo);break;case"ripple":Q.updateRipple(this);break;case"animation":this._animatorFactory=this._updateAnimatorFactory()}}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._setupListeners(!0),t._originalBackgroundColor=t.style.backgroundColor,t.tapped=!1})}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouch,{passive:!0}),Q[e](this,"touchmove",this._onRelease,{passive:!0}),this[e]("touchcancel",this._onRelease),this[e]("touchend",this._onRelease),this[e]("touchleave",this._onRelease),this[e]("drag",this._onDrag),this[e]("mousedown",this._onTouch),this[e]("mouseup",this._onRelease),this[e]("mouseout",this._onRelease),this._top&&this._top[e]("click",this.toggleExpansion)}},{key:"_onDrag",value:function(t){var e=t.gesture;this.hasAttribute("lock-on-drag")&&["left","right"].indexOf(e.direction)>-1&&e.preventDefault()}},{key:"_onTouch",value:function(t){var e=this;if(!(this.tapped||this!==t.target&&(this._shouldIgnoreTap(t.target)||Q.findParent(t.target,this._shouldIgnoreTap,function(t){return t===e})))){this.tapped=!0;var n={transition:"background-color 0.0s linear 0.02s, box-shadow 0.0s linear 0.02s"};this.hasAttribute("tappable")&&(this.style.backgroundColor&&(this._originalBackgroundColor=this.style.backgroundColor),n.backgroundColor=this.getAttribute("tap-background-color")||"#d9d9d9",n.boxShadow="0px -1px 0px 0px "+n.backgroundColor),d(this,n)}}},{key:"_onRelease",value:function(){this.tapped=!1,this.style.backgroundColor=this._originalBackgroundColor||"",d.clear(this,"transition boxShadow")}},{key:"expandableContent",get:function(){return this.querySelector(".list-item__expandable-content")}},{key:"expandChevron",get:function(){return this.querySelector(".list-item__expand-chevron")}}],[{key:"observedAttributes",get:function(){return["modifier","class","ripple","animation"]}}]),e}();c.ListItem=Lo,customElements.define("ons-list-item",Lo);var Mo={"":"list--*"},Do=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list"),B.initModifier(this,Mo)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list",Mo);break;case"modifier":B.onModifierChanged(e,n,this,Mo)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.List=Do,customElements.define("ons-list",Do);var Io=["autocapitalize","autocomplete","autocorrect","autofocus","disabled","inputmode","max","maxlength","min","minlength","name","pattern","placeholder","readonly","required","size","step","validator","value"],No=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t._boundDelegateEvent=t._delegateEvent.bind(t),t}return b(e,Pi),g(e,[{key:"_update",value:function(){}},{key:"_scheme",get:function(){Q.throwMember()}},{key:"_template",get:function(){Q.throwMember()}},{key:"type",get:function(){Q.throwMember()}}]),g(e,[{key:"_compile",value:function(){N.prepare(this),this._defaultClassName&&this.classList.add(this._defaultClassName),0===this.children.length&&(this.appendChild(Q.createFragment(this._template)),this._setInputId(),this._updateBoundAttributes(),B.initModifier(this,this._scheme))}},{key:"_updateBoundAttributes",value:function(){var t=this;Io.forEach(function(e){t.hasAttribute(e)?t._input.setAttribute(e,t.getAttribute(e)):t._input.removeAttribute(e)}),this._update()}},{key:"_delegateEvent",value:function(t){var e=new CustomEvent(t.type,{bubbles:!1,cancelable:!0});return this.dispatchEvent(e)}},{key:"_setInputId",value:function(){this.hasAttribute("input-id")&&(this._input.id=this.getAttribute("input-id"))}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("focus",t._boundDelegateEvent),t._input.addEventListener("blur",t._boundDelegateEvent)})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("focus",t._boundDelegateEvent),t._input.removeEventListener("blur",t._boundDelegateEvent)})}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,o._scheme)});break;case"input-id":n(this,function(){return o._setInputId()});break;case"class":Q.restoreClass(this,this._defaultClassName,this._scheme)}Io.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_defaultClassName",get:function(){return""}},{key:"_input",get:function(){return this.querySelector("input")}},{key:"value",get:function(){return null===this._input?this.getAttribute("value"):this._input.value},set:function(t){var e=this;n(this,function(){t instanceof Date&&(t=t.toISOString().substring(0,10)),e._input.value=t,e._update()})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["modifier","input-id","class"].concat(Io)}}]),e}(),Bo={".text-input":"text-input--*",".text-input__label":"text-input--*__label"},jo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnInput=t._update.bind(t),t._boundOnFocusin=t._update.bind(t),t}return b(e,No),g(e,[{key:"_update",value:function(){this._updateLabel(),this._updateLabelClass()}},{key:"_updateLabel",value:function(){var t=this.getAttribute("placeholder")||"";void 0!==this._helper.textContent?this._helper.textContent=t:this._helper.innerText=t}},{key:"_updateLabelClass",value:function(){""===this.value?this._helper.classList.remove("text-input--material__label--active"):this._helper.classList.add("text-input--material__label--active")}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),n(this,function(){t._input.addEventListener("input",t._boundOnInput),t._input.addEventListener("focusin",t._boundOnFocusin)});var i=this.getAttribute("type");["checkbox","radio"].indexOf(i)>=0&&Q.warn('Warn: <ons-input type="'+i+'"> is deprecated since v2.4.0. Use <ons-'+i+"> instead.")}},{key:"disconnectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),n(this,function(){t._input.removeEventListener("input",t._boundOnInput),t._input.removeEventListener("focusin",t._boundOnFocusin)})}},{key:"attributeChangedCallback",value:function(t,i,o){var r=this;switch(t){case"type":n(this,function(){return r._input.setAttribute("type",r.type)});break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,i,o)}}},{key:"_scheme",get:function(){return Bo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="text-input">\n      <span class="text-input__label"></span>\n    '}},{key:"type",get:function(){var t=this.getAttribute("type");return["checkbox","radio"].indexOf(t)<0&&t||"text"}},{key:"_helper",get:function(){return this.querySelector("span")}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["type"])}}]),e}();c.Input=jo,customElements.define("ons-input",jo);var Ho=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&util.throwAbstract(),n(t,function(){t.attributeChangedCallback("checked",null,t.getAttribute("checked"))}),t}return b(e,No),g(e,[{key:"attributeChangedCallback",value:function(t,n,i){switch(t){case"checked":this.checked=null!==i;break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <span class="'+this._defaultClassName+'__checkmark"></span>\n    '}},{key:"_helper",get:function(){return this.querySelector("span")}},{key:"checked",get:function(){return this._input.checked},set:function(t){var e=this;n(this,function(){e._input.checked=t})}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["checked"])}}]),e}(),Ro={".checkbox":"checkbox--*",".checkbox__input":"checkbox--*__input",".checkbox__checkmark":"checkbox--*__checkmark"},Fo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return Ro}},{key:"_defaultClassName",get:function(){return"checkbox"}},{key:"type",get:function(){return"checkbox"}}]),e}();c.Checkbox=Fo,customElements.define("ons-checkbox",Fo);var qo={".radio-button":"radio-button--*",".radio-button__input":"radio-button--*__input",".radio-button__checkmark":"radio-button--*__checkmark"},zo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return qo}},{key:"_defaultClassName",get:function(){return"radio-button"}},{key:"type",get:function(){return"radio"}}]),e}();c.Radio=zo,customElements.define("ons-radio",zo);var Vo={".search-input":"search-input--*"},Wo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,No),g(e,[{key:"_scheme",get:function(){return Vo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="search-input">\n    '}},{key:"type",get:function(){return"search"}}]),e}();c.SearchInput=Wo,customElements.define("ons-search-input",Wo);var Uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Xo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),Yo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier( .1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}).queue(function(t){e(),t()}).play()}}]),e}(),Go={"":"modal--*",modal__content:"modal--*__content"},$o={default:Uo,fade:Xo,lift:Yo,none:Uo},Ko=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(){},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:$o,baseClass:Uo,baseClassName:"ModalAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(this.style.display="none",this.style.zIndex=10001,this.classList.add("modal"),!Q.findChild(this,".modal__content")){var t=document.createElement("div");for(t.classList.add("modal__content");this.childNodes[0];){var e=this.childNodes[0];this.removeChild(e),t.insertBefore(e,null)}this.appendChild(t)}B.initModifier(this,this._scheme)}},{key:"_toggleStyle",value:function(t){this.style.display=t?"table":"none"}},{key:"connectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,n,i){"class"===t?Q.restoreClass(this,"modal",Go):v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Go}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Uo||Q.throwAnimator("Modal"),$o[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["class"])}},{key:"animators",get:function(){return $o}},{key:"ModalAnimator",get:function(){return Uo}}]),e}();c.Modal=Ko,customElements.define("ons-modal",Ko);var Qo=function(){function t(e){var n=this;p(this,t),"element ignoreSwipe isInitialState onDragCallback swipeMax swipeMin swipeMid".split(/\s+/).forEach(function(t){return n[t]=e[t]}),this.elementHandler=e.elementHandler||e.element,this.getThreshold=e.getThreshold||function(){return.5},this.getSide=e.getSide||function(){return"left"},this.handleGesture=this.handleGesture.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element.hasAttribute("swipeable");this.gestureDetector||(this.gestureDetector=new st(this.elementHandler,{dragMinDistance:1,passive:!this._shouldFixScroll}));var e=t?"on":"off";this.gestureDetector[e]("drag dragstart dragend",this.handleGesture)}},{key:"handleGesture",value:function(t){t.gesture&&("dragstart"===t.type?this.onDragStart(t):this._ignoreDrag||("dragend"===t.type?this.onDragEnd(t):this.onDrag(t)))}},{key:"onDragStart",value:function(t){var e=this;this._ignoreDrag=t.consumed||!Q.isValidGesture(t)||this.ignoreSwipe(t,"left"===e.getSide()?t.gesture.center.clientX:window.innerWidth-t.gesture.center.clientX),this._ignoreDrag||(t.consume&&t.consume(),t.consumed=!0,this._width=function(t){var e=[parseInt(t,10),/px/.test(t)],n=e[0];return e[1]?n:Math.round(document.body.offsetWidth*n/100)}(this.element.style.width||"100%"),this._startDistance=this._distance=this.isInitialState instanceof Function&&!this.isInitialState()?this._width:0,Q.iosPreventScroll(this.gestureDetector))}},{key:"onDrag",value:function(t){t.stopPropagation();var e="left"===this.getSide()?t.gesture.deltaX:-t.gesture.deltaX,n=Math.max(0,Math.min(this._width,this._startDistance+e));n!==this._distance&&(this._distance=n,this.swipeMid(this._distance,this._width))}},{key:"onDragEnd",value:function(t){t.stopPropagation();var e=t.gesture.interimDirection;this.getSide()!==e&&this._distance>this._width*this.getThreshold()?this.swipeMax():this.swipeMin()}},{key:"dispose",value:function(){this.gestureDetector&&this.gestureDetector.dispose(),this.gestureDetector=this.element=this.elementHandler=null}}]),t}(),Jo=function(t){function e(t){return p(this,e),t=Q.extend({timing:"linear",duration:"0.4",delay:"0"},t||{}),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Ti),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}},{key:"block",value:function(t){var e=Q.createElement('\n      <div style="position: absolute; background-color: transparent; width: 100%; height: 100%; z-index: 100000"></div>\n    ');return t.parentNode.appendChild(e),function(){return e.remove()}}}]),e}(),Zo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.durationRestore,i=void 0===n?.1:n,o=t.durationSwipe,r=void 0===o?.15:o,a=t.timingSwipe,s=void 0===a?"linear":a,l=y(t,["durationRestore","durationSwipe","timingSwipe"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({},l)));return u.constructor===e&&Q.throwAbstract(),u.durationRestore=i,u.durationSwipe=r,u.timingSwipe=s,u.optSwipe={timing:s,duration:r},u.optRestore={timing:s,duration:i},u.swipeShadow=Q.createElement('<div style="position: absolute; height: 100%; width: 12px; right: 100%; top: 0; bottom: 0; z-index: -1;background: linear-gradient(to right, transparent 0, rgba(0,0,0,.04) 40%, rgba(0,0,0,.12) 80%, rgba(0,0,0,.16) 100%);"></div>'),u.isDragStart=!0,u}return b(e,Jo),g(e,null,[{key:"swipeable",get:function(){return!0}}]),g(e,[{key:"_decompose",value:function(){Q.throwMember()}},{key:"_shouldAnimateToolbar",value:function(){Q.throwMember()}},{key:"_calculateDelta",value:function(){Q.throwMember()}},{key:"_dragStartSetup",value:function(t,n){this.isDragStart=!1,this.unblock=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,n),t.parentElement.insertBefore(this.backgroundMask,t),this.target={enter:Q.findToolbarPage(t)||t,leave:Q.findToolbarPage(n)||n},this.decomp={enter:this._decompose(this.target.enter),leave:this._decompose(this.target.leave)},this.delta=this._calculateDelta(n,this.decomp.leave),this.shouldAnimateToolbar=this._shouldAnimateToolbar(this.target.enter,this.target.leave),this.shouldAnimateToolbar?(this.swipeShadow.style.top=this.decomp.leave.toolbar.offsetHeight+"px",this.target.leave.appendChild(this.swipeShadow),this._saveStyle(this.target.enter,this.target.leave)):(n.appendChild(this.swipeShadow),this._saveStyle(t,n)),n.classList.add("overflow-visible"),this.overflowElement=n,this.decomp.leave.content.classList.add("content-swiping")}},{key:"translate",value:function(t,e,n,i){this.isSwiping=!0,"none"===n.style.display&&(n.style.display=""),this.isDragStart&&(this.maxWidth=e,this._dragStartSetup(n,i));var o=(t-e)/e;this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d("+this.delta.title*o+"px, 0, 0)",opacity:1+o}),nt(this.decomp.enter.backButtonLabel).queue({opacity:1+10*o/100,transform:"translate3d("+this.delta.label*o+"px, 0, 0)"}),nt(this.decomp.enter.other).queue({opacity:1+o}),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(this.decomp.leave.toolbar).queue({opacity:-1*o}),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d("+125*(1+o)+"%, 0, 0)"}),nt(this.decomp.leave.backButtonLabel).queue({opacity:-1*o,transform:"translate3d("+this.delta.title*(1+o)+"px, 0, 0)"}),nt(this.swipeShadow).queue({opacity:-1*o})):nt.runAll(nt(i).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(n).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.swipeShadow).queue({opacity:-1*o}))}},{key:"restore",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(-25%, 0, 0)",opacity:.9},this.optRestore),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(-"+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe,opacity:0}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(-"+this.delta.label+"px, 0, 0)"},this.optRestore),nt(this.decomp.enter.other).queue({opacity:0},this.optRestore),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.toolbar).queue({opacity:1},this.optRestore),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.backButtonLabel).queue({opacity:1,transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0},this.optRestore).queue(function(e){i._reset(i.target.enter,i.target.leave),t.style.display="none",n&&n(),e()})):nt.runAll(nt(t).queue({transform:"translate3D(-25%, 0, 0)",opacity:.9},this.optRestore),nt(e).queue({transform:"translate3D(0, 0, 0)"},this.optRestore).queue(function(o){i._reset(t,e),t.style.display="none",n&&n(),o()})))}},{key:"popSwipe",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(0, 0, 0)",opacity:1},this.optSwipe),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe,opacity:1}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(0, 0, 0)"},this.optSwipe),nt(this.decomp.enter.other).queue({opacity:1},this.optSwipe),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background]).queue({transform:"translate3d(100%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.toolbar).queue({opacity:0},this.optSwipe),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(125%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.backButtonLabel).queue({opacity:0,transform:"translate3d("+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0,transform:"translate3d("+this.maxWidth+"px, 0, 0)"},this.optSwipe).queue(function(t){i._reset(i.target.enter,i.target.leave),n&&n(),t()})):nt.runAll(nt(t).queue({transform:"translate3D(0, 0, 0)",opacity:1},this.optSwipe),nt(e).queue({transform:"translate3D(100%, 0, 0)"},this.optSwipe).queue(function(o){i._reset(t,e),n&&n(),o()})))}},{key:"_saveStyle",value:function(){var t=this;this._savedStyle=new WeakMap;for(var e=function(e){return t._savedStyle.set(e,e.getAttribute("style"))},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_restoreStyle",value:function(){for(var t=this,e=function(e){null===t._savedStyle.get(e)?e.removeAttribute("style"):e.setAttribute("style",t._savedStyle.get(e)),t._savedStyle.delete(e)},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_reset",value:function(){this.isSwiping=!1,this._savedStyle&&this._restoreStyle.apply(this,arguments),this.unblock&&this.unblock(),this.swipeShadow.remove(),this.backgroundMask.remove(),this.overflowElement.classList.remove("overflow-visible"),this.decomp.leave.content.classList.remove("content-swiping"),this.decomp=this.target=this.overflowElement=this._savedStyle=null,this.isDragStart=!0}}]),e}(),tr=function(){return"translate3d("+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)+", "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+")"},er=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.3, .4, 0, .9)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a,l=y(t,["timing","delay","duration"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({timing:i,delay:r,duration:s},l)));return u.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black; z-index: 2"></div>'),u}return b(e,Zo),g(e,[{key:"_decompose",value:function(t){var e=t._getToolbarElement(),n=e._getToolbarLeftItemsElement(),i=e._getToolbarRightItemsElement(),o=function(t){for(var e=[],n=0;n<t.length;n++)"ons-back-button"!==t[n].nodeName.toLowerCase()&&e.push(t[n]);return e},r=[].concat(0===n.children.length?n:o(n.children)).concat(0===i.children.length?i:o(i.children));return{toolbarCenter:e._getToolbarCenterItemsElement(),backButtonIcon:e._getToolbarBackButtonIconElement(),backButtonLabel:e._getToolbarBackButtonLabelElement(),other:r,content:t._getContentElement(),background:t._getBackgroundElement(),toolbar:e,bottomToolbar:t._getBottomToolbarElement()}}},{key:"_shouldAnimateToolbar",value:function(t,e){var n=t._canAnimateToolbar()&&e._canAnimateToolbar(),i=t._getToolbarElement(),o=e._getToolbarElement(),r=i.hasAttribute("static")||o.hasAttribute("static"),a=Q.hasModifier(i,"material")||Q.hasModifier(o,"material"),s=Q.hasModifier(i,"transparent")||Q.hasModifier(o,"transparent");return n&&!r&&!a&&!s}},{key:"_calculateDelta",value:function(t,e){var n=void 0,i=void 0,o=t.getBoundingClientRect();if(e.backButtonLabel.classList.contains("back-button__label")){var r=e.backButtonLabel.getBoundingClientRect();n=Math.round(o.width/2-r.width/2-r.left)}else n=Math.round(o.width/2*.6);return e.backButtonIcon.classList.contains("back-button__icon")&&(i=e.backButtonIcon.getBoundingClientRect().right-2),{title:n,label:i}}},{key:"push",value:function(t,i,o){var r=this;this.backgroundMask.remove(),i.parentNode.insertBefore(this.backgroundMask,i);var a=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);n(t,function(){var e=Q.findToolbarPage(t)||t,n=Q.findToolbarPage(i)||i,s=r._decompose(e),l=r._decompose(n),u=r._calculateDelta(i,s);r._shouldAnimateToolbar(e,n)?nt.runAll(nt([s.content,s.bottomToolbar,s.background],r.def).default({transform:tr("100%")},{transform:tr()}),nt(s.toolbar,r.def).default({opacity:0},{opacity:1}),nt(s.toolbarCenter,r.def).default({transform:tr("125%"),opacity:1},{transform:tr(),opacity:1}),nt(s.backButtonLabel,r.def).default({transform:tr(u.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(s.other,r.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([l.content,l.bottomToolbar,l.background],r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}),nt(l.toolbarCenter,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.title+"px"),opacity:0,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(l.backButtonLabel,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.label+"px"),opacity:0}),nt(l.other,r.def).default({opacity:1},{css:{opacity:0},timing:"linear"})):nt.runAll(nt(t,r.def).default({transform:tr("100%")},{transform:tr()}),nt(i,r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}))})}},{key:"pop",value:function(t,n,i){var o=this;if(this.isSwiping)return this.popSwipe(t,n,i);this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=Q.findToolbarPage(t)||t,s=Q.findToolbarPage(n)||n,l=this._decompose(a),u=this._decompose(s),c=this._calculateDelta(n,u);this._shouldAnimateToolbar(a,s)?nt.runAll(nt([l.content,l.bottomToolbar,l.background],this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(l.toolbarCenter,this.def).default({transform:tr("-"+c.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing}),nt(l.backButtonLabel,this.def).default({transform:tr("-"+c.label+"px")},{transform:tr()}),nt(l.other,this.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([u.content,u.bottomToolbar,u.background],this.def).default({transform:tr()},{transform:tr("100%")}).wait(0).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(u.toolbar,this.def).default({opacity:1},{opacity:0}),nt(u.toolbarCenter,this.def).default({transform:tr()},{transform:tr("125%")}),nt(u.backButtonLabel,this.def).default({transform:tr(),opacity:1},{transform:tr(c.title+"px"),opacity:0,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing})):nt.runAll(nt(t,this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(n,this.def).default({transform:tr()},{transform:tr("100%")}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}}]),e}(),nr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background: linear-gradient(black, white);"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 100%, 0)"},{transform:"translate3D(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, -10%, 0)",opacity:.9}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, -43px, 0)",opacity:.9},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)"},{transform:"translate3D(0, 100%, 0)"}))}}]),e}(),ir="translate3d(0, 0, 0)",or=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:ir,opacity:0},{transform:ir,opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:ir,opacity:1},{transform:ir,opacity:0}).queue(function(t){o(),i(),t()}))}}]),e}(),rr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.blackMaskOpacity=.4,l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%; z-index: 2;background-color: black; opacity: 0;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentElement.insertBefore(this.backgroundMask,n.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:0},{opacity:this.blackMaskOpacity}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(100%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(-45%, 0, 0)"}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:this.blackMaskOpacity},{opacity:0}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(-45%, 0, 0)",opacity:.9},{transform:"translate3d(0, 0, 0)",opacity:1}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(100%, 0, 0)"}).queue(function(t){r(),i(),t()}))}}]),e}(),ar=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?.05:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()});nt.runAll(a,nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({opacity:1},{opacity:.4}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({opacity:.4},{opacity:1}).queue(function(t){r(),i(),t()}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}))}}]),e}(),sr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.4, 0, 0.2, 1)":n,o=t.timingPop,r=void 0===o?"cubic-bezier(0.4, 0, 1, 1)":o,a=t.delay,s=void 0===a?0:a,l=t.duration,u=void 0===l?.2:l;p(this,e);var c=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:s,duration:u}));return c.timingPop=r,c}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 42px, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{css:{transform:"translate3D(0, 38px, 0)",opacity:0},timing:this.timingPop}).queue(function(t){o(),i(),t()}))}}]),e}(),lr=function(t){function e(t){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Jo),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}}]),e}(),ur={default:function(){return C.isAndroid()?sr:er},slide:function(){return C.isAndroid()?rr:er},lift:function(){return C.isAndroid()?ar:nr},fade:function(){return C.isAndroid()?sr:or},"slide-ios":er,"slide-md":rr,"lift-ios":nr,"lift-md":ar,"fade-ios":or,"fade-md":sr,none:lr},cr={ready:function(t,e){e()}},hr=function(t){return"ONS-PAGE"!==t.nodeName&&Q.throw("Only page elements can be children of navigator")},dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._isRunning=!1,t._initialized=!1,t._pageLoader=jt,t._pageMap=new WeakMap,t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"animatorFactory",get:function(){return this._animatorFactory}}]),g(e,[{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"connectedCallback",value:function(){var t=this;if(this.onDeviceBackButton=this._onDeviceBackButton.bind(this),!C.isAndroid()||"force"===this.getAttribute("swipeable")){var e=void 0;this._swipe=new Qo({element:this,getThreshold:function(){return Math.max(.2,parseFloat(t.getAttribute("swipe-threshold"))||0)},swipeMax:function(){t._onSwipe&&t._onSwipe(1,{duration:e.durationSwipe,timing:e.timingSwipe}),t[t.swipeMax?"swipeMax":"popPage"]({animator:e}),e=null},swipeMid:function(n,i){t._onSwipe&&t._onSwipe(n/i),e.translate(n,i,t.topPage.previousElementSibling,t.topPage)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,{duration:e.durationRestore,timing:e.timingSwipe}),e.restore(t.topPage.previousElementSibling,t.topPage),e=null},ignoreSwipe:function(n,i){if(!t._isRunning&&t.children.length>1){var o=parseInt(t.getAttribute("swipe-target-width")||25,10);if("right"===n.gesture.direction&&o>i){var r=function(t){return/ons-back-button/i.test(t.tagName)};if(!r(n.target)&&!Q.findParent(n.target,r,function(t){return/ons-page/i.test(t.tagName)})){var a=(t.topPage.pushedOptions||{}).animation||t.animatorFactory._animation,s=ur[a]instanceof Function?ur[a].call():ur[a];if(void 0!==s&&s.swipeable)return e=new s,!1}}}return!0}}),this.attributeChangedCallback("swipeable")}if(!this._initialized){this._initialized=!0;var i=Q.defer();this.loaded=i.promise,cr.ready(this,function(){var e=!Q.hasAnyComponentAsParent(t),o={animation:"none",show:e};if(0===t.pages.length&&t._getPageTarget())t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()});else if(t.pages.length>0){for(var r=0;r<t.pages.length;r++)hr(t.pages[r]);t.topPage&&n(t.topPage,function(){return setTimeout(function(){i.resolve(),e&&t.topPage._show(),t._updateLastPageBackButton()},0)})}else n(t,function(){0===t.pages.length&&t._getPageTarget()?t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()}):i.resolve()})})}}},{key:"_updateAnimatorFactory",value:function(){this._animatorFactory=new O({animators:ur,baseClass:Jo,baseClassName:"NavigatorAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._swipe&&this._swipe.dispose(),this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"animation":this._updateAnimatorFactory();break;case"swipeable":this._swipe&&this._swipe.update()}}},{key:"popPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this._preparePageAndOptions(null,e).options,Q.isInteger(e.times)&&e.times>1&&this._removePages(e.times);return this._popPage(e,function(){return new Promise(function(e){t._pageLoader.unload(t.pages[t.pages.length-1]),e()})})}},{key:"_popPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("popPage is already running.");if(this.pages.length<=1)return Promise.reject("ons-navigator's page stack is empty.");if(this._emitPrePopEvent())return Promise.reject("Canceled in prepop event.");var i=this.pages.length;return this._isRunning=!0,this.pages[i-2].updateBackButton(i-2>0),new Promise(function(o){var r=e.pages[i-1],a=e.pages[i-2];(t=Q.extend({},e.options||{},r.pushedOptions||{},t)).data&&(a.data=Q.extend({},a.data||{},t.data||{}));r._hide(),a.style.display="";(t.animator||e._animatorFactory.newAnimator(t)).pop(e.pages[i-2],e.pages[i-1],function(){n().then(function(){e._isRunning=!1,a._show(),Q.triggerElementEvent(e,"postpop",{leavePage:r,enterPage:a,navigator:e}),t.callback&&t.callback(a),o(a)})})}).catch(function(){return e._isRunning=!1})}},{key:"pushPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);t=i.page;var o=function(i){hr(i),e._pageMap.set(i,t),(i=Q.extend(i,{data:n.data})).style.visibility="hidden"};return(n=i.options).pageHTML?this._pushPage(n,function(){return new Promise(function(t){Ht.load({page:n.pageHTML,parent:e,params:n.data},function(e){o(e),t()})})}):this._pushPage(n,function(){return new Promise(function(i){e._pageLoader.load({page:t,parent:e,params:n.data},function(t){o(t),i()})})})}},{key:"_pushPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("pushPage is already running.");if(this._emitPrePushEvent())return Promise.reject("Canceled in prepush event.");this._isRunning=!0;var i=O.parseAnimationOptionsString(this.getAttribute("animation-options"));e=Q.extend({},this.options||{},{animationOptions:i},e);var o=this._animatorFactory.newAnimator(e);return n().then(function(){var n=t.pages.length,i=t.pages[n-1],r=e.leavePage||t.pages[n-2];return hr(i),i.updateBackButton(n>(e._replacePage?2:1)),i.pushedOptions=Q.extend({},i.pushedOptions||{},e||{}),i.data=Q.extend({},i.data||{},e.data||{}),i.unload=i.unload||e.unload,new Promise(function(n){var a=function(){t._isRunning=!1,!1!==e.show&&setImmediate(function(){return i._show()}),Q.triggerElementEvent(t,"postpush",{leavePage:r,enterPage:i,navigator:t}),r&&(r.style.display="none"),e.callback&&e.callback(i),n(i)};i.style.visibility="",r?(r._hide(),o.push(i,r,a)):a()})}).catch(function(e){throw t._isRunning=!1,e})}},{key:"replacePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pushPage(t,n).then(function(t){return e.pages.length>1&&e._pageLoader.unload(e.pages[e.pages.length-2]),e._updateLastPageBackButton(),Promise.resolve(t)})}},{key:"insertPage",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._preparePageAndOptions(e,i);if(e=o.page,i=o.options,(t=this._normalizeIndex(t))>=this.pages.length)return this.pushPage(e,i);e="string"==typeof i.pageHTML?i.pageHTML:e;var r="string"==typeof i.pageHTML?Ht:this._pageLoader;return new Promise(function(o){r.load({page:e,parent:n},function(r){hr(r),n._pageMap.set(r,e),r=Q.extend(r,{data:i.data,pushedOptions:i}),i.animationOptions=Q.extend({},O.parseAnimationOptionsString(n.getAttribute("animation-options")),i.animationOptions||{}),r.style.display="none",n.insertBefore(r,n.pages[t]),n.topPage.updateBackButton(!0),setTimeout(function(){r=null,o(n.pages[t])},1e3/60)})})}},{key:"removePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=this._normalizeIndex(t))<this.pages.length-1?new Promise(function(n){var i=e.pages[t],o=e.topPage;e._pageMap.delete(i),e._pageLoader.unload(i),1===e.pages.length&&e.topPage.updateBackButton(!1),n(o)}):this.popPage(n)}},{key:"resetToPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);if(t=i.page,(n=i.options).animator||n.animation||n.pop||(n.animation="none"),n.page||n.pageHTML||!this._getPageTarget()||(t=n.page=this._getPageTarget()),n.pop)return this._removePages(),this.insertPage(0,t,{data:n.data}).then(function(){return e.popPage(n)});var o=n.callback;return n.callback=function(t){e._removePages(),t.updateBackButton(!1),o&&o(t)},this.pushPage(t,n)}},{key:"bringPageTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===["number","string"].indexOf(void 0===t?"undefined":f(t))&&Q.throw("First argument must be a page name or the index of an existing page. You supplied "+t);var n="number"==typeof t?this._normalizeIndex(t):this._lastIndexOfPage(t),i=this.pages[n];if(n<0)return this.pushPage(t,e);return e=this._preparePageAndOptions(i,e).options,n===this.pages.length-1?Promise.resolve(i):(i||Q.throw("Failed to find item "+t),this._isRunning?Promise.reject("pushPage is already running."):this._emitPrePushEvent()?Promise.reject("Canceled in prepush event."):(i.style.display="",i.style.visibility="hidden",i.parentNode.appendChild(i),this._pushPage(e)))}},{key:"_preparePageAndOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"!=(void 0===e?"undefined":f(e))&&Q.throw("options must be an object. You supplied "+e),null!==t&&void 0!==t||!e.page||(t=e.page),e=Q.extend({},this.options||{},e,{page:t}),{page:t,options:e}}},{key:"_removePages",value:function(t){var e=this.pages,n=void 0===t?0:e.length-t;n=n<0?1:n;for(var i=e.length-2;i>=n;i--)this._pageMap.delete(e[i]),this._pageLoader.unload(e[i])}},{key:"_updateLastPageBackButton",value:function(){var t=this.pages.length-1;t>=0&&this.pages[t].updateBackButton(t>0)}},{key:"_normalizeIndex",value:function(t){return t>=0?t:Math.abs(this.pages.length+t)%this.pages.length}},{key:"_onDeviceBackButton",value:function(t){this.pages.length>1?this.popPage():t.callParentHandler()}},{key:"_lastIndexOfPage",value:function(t){var e=void 0;for(e=this.pages.length-1;e>=0&&(this._pageMap.has(this.pages[e])||Q.throw("Incorrect state of pageMap"),t!==this._pageMap.get(this.pages[e]));e--);return e}},{key:"_emitPreEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;return Q.triggerElementEvent(this,"pre"+t,Q.extend({navigator:this,currentPage:this.pages[this.pages.length-1],cancel:function(){return n=!0}},e)),n}},{key:"_emitPrePushEvent",value:function(){return this._emitPreEvent("push")}},{key:"_emitPrePopEvent",value:function(){var t=this.pages.length;return this._emitPreEvent("pop",{leavePage:this.pages[t-1],enterPage:this.pages[t-2]})}},{key:"_createPageElement",value:function(t){var e=Q.createElement(P.normalizePageHTML(t));return hr(e),e}},{key:"_show",value:function(){var t=this;this.loaded.then(function(){return t.topPage&&t.topPage._show()})}},{key:"_hide",value:function(){this.topPage&&this.topPage._hide()}},{key:"_destroy",value:function(){for(var t=this.pages.length-1;t>=0;t--)this._pageLoader.unload(this.pages[t]);this.remove()}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"topPage",get:function(){for(var t=this.lastElementChild;t&&"ONS-PAGE"!==t.tagName;)t=t.previousElementSibling;return t}},{key:"pages",get:function(){return Q.arrayFrom(this.children).filter(function(t){return"ONS-PAGE"===t.tagName})}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}},{key:"_isRunning",set:function(t){this.setAttribute("_is-running",t?"true":"false")},get:function(){return JSON.parse(this.getAttribute("_is-running"))}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Jo||Q.throwAnimator("Navigator"),ur[t]=e}},{key:"observedAttributes",get:function(){return["animation","swipeable"]}},{key:"animators",get:function(){return ur}},{key:"NavigatorAnimator",get:function(){return Jo}},{key:"events",get:function(){return["prepush","postpush","prepop","postpop"]}},{key:"rewritables",get:function(){return cr}}]),e}();c.Navigator=dr,customElements.define("ons-navigator",dr);var fr={"":"toolbar--*",".toolbar__left":"toolbar--*__left",".toolbar__center":"toolbar--*__center",".toolbar__right":"toolbar--*__right"},pr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"toolbar",fr);break;case"modifier":B.onModifierChanged(e,n,this,fr)}}},{key:"_getToolbarLeftItemsElement",value:function(){return this.querySelector(".left")||P.nullElement}},{key:"_getToolbarCenterItemsElement",value:function(){return this.querySelector(".center")||P.nullElement}},{key:"_getToolbarRightItemsElement",value:function(){return this.querySelector(".right")||P.nullElement}},{key:"_getToolbarBackButtonLabelElement",value:function(){return this.querySelector("ons-back-button .back-button__label")||P.nullElement}},{key:"_getToolbarBackButtonIconElement",value:function(){return this.querySelector("ons-back-button .back-button__icon")||P.nullElement}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("toolbar"),this._ensureToolbarItemElements(),B.initModifier(this,fr)}},{key:"_ensureToolbarItemElements",value:function(){for(var t=this.childNodes.length-1;t>=0;t--)1!=this.childNodes[t].nodeType&&this.removeChild(this.childNodes[t]);var e=this._ensureToolbarElement("center");if(e.classList.add("toolbar__title"),1!==this.children.length||!this.children[0].classList.contains("center")){var n=this._ensureToolbarElement("left"),i=this._ensureToolbarElement("right");this.children[0]===n&&this.children[1]===e&&this.children[2]===i||(this.appendChild(n),this.appendChild(e),this.appendChild(i))}}},{key:"_ensureToolbarElement",value:function(t){if(Q.findChild(this,".toolbar__"+t)){var e=Q.findChild(this,".toolbar__"+t);return e.classList.add(t),e}var n=Q.findChild(this,"."+t)||Q.create("."+t);return n.classList.add("toolbar__"+t),n}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Toolbar=pr,customElements.define("ons-toolbar",pr);var gr="page",mr={"":"page--*",".page__content":"page--*__content",".page__background":"page--*__background"},_r=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._deriveHooks(),t._defaultClassName=gr,t.classList.add(gr),t._initialized=!1,n(t,function(){t._compile(),t._isShown=!1,t._contentElement=t._getContentElement(),t._backgroundElement=t._getBackgroundElement()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this;N.prepare(this);var e=Q.findChild(this,"ons-toolbar"),n=Q.findChild(this,".page__background")||Q.findChild(this,".background")||document.createElement("div");n.classList.add("page__background"),this.insertBefore(n,!e&&this.firstChild||e&&e.nextSibling);var i=Q.findChild(this,".page__content")||Q.findChild(this,".content")||document.createElement("div");i.classList.add("page__content"),i.parentElement||Q.arrayFrom(this.childNodes).forEach(function(e){(1!==e.nodeType||t._elementShouldBeMoved(e))&&i.appendChild(e)}),this._tryToFillStatusBar(i),this.insertBefore(i,n.nextSibling),e&&Q.hasModifier(e,"transparent")||1!==i.children.length||!Q.isPageControl(i.children[0])||(this._defaultClassName+=" page--wrapper",this.attributeChangedCallback("class")),B.initModifier(this,mr)}},{key:"_elementShouldBeMoved",value:function(t){if(t.classList.contains("page__background"))return!1;var e=t.tagName.toLowerCase();if("ons-fab"===e)return!t.hasAttribute("position");return t.hasAttribute("inline")||-1===["script","ons-toolbar","ons-bottom-toolbar","ons-modal","ons-speed-dial","ons-dialog","ons-alert-dialog","ons-popover","ons-action-sheet"].indexOf(e)}},{key:"_tryToFillStatusBar",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;P.autoStatusBarFill(function(){Q.toggleAttribute(t,"status-bar-fill",!Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")})&&(t._canAnimateToolbar(e)||!Q.findChild(e,Q.isPageControl)))})}},{key:"_canAnimateToolbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;return!!Q.findChild(this,"ons-toolbar")||!!Q.findChild(t,function(t){return Q.match(t,"ons-toolbar")&&!t.hasAttribute("inline")})}},{key:"connectedCallback",value:function(){var t=this;Q.isAttached(this)&&n(this,function(){t._tryToFillStatusBar(),t.hasAttribute("on-infinite-scroll")&&t.attributeChangedCallback("on-infinite-scroll",null,t.getAttribute("on-infinite-scroll")),t._initialized||(t._initialized=!0,setImmediate(function(){t.onInit&&t.onInit(),Q.triggerElementEvent(t,"init")}),Q.hasAnyComponentAsParent(t)||setImmediate(function(){return t._show()}))})}},{key:"updateBackButton",value:function(t){this.backButton&&(t?this.backButton.show():this.backButton.hide())}},{key:"_onScroll",value:function(){var t=this,e=this._contentElement,n=(e.scrollTop+e.clientHeight)/e.scrollHeight>=this._infiniteScrollLimit;this._onInfiniteScroll&&!this._loadingContent&&n&&(this._loadingContent=!0,this._onInfiniteScroll(function(){return t._loadingContent=!1}))}},{key:"_getContentElement",value:function(){var t=Q.findChild(this,".page__content");if(t)return t;Q.throw('Fail to get ".page__content" element')}},{key:"_getBackgroundElement",value:function(){var t=Q.findChild(this,".page__background");if(t)return t;Q.throw('Fail to get ".page__background" element')}},{key:"_getBottomToolbarElement",value:function(){return Q.findChild(this,"ons-bottom-toolbar")||P.nullElement}},{key:"_getToolbarElement",value:function(){return Q.findChild(this,"ons-toolbar")||document.createElement("ons-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){var i=this;switch(t){case"class":Q.restoreClass(this,this._defaultClassName,mr);break;case"modifier":B.onModifierChanged(e,n,this,mr);break;case"on-infinite-scroll":this.onInfiniteScroll=null===n?null:function(t){var e=Q.findFromPath(n);i.onInfiniteScroll=e,e(t)}}}},{key:"_show",value:function(){!this._isShown&&Q.isAttached(this)&&(this._isShown=!0,this.setAttribute("shown",""),this.onShow&&this.onShow(),Q.triggerElementEvent(this,"show"),Q.propagateAction(this,"_show"))}},{key:"_hide",value:function(){this._isShown&&(this._isShown=!1,this.removeAttribute("shown"),this.onHide&&this.onHide(),Q.triggerElementEvent(this,"hide"),Q.propagateAction(this,"_hide"))}},{key:"_destroy",value:function(){this._hide(),this.onDestroy&&this.onDestroy(),Q.triggerElementEvent(this,"destroy"),this.onDeviceBackButton&&this.onDeviceBackButton.destroy(),Q.propagateAction(this,"_destroy"),this.remove()}},{key:"_deriveHooks",value:function(){var t=this;this.constructor.events.forEach(function(e){var n="on"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return t["_"+n]},set:function(e){e instanceof Function||Q.throw('"'+n+'" hook must be a function'),t["_"+n]=e.bind(t)}})})}},{key:"name",set:function(t){this.setAttribute("name",t)},get:function(){return this.getAttribute("name")}},{key:"backButton",get:function(){return this.querySelector("ons-back-button")}},{key:"onInfiniteScroll",set:function(t){var e=this;!t||t instanceof Function||Q.throw('"onInfiniteScroll" must be function or null'),n(this,function(){t?e._onInfiniteScroll||(e._infiniteScrollLimit=.9,e._boundOnScroll=e._onScroll.bind(e),setImmediate(function(){return e._contentElement.addEventListener("scroll",e._boundOnScroll)})):e._contentElement.removeEventListener("scroll",e._boundOnScroll),e._onInfiniteScroll=t})},get:function(){return this._onInfiniteScroll}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"scrollTop",get:function(){return this._contentElement.scrollTop},set:function(t){this._contentElement.scrollTop=t}}],[{key:"observedAttributes",get:function(){return["modifier","on-infinite-scroll","class"]}},{key:"events",get:function(){return["init","show","hide","destroy"]}}]),e}();c.Page=_r,customElements.define("ons-page",_r);var vr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}},{key:"_animate",value:function(t,e){var n=e.from,i=e.to,o=e.options,r=e.callback,a=e.restore,s=void 0!==a&&a,l=e.animation;return o=Q.extend({},this.options,o),l&&(n=l.from,i=l.to),l=nt(t),s&&(l=l.saveStyle()),l=l.queue(n).wait(this.delay).queue({css:i,duration:this.duration,timing:this.timing}),s&&(l=l.restoreStyle()),r&&(l=l.queue(function(t){r(),t()})),l}},{key:"_animateAll",value:function(t,e){var n=this;Object.keys(e).forEach(function(i){return n._animate(t[i],e[i]).play()})}}]),e}(),br={out:{from:{opacity:1},to:{opacity:0}},in:{from:{opacity:0},to:{opacity:1}}},yr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,vr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{animation:br.in,restore:!0,callback:e}})}},{key:"hide",value:function(t,e){this._animateAll(t,{_mask:br.out,_popover:{animation:br.out,restore:!0,callback:e}})}}]),e}(),kr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,yr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{from:{transform:"scale3d(1.3, 1.3, 1.0)",opacity:0},to:{transform:"scale3d(1.0, 1.0,  1.0)",opacity:1},restore:!0,callback:e}})}}]),e}(),wr={".popover":"popover--*",".popover-mask":"popover-mask--*",".popover__content":"popover--*__content",".popover__arrow":"popover--*__arrow"},Er={default:function(){return C.isAndroid()?yr:kr},none:vr,"fade-ios":kr,"fade-md":yr},Cr={up:"bottom",left:"right",down:"top",right:"left"},Ar=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnChange=t._onChange.bind(t),n(t,function(){t._compile(),t.style.display="none"}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Er,baseClass:vr,baseClassName:"PopoverAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"_toggleStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?(this.style.display="block",this._currentTarget=e.target,this._positionPopover(e.target)):(this.style.display="none",this._clearStyles())}},{key:"_positionPopover",value:function(t){var e=this._radius,n=this._content,i=this._margin,o=Li.getSafeAreaLengths(),r=Li.getSafeAreaDOMRect(),a=t.getBoundingClientRect(),s=Q.hasModifier(this,"material"),l=s&&this.hasAttribute("cover-target"),u=(Q.findParent(this,"ons-page")||document.body).getBoundingClientRect(),c={top:Math.max(u.top,r.top),left:Math.max(u.left,r.left),bottom:Math.min(u.bottom,r.bottom),right:Math.min(u.right,r.right)},h={top:a.top-(c.top+i),left:a.left-(c.left+i),bottom:c.bottom-i-a.bottom,right:c.right-i-a.right},d={top:a.top+Math.round(a.height/2)-(c.top+i),left:a.left+Math.round(a.width/2)-(c.left+i),bottom:c.bottom-i-a.bottom+Math.round(a.height/2),right:c.right-i-a.right+Math.round(a.width/2)},f=this._calculateDirections(h),p=f.vertical,g=f.primary,m=f.secondary;this._currentDirection=g,Q.addModifier(this,g);var _=p?"width":"height",v=function(t){return{width:parseInt(t.getPropertyValue("width"),10),height:parseInt(t.getPropertyValue("height"),10)}}(window.getComputedStyle(n)),b=l?0:(p?a.height:a.width)+(s?0:14),y=Math.max(o[g]+i,o[g]+i+h[g]+b),k=Math.max(o[m]+i,o[m]+i+d[m]-v[_]/2);this._popover.style[g]=y+"px",this._popover.style[m]=k+"px",this._arrow.style[m]=Math.max(e,o[m]+i+d[m]-k)+"px"}},{key:"_calculateDirections",value:function(t){var e=(this.getAttribute("direction")||"up down left right").split(/\s+/).map(function(t){return Cr[t]}).sort(function(e,n){return t[e]-t[n]})[0],n="top"==e||"bottom"==e,i=void 0;return i=n?t.left<t.right?"left":"right":t.top<t.bottom?"top":"bottom",{vertical:n,primary:e,secondary:i}}},{key:"_clearStyles",value:function(){var t=this;this._currentDirection=null,["top","bottom","left","right"].forEach(function(e){t._arrow.style[e]=t._content.style[e]=t._popover.style[e]="",Q.removeModifier(t,e)})}},{key:"_onChange",value:function(){var t=this;setImmediate(function(){t._currentTarget&&t._positionPopover(t._currentTarget)})}},{key:"_compile",value:function(){if(N.prepare(this),!this._popover||!this._mask){if(this._popover&&this._content){if(!this._mask){var t=document.createElement("div");t.classList.add("popover-mask"),this.insertBefore(t,this.firstChild)}if(!this._arrow){var e=document.createElement("div");e.classList.add("popover__arrow"),this._popover.appendChild(e)}}else{for(var n=Q.createFragment('\n        <div class="popover-mask"></div>\n        <div class="popover">\n          <div class="popover__content"></div>\n          <div class="popover__arrow"></div>\n        </div>\n      '),i=n.querySelector(".popover__content");this.childNodes[0];)i.appendChild(this.childNodes[0]);this.appendChild(n)}this.hasAttribute("style")&&(this._popover.setAttribute("style",this.getAttribute("style")),this.removeAttribute("style")),B.initModifier(this,this._scheme)}}},{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof(n=!t||"object"!==(void 0===t?"undefined":f(t))||t instanceof Event||t instanceof HTMLElement?_({},n,{target:t}):_({},t)).target?n.target=document.querySelector(n.target):n.target instanceof Event&&(n.target=n.target.target),n.target instanceof HTMLElement||Q.throw("Invalid target type or undefined"),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,n)}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this._boundOnChange,!1),this._margin=this._margin||parseInt(window.getComputedStyle(this).getPropertyValue("top")),this._margin=this._margin||6,n(this,function(){t._radius=parseInt(window.getComputedStyle(t._content).getPropertyValue("border-top-left-radius"))})}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._boundOnChange,!1)}},{key:"attributeChangedCallback",value:function(t,n,i){if("direction"===t)return this._boundOnChange();"modifier"===t&&this._currentDirection&&Q.addModifier(this,this._currentDirection),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return wr}},{key:"_mask",get:function(){return Q.findChild(this,".popover-mask")}},{key:"_popover",get:function(){return Q.findChild(this,".popover")}},{key:"_content",get:function(){return Q.findChild(this._popover,".popover__content")}},{key:"_arrow",get:function(){return Q.findChild(this._popover,".popover__arrow")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof vr||Q.throwAnimator("Popover"),Er[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["direction"])}},{key:"animators",get:function(){return Er}},{key:"PopoverAnimator",get:function(){return vr}}]),e}();c.Popover=Ar,customElements.define("ons-popover",Ar);var Sr={".progress-bar":"progress-bar--*",".progress-bar__primary":"progress-bar--*__primary",".progress-bar__secondary":"progress-bar--*__secondary"},Pr=Q.createElement('\n  <div class="progress-bar">\n    <div class="progress-bar__secondary"></div>\n    <div class="progress-bar__primary"></div>\n  </div>\n'),Or="indeterminate",xr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-bar"):this._template=Pr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-bar__primary"),this._secondary=Q.findChild(this._template,".progress-bar__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Sr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-bar"))return!1;var t=Q.findChild(this,".progress-bar");return!!Q.findChild(t,".progress-bar__secondary")&&!!Q.findChild(t,".progress-bar__primary")}},{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Sr),this.hasAttribute(Or)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Or&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Or,{force:t.hasAttribute(Or)})})}},{key:"_updateValue",value:function(){var t=this;n(this,function(){t._primary.style.width=t.hasAttribute("value")?t.getAttribute("value")+"%":"0%",t._secondary.style.width=t.hasAttribute("secondary-value")?t.getAttribute("secondary-value")+"%":"0%"})}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Or,""):this.removeAttribute(Or)},get:function(){return this.hasAttribute(Or)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Or]}}]),e}();c.ProgressBar=xr,customElements.define("ons-progress-bar",xr);var Tr={".progress-circular":"progress-circular--*",".progress-circular__background":"progress-circular--*__background",".progress-circular__primary":"progress-circular--*__primary",".progress-circular__secondary":"progress-circular--*__secondary"},Lr=Q.createElement('\n  <svg class="progress-circular">\n    <circle class="progress-circular__background" />\n    <circle class="progress-circular__secondary" cx="50%" cy="50%" r="40%" />\n    <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" />\n  </svg>\n'),Mr="indeterminate",Dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Tr),this.hasAttribute(Mr)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Mr&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Mr,{force:t.hasAttribute(Mr)})})}},{key:"_updateValue",value:function(){var t=this;this.hasAttribute("value")&&n(this,function(){var e=Math.ceil(251.32*t.getAttribute("value")*.01);t._primary.style["stroke-dasharray"]=e+"%, 251.32%"}),this.hasAttribute("secondary-value")?n(this,function(){var e=Math.ceil(251.32*t.getAttribute("secondary-value")*.01);t._secondary.style.display=null,t._secondary.style["stroke-dasharray"]=e+"%, 251.32%"}):n(this,function(){t._secondary.style.display="none"})}},{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-circular"):this._template=Lr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-circular__primary"),this._secondary=Q.findChild(this._template,".progress-circular__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Tr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-circular"))return!1;var t=Q.findChild(this,".progress-circular");return!!Q.findChild(t,".progress-circular__secondary")&&!!Q.findChild(t,".progress-circular__primary")}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Mr,""):this.removeAttribute(Mr)},get:function(){return this.hasAttribute(Mr)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Mr]}}]),e}();c.ProgressCircular=Dr,customElements.define("ons-progress-circular",Dr);var Ir="initial",Nr=function(t,e){return Q.throw('"'+t+'" must be '+e)},Br=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._shouldFixScroll=Q.globals.isUIWebView,t._onDrag=t._onDrag.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onDragEnd=t._onDragEnd.bind(t),t._onScroll=t._onScroll.bind(t),t._setState(Ir,!0),t._hide(),t}return b(e,Pi),g(e,[{key:"_setStyle",value:function(){var t=this.height+"px";d(this,{height:t,lineHeight:t}),""===this.style.display&&this._show()}},{key:"_onScroll",value:function(t){var e=this._pageElement;e.scrollTop<0&&(e.scrollTop=0)}},{key:"_canConsumeGesture",value:function(t){return"up"===t.direction||"down"===t.direction}},{key:"_onDragStart",value:function(t){var e=this;if(t.gesture&&!this.disabled){var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight,o=this._shouldFixScroll?.8:1;if(this._ignoreDrag=t.consumed||n>i*o,!this._ignoreDrag){var r=t.consume;t.consume=function(){r&&r(),e._ignoreDrag=!0,e._hide()},this._canConsumeGesture(t.gesture)&&(r&&r(),t.consumed=!0,this._show())}this._startScroll=this._pageElement.scrollTop}}},{key:"_onDrag",value:function(t){var e=this;if(t.gesture&&!this.disabled&&!this._ignoreDrag&&this._canConsumeGesture(t.gesture)){"none"===this.style.display&&this._show(),t.stopPropagation();var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight;this._shouldFixScroll&&(this._pageElement.scrollTop=this._startScroll-t.gesture.deltaY,("up"!==t.gesture.interimDirection||n<=.5*i)&&t.gesture.preventDefault());var o=Math.max(t.gesture.deltaY-this._startScroll,0);if(o!==this._currentTranslation){var r=this.thresholdHeight;r>0&&o>=r?(t.gesture.stopDetect(),setImmediate(function(){return e._finish()})):o>=this.height?this._setState("preaction"):this._setState(Ir),this._translateTo(o)}}}},{key:"_onDragEnd",value:function(t){if(t.gesture&&!this.disabled&&!this._ignoreDrag&&(t.stopPropagation(),this._currentTranslation>0)){this._currentTranslation>this.height?this._finish():this._translateTo(0,{animate:!0})}}},{key:"_finish",value:function(){var t=this;this._setState("action"),this._translateTo(this.height,{animate:!0});(this.onAction||function(t){return t()})(function(){t._translateTo(0,{animate:!0}),t._setState(Ir)})}},{key:"_setState",value:function(t,e){var n=this.state;this.setAttribute("state",t),e||n===this.state||Q.triggerElementEvent(this,"changestate",{pullHook:this,state:t,lastState:n})}},{key:"_show",value:function(){var t=this;setImmediate(function(){t.style.display="",t._pageElement&&(t._pageElement.style.marginTop="-"+t.height+"px")})}},{key:"_hide",value:function(){this.style.display="none",this._pageElement&&(this._pageElement.style.marginTop="")}},{key:"_translateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!=this._currentTranslation||0!=t){this._currentTranslation=t;var n=e.animate?{duration:.3,timing:"cubic-bezier(.1, .7, .1, 1)"}:{};this._onPull&&this._onPull((t/this.height).toFixed(2),n);var i=this.hasAttribute("fixed-content")?this:this._pageElement;nt(i).queue({transform:"translate3d(0px, "+t+"px, 0px)"},n).play(function(){0===t&&d.clear(i,"transition transform"),e.callback instanceof Function&&e.callback()})}}},{key:"_disableDragLock",value:function(){this._dragLockDisabled=!0,this._setupListeners(!0)}},{key:"_setupListeners",value:function(t){var e=this,n=function(t){return e._pageElement[t+"EventListener"]("scroll",e._onScroll,!1)},i=function(t){var n={passive:!0};e._gestureDetector[t]("drag",e._onDrag,n),e._gestureDetector[t]("dragstart",e._onDragStart,n),e._gestureDetector[t]("dragend",e._onDragEnd,n)};this._gestureDetector&&(i("off"),this._gestureDetector.dispose(),this._gestureDetector=null),n("remove"),t&&(this._gestureDetector=new st(this._pageElement,{dragMinDistance:1,dragDistanceCorrection:!1,dragLockToAxis:!this._dragLockDisabled,passive:!this._shouldFixScroll}),i("on"),n("add"))}},{key:"connectedCallback",value:function(){this._currentTranslation=0,this._pageElement=this.parentNode,this._setupListeners(!0),this._setStyle()}},{key:"disconnectedCallback",value:function(){this._hide(),this._setupListeners(!1)}},{key:"attributeChangedCallback",value:function(t,e,n){"height"===t&&this._pageElement&&this._setStyle()}},{key:"onAction",get:function(){return this._onAction},set:function(t){!t||t instanceof Function||Nr("onAction","function or null"),this._onAction=t}},{key:"onPull",get:function(){return this._onPull},set:function(t){!t||t instanceof Function||Nr("onPull","function or null"),this._onPull=t}},{key:"height",set:function(t){Q.isInteger(t)||Nr("height","integer"),this.setAttribute("height",t+"px")},get:function(){return parseInt(this.getAttribute("height")||"64",10)}},{key:"thresholdHeight",set:function(t){Q.isInteger(t)||Nr("thresholdHeight","integer"),this.setAttribute("threshold-height",t+"px")},get:function(){return parseInt(this.getAttribute("threshold-height")||"96",10)}},{key:"state",get:function(){return this.getAttribute("state")}},{key:"pullDistance",get:function(){return this._currentTranslation}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["height"]}},{key:"events",get:function(){return["changestate"]}}]),e}();c.PullHook=Br,customElements.define("ons-pull-hook",Br);var jr={"":"range--*",".range__input":"range--*__input",".range__focus-ring":"range--*__focus-ring"},Hr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onMouseDown=t._onMouseDown.bind(t),t._onMouseUp=t._onMouseUp.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onTouchEnd=t._onTouchEnd.bind(t),t._onInput=t._update.bind(t),t._onDragstart=t._onDragstart.bind(t),t._onDragend=t._onDragend.bind(t),t}return b(e,No),g(e,[{key:"_compile",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_compile",this).call(this),this._updateDisabled(this.hasAttribute("disabled"))}},{key:"_update",value:function(){var t=this._input,e=this._focusRing;t.style.backgroundSize=100*this._ratio+"% 2px",e.value=this.value,""===t.min&&"0"===t.value||t.min===t.value?t.setAttribute("_zero",""):t.removeAttribute("_zero"),["min","max"].forEach(function(n){return e[n]=t[n]})}},{key:"_onMouseDown",value:function(t){var e=this;this._input.classList.add("range__input--active"),setImmediate(function(){return e._input.focus()})}},{key:"_onTouchStart",value:function(t){this._onMouseDown()}},{key:"_onMouseUp",value:function(t){this._input.classList.remove("range__input--active")}},{key:"_onTouchEnd",value:function(t){this._onMouseUp(t)}},{key:"_onDragstart",value:function(t){t.consumed=!0,t.gesture.stopPropagation(),this._input.classList.add("range__input--active"),this.addEventListener("drag",this._onDrag)}},{key:"_onDrag",value:function(t){t.stopPropagation()}},{key:"_onDragend",value:function(t){this._input.classList.remove("range__input--active"),this.removeEventListener("drag",this._onDrag)}},{key:"attributeChangedCallback",value:function(t,n,i){"disabled"===t&&this._updateDisabled(i),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_updateDisabled",value:function(t){t?this.classList.add("range--disabled"):this.classList.remove("range--disabled")}},{key:"connectedCallback",value:function(){this._setupListeners(!0)}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouchStart,{passive:!0}),this[e]("mousedown",this._onMouseDown),this[e]("mouseup",this._onMouseUp),this[e]("touchend",this._onTouchEnd),this[e]("dragstart",this._onDragstart),this[e]("dragend",this._onDragend),this[e]("input",this._onInput)}},{key:"_scheme",get:function(){return jr}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <input type="range" class="range__focus-ring" tabIndex="-1">\n    '}},{key:"_defaultClassName",get:function(){return"range"}},{key:"type",get:function(){return"range"}},{key:"_focusRing",get:function(){return this.children[1]}},{key:"_ratio",get:function(){var t=""===this._input.min?0:parseInt(this._input.min),e=""===this._input.max?100:parseInt(this._input.max);return(this.value-t)/(e-t)}}],[{key:"observedAttributes",get:function(){return["disabled"].concat(w(No.observedAttributes))}}]),e}();c.Range=Hr,customElements.define("ons-range",Hr);var Rr=function(){function t(){p(this,t),this._queue=[],this._index=0}return g(t,[{key:"animate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=(new Date).getTime(),o={},r=!1,a=!1,s=!1,l=Object.keys(e),u={stop:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&clearTimeout(s);var h=Math.min(1,((new Date).getTime()-i)/n);return l.forEach(function(n){t.style[n]=(1-h)*o[n]+h*e[n]+("opacity"==n?"":"px")}),t.style.transitionDuration="0s",c.stopNext?a=!1:r||(r=!0,a&&a()),u},then:function(t){return a=t,r&&a&&a(),u},speed:function(a){if(P.config.animationsDisabled&&(a=0),!r){s&&clearTimeout(s);var c=((new Date).getTime()-i)/n,h=a*(1-c);l.forEach(function(n){t.style[n]=(1-c)*o[n]+c*e[n]+("opacity"==n?"":"px")}),function(){var e=window.getComputedStyle(t);l.forEach(e.getPropertyValue.bind(e)),e=t.offsetHeight}(),i=t.speedUpTime,n=h,t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")}),s=setTimeout(u.stop,h)}return u},finish:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=((new Date).getTime()-i)/n;return u.speed(t/(1-e)),u}};if(t.hasAttribute("disabled")||r||P.config.animationsDisabled)return u;var c=window.getComputedStyle(t);return l.forEach(function(t){var e=parseFloat(c.getPropertyValue(t));o[t]=isNaN(e)?0:e}),r||(t.style.transitionProperty=l.join(","),t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")})),s=setTimeout(u.stop,n),this._onStopAnimations(t,u.stop),u}}]),g(t,[{key:"_onStopAnimations",value:function(t,e){var n=this._queue,i=this._index++;n[t]=n[t]||[],n[t][i]=function(o){return delete n[t][i],n[t]&&0==n[t].length&&delete n[t],e(o)}}},{key:"stopAnimations",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t))return t.forEach(function(t){e.stopAnimations(t,n)});(this._queue[t]||[]).forEach(function(t){t(n||{})})}},{key:"stopAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stopAnimations(Object.keys(this._queue),t)}},{key:"fade",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return this.animate(t,{opacity:0},e)}}]),t}(),Fr={"":"ripple--*",".ripple__wave":"ripple--*__wave",".ripple__background":"ripple--*__background"},qr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onTap=t._onTap.bind(t),t._onHold=t._onHold.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onRelease=t._onRelease.bind(t),n(t,function(){return t._compile()}),t._animator=new Rr,["color","center","start-radius","background","modifier"].forEach(function(e){t.attributeChangedCallback(e,null,t.getAttribute(e))}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("ripple"),this._wave=this.getElementsByClassName("ripple__wave")[0],this._background=this.getElementsByClassName("ripple__background")[0],this._background&&this._wave||(this._wave=Q.create(".ripple__wave"),this._background=Q.create(".ripple__background"),this.appendChild(this._wave),this.appendChild(this._background)),B.initModifier(this,Fr)}},{key:"_getEffectSize",value:function(){if(this.hasAttribute("size")){var t=this.getAttribute("size");if(-1!==["cover","contain"].indexOf(t))return t}return"cover"}},{key:"_calculateCoords",value:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=this.getBoundingClientRect(),s=this._getEffectSize(),l=function(){return Q.throw("Ripple invalid state")};return this._center?(e=a.width/2,n=a.height/2,"cover"===s?r=Math.sqrt(e*e+n*n):"contain"===s?r=Math.min(e,n):l()):(e=("number"==typeof t.clientX?t.clientX:t.changedTouches[0].clientX)-a.left,n=("number"==typeof t.clientY?t.clientY:t.changedTouches[0].clientY)-a.top,i=Math.max(n,a.height-n),o=Math.max(e,a.width-e),"cover"===s?r=Math.sqrt(i*i+o*o):"contain"===s?r=Math.min(Math.round(i/2),Math.round(o/2)):l()),{x:e,y:n,r:r}}},{key:"_rippleAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=this._animator,i=this._wave,o=this._background,r=this._minR,a=this._calculateCoords(t),s=a.x,l=a.y,u=a.r;return n.stopAll({stopNext:1}),n.animate(o,{opacity:1},e),Q.extend(i.style,{opacity:1,top:l-r+"px",left:s-r+"px",width:2*r+"px",height:2*r+"px"}),n.animate(i,{top:l-u,left:s-u,height:2*u,width:2*u},e)}},{key:"_updateParent",value:function(){if(!this._parentUpdated&&this.parentNode){"static"===window.getComputedStyle(this.parentNode).getPropertyValue("position")&&(this.parentNode.style.position="relative"),this._parentUpdated=!0}}},{key:"_onTap",value:function(t){var e=this;this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._rippleAnimation(t.gesture.srcEvent).then(function(){e._animator.fade(e._wave),e._animator.fade(e._background)}))}},{key:"_onHold",value:function(t){this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._holding=this._rippleAnimation(t.gesture.srcEvent,2e3),document.addEventListener("release",this._onRelease))}},{key:"_onRelease",value:function(t){var e=this;this._holding&&!t.ripple&&(t.ripple=!0,this._holding.speed(300).then(function(){e._animator.stopAll({stopNext:!0}),e._animator.fade(e._wave),e._animator.fade(e._background)}),this._holding=!1),document.removeEventListener("release",this._onRelease)}},{key:"_onDragStart",value:function(t){if(this._holding)return this._onRelease(t);-1!=["left","right"].indexOf(t.gesture.direction)&&this._onTap(t)}},{key:"connectedCallback",value:function(){this._parentNode=this.parentNode,P.config.animationsDisabled?this.disabled=!0:(this._parentNode.addEventListener("tap",this._onTap),this._parentNode.addEventListener("hold",this._onHold),this._parentNode.addEventListener("dragstart",this._onDragStart))}},{key:"disconnectedCallback",value:function(){var t=this._parentNode||this.parentNode;t.removeEventListener("tap",this._onTap),t.removeEventListener("hold",this._onHold),t.removeEventListener("dragstart",this._onDragStart)}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"ripple",Fr);break;case"modifier":B.onModifierChanged(e,i,this,Fr);break;case"start-radius":this._minR=Math.max(0,parseFloat(i)||0);break;case"color":i&&n(this,function(){o._wave.style.background=i,o.hasAttribute("background")||(o._background.style.background=i)});break;case"background":(i||e)&&("none"===i?n(this,function(){o._background.setAttribute("disabled","disabled"),o._background.style.background="transparent"}):n(this,function(){o._background.hasAttribute("disabled")&&o._background.removeAttribute("disabled"),o._background.style.background=i}));break;case"center":"center"===t&&(this._center=null!=i&&"false"!=i)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["start-radius","color","background","center","class","modifier"]}}]),e}();c.Ripple=qr,customElements.define("ons-ripple",qr);var zr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),e}();c.Row=zr,customElements.define("ons-row",zr);var Vr={"":"segment--*",".segment__item":"segment--*__item",".segment__input":"segment--*__input",".segment__button":"segment--*__button"},Wr=function(){var t=0;return function(){return"ons-segment-gen-"+t++}}(),Ur=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._segmentId=Wr(),t._tabbar=null,t._onChange=t._onChange.bind(t),t._onTabbarPreChange=t._onTabbarPreChange.bind(t),n(t,function(){t._compile(),setImmediate(function(){return t._lastActiveIndex=t._tabbar?t._tabbar.getActiveTabIndex():t.getActiveButtonIndex()})}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("segment");for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];e.classList.add("segment__item");var n=Q.findChild(e,".segment__input")||Q.create("input.segment__input");n.type="radio",n.value=t,n.name=n.name||this._segmentId,n.checked=!this.hasAttribute("tabbar-id")&&t===(parseInt(this.getAttribute("active-index"))||0);var i=Q.findChild(e,".segment__button")||Q.create(".segment__button");if(i.parentElement!==e)for(;e.firstChild;)i.appendChild(e.firstChild);e.appendChild(n),e.appendChild(i)}B.initModifier(this,Vr)}},{key:"connectedCallback",value:function(){var t=this;this.hasAttribute("tabbar-id")&&n(this,function(){var e=Q.findParent(t,"ons-page");t._tabbar=e&&e.querySelector("#"+t.getAttribute("tabbar-id")),t._tabbar&&"ONS-TABBAR"===t._tabbar.tagName||Q.throw("No tabbar with id "+t.getAttribute("tabbar-id")+" was found."),t._tabbar.setAttribute("hide-tabs",""),setImmediate(function(){return t._setChecked(t._tabbar.getActiveTabIndex())}),t._tabbar.addEventListener("prechange",t._onTabbarPreChange)}),this.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._tabbar&&(t._tabbar.removeEventListener("prechange",t._onTabbarPreChange),t._tabbar=null)}),this.removeEventListener("change",this._onChange)}},{key:"_setChecked",value:function(t){this.children[t].firstElementChild.checked=!0}},{key:"setActiveButton",value:function(t,e){return this._tabbar?this._tabbar.setActiveTab(t,e):(this._setChecked(t),this._postChange(t),Promise.resolve(t))}},{key:"getActiveButtonIndex",value:function(){for(var t=this.children.length-1;t>=0;t--)if(this.children[t].firstElementChild.checked)return t;return-1}},{key:"_onChange",value:function(t){t.stopPropagation(),this._tabbar?this._tabbar.setActiveTab(this.getActiveButtonIndex(),{reject:!1}):this._postChange(this.getActiveButtonIndex())}},{key:"_onTabbarPreChange",value:function(t){var e=this;setImmediate(function(){t.detail.canceled||(e._setChecked(t.index),e._postChange(t.index))})}},{key:"_postChange",value:function(t){Q.triggerElementEvent(this,"postchange",{index:t,activeIndex:t,lastActiveIndex:this._lastActiveIndex,segmentItem:this.children[t]}),this._lastActiveIndex=t}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"segment",Vr);break;case"modifier":B.onModifierChanged(e,n,this,Vr)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["class","modifier"]}},{key:"events",get:function(){return["postchange"]}}]),e}();c.Segment=Ur,customElements.define("ons-segment",Ur);var Xr={"":"select-* select--*",".select-input":"select-input--*"},Yr=["autofocus","disabled","form","multiple","name","required","size"],Gr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t._deriveGetters(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"select",Xr);break;case"modifier":B.onModifierChanged(e,i,this,Xr)}Yr.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_updateBoundAttributes",value:function(){var t=this;Yr.forEach(function(e){t.hasAttribute(e)?t._select.setAttribute(e,t.getAttribute(e)):t._select.removeAttribute(e)})}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("select");var t=this._select||document.createElement("select");!t.id&&this.hasAttribute("select-id")&&(t.id=this.getAttribute("select-id")),t.classList.add("select-input"),this._select||(Q.arrayFrom(this.childNodes).forEach(function(e){return t.appendChild(e)}),this.appendChild(t)),B.initModifier(this,Xr)}},{key:"_deriveGetters",value:function(){var t=this;["disabled","length","multiple","name","options","selectedIndex","size","value","form","type"].forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._select[e]},set:-1===["form","type"].indexOf(e)?function(i){return n(t,function(){return t._select[e]=i})}:void 0})})}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._select.add(t,e)}},{key:"remove",value:function(t){this._select.remove(t)}},{key:"_select",get:function(){return this.querySelector("select")}}],[{key:"observedAttributes",get:function(){return["modifier","class"].concat(Yr)}}]),e}();c.Select=Gr,customElements.define("ons-select",Gr);var $r={"":"fab--* speed-dial__item--*"},Kr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"fab fab--mini speed-dial__item",$r);break;case"modifier":B.onModifierChanged(e,n,this,$r),Q.addModifier(this,"mini");break;case"ripple":this._updateRipple()}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_onClick",value:function(t){t.stopPropagation()}},{key:"_compile",value:function(){var t=this;N.prepare(this),"fab fab--mini speed-dial__item".split(/\s+/).forEach(function(e){return t.classList.add(e)}),Q.addModifier(this,"mini"),this._updateRipple(),B.initModifier(this,$r)}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","class"]}}]),e}();c.SpeedDialItem=Kr,customElements.define("ons-speed-dial-item",Kr);var Qr={"":"speed-dial--*"},Jr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._itemShown=!1,t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("speed-dial"),N.prepare(this),this._updateRipple(),B.initModifier(this,Qr),this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up"),this._updatePosition()}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"speed-dial",Qr);break;case"modifier":B.onModifierChanged(e,i,this,Qr);break;case"ripple":n(this,function(){return o._updateRipple()});break;case"direction":n(this,function(){return o._updateDirection(i)});break;case"position":n(this,function(){return o._updatePosition()})}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_onClick",value:function(t){return this.onClick?(this.onClick.apply(this),Promise.resolve()):!this.disabled&&this.visible?this.toggleItems():void 0}},{key:"_show",value:function(){return this.inline?Promise.resolve():this.show()}},{key:"_hide",value:function(){var t=this;return new Promise(function(e){t.inline?e():setImmediate(function(){return t.hide().then(e)})})}},{key:"_updateRipple",value:function(){this._fab&&(this.hasAttribute("ripple")?this._fab.setAttribute("ripple",""):this._fab.removeAttribute("ripple"))}},{key:"_updateDirection",value:function(t){for(var e=this.items,n=0;n<e.length;n++)d(e[n],{transitionDelay:25*n+"ms",bottom:"auto",right:"auto",top:"auto",left:"auto"});switch(t){case"up":for(var i=0;i<e.length;i++)e[i].style.bottom=72+56*i+"px",e[i].style.right="8px";break;case"down":for(var o=0;o<e.length;o++)e[o].style.top=72+56*o+"px",e[o].style.left="8px";break;case"left":for(var r=0;r<e.length;r++)e[r].style.top="8px",e[r].style.right=72+56*r+"px";break;case"right":for(var a=0;a<e.length;a++)e[a].style.top="8px",e[a].style.left=72+56*a+"px";break;default:Q.throw("Argument must be one of up, down, left or right.")}}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"_getTranslate",value:function(){return(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px) ":""}},{key:"show",value:function(){return this._fab.show(),d(this,{transform:this._getTranslate}),Promise.resolve()}},{key:"hide",value:function(){var t=this;return this.hideItems().then(function(){return t._fab.hide()})}},{key:"showItems",value:function(){this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up");var t=0;if(!this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*n;t+=i,d(e[n],{transform:"scale(1)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!0,Q.triggerElementEvent(this,"open")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"hideItems",value:function(){var t=0;if(this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*(e.length-n);t+=i,d(e[n],{transform:"scale(0)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!1,Q.triggerElementEvent(this,"close")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"isOpen",value:function(){return this._itemShown}},{key:"toggle",value:function(){return this.visible?this.hide():this.show()}},{key:"toggleItems",value:function(){return this.isOpen()?this.hideItems():this.showItems()}},{key:"items",get:function(){return Q.arrayFrom(this.querySelectorAll("ons-speed-dial-item"))}},{key:"_fab",get:function(){return Q.findChild(this,"ons-fab")}},{key:"disabled",set:function(t){return t&&this.hideItems(),Q.arrayFrom(this.children).forEach(function(e){Q.match(e,".fab")&&Q.toggleAttribute(e,"disabled",t)}),Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"inline",get:function(){return this.hasAttribute("inline")}},{key:"visible",get:function(){return this._fab.visible&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["class","modifier","ripple","direction","position"]}},{key:"events",get:function(){return["open","close"]}}]),e}();c.SpeedDial=Jr,customElements.define("ons-speed-dial",Jr);var Zr={ready:function(t,e){setImmediate(e)}},ta=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._pageLoader=jt,n(t,function(){Zr.ready(t,function(){var e=t._getPageTarget();e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-splitter")||Q.throw('"ons-splitter-content" must have "ons-splitter" as parent')}},{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}}],[{key:"observedAttributes",get:function(){return[]}},{key:"rewritables",get:function(){return Zr}}]),e}();c.SplitterContent=ta,customElements.define("ons-splitter-content",ta);var ea=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnClick=t._onClick.bind(t),n(t,function(){t.parentNode._sides.every(function(t){return"split"===t.mode})&&t.setAttribute("style","display: none !important")}),t}return b(e,Pi),g(e,[{key:"_onClick",value:function(t){this.onClick instanceof Function?this.onClick():Q.match(this.parentNode,"ons-splitter")&&this.parentNode._sides.forEach(function(t){return t.close("left").catch(function(){})}),t.stopPropagation()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!0)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!1)}}],[{key:"observedAttributes",get:function(){return[]}}]),e}();c.SplitterMask=ea,customElements.define("ons-splitter-mask",ea);var na=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.duration,r=void 0===o?.3:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,duration:r,delay:s}))}return b(e,Ti),g(e,[{key:"updateOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q.extend(this,{timing:this.timing,duration:this.duration,delay:this.delay},t)}},{key:"activate",value:function(t){var e=this,i=t.parentNode;n(i,function(){e._side=t,e._oppositeSide=i.right!==t&&i.right||i.left!==t&&i.left,e._content=i.content,e._mask=i.mask})}},{key:"deactivate",value:function(){this.clearTransition(),this._mask&&this.clearMask(),this._content=this._side=this._oppositeSide=this._mask=null}},{key:"clearTransition",value:function(){var t=this;"side mask content".split(/\s+/).forEach(function(e){return t["_"+e]&&d.clear(t["_"+e],"transform transition")})}},{key:"clearMask",value:function(){this._oppositeSide&&"split"!==this._oppositeSide.mode&&this._oppositeSide.isOpen||(this._mask.style.opacity="",this._mask.style.display="none")}},{key:"translate",value:function(t){}},{key:"open",value:function(t){t()}},{key:"close",value:function(t){t()}},{key:"minus",get:function(){return"right"===this._side.side?"-":""}}]),e}(),ia=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"translate",value:function(t){this._mask.style.display="block",nt(this._side).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d("+this.minus+"100%, 0, 0)"},this.def).queue(function(e){e(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}).queue({opacity:"1"},{duration:this.duration,timing:"linear"}))}},{key:"close",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(e){t&&t(),e()}),nt(this._mask).wait(this.delay).queue({opacity:"0"},{duration:this.duration,timing:"linear"}).queue({display:"none"}))}}]),e}(),oa={default:ia,overlay:ia,push:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._side,this._content];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"translate",value:function(t){this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){var e=this,n=this._side.offsetWidth;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d("+(this.minus+n)+"px, 0, 0)"},this.def).queue(function(n){e._slidingElements=null,n(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}))}},{key:"close",value:function(t){var n=this;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(i){n._slidingElements=null,v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clearTransition",n).call(n),t&&t(),i()}),nt(this._mask).wait(this.delay).queue({display:"none"}))}}]),e}(),reveal:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._content,this._mask];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"activate",value:function(t){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",this).call(this,t),"collapse"===t.mode&&this._setStyles(t)}},{key:"deactivate",value:function(){this._side&&this._unsetStyles(this._side),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deactivate",this).call(this)}},{key:"_setStyles",value:function(t){d(t,{left:"right"===t.side?"auto":0,right:"right"===t.side?0:"auto",zIndex:0,backgroundColor:"black",transform:this._generateBehindPageStyle(0).container.transform,display:"none"});var e=t.parentElement;n(e,function(){return e.content&&d(e.content,{boxShadow:"0 0 12px 0 rgba(0, 0, 0, 0.2)"})})}},{key:"_unsetStyles",value:function(t){d.clear(t,"left right zIndex backgroundColor display"),t._content&&(t._content.style.opacity=""),this._oppositeSide&&"split"!==this._oppositeSide.mode||t.parentElement.content&&d.clear(t.parentElement.content,"boxShadow")}},{key:"_generateBehindPageStyle",value:function(t){var e=this.maxWidth,n=(t-e)/e*10;return{content:{opacity:1+(n=isNaN(n)?0:Math.max(Math.min(n,0),-10))/100},container:{transform:"translate3d("+(this.minus?-1:1)*n+"%, 0, 0)"}}}},{key:"translate",value:function(t){this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var e=this._generateBehindPageStyle(Math.min(t,this.maxWidth));this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt.runAll(nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}),nt(this._side._content).queue(e.content),nt(this._side).queue(e.container))}},{key:"open",value:function(t){var e=this;this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var n=this._generateBehindPageStyle(this.maxWidth);this._slidingElements=this._getSlidingElements(),setTimeout(function(){nt.runAll(nt(e._slidingElements).wait(e.delay).queue({transform:"translate3d("+(e.minus+e.maxWidth)+"px, 0, 0)"},e.def),nt(e._mask).wait(e.delay).queue({display:"block"}),nt(e._side._content).wait(e.delay).queue(n.content,e.def),nt(e._side).wait(e.delay).queue(n.container,e.def).queue(function(n){e._slidingElements=null,n(),t&&t()}))},1e3/60)}},{key:"close",value:function(t){var e=this,n=this._generateBehindPageStyle(0);this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def),nt(this._mask).wait(this.delay).queue({display:"none"}),nt(this._side._content).wait(this.delay).queue(n.content,this.def),nt(this._side).wait(this.delay).queue(n.container,this.def).queue(function(n){e._slidingElements=null,e._side.style.zIndex=0,e._side.style.display="none",e._side._content.style.opacity="",t&&t(),n()}))}},{key:"_getMaxWidth",value:function(){return this._side.offsetWidth}}]),e}()},ra=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onModeChange=t._onModeChange.bind(t),n(t,function(){!t.mask&&t.appendChild(document.createElement("ons-splitter-mask")),t._layout()}),t}return b(e,Pi),g(e,[{key:"_getSide",value:function(t){return Q.findChild(this,function(e){return Q.match(e,"ons-splitter-side")&&e.getAttribute("side")===t})}},{key:"_onDeviceBackButton",value:function(t){this._sides.some(function(t){return!!t.isOpen&&t.close()})||t.callParentHandler()}},{key:"_onModeChange",value:function(t){var e=this;t.target.parentNode&&n(this,function(){e._layout()})}},{key:"_layout",value:function(){var t=this;this._sides.forEach(function(e){t.content&&(t.content.style[e.side]="split"===e.mode?e.style.width:0)})}},{key:"left",get:function(){return this._getSide("left")}},{key:"right",get:function(){return this._getSide("right")}},{key:"side",get:function(){return Q.findChild(this,"ons-splitter-side")}},{key:"_sides",get:function(){return[this.left,this.right].filter(function(t){return t})}},{key:"content",get:function(){return Q.findChild(this,"ons-splitter-content")}},{key:"topPage",get:function(){return this.content._content}},{key:"mask",get:function(){return Q.findChild(this,"ons-splitter-mask")}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}}]),g(e,[{key:"connectedCallback",value:function(){this.onDeviceBackButton=this._onDeviceBackButton.bind(this),this.addEventListener("modechange",this._onModeChange,!1)}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this.removeEventListener("modechange",this._onModeChange,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"_show",value:function(){Q.propagateAction(this,"_show")}},{key:"_hide",value:function(){Q.propagateAction(this,"_hide")}},{key:"_destroy",value:function(){Q.propagateAction(this,"_destroy"),this.remove()}}],[{key:"registerAnimator",value:function(t,e){e instanceof SplitterAnimator||Q.throwAnimator("Splitter"),oa[t]=e}},{key:"SplitterAnimator",get:function(){return SplitterAnimator}},{key:"animators",get:function(){return oa}}]),e}();c.Splitter=ra,customElements.define("ons-splitter",ra);var aa="closed",sa={ready:function(t,e){setImmediate(e)}},la=function(){function t(e,n){p(this,t),this._element=e,this._onChange=this._onChange.bind(this),n&&this.changeTarget(n)}return g(t,[{key:"changeTarget",value:function(t){this.disable(),this._target=t,t&&(this._orientation=-1!==["portrait","landscape"].indexOf(t),this.activate())}},{key:"_match",value:function(t){return this._orientation?this._target===(t.isPortrait?"portrait":"landscape"):t.matches}},{key:"_onChange",value:function(t){this._element._updateMode(this._match(t)?"collapse":"split")}},{key:"activate",value:function(){this._orientation?(Ot.on("change",this._onChange),this._onChange({isPortrait:Ot.isPortrait()})):(this._queryResult=window.matchMedia(this._target),this._queryResult.addListener(this._onChange),this._onChange(this._queryResult))}},{key:"disable",value:function(){this._orientation?Ot.off("change",this._onChange):this._queryResult&&(this._queryResult.removeListener(this._onChange),this._queryResult=null)}}]),t}(),ua=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._state=aa,t._lock=new Nt,t._pageLoader=jt,t._collapseDetection=new la(t),t._animatorFactory=new O({animators:ra.animators,baseClass:na,baseClassName:"SplitterAnimator",defaultAnimation:t.getAttribute("animation")}),n(t,function(){t.attributeChangedCallback("width"),t.hasAttribute("side")||t.setAttribute("side","left"),sa.ready(t,function(){var e=t._page||t.getAttribute("page");e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;Q.match(this.parentNode,"ons-splitter")||Q.throw("Parent must be an ons-splitter element"),this._swipe=new Qo({element:this,elementHandler:this.parentElement,swipeMax:function(){t._onSwipe&&t._onSwipe(1,t._animationOpt),t.open()},swipeMid:function(e,n){t._onSwipe&&t._onSwipe(e/n),t._animator.translate(e)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,t._animationOpt),t.close()},getThreshold:function(){return Math.max(0,Math.min(1,parseFloat(t.getAttribute("open-threshold"))||.3))},getSide:function(){return t.side},isInitialState:function(){var e=t._state===aa;return t._state="changing",e},ignoreSwipe:function(e,n){var i=t.isOpen,o=Math.max(0,parseInt(t.getAttribute("swipe-target-width"),10)||0);return"split"===t._mode||t._lock.isLocked()||t._isOtherSideOpen()||!function(e){return"left"===t.side?"left"===e&&i||"right"===e&&!i:"left"===e&&!i||"right"===e&&i}(e.gesture.direction)||!i&&0!==o&&n>o}}),this.attributeChangedCallback("swipeable"),n(this,function(){t.constructor.observedAttributes.forEach(function(e){return t.attributeChangedCallback(e,null,t.getAttribute(e))})})}},{key:"disconnectedCallback",value:function(){this._swipe&&this._swipe.dispose(),this._animator=this._animationOpt=this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"swipeable":this._swipe&&this._swipe.update();break;case"width":n=this.getAttribute("width"),this.style.width=/^\d+(px|%)$/.test(n)?n:"80%";break;default:this[Q.camelize("_update-"+t)](n)}}},{key:"_emitEvent",value:function(t){if("pre"!==t.slice(0,3))return Q.triggerElementEvent(this,t,{side:this});var e=!1;return Q.triggerElementEvent(this,t,{side:this,cancel:function(){return e=!0}}),e}},{key:"_isOtherSideOpen",value:function(){var t=this;return!!Q.findChild(this.parentElement,function(e){return e instanceof t.constructor&&e!==t&&"collapse"===e._mode&&e.isOpen})}},{key:"_updateCollapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("collapse");return null===t||"split"===t?(this._collapseDetection.disable(),this._updateMode("split")):""===t||"collapse"===t?(this._collapseDetection.disable(),this._updateMode("collapse")):void this._collapseDetection.changeTarget(t)}},{key:"_updateMode",value:function(t){t!==this._mode&&(this._mode=t,this.setAttribute("mode",t),"split"===t?(this._animator&&this._animator.deactivate(),this._state=aa):(this._animator&&this._animator.activate(this),"open"===this._state&&this._animator.open()),Q.triggerElementEvent(this,"modechange",{side:this,mode:t}))}},{key:"_updateAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation");this.parentNode&&(this._animator&&this._animator.deactivate(),this._animator=this._animatorFactory.newAnimator({animation:t}),this._animator.activate(this),this._animationOpt={timing:this._animator.duration,duration:this._animator.duration})}},{key:"_updateAnimationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation-options");this._animator.updateOptions(O.parseAnimationOptionsString(t))}},{key:"open",value:function(t){return this.toggle(t,!0)}},{key:"close",value:function(t){return this.toggle(t,!1)}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i="boolean"==typeof n?n:!this.isOpen,o=i?"open":"close",r=i?"open":aa;if("split"===this._mode)return Promise.resolve(!1);if(this._state===r)return Promise.resolve(this);if(this._lock.isLocked())return Promise.reject("Another splitter-side action is already running.");if(i&&this._isOtherSideOpen())return Promise.reject("Another menu is already open.");if(this._emitEvent("pre"+o))return Promise.reject("Canceled in pre"+o+" event.");var a=this._lock.lock();return this._state="changing",new Promise(function(n){t._animator[o](function(){Q.iosPageScrollFix(i),t._state=r,a(),t._emitEvent("post"+o),e.callback instanceof Function&&e.callback(t),n(t)})})}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"side",get:function(){return"right"===this.getAttribute("side")?"right":"left"}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"mode",get:function(){return this._mode}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"isOpen",get:function(){return"collapse"===this._mode&&this._state!==aa}}],[{key:"observedAttributes",get:function(){return["animation","width","collapse","swipeable","animation-options"]}},{key:"events",get:function(){return["preopen","postopen","preclose","postclose","modechange"]}},{key:"rewritables",get:function(){return sa}}]),e}();c.SplitterSide=ua,customElements.define("ons-splitter-side",ua);var ca={"":"switch--*",".switch__input":"switch--*__input",".switch__handle":"switch--*__handle",".switch__toggle":"switch--*__toggle"},ha={ios:[1,21],material:[0,16]},da=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t.attributeChangedCallback("modifier",null,t.getAttribute("modifier"))}),t._onChange=t._onChange.bind(t),t._onRelease=t._onRelease.bind(t),t._lastTimeStamp=0,t}return b(e,Ho),g(e,[{key:"_getPosition",value:function(t){var e=this._locations;return Math.min(e[1],Math.max(e[0],this._startX+t.gesture.deltaX))}},{key:"_emitChangeEvent",value:function(){Q.triggerElementEvent(this,"change",{value:this.checked,switch:this,isInteractive:!0})}},{key:"_onChange",value:function(t){t&&t.stopPropagation&&t.stopPropagation(),this._emitChangeEvent()}},{key:"_onClick",value:function(t){(t.target.classList.contains(this.defaultElementClass+"__touch")||t.timeStamp-this._lastTimeStamp<50)&&t.preventDefault(),this._lastTimeStamp=t.timeStamp}},{key:"_onHold",value:function(t){this.disabled||(B.addModifier(this,"active"),document.addEventListener("release",this._onRelease))}},{key:"_onDragStart",value:function(t){this.disabled||-1===["left","right"].indexOf(t.gesture.direction)?B.removeModifier(this,"active"):(t.consumed=!0,B.addModifier(this,"active"),this._startX=this._locations[this.checked?1:0],this.addEventListener("drag",this._onDrag),document.addEventListener("release",this._onRelease))}},{key:"_onDrag",value:function(t){t.stopPropagation(),this._handle.style.left=this._getPosition(t)+"px"}},{key:"_onRelease",value:function(t){var e=this._locations,n=this._getPosition(t),i=this.checked;this.checked=n>=(e[0]+e[1])/2,this.checked!==i&&this._emitChangeEvent(),this.removeEventListener("drag",this._onDrag),document.removeEventListener("release",this._onRelease),this._handle.style.left="",B.removeModifier(this,"active")}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disabled||(this.checked=!this.checked,this._emitChangeEvent(),this._lastTimeStamp=t.timeStamp||0)}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("change",t._onChange)}),this.addEventListener("dragstart",this._onDragStart),this.addEventListener("hold",this._onHold),this.addEventListener("tap",this.click),this.addEventListener("click",this._onClick),this._gestureDetector=new st(this,{dragMinDistance:1,holdTimeout:251,passive:!0})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("change",t._onChange)}),this.removeEventListener("dragstart",this._onDragStart),this.removeEventListener("hold",this._onHold),this.removeEventListener("tap",this.click),this.removeEventListener("click",this._onClick),this._gestureDetector&&this._gestureDetector.dispose()}},{key:"attributeChangedCallback",value:function(t,n,i){if("modifier"===t){var o=-1!==(i||"").indexOf("material");this._locations=ha[o?"material":"ios"]}v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return ca}},{key:"_defaultClassName",get:function(){return"switch"}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <div class="'+this._defaultClassName+'__toggle">\n        <div class="'+this._defaultClassName+'__handle">\n          <div class="'+this._defaultClassName+'__touch"></div>\n        </div>\n      </div>\n    '}},{key:"type",get:function(){return"checkbox"}},{key:"_handle",get:function(){return this.querySelector("."+this._defaultClassName+"__handle")}},{key:"checkbox",get:function(){return this._input}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["modifier"])}}]),e}();c.Switch=da,customElements.define("ons-switch",da);var fa={".tabbar__content":"tabbar--*__content",".tabbar__border":"tabbar--*__border",".tabbar":"tabbar--*"},pa={ready:function(t,e){e()}},ga=function(t,e,n){return(1-n)*t+n*e},ma=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._loadInactive=Q.defer(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t._contentElement},getInitialIndex:function(){return t.getAttribute("activeIndex")||t.getAttribute("active-index")},getAutoScrollRatio:this._getAutoScrollRatio.bind(this),getBubbleWidth:function(){return parseInt(t.getAttribute("ignore-edge-width")||25,10)},isAutoScrollable:function(){return!0},preChangeHook:this._onPreChange.bind(this),postChangeHook:this._onPostChange.bind(this),refreshHook:this._onRefresh.bind(this),scrollHook:this._onScroll.bind(this)}),n(this,function(){t._tabbarBorder=Q.findChild(t._tabbarElement,".tabbar__border"),t._swiper.init({swipeable:t.hasAttribute("swipeable")})})),n(this,function(){t._updatePosition(),Q.findParent(t,"ons-page",function(t){return t===document.body})||t._show()})}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null,this._tabbarBorder=null,this._tabsRect=null)}},{key:"_normalizeEvent",value:function(t){return _({},t,{index:t.activeIndex,tabItem:this.tabs[t.activeIndex]})}},{key:"_onPostChange",value:function(t){t=this._normalizeEvent(t),Q.triggerElementEvent(this,"postchange",t);var e=t.tabItem.pageElement;e&&e._show()}},{key:"_onPreChange",value:function(t){if(t=this._normalizeEvent(t),t.cancel=function(){return t.canceled=!0},Q.triggerElementEvent(this,"prechange",t),!t.canceled){var e=t,n=e.activeIndex,i=e.lastActiveIndex,o=this.tabs;if(o[n].setActive(!0),i>=0){var r=o[i];r.setActive(!1),r.pageElement&&r.pageElement._hide()}}return t.canceled}},{key:"_onScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._tabbarBorder)if(this._tabbarBorder.style.transition="all "+(e.duration||0)+"s "+(e.timing||""),this._autogrow&&this._tabsRect.length>0){var n=Math.floor(t),i=Math.ceil(t),o=t%1;this._tabbarBorder.style.width=ga(this._tabsRect[n].width,this._tabsRect[i].width,o)+"px",this._tabbarBorder.style.transform="translate3d("+ga(this._tabsRect[n].left,this._tabsRect[i].left,o)+"px, 0, 0)"}else this._tabbarBorder.style.transform="translate3d("+100*t+"%, 0, 0)";this._onSwipe&&this._onSwipe(t,e)}},{key:"_onRefresh",value:function(){if(this._autogrow=Q.hasModifier(this,"autogrow"),this._tabsRect=this.tabs.map(function(t){return t.getBoundingClientRect()}),this._tabbarBorder){this._tabbarBorder.style.display=this.hasAttribute("tab-border")||Q.hasModifier(this,"material")?"block":"none";var t=this.getActiveTabIndex();this._tabsRect.length>0&&t>=0&&(this._tabbarBorder.style.width=this._tabsRect[t].width+"px")}}},{key:"_getAutoScrollRatio",value:function(t,e,n){var i=n/300*(t?-1:1);return Math.min(1,Math.max(0,.6+e*i))}},{key:"_compile",value:function(){N.prepare(this);var t=this._contentElement||Q.create(".tabbar__content");t.classList.add("ons-tabbar__content");var e=this._tabbarElement||Q.create(".tabbar");if(e.classList.add("ons-tabbar__footer"),!e.parentNode)for(;this.firstChild;)e.appendChild(this.firstChild);var n=Number(this.getAttribute("activeIndex"));e.children.length>n&&!Q.findChild(e,"[active]")&&e.children[n].setAttribute("active",""),this._tabbarBorder=Q.findChild(e,".tabbar__border")||Q.create(".tabbar__border"),e.appendChild(this._tabbarBorder),e.classList.add("ons-swiper-tabbar"),!t.children[0]&&t.appendChild(document.createElement("div")),!t.children[1]&&t.appendChild(document.createElement("div")),t.appendChild=t.appendChild.bind(t.children[0]),t.insertBefore=t.insertBefore.bind(t.children[0]),this.appendChild(t),this.appendChild(e),B.initModifier(this,fa)}},{key:"_updatePosition",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("position"),i=this._top="top"===e||"auto"===e&&Q.hasModifier(this,"material"),o=i?Q.addModifier:Q.removeModifier;o(this,"top");var r=Q.findParent(this,"ons-page");r&&n(r,function(){var e=0;r.children[0]&&Q.match(r.children[0],"ons-toolbar")&&(o(r.children[0],"noshadow"),e=1);var n=r._getContentElement(),a=window.getComputedStyle(r._getContentElement(),null);t.style.top=i?parseInt(a.getPropertyValue("padding-top"),10)-e+"px":"",n.style.top=a.top,n.style.top=""}),P.autoStatusBarFill(function(){var e=Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")});Q.toggleAttribute(t,"status-bar-fill",i&&!e)})}},{key:"setActiveTab",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getActiveTabIndex(),o=this.tabs[i],r=this.tabs[t];if(!r)return Promise.reject("Specified index does not match any tab.");if(t===i)return Q.triggerElementEvent(this,"reactive",{index:t,activeIndex:t,tabItem:r}),Promise.resolve(r.pageElement);var a=r.pageElement;return(a?Promise.resolve(a):r.loaded).then(function(i){return e._swiper.setActiveIndex(t,_({reject:!0},n,{animation:o&&i?n.animation||e.getAttribute("animation"):"none",animationOptions:Q.extend({duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"},e.hasAttribute("animation-options")?Q.animationOptionsParse(e.getAttribute("animation-options")):{},n.animationOptions||{})})).then(function(){return n.callback instanceof Function&&n.callback(i),i})})}},{key:"setTabbarVisibility",value:function(t){var e=this;n(this,function(){e._contentElement.style[e._top?"top":"bottom"]=t?"":"0px",e._tabbarElement.style.display=t?"":"none",t&&e._onRefresh()})}},{key:"show",value:function(){this.setTabbarVisibility(!0)}},{key:"hide",value:function(){this.setTabbarVisibility(!1)}},{key:"getActiveTabIndex",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tabs,e=0;e<t.length;e++)if(t[e]&&"ONS-TAB"===t[e].tagName&&t[e].isActive())return e;return-1}},{key:"_show",value:function(){var t=this;this._swiper.show(),setImmediate(function(){var e=t.tabs,n=t.getActiveTabIndex(e);t._loadInactive.resolve(),e.length>0&&n>=0&&e[n].loaded.then(function(t){return t&&setImmediate(function(){return t._show()})})})}},{key:"_hide",value:function(){this._swiper.hide();var t=this.topPage;t&&t._hide()}},{key:"_destroy",value:function(){this.tabs.forEach(function(t){return t.remove()}),this.remove()}},{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t){B.onModifierChanged(e,n,this,fa);var i=function(t){return/(^|\s+)top($|\s+)/i.test(t)};i(e)!==i(n)&&this._updatePosition()}else"position"===t?Q.isAttached(this)&&this._updatePosition():"swipeable"===t?this._swiper&&this._swiper.updateSwipeable(this.hasAttribute("swipeable")):"hide-tabs"===t&&this.setTabbarVisibility(!this.hasAttribute("hide-tabs")||"false"===n)}},{key:"_tabbarElement",get:function(){return Q.findChild(this,".tabbar")}},{key:"_contentElement",get:function(){return Q.findChild(this,".tabbar__content")}},{key:"_targetElement",get:function(){var t=this._contentElement;return t&&t.children[0]||null}},{key:"topPage",get:function(){var t=this.tabs,e=this.getActiveTabIndex();return t[e]?t[e].pageElement||this.pages[0]||null:null}},{key:"pages",get:function(){return Q.arrayFrom(this._targetElement.children)}},{key:"tabs",get:function(){return Array.prototype.filter.call(this._tabbarElement.children,function(t){return"ONS-TAB"===t.tagName})}},{key:"visible",get:function(){return"none"!==this._tabbarElement.style.display}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}}],[{key:"observedAttributes",get:function(){return["modifier","position","swipeable","tab-border","hide-tabs"]}},{key:"rewritables",get:function(){return pa}},{key:"events",get:function(){return["prechange","postchange","reactive"]}}]),e}();c.Tabbar=ma,customElements.define("ons-tabbar",ma);var _a={"":"tabbar--*__item",".tabbar__button":"tabbar--*__button"},va=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return["label","icon","badge"].some(t.hasAttribute.bind(t))?t._compile():n(t,function(){return t._compile()}),t._pageLoader=jt,t._onClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("tabbar__item"),!this._button){for(var t=Q.create("button.tabbar__button");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.create("input",{display:"none"});e.type="radio",this.appendChild(e),this.appendChild(t),this._updateButtonContent(),B.initModifier(this,_a),this._updateRipple()}}},{key:"_updateRipple",value:function(){this._button&&Q.updateRipple(this._button,this.hasAttribute("ripple"))}},{key:"_updateButtonContent",value:function(){var t=this,e=this._button,n=this._icon;if(this.hasAttribute("icon")){var i=(n=n||Q.createElement('<div class="tabbar__icon"><ons-icon></ons-icon></div>')).children[0],o=function(e){return function(){return i.attributeChangedCallback("icon",e,t.getAttribute("icon"))}}(i.getAttribute("icon"));i.setAttribute("icon",this.getAttribute("icon")),n.parentElement!==e&&e.insertBefore(n,e.firstChild),i.attributeChangedCallback instanceof Function?o():setImmediate(function(){return i.attributeChangedCallback instanceof Function&&o()})}else n&&n.remove();["label","badge"].forEach(function(n,i){var o=t.querySelector(".tabbar__"+n);t.hasAttribute(n)?((o=o||Q.create(".tabbar__"+n+("badge"===n?" notification":""))).textContent=t.getAttribute(n),o.parentElement!==e&&e.appendChild(o)):o&&o.remove()})}},{key:"_onClick",value:function(){this.onClick instanceof Function?this.onClick():this._tabbar.setActiveTab(this.index,{reject:!1})}},{key:"setActive",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._input.checked=t,this.classList.toggle("active",t),Q.toggleAttribute(this,"active",t),this.hasAttribute("icon")&&this.hasAttribute("active-icon")&&this._icon.children[0].setAttribute("icon",this.getAttribute(t?"active-icon":"icon"))}},{key:"_loadPageElement",value:function(t,e){var n=this;return this._hasLoaded=!0,new Promise(function(i){n._pageLoader.load({parent:t,page:e},function(e){t.replaceChild(e,t.children[n.index]),n._loadedPage=e,i(e)})})}},{key:"isActive",value:function(){return this.classList.contains("active")}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._onClick,!1),this._loadedPage&&(this._pageLoader.unload(this._loadedPage),this._loadedPage=null,this._hasLoaded=!1,this.loaded=null)}},{key:"connectedCallback",value:function(){var t=this;if(this.addEventListener("click",this._onClick,!1),Q.isAttached(this)&&!this.loaded){var e=Q.defer();this.loaded=e.promise,n(this,function(){var n=t.index,i=t._tabbar;i||Q.throw("Tab elements must be children of Tabbar"),i.hasAttribute("modifier")&&Q.addModifier(t,i.getAttribute("modifier")),t._hasLoaded||(t.hasAttribute("active")&&(t.setActive(!0),i.setAttribute("activeIndex",n)),n===i.tabs.length-1&&(i._onRefresh(),setImmediate(function(){return i._onRefresh()})),ma.rewritables.ready(i,function(){var o=t.page||t.getAttribute("page");if(!t.pageElement&&o){var r=i._targetElement,a=Q.create("div",{height:"100%",width:"100%",visibility:"hidden"});r.insertBefore(a,r.children[n]);var s=function(){return t._loadPageElement(r,o).then(e.resolve)};return t.isActive()?s():i._loadInactive.promise.then(s)}return e.resolve(t.pageElement)}))})}}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"tabbar__item",_a);break;case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,_a)});break;case"ripple":n(this,function(){return o._updateRipple()});break;case"icon":case"label":case"badge":n(this,function(){return o._updateButtonContent()});break;case"page":this.page=i||""}}},{key:"pageLoader",set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t},get:function(){return this._pageLoader}},{key:"_input",get:function(){return Q.findChild(this,"input")}},{key:"_button",get:function(){return Q.findChild(this,".tabbar__button")}},{key:"_icon",get:function(){return this.querySelector(".tabbar__icon")}},{key:"_tabbar",get:function(){return Q.findParent(this,"ons-tabbar")}},{key:"index",get:function(){return Array.prototype.indexOf.call(this.parentElement.children,this)}},{key:"pageElement",get:function(){if(this._loadedPage)return this._loadedPage;var t=this._tabbar;return t.pages.length===t.tabs.length?t.pages[this.index]:null}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","icon","label","page","badge","class"]}}]),e}();c.Tab=va,customElements.define("ons-tab",va);var ba=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),ya=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,ba),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),ka=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.25:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.messageDelay=.4*l.duration+l.delay,C.isAndroid()?l.ascension=48:Li.isIPhoneXPortraitPatchActive()?l.ascension=98:Li.isIPhoneXLandscapePatchActive()?l.ascension=85:l.ascension=64,l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,Q.globals.fabOffset=this.ascension,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.ascension+"px, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs()).wait(this.delay).queue({transform:"translate3d(0, -"+this.ascension+"px, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:0},{opacity:1}))}},{key:"hide",value:function(t,e){t=t._toast,Q.globals.fabOffset=0,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.ascension+"px, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs(),this.def).wait(this.delay).queue({transform:"translate3d(0, 0, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:1},{opacity:0}))}},{key:"_getFabs",value:function(){return Q.arrayFrom(document.querySelectorAll("ons-fab[position~=bottom], ons-speed-dial[position~=bottom]")).filter(function(t){return t.visible})}}]),e}(),wa=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 34px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 21px)":l.liftAmount="100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0}).queue(function(t){e&&e(),t()}))}},{key:"_updatePosition",value:function(t){0===parseInt(t.style.top,10)&&(t.style.top=t.style.bottom="")}}]),e}(),Ea=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return Li.isIPhoneXPortraitPatchActive()?l.fallAmount="calc(-100% - 44px)":l.fallAmount="-100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){var n=this;t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0}).queue(function(i){n._updatePosition(t,!0),e&&e(),i()}))}},{key:"_updatePosition",value:function(t,e){var n=void 0;n=Li.isIPhoneXPortraitPatchActive()?"44px":"0",t.style.top!==n&&(t.style.top=n,t.style.bottom="initial")}}]),e}(),Ca={".toast":"toast--*",".toast__message":"toast--*__message",".toast__button":"toast--*__button"},Aa={default:C.isAndroid()?ka:wa,fade:ya,ascend:ka,lift:wa,fall:Ea,none:ba},Sa=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(t){return t.callParentHandler()},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return this._toast&&(this._toast.style.top=this._toast.style.bottom=""),new O({animators:Aa,baseClass:ba,baseClassName:"ToastAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=1e4;var t=Q.findChild(this,".toast");if(!t)for((t=document.createElement("div")).classList.add("toast");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.findChild(t,".toast__button");if(e||(e=Q.findChild(t,function(t){return Q.match(t,".button")||Q.match(t,"button")}))&&(e.classList.remove("button"),e.classList.add("toast__button"),t.appendChild(e)),!Q.findChild(t,".toast__message")){var n=Q.findChild(t,".message");if(!n){n=document.createElement("div");for(var i=t.childNodes.length-1;i>=0;i--)t.childNodes[i]!==e&&n.insertBefore(t.childNodes[i],n.firstChild)}n.classList.add("toast__message"),t.insertBefore(n,t.firstChild)}t.parentNode!==this&&this.appendChild(t),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Ca}},{key:"_toast",get:function(){return Q.findChild(this,".toast")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof ba||Q.throw('"Animator" param must inherit OnsToastElement.ToastAnimator'),Aa[t]=e}},{key:"animators",get:function(){return Aa}},{key:"ToastAnimator",get:function(){return ba}}]),e}();c.Toast=Sa,customElements.define("ons-toast",Sa);var Pa=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"toolbar-button--*"}}},{key:"_defaultClassName",get:function(){return"toolbar-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{center:"",size:"contain",background:"transparent"}]}}]),e}();return c.ToolbarButton=Pa,customElements.define("ons-toolbar-button",Pa),function(t){window._onsLoaded&&t._util.warn("Onsen UI is loaded more than once."),window._onsLoaded=!0,window.addEventListener("load",function(){t.fastClick=zt.attach(document.body);var e="touch-action"in document.body.style;t.platform._runOnActualPlatform(function(){t.platform.isAndroid()?t.fastClick.destroy():t.platform.isIOS()&&e&&(t.platform.isIOSSafari()||t.platform.isWKWebView())&&t.fastClick.destroy()})},!1),t.ready(function(){t.enableDeviceBackButtonHandler(),t._defaultDeviceBackButtonHandler=t._internal.dbbDispatcher.createHandler(window.document.body,function(){Object.hasOwnProperty.call(navigator,"app")?navigator.app.exitApp():console.warn("Could not close the app. Is 'cordova.js' included?\nError: 'window.navigator.app' is undefined.")}),document.body._gestureDetector=new t.GestureDetector(document.body,{passive:!0}),t.platform.isWebView()||document.body.addEventListener("keydown",function(e){27===e.keyCode&&t.fireDeviceBackButtonEvent()}),t._setupLoadingPlaceHolders()}),Viewport.setup()}(Rt),window._superSecretOns=Rt,Rt});

function getJSON(url, cb) {
    var xmlhttp = new XMLHttpRequest();
    var onError = window.ons.notification.alert.bind(window.ons.notification, {
        message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
    });

    xmlhttp.onreadystatechange = function () {
        if (this.readyState === 4) {
            if (this.status == 200) {
                var myArr = JSON.parse(this.responseText);
                cb(JSON.parse(this.responseText));
            }
        }
    };
    xmlhttp.onerror = onError;
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
};
document.addEventListener("DOMContentLoaded", function (event) {
    var websiteTitle = document.title;
    if (window.ons.platform.isWebView() && window.history) {
        window.fn.navigator.addEventListener('postpush', function (e) {
            if (e.detail.enterPage.id === 'splitter') return;
            var title = e.detail.enterPage.querySelector('.toolbar__center').innerText;
            document.title = websiteTitle + ' - ' + title;
            window.history.pushState(null, document.title);
        });
        var historyAPI = true;
        window.fn.navigator.addEventListener('postpop', function (e) {
            historyAPI = !!e.detail.enterPage.data.historyAPI;
            if (!e.detail.enterPage.data.historyAPI) history.back();
        });
        window.addEventListener('popstate', function (e) {
            if (historyAPI) window.fn.navigator.popPage({ data: { historyAPI: true } });
            historyAPI = true;
        });
    }
});
var cordova_ready = false;

var isOnline = function () {

}, isOffline = function () {
	
};

window.ons.disableAutoStatusBarFill();

if (window.addEventListener) {
	/*
		Works well in Firefox and Opera with the 
		Work Offline option in the File menu.
		Pulling the ethernet cable doesn't seem to trigger it.
		Later Google Chrome and Safari seem to trigger it well
	*/
	window.addEventListener("online", isOnline, false);
	window.addEventListener("offline", isOffline, false);
}
else {
	/*
		Works in IE with the Work Offline option in the 
		File menu and pulling the ethernet cable
	*/
	document.body.ononline = isOnline;
	document.body.onoffline = isOffline;
}

document.addEventListener("resume", function () {
	if (navigator.onLine === false) {
		
	}
}, false)

document.addEventListener('init', function (event) {
	var page = event.target;

	if (page.classList.contains('app-page')) {
		var control = page.querySelector(fn.navigator.pages.length > 1
			? 'ons-back-button'
			: '.page-toolbar-back-button')
		if (control) control.classList.remove('hidden');
		initPage(page);
	}
});

document.addEventListener("deviceready", function () {
	cordova_ready = true;
	if (cordova.platformId === 'browser') {
		document.body.appendChild(document.createElement('script')).src = './js/browser.js';
	}
	if (navigator.onLine === false) {
		document.body.appendChild(document.createElement('script')).src = './js/admob.js';
	}
}, false);

window.fn = {};

window.fn.navigator = document.getElementById('navigator');

window.fn.open = function () {
	var menu = document.getElementById('menu');
	menu.open();
};

window.fn.load = function (page) {
	var content = document.getElementById('content');
	var menu = document.getElementById('menu');
	content.load(page)
		.then(menu.close.bind(menu));
};

function initPage(page) {
	page.querySelectorAll('.btn-list').forEach(function (list) {
		list.classList.add('list');
		list.style.marginLeft = '-10px';
		list.style.marginRight = '-10px';
		list.querySelectorAll('li').forEach(function (li) {
			li.classList.add('list-item');
			var center = document.createElement('div');
			center.classList.add('list-item__center');
			li.appendChild(center);

			var right = document.createElement('div');
			right.classList.add('list-item__right');
			var btn = li.querySelector('ons-button');
			btn.classList.add('button--outline');
			li.removeChild(btn);
			right.appendChild(btn);
			li.appendChild(right);
			var text = btn.innerText.toLowerCase();
			text = text[0].toUpperCase() + text.slice(1);
			center.appendChild(document.createTextNode(text));
			btn.innerText = 'Begin';
		});
	});

	page.querySelectorAll('.btn-checkbox-list').forEach(function (list) {
		list.classList.add('list');
		list.style.marginLeft = '-10px';
		list.style.marginRight = '-10px';
		list.querySelectorAll('li').forEach(function (li) {
			li.classList.add('list-item');
			var center = document.createElement('div');
			center.classList.add('list-item__center');
			li.appendChild(center);

			var checked = !!localStorage.getItem('checkboxes-' + li.getAttribute('data-checkbox'));
			var left = document.createElement('div');
			left.classList.add('list-item__left');
			var checkbox = document.createElement('ons-checkbox');
			checkbox.checked = checked;
			checkbox.oninput = function(e) {
				localStorage.setItem('checkboxes-' + li.getAttribute('data-checkbox'), e.target.checked ? 'set' : '');
			}
			left.appendChild(checkbox);
			li.appendChild(left);

			var right = document.createElement('div');
			right.classList.add('list-item__right');
			var btn = li.querySelector('ons-button');
			btn.classList.add('button--outline');
			li.removeChild(btn);
			right.appendChild(btn);
			li.appendChild(right);
			var text = btn.innerText.toLowerCase();
			text = text[0].toUpperCase() + text.slice(1);
			center.appendChild(document.createTextNode(text));
			btn.innerText = 'Begin';
		});
	});

	page.querySelectorAll('.link-list').forEach(function (list) {
		list.classList.add('list');
		list.style.marginLeft = '-10px';
		list.style.marginRight = '-10px';
		list.querySelectorAll('li').forEach(function (li) {
			li.classList.add('list-item');
			var icon = document.createElement('ons-icon');
			icon.setAttribute('icon', 'ion-link');
			icon.style.marginRight = '10px';
			li.insertBefore(icon, li.firstChild);
		});

	});

	page.querySelectorAll('.vergelijkers-overzicht .row').forEach(function (row) {
		row.classList.add('list');
		row.style.marginLeft = '-10px';
		row.style.marginRight = '-10px';
		row.querySelectorAll('.vergelijker').forEach(function (vergelijker) {
			vergelijker.classList.add('list-item');
			vergelijker.querySelector('.panel').classList.add('list-item__center');
			var btn = vergelijker.querySelector('.button');
			btn.parentElement.removeChild(btn);

			var left = document.createElement('div');
			left.classList.add('list-item__left');
			var img = vergelijker.querySelector('img');
			img.parentElement.removeChild(img);
			img.classList.add('list-item__thumbnail');
			left.appendChild(img);

			var right = document.createElement('div');
			right.classList.add('list-item__right');
			right.appendChild(btn);

			vergelijker.appendChild(left);
			vergelijker.appendChild(right);
		});
	});
}




//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9saWIvb25zZW51aS5taW4uanMiLCJzcmMvanMvY29yZS5qcyIsInNyYy9qcy9wd2EtaGlzdG9yeS5qcyIsInNyYy9qcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIG9uc2VudWkgdjIuMTAuMSAtIDIwMTgtMDUtMjggKi9cbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOnQub25zPWUoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7a3Quc2V0KHQsITApfWZ1bmN0aW9uIGUodCl7dmFyIGU9d3QuZ2V0KHQsW10pfHxbXTt3dC5kZWxldGUodCksZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KX1mdW5jdGlvbiBuKG4pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe307aWYodm9pZCAwPT09a3QmJihrdD1uZXcgV2Vha01hcCx3dD1uZXcgV2Vha01hcCksZnVuY3Rpb24odCxlKXt3dC5oYXModCl8fHd0LnNldCh0LFtdKSx3dC5nZXQodCkucHVzaChlKX0obixpKSxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZE5vZGVzLmxlbmd0aD4wJiZ0KGUpLGt0LmhhcyhlKX0obikpZShuKTtlbHNle25ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGkpe3QobiksZShuKX0pLm9ic2VydmUobix7Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITB9KSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXt0KG4pLGUobil9KX19ZnVuY3Rpb24gaSh0KXt0Ll9kZXN0cm95IGluc3RhbmNlb2YgRnVuY3Rpb24/dC5fZGVzdHJveSgpOnQucmVtb3ZlKCl9ZnVuY3Rpb24gbyh0LGUpe3JldHVybiBlPXtleHBvcnRzOnt9fSx0KGUsZS5leHBvcnRzKSxlLmV4cG9ydHN9ZnVuY3Rpb24gcih0KXt2YXIgZT1naS5oYXModCksbj0vXlthLXpdWy4wLTlfYS16XSotW1xcLS4wLTlfYS16XSokLy50ZXN0KHQpO3JldHVybiFlJiZufWZ1bmN0aW9uIGEodCl7dmFyIGU9dC5pc0Nvbm5lY3RlZDtpZih2b2lkIDAhPT1lKXJldHVybiBlO2Zvcih2YXIgbj10O24mJiEobi5fX0NFX2lzSW1wb3J0RG9jdW1lbnR8fG4gaW5zdGFuY2VvZiBEb2N1bWVudCk7KW49bi5wYXJlbnROb2RlfHwod2luZG93LlNoYWRvd1Jvb3QmJm4gaW5zdGFuY2VvZiBTaGFkb3dSb290P24uaG9zdDp2b2lkIDApO3JldHVybiEoIW58fCEobi5fX0NFX2lzSW1wb3J0RG9jdW1lbnR8fG4gaW5zdGFuY2VvZiBEb2N1bWVudCkpfWZ1bmN0aW9uIHModCxlKXtmb3IodmFyIG49ZTtuJiZuIT09dCYmIW4ubmV4dFNpYmxpbmc7KW49bi5wYXJlbnROb2RlO3JldHVybiBuJiZuIT09dD9uLm5leHRTaWJsaW5nOm51bGx9ZnVuY3Rpb24gbCh0LGUpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06bmV3IFNldCxpPXQ7aTspe2lmKGkubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIG89aTtlKG8pO3ZhciByPW8ubG9jYWxOYW1lO2lmKFwibGlua1wiPT09ciYmXCJpbXBvcnRcIj09PW8uZ2V0QXR0cmlidXRlKFwicmVsXCIpKXt2YXIgYT1vLmltcG9ydDtpZihhIGluc3RhbmNlb2YgTm9kZSYmIW4uaGFzKGEpKXtuLmFkZChhKTtmb3IodmFyIHU9YS5maXJzdENoaWxkO3U7dT11Lm5leHRTaWJsaW5nKWwodSxlLG4pfWk9cyh0LG8pO2NvbnRpbnVlfWlmKFwidGVtcGxhdGVcIj09PXIpe2k9cyh0LG8pO2NvbnRpbnVlfXZhciBjPW8uX19DRV9zaGFkb3dSb290O2lmKGMpZm9yKHZhciBoPWMuZmlyc3RDaGlsZDtoO2g9aC5uZXh0U2libGluZylsKGgsZSxuKX1pPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZmlyc3RDaGlsZD9lLmZpcnN0Q2hpbGQ6cyh0LGUpfSh0LGkpfX1mdW5jdGlvbiB1KHQsZSxuKXt0W2VdPW59dmFyIGM9e30saD1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcIlwiKSxlPShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KS5qb2luKFwiXCIpLm1hdGNoKC8tKG1venx3ZWJraXR8bXMpLS8pfHxcIlwiPT09dC5PTGluayYmW1wiXCIsXCJvXCJdKVsxXTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuXCItXCIrZStcIi1cIitRLmh5cGhlbmF0ZSh0KX19KCksZD1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24gaW4gdC5zdHlsZT90LnN0eWxlW25dPWVbbl06aChuKWluIHQuc3R5bGU/dC5zdHlsZVtoKG4pXT1lW25dOlEud2FybihcIk5vIHN1Y2ggc3R5bGUgcHJvcGVydHk6IFwiK24pfSksdH07ZC5jbGVhcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9KGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIlwiKS5zcGxpdCgvXFxzKy8pLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0LmNvbmNhdChbUS5oeXBoZW5hdGUoZSksaChlKV0pfSxbXSksbj1bXSxpPXQuc3R5bGUubGVuZ3RoLTE7aT49MDtpLS0pIWZ1bmN0aW9uKGkpe3ZhciBvPXQuc3R5bGVbaV07KDA9PT1lLmxlbmd0aHx8ZS5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiAwPT09by5pbmRleE9mKHQpfSkpJiZuLnB1c2gobyl9KGkpO24uZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5zdHlsZVtlXT1cIlwifSksXCJcIj09PXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikmJnQucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIil9O3ZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LHA9ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9LF89T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0sdj1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09cj92b2lkIDA6dChyLG4saSl9aWYoXCJ2YWx1ZVwiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgYT1vLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGI9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX0seT1mdW5jdGlvbih0LGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0KWUuaW5kZXhPZihpKT49MHx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsaSkmJihuW2ldPXRbaV0pO3JldHVybiBufSxrPWZ1bmN0aW9uKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9LHc9ZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1BcnJheSh0Lmxlbmd0aCk7ZTx0Lmxlbmd0aDtlKyspbltlXT10W2VdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKHQpfSxFPXdpbmRvdy5IVE1MRWxlbWVudCxDPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKHRoaXMsdCksdGhpcy5fc2VsZWN0ZWRQbGF0Zm9ybT1udWxsLHRoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0PSExfXJldHVybiBnKHQsW3trZXk6XCJzZWxlY3RcIix2YWx1ZTpmdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHRoaXMuX3NlbGVjdGVkUGxhdGZvcm09dC50cmltKCkudG9Mb3dlckNhc2UoKSl9fSx7a2V5OlwiX2dldFNlbGVjdGVkUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZ25vcmVQbGF0Zm9ybVNlbGVjdD9udWxsOnRoaXMuX3NlbGVjdGVkUGxhdGZvcm19fSx7a2V5OlwiX3J1bk9uQWN0dWFsUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9pZ25vcmVQbGF0Zm9ybVNlbGVjdD0hMDt2YXIgZT10KCk7cmV0dXJuIHRoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0PSExLGV9fSx7a2V5OlwiaXNXZWJWaWV3XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihcImxvYWRpbmdcIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwidW5pbml0aWFsaXplZFwiPT1kb2N1bWVudC5yZWFkeVN0YXRlKXRocm93IG5ldyBFcnJvcihcImlzV2ViVmlldygpIG1ldGhvZCBpcyBhdmFpbGFibGUgYWZ0ZXIgZG9tIGNvbnRlbnRzIGxvYWRlZC5cIik7cmV0dXJuISEod2luZG93LmNvcmRvdmF8fHdpbmRvdy5waG9uZWdhcHx8d2luZG93LlBob25lR2FwKX19LHtrZXk6XCJpc0lQaG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL2lQaG9uZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fSx7a2V5OlwiaXNJUGhvbmVYXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0lQaG9uZSgpJiYoMzc1PT09d2luZG93LnNjcmVlbi53aWR0aCYmODEyPT09d2luZG93LnNjcmVlbi5oZWlnaHR8fDgxMj09PXdpbmRvdy5zY3JlZW4ud2lkdGgmJjM3NT09PXdpbmRvdy5zY3JlZW4uaGVpZ2h0KX19LHtrZXk6XCJpc0lQYWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi9pUGFkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0lQb2RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi9pUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0lPU1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cImlvc1wiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOlwib2JqZWN0XCIhPT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSl8fC9icm93c2VyL2kudGVzdChkZXZpY2UucGxhdGZvcm0pPy9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTovaU9TL2kudGVzdChkZXZpY2UucGxhdGZvcm0pfX0se2tleTpcImlzSU9TN2Fib3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpJiYhL2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSkpcmV0dXJuL2lPUy9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKSYmcGFyc2VJbnQoZGV2aWNlLnZlcnNpb24uc3BsaXQoXCIuXCIpWzBdKT49NztpZigvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe3ZhciB0PShuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9cXGJbMC05XStfWzAtOV0rKD86X1swLTldKyk/XFxiLyl8fFtcIlwiXSlbMF0ucmVwbGFjZSgvXy9nLFwiLlwiKTtyZXR1cm4gcGFyc2VJbnQodC5zcGxpdChcIi5cIilbMF0pPj03fXJldHVybiExfX0se2tleTpcImlzSU9TU2FmYXJpXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cubmF2aWdhdG9yLGU9dC51c2VyQWdlbnQ7cmV0dXJuISghdGhpcy5pc0lPUygpfHwtMT09PWUuaW5kZXhPZihcIlNhZmFyaVwiKXx8LTE9PT1lLmluZGV4T2YoXCJWZXJzaW9uXCIpfHx0LnN0YW5kYWxvbmUpfX0se2tleTpcImlzV0tXZWJWaWV3XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0vY29uc3RydWN0b3IvaS50ZXN0KEUpO3JldHVybiEoISh0aGlzLmlzSU9TKCkmJndpbmRvdy53ZWJraXQmJndpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzJiZ3aW5kb3cuaW5kZXhlZERCKXx8dCl9fSx7a2V5OlwiaXNVSVdlYlZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMuaXNJT1MoKXx8dGhpcy5pc0lPU1NhZmFyaSgpfHx0aGlzLmlzV0tXZWJWaWV3KCkpfX0se2tleTpcImlzQW5kcm9pZFBob25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4vQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9Nb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfX0se2tleTpcImlzQW5kcm9pZFRhYmxldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhL01vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fSx7a2V5OlwiaXNBbmRyb2lkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiYW5kcm9pZFwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOi9BbmRyb2lkL2kudGVzdChcIm9iamVjdFwiIT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpfHwvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKT9uYXZpZ2F0b3IudXNlckFnZW50OmRldmljZS5wbGF0Zm9ybSl9fSx7a2V5OlwiaXNXUFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cIndwXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJvYmplY3RcIiE9PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKXx8L2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSk/L1dpbmRvd3MgUGhvbmV8SUVNb2JpbGV8V1BEZXNrdG9wL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTovV2luMzJOVHxXaW5DRS9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKX19LHtrZXk6XCJpc0JsYWNrQmVycnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJibGFja2JlcnJ5XCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJvYmplY3RcIiE9PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKXx8L2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSk/L0JsYWNrQmVycnl8UklNIFRhYmxldCBPU3xCQjEwL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTovQmxhY2tCZXJyeS9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKX19LHtrZXk6XCJpc09wZXJhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wib3BlcmFcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTohIXdpbmRvdy5vcGVyYXx8bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiIE9QUi9cIik+PTB9fSx7a2V5OlwiaXNGaXJlZm94XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiZmlyZWZveFwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBJbnN0YWxsVHJpZ2dlcn19LHtrZXk6XCJpc1NhZmFyaVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cInNhZmFyaVwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cuSFRNTEVsZW1lbnQpLmluZGV4T2YoXCJDb25zdHJ1Y3RvclwiKT4wfHxcIltvYmplY3QgU2FmYXJpUmVtb3RlTm90aWZpY2F0aW9uXVwiPT09KCF3aW5kb3dbXCJzYWZhcmlcIl18fHNhZmFyaS5wdXNoTm90aWZpY2F0aW9uKS50b1N0cmluZygpfX0se2tleTpcImlzQ2hyb21lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiY2hyb21lXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6ISghd2luZG93LmNocm9tZXx8d2luZG93Lm9wZXJhfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgT1BSL1wiKT49MHx8bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiIEVkZ2UvXCIpPj0wKX19LHtrZXk6XCJpc0lFXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiaWVcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTohIWRvY3VtZW50LmRvY3VtZW50TW9kZX19LHtrZXk6XCJpc0VkZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJlZGdlXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiIEVkZ2UvXCIpPj0wfX0se2tleTpcImdldE1vYmlsZU9TXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0FuZHJvaWQoKT9cImFuZHJvaWRcIjp0aGlzLmlzSU9TKCk/XCJpb3NcIjp0aGlzLmlzV1AoKT9cIndwXCI6XCJvdGhlclwifX0se2tleTpcImdldElPU0RldmljZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNJUGhvbmUoKT9cImlwaG9uZVwiOnRoaXMuaXNJUGFkKCk/XCJpcGFkXCI6dGhpcy5pc0lQb2QoKT9cImlwb2RcIjpcIm5hXCJ9fV0pLHR9KCkpLEE9ZnVuY3Rpb24odCl7cmV0dXJuIFEudGhyb3coXCJJbiBQYWdlQXR0cmlidXRlRXhwcmVzc2lvbjogXCIrdCl9LFM9e192YXJpYWJsZXM6e30sZGVmaW5lVmFyaWFibGU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdO1wic3RyaW5nXCIhPXR5cGVvZiB0P0EoXCJWYXJpYWJsZSBuYW1lIG11c3QgYmUgYSBzdHJpbmdcIik6XCJzdHJpbmdcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/QShcIlZhcmlhYmxlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvblwiKTp0aGlzLl92YXJpYWJsZXMuaGFzT3duUHJvcGVydHkodCkmJiFuJiZBKCdcIicrdCsnXCIgaXMgYWxyZWFkeSBkZWZpbmVkJyksdGhpcy5fdmFyaWFibGVzW3RdPWV9LGdldFZhcmlhYmxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl92YXJpYWJsZXMuaGFzT3duUHJvcGVydHkodCk/dGhpcy5fdmFyaWFibGVzW3RdOm51bGx9LHJlbW92ZVZhcmlhYmxlOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLl92YXJpYWJsZXNbdF19LGdldEFsbFZhcmlhYmxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YXJpYWJsZXN9LF9wYXJzZVBhcnQ6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLG49ITEsaT0wLG89W107MD09PXQubGVuZ3RoJiZBKFwiVW5hYmxlIHRvIHBhcnNlIGVtcHR5IHN0cmluZ1wiKTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZihcIiRcIj09PShlPXQuY2hhckF0KHIpKSYmXCJ7XCI9PT10LmNoYXJBdChyKzEpKXtuJiZBKFwiTmVzdGVkIGludGVycG9sYXRpb24gbm90IHN1cHBvcnRlZFwiKTt0LnN1YnN0cmluZyhpLHIpLmxlbmd0aD4wJiZvLnB1c2godC5zdWJzdHJpbmcoaSxyKSksaT1yLG49ITB9ZWxzZSBpZihcIn1cIj09PWUpe258fEEoXCJ9IG11c3QgYmUgcHJlY2VlZGVkIGJ5ICR7XCIpO3Quc3Vic3RyaW5nKGkscisxKS5sZW5ndGg+MCYmby5wdXNoKHQuc3Vic3RyaW5nKGkscisxKSksaT1yKzEsbj0hMX1yZXR1cm4gbiYmQShcIlVudGVybWluYXRlZCBpbnRlcnBvbGF0aW9uXCIpLG8ucHVzaCh0LnN1YnN0cmluZyhpLHQubGVuZ3RoKSksb30sX3JlcGxhY2VUb2tlbjpmdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKC9eXFwkeyguKj8pfSQvKTtpZighZSlyZXR1cm4gdDt2YXIgbj1lWzFdLnRyaW0oKSxpPXRoaXMuZ2V0VmFyaWFibGUobik7aWYobnVsbCE9PWkpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpKXJldHVybiBpO3ZhciBvPWkoKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgbyYmQShcIk11c3QgcmV0dXJuIGEgc3RyaW5nXCIpLG99QSgnVmFyaWFibGUgXCInK24rJ1wiIGRvZXMgbm90IGV4aXN0Jyl9LF9yZXBsYWNlVG9rZW5zOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcCh0aGlzLl9yZXBsYWNlVG9rZW4uYmluZCh0aGlzKSl9LF9wYXJzZUV4cHJlc3Npb246ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9KS5tYXAodGhpcy5fcGFyc2VQYXJ0LmJpbmQodGhpcykpLm1hcCh0aGlzLl9yZXBsYWNlVG9rZW5zLmJpbmQodGhpcykpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5qb2luKFwiXCIpfSl9LGV2YWx1YXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0P3RoaXMuX3BhcnNlRXhwcmVzc2lvbih0KTpbXX19O1MuZGVmaW5lVmFyaWFibGUoXCJtb2JpbGVPU1wiLEMuZ2V0TW9iaWxlT1MoKSksUy5kZWZpbmVWYXJpYWJsZShcImlPU0RldmljZVwiLEMuZ2V0SU9TRGV2aWNlKCkpLFMuZGVmaW5lVmFyaWFibGUoXCJydW50aW1lXCIsZnVuY3Rpb24oKXtyZXR1cm4gQy5pc1dlYlZpZXcoKT9cImNvcmRvdmFcIjpcImJyb3dzZXJcIn0pO3ZhciBQPXt9O1AuY29uZmlnPXthdXRvU3RhdHVzQmFyRmlsbDohMCxhbmltYXRpb25zRGlzYWJsZWQ6ITEsd2FybmluZ3NEaXNhYmxlZDohMX0sUC5udWxsRWxlbWVudD13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxQLmlzRW5hYmxlZEF1dG9TdGF0dXNCYXJGaWxsPWZ1bmN0aW9uKCl7cmV0dXJuISFQLmNvbmZpZy5hdXRvU3RhdHVzQmFyRmlsbH0sUC5ub3JtYWxpemVQYWdlSFRNTD1mdW5jdGlvbih0KXtyZXR1cm4oXCJcIit0KS50cmltKCl9LFAud2FpdERPTUNvbnRlbnRMb2FkZWQ9ZnVuY3Rpb24odCl7aWYoXCJsb2FkaW5nXCI9PT13aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZXx8XCJ1bmluaXRpYWxpemVkXCI9PXdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlKXt3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbiBlKCl7dCgpLHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGUpfSl9ZWxzZSBzZXRJbW1lZGlhdGUodCl9LFAuYXV0b1N0YXR1c0JhckZpbGw9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24gZSgpe1Auc2hvdWxkRmlsbFN0YXR1c0JhcigpJiZ0KCksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZSl9O1wib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSk/ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZSk6LTE9PT1bXCJjb21wbGV0ZVwiLFwiaW50ZXJhY3RpdmVcIl0uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKT9QLndhaXRET01Db250ZW50TG9hZGVkKGUpOmUoKX0sUC5zaG91bGRGaWxsU3RhdHVzQmFyPWZ1bmN0aW9uKCl7cmV0dXJuIFAuaXNFbmFibGVkQXV0b1N0YXR1c0JhckZpbGwoKSYmKEMuaXNXZWJWaWV3KCkmJkMuaXNJT1M3YWJvdmUoKSYmIUMuaXNJUGhvbmVYKCl8fGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIi5vbnMtc3RhdHVzLWJhci1tb2NrLmlvc1wiKSl9LFAudGVtcGxhdGVTdG9yZT17X3N0b3JhZ2U6e30sZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiBQLnRlbXBsYXRlU3RvcmUuX3N0b3JhZ2VbdF18fG51bGx9LHNldDpmdW5jdGlvbih0LGUpe1AudGVtcGxhdGVTdG9yZS5fc3RvcmFnZVt0XT1lfX0sd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJfdGVtcGxhdGVsb2FkZWRcIixmdW5jdGlvbih0KXtcIm9ucy10ZW1wbGF0ZVwiPT09dC50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmUC50ZW1wbGF0ZVN0b3JlLnNldCh0LnRlbXBsYXRlSWQsdC50ZW1wbGF0ZSl9LCExKSxQLndhaXRET01Db250ZW50TG9hZGVkKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtmb3IodmFyIGU9d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodCksbj0wO248ZS5sZW5ndGg7bisrKVAudGVtcGxhdGVTdG9yZS5zZXQoZVtuXS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSxlW25dLnRleHRDb250ZW50fHxlW25dLmNvbnRlbnQpfXQoJ3NjcmlwdFt0eXBlPVwidGV4dC9vbnMtdGVtcGxhdGVcIl0nKSx0KCdzY3JpcHRbdHlwZT1cInRleHQvdGVtcGxhdGVcIl0nKSx0KCdzY3JpcHRbdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIl0nKSx0KFwidGVtcGxhdGVcIil9KSxQLmdldFRlbXBsYXRlSFRNTEFzeW5jPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlLG4pe1Aud2FpdERPTUNvbnRlbnRMb2FkZWQoZnVuY3Rpb24oKXt2YXIgaT1QLnRlbXBsYXRlU3RvcmUuZ2V0KHQpO2lmKGkpe2lmKGkgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXJldHVybiBlKGkpO3ZhciBvPVwic3RyaW5nXCI9PXR5cGVvZiBpP2k6aVsxXTtyZXR1cm4gZShQLm5vcm1hbGl6ZVBhZ2VIVE1MKG8pKX12YXIgcj13aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCk7aWYocil7dmFyIGE9ci50ZXh0Q29udGVudHx8ci5jb250ZW50O3JldHVybiBlKGEpfXZhciBzPW5ldyBYTUxIdHRwUmVxdWVzdDtzLm9wZW4oXCJHRVRcIix0LCEwKSxzLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBpPXMucmVzcG9uc2VUZXh0O2lmKHMuc3RhdHVzPj00MDAmJnMuc3RhdHVzPDYwMCluKGkpO2Vsc2V7dmFyIG89US5jcmVhdGVGcmFnbWVudChpKTtRLmFycmF5RnJvbShvLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIikpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtlLnR5cGU9dC50eXBlfHxcInRleHQvamF2YXNjcmlwdFwiLGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodC50ZXh0fHx0LnRleHRDb250ZW50fHx0LmlubmVySFRNTCkpLHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSx0KX0pLFAudGVtcGxhdGVTdG9yZS5zZXQodCxvKSxlKG8pfX0scy5vbmVycm9yPWZ1bmN0aW9uKCl7US50aHJvdyhcIlBhZ2UgdGVtcGxhdGUgbm90IGZvdW5kOiBcIit0KX0scy5zZW5kKG51bGwpfSl9KX0sUC5nZXRQYWdlSFRNTEFzeW5jPWZ1bmN0aW9uKHQpe3ZhciBlPVMuZXZhbHVhdGUodCk7cmV0dXJuIGZ1bmN0aW9uIHQobil7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIG4/UHJvbWlzZS5yZWplY3QoXCJNdXN0IHNwZWNpZnkgYSBwYWdlLlwiKTpQLmdldFRlbXBsYXRlSFRNTEFzeW5jKG4pLmNhdGNoKGZ1bmN0aW9uKG4pe3JldHVybiAwPT09ZS5sZW5ndGg/UHJvbWlzZS5yZWplY3Qobik6dChlLnNoaWZ0KCkpfSl9KGUuc2hpZnQoKSl9O3ZhciBPPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtwKHRoaXMsdCksdGhpcy5fYW5pbWF0b3JzPWUuYW5pbWF0b3JzLHRoaXMuX2Jhc2VDbGFzcz1lLmJhc2VDbGFzcyx0aGlzLl9iYXNlQ2xhc3NOYW1lPWUuYmFzZUNsYXNzTmFtZXx8ZS5iYXNlQ2xhc3MubmFtZSx0aGlzLl9hbmltYXRpb249ZS5kZWZhdWx0QW5pbWF0aW9ufHxcImRlZmF1bHRcIix0aGlzLl9hbmltYXRpb25PcHRpb25zPWUuZGVmYXVsdEFuaW1hdGlvbk9wdGlvbnN8fHt9LHRoaXMuX2FuaW1hdG9yc1t0aGlzLl9hbmltYXRpb25dfHxRLnRocm93KFwiTm8gc3VjaCBhbmltYXRpb246IFwiK3RoaXMuX2FuaW1hdGlvbil9cmV0dXJuIGcodCxbe2tleTpcInNldEFuaW1hdGlvbk9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9hbmltYXRpb25PcHRpb25zPXR9fSx7a2V5OlwibmV3QW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxlPWFyZ3VtZW50c1sxXSxuPW51bGw7aWYodC5hbmltYXRpb24gaW5zdGFuY2VvZiB0aGlzLl9iYXNlQ2xhc3MpcmV0dXJuIHQuYW5pbWF0aW9uO3ZhciBpPW51bGw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQuYW5pbWF0aW9uJiYoaT10aGlzLl9hbmltYXRvcnNbdC5hbmltYXRpb25dKSwhaSYmZSluPWU7ZWxzZXtpPWl8fHRoaXMuX2FuaW1hdG9yc1t0aGlzLl9hbmltYXRpb25dO3ZhciBvPVEuZXh0ZW5kKHt9LHRoaXMuX2FuaW1hdGlvbk9wdGlvbnMsdC5hbmltYXRpb25PcHRpb25zfHx7fSxQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ/e2R1cmF0aW9uOjAsZGVsYXk6MH06e30pO1wiZnVuY3Rpb25cIj09dHlwZW9mKG49bmV3IGkobykpJiYobj1uZXcgbihvKSl9cmV0dXJuIG4gaW5zdGFuY2VvZiB0aGlzLl9iYXNlQ2xhc3N8fFEudGhyb3coJ1wiYW5pbWF0b3JcIiBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgJyt0aGlzLl9iYXNlQ2xhc3NOYW1lKSxufX1dLFt7a2V5OlwicGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7dHJ5e2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgZT1RLmFuaW1hdGlvbk9wdGlvbnNQYXJzZSh0KTtpZihcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpmKGUpKSYmbnVsbCE9PWUpcmV0dXJuIGU7Y29uc29sZS5lcnJvcignXCJhbmltYXRpb24tb3B0aW9uc1wiIGF0dHJpYnV0ZSBtdXN0IGJlIGEgSlNPTiBvYmplY3Qgc3RyaW5nOiAnK3QpfXJldHVybnt9fWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKCdcImFuaW1hdGlvbi1vcHRpb25zXCIgYXR0cmlidXRlIG11c3QgYmUgYSBKU09OIG9iamVjdCBzdHJpbmc6ICcrdCkse319fX1dKSx0fSgpLHg9ITAsVD17cXVpZXQ6XCJtYXRlcmlhbC0tZmxhdFwiLGxpZ2h0OlwibWF0ZXJpYWwtLWZsYXRcIixvdXRsaW5lOlwibWF0ZXJpYWwtLWZsYXRcIixjdGE6XCJcIixcImxhcmdlLS1xdWlldFwiOlwibWF0ZXJpYWwtLWZsYXQgbGFyZ2VcIixcImxhcmdlLS1jdGFcIjpcImxhcmdlXCIsbm9ib3JkZXI6XCJcIix0YXBwYWJsZTpcIlwifSxMPXt9O0wuYW5kcm9pZD1mdW5jdGlvbih0KXt2YXIgZT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZighUS5oYXNNb2RpZmllcih0LFwibWF0ZXJpYWxcIikpe3ZhciBuPSh0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpfHxcIlwiKS50cmltKCkuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIFQuaGFzT3duUHJvcGVydHkodCk/VFt0XTp0fSk7bi51bnNoaWZ0KFwibWF0ZXJpYWxcIiksdC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLG4uam9pbihcIiBcIikudHJpbSgpKX0tMT09PVtcIm9ucy1hbGVydC1kaWFsb2ctYnV0dG9uXCIsXCJvbnMtdG9vbGJhci1idXR0b25cIixcIm9ucy1iYWNrLWJ1dHRvblwiLFwib25zLWJ1dHRvblwiLFwib25zLWxpc3QtaXRlbVwiLFwib25zLWZhYlwiLFwib25zLXNwZWVkLWRpYWxcIixcIm9ucy1zcGVlZC1kaWFsLWl0ZW1cIixcIm9ucy10YWJcIl0uaW5kZXhPZihlKXx8dC5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIil8fHQucXVlcnlTZWxlY3RvcihcIm9ucy1yaXBwbGVcIil8fChcIm9ucy1saXN0LWl0ZW1cIj09PWU/dC5oYXNBdHRyaWJ1dGUoXCJ0YXBwYWJsZVwiKSYmKHQuc2V0QXR0cmlidXRlKFwicmlwcGxlXCIsXCJcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YXBwYWJsZVwiKSk6dC5zZXRBdHRyaWJ1dGUoXCJyaXBwbGVcIixcIlwiKSl9LEwuaW9zPWZ1bmN0aW9uKHQpe1EucmVtb3ZlTW9kaWZpZXIodCxcIm1hdGVyaWFsXCIpJiYoUS5yZW1vdmVNb2RpZmllcih0LFwibWF0ZXJpYWwtLWZsYXRcIikmJlEuYWRkTW9kaWZpZXIodCxRLnJlbW92ZU1vZGlmaWVyKHQsXCJsYXJnZVwiKT9cImxhcmdlLS1xdWlldFwiOlwicXVpZXRcIiksdC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8dC5yZW1vdmVBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSksdC5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIikmJihcIm9ucy1saXN0LWl0ZW1cIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZ0LnNldEF0dHJpYnV0ZShcInRhcHBhYmxlXCIsXCJcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJyaXBwbGVcIikpfTt2YXIgTT17YW5kcm9pZDohMH0sRD1mdW5jdGlvbih0LGUpe2lmKHgmJiF0Lmhhc0F0dHJpYnV0ZShcImRpc2FibGUtYXV0by1zdHlsaW5nXCIpKXt2YXIgbj1DLmdldE1vYmlsZU9TKCk7aWYoTC5oYXNPd25Qcm9wZXJ0eShuKSYmKE0uaGFzT3duUHJvcGVydHkobil8fGUpKXJldHVybiBufXJldHVybiBudWxsfSxJPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRChlLG4pP3Quc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIFQuaGFzT3duUHJvcGVydHkodCk/VFt0XTp0fSkuam9pbihcIiBcIik6dH0sTj17aXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHh9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB4PSEwfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHg9ITF9LHByZXBhcmU6ZnVuY3Rpb24odCxlKXt2YXIgbj1EKHQsZSk7biYmTFtuXSh0KX0sbWFwTW9kaWZpZXI6SSxnZXRQbGF0Zm9ybTpELHJlc3RvcmVNb2RpZmllcjpmdW5jdGlvbih0KXtpZihcImFuZHJvaWRcIj09PUQodCkpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIsbj1JKGUsdCk7aWYoLyhefFxccyspbWF0ZXJpYWwoJHxcXHMrKS9pLnRlc3QoZSl8fChuPVwibWF0ZXJpYWwgXCIrbiksbiE9PWUpcmV0dXJuIHQuc2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIixuLnRyaW0oKSksITB9cmV0dXJuITF9fSxCPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KX1yZXR1cm4gZyh0LG51bGwsW3trZXk6XCJkaWZmXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBpKGUpe3ZhciBuPXt9O3JldHVybiB0LnNwbGl0KGUpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG5bdF09dH0pLG59ZT1pKChcIlwiK2UpLnRyaW0oKSksbj1pKChcIlwiK24pLnRyaW0oKSk7dmFyIG89T2JqZWN0LmtleXMoZSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5bZV18fHQucHVzaChlKSx0fSxbXSk7cmV0dXJue2FkZGVkOk9iamVjdC5rZXlzKG4pLnJlZHVjZShmdW5jdGlvbih0LG4pe3JldHVybiBlW25dfHx0LnB1c2gobiksdH0sW10pLHJlbW92ZWQ6b319fSx7a2V5OlwiYXBwbHlEaWZmVG9DbGFzc0xpc3RcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dC5hZGRlZC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4ucmVwbGFjZSgvXFwqL2csdCl9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5hZGQodCl9KX0pLHQucmVtb3ZlZC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4ucmVwbGFjZSgvXFwqL2csdCl9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5yZW1vdmUodCl9KX0pfX0se2tleTpcImFwcGx5RGlmZlRvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsbixpKXtPYmplY3Qua2V5cyhpKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe2Zvcih2YXIgcj0hb3x8US5tYXRjaChuLG8pP1tuXTpBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwobi5xdWVyeVNlbGVjdG9yQWxsKG8pLGZ1bmN0aW9uKHQpe3JldHVybiFRLmZpbmRQYXJlbnQodCxuLnRhZ05hbWUsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1ufSl9KSxhPTA7YTxyLmxlbmd0aDthKyspdC5hcHBseURpZmZUb0NsYXNzTGlzdChlLHJbYV0uY2xhc3NMaXN0LGlbb10pfSl9fSx7a2V5Olwib25Nb2RpZmllckNoYW5nZWRcIix2YWx1ZTpmdW5jdGlvbihlLG4saSxvKXt0LmFwcGx5RGlmZlRvRWxlbWVudCh0LmRpZmYoZSxuKSxpLG8pLE4ucmVzdG9yZU1vZGlmaWVyKGkpfX0se2tleTpcInJlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbihlLG4pe3QuYXBwbHlEaWZmVG9FbGVtZW50KHQuZGlmZihcIlwiLGUuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIpLGUsbil9fSx7a2V5OlwiaW5pdE1vZGlmaWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXt2YXIgaT1lLmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpO1wic3RyaW5nXCI9PXR5cGVvZiBpJiZ0LmFwcGx5RGlmZlRvRWxlbWVudCh7cmVtb3ZlZDpbXSxhZGRlZDp0LnNwbGl0KGkpfSxlLG4pfX0se2tleTpcInNwbGl0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQ/W106dC50cmltKCkuc3BsaXQoLyArLykuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiXCIhPT10fSl9fSx7a2V5OlwiYWRkTW9kaWZpZXJcIix2YWx1ZTpmdW5jdGlvbihlLG4pe2lmKGUuaGFzQXR0cmlidXRlKFwibW9kaWZpZXJcIikpe3ZhciBpPXQuc3BsaXQoZS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSk7LTE9PWkuaW5kZXhPZihuKSYmKGkucHVzaChuKSxlLnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsaS5qb2luKFwiIFwiKSkpfWVsc2UgZS5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLG4pfX0se2tleTpcInJlbW92ZU1vZGlmaWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtpZihlLmhhc0F0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKXt2YXIgaT10LnNwbGl0KGUuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIikpLG89aS5pbmRleE9mKG4pOy0xIT09byYmKGkuc3BsaWNlKG8sMSksZS5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLGkuam9pbihcIiBcIikpKX19fV0pLHR9KCksaj17X3JlYWR5OiExLF9kb21Db250ZW50TG9hZGVkOiExLF9vbkRPTUNvbnRlbnRMb2FkZWQ6ZnVuY3Rpb24oKXtqLl9kb21Db250ZW50TG9hZGVkPSEwLEMuaXNXZWJWaWV3KCk/d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7ai5fcmVhZHk9ITB9LCExKTpqLl9yZWFkeT0hMH0sYWRkQmFja0J1dHRvbkxpc3RlbmVyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9kb21Db250ZW50TG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBhZnRlciBET01Db250ZW50TG9hZGVkXCIpO3RoaXMuX3JlYWR5P3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpOndpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixmdW5jdGlvbigpe3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpfSl9LHJlbW92ZUJhY2tCdXR0b25MaXN0ZW5lcjpmdW5jdGlvbih0KXtpZighdGhpcy5fZG9tQ29udGVudExvYWRlZCl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBpcyBhdmFpbGFibGUgYWZ0ZXIgRE9NQ29udGVudExvYWRlZFwiKTt0aGlzLl9yZWFkeT93aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJhY2tidXR0b25cIix0LCExKTp3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZnVuY3Rpb24oKXt3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJhY2tidXR0b25cIix0LCExKX0pfX07d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtyZXR1cm4gai5fb25ET01Db250ZW50TG9hZGVkKCl9LCExKTt2YXIgSD17X3N0b3JlOnt9LF9nZW5JZDpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQrK319KCksc2V0OmZ1bmN0aW9uKHQsZSl7dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQmJnRoaXMucmVtb3ZlKHQpO3ZhciBuPXQuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkPUguX2dlbklkKCk7dGhpcy5fc3RvcmVbbl09ZX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3QuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkJiYoZGVsZXRlIHRoaXMuX3N0b3JlW3QuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkXSxkZWxldGUgdC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQpfSxnZXQ6ZnVuY3Rpb24odCl7aWYodC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQpe3ZhciBlPXQuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkO2lmKCF0aGlzLl9zdG9yZVtlXSl0aHJvdyBuZXcgRXJyb3I7cmV0dXJuIHRoaXMuX3N0b3JlW2VdfX0saGFzOmZ1bmN0aW9uKHQpe2lmKCF0LmRhdGFzZXQpcmV0dXJuITE7dmFyIGU9dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQ7cmV0dXJuISF0aGlzLl9zdG9yZVtlXX19LFI9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9pc0VuYWJsZWQ9ITEsdGhpcy5fYm91bmRDYWxsYmFjaz10aGlzLl9jYWxsYmFjay5iaW5kKHRoaXMpfXJldHVybiBnKHQsW3trZXk6XCJlbmFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzRW5hYmxlZHx8KGouYWRkQmFja0J1dHRvbkxpc3RlbmVyKHRoaXMuX2JvdW5kQ2FsbGJhY2spLHRoaXMuX2lzRW5hYmxlZD0hMCl9fSx7a2V5OlwiZGlzYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNFbmFibGVkJiYoai5yZW1vdmVCYWNrQnV0dG9uTGlzdGVuZXIodGhpcy5fYm91bmRDYWxsYmFjayksdGhpcy5faXNFbmFibGVkPSExKX19LHtrZXk6XCJmaXJlRGV2aWNlQmFja0J1dHRvbkV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO3QuaW5pdEV2ZW50KFwiYmFja2J1dHRvblwiLCEwLCEwKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHQpfX0se2tleTpcIl9jYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZGlzcGF0Y2hEZXZpY2VCYWNrQnV0dG9uRXZlbnQoKX19LHtrZXk6XCJjcmVhdGVIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpdGhyb3cgbmV3IEVycm9yKFwiZWxlbWVudCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEhUTUxFbGVtZW50XCIpO2lmKCEoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJjYWxsYmFjayBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZ1bmN0aW9uXCIpO3ZhciBuPXtfY2FsbGJhY2s6ZSxfZWxlbWVudDp0LGRpc2FibGU6ZnVuY3Rpb24oKXtILnJlbW92ZSh0KX0sc2V0TGlzdGVuZXI6ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2s9dH0sZW5hYmxlOmZ1bmN0aW9uKCl7SC5zZXQodCx0aGlzKX0saXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEguZ2V0KHQpPT09dGhpc30sZGVzdHJveTpmdW5jdGlvbigpe0gucmVtb3ZlKHQpLHRoaXMuX2NhbGxiYWNrPXRoaXMuX2VsZW1lbnQ9bnVsbH19O3JldHVybiBuLmVuYWJsZSgpLG59fSx7a2V5OlwiX2Rpc3BhdGNoRGV2aWNlQmFja0J1dHRvbkV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3JldHVybntfZWxlbWVudDplLGNhbGxQYXJlbnRIYW5kbGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZTtlOyl7aWYoaT1ILmdldChlKSlyZXR1cm4gaS5fY2FsbGJhY2sodChlKSk7ZT1lLnBhcmVudE5vZGV9fX19dmFyIGU9dGhpcy5fY2FwdHVyZVRyZWUoKSxuPXRoaXMuX2ZpbmRIYW5kbGVyTGVhZkVsZW1lbnQoZSksaT1ILmdldChuKTtpLl9jYWxsYmFjayh0KG4pKX19LHtrZXk6XCJfY2FwdHVyZVRyZWVcIix2YWx1ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49e2VsZW1lbnQ6ZSxjaGlsZHJlbjpBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspZS5wdXNoKHRbbl0pO3JldHVybiBlfShlLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24oZSl7aWYoXCJub25lXCI9PT1lLnN0eWxlLmRpc3BsYXl8fCExPT09ZS5faXNTaG93bilyZXR1cm5bXTtpZigwPT09ZS5jaGlsZHJlbi5sZW5ndGgmJiFILmhhcyhlKSlyZXR1cm5bXTt2YXIgbj10KGUpO3JldHVybiAwIT09bi5jaGlsZHJlbi5sZW5ndGh8fEguaGFzKG4uZWxlbWVudCk/W25dOltdfSkpfTtpZighSC5oYXMobi5lbGVtZW50KSlmb3IodmFyIGk9MDtpPG4uY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIG89bi5jaGlsZHJlbltpXTtpZihILmhhcyhvLmVsZW1lbnQpKXJldHVybiBvfXJldHVybiBufXJldHVybiB0KGRvY3VtZW50LmJvZHkpfX0se2tleTpcIl9maW5kSGFuZGxlckxlYWZFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gMD09PXQuY2hpbGRyZW4ubGVuZ3RoP3QuZWxlbWVudDoxPT09dC5jaGlsZHJlbi5sZW5ndGg/ZSh0LmNoaWxkcmVuWzBdKTp0LmNoaWxkcmVuLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtZW50fSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIGU7dmFyIG49cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodCxcIlwiKS56SW5kZXgsMTApLGk9cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZSxcIlwiKS56SW5kZXgsMTApO2lmKCFpc05hTihuKSYmIWlzTmFOKGkpKXJldHVybiBuPmk/dDplO3Rocm93IG5ldyBFcnJvcihcIkNhcHR1cmluZyBiYWNrYnV0dG9uLWhhbmRsZXIgaXMgZmFpbHVyZS5cIil9LG51bGwpfXJldHVybiBlKHQpfX1dKSx0fSgpKTtQLkFuaW1hdG9yRmFjdG9yeT1PLFAuTW9kaWZpZXJVdGlsPUIsUC5kYmJEaXNwYXRjaGVyPVI7dmFyIEY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdWJzdHIoMCxlLmxlbmd0aCk9PT1lfSxxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc3Vic3RyKHQubGVuZ3RoLWUubGVuZ3RoLGUubGVuZ3RoKT09PWV9LHo9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2xpY2UoMSwtMSl9LFY9ZnVuY3Rpb24odCl7cmV0dXJuIEYodCxcIntcIikmJnEodCxcIn1cIil9LFc9ZnVuY3Rpb24odCl7cmV0dXJuIEYodCxcIltcIikmJnEodCxcIl1cIil9LFU9ZnVuY3Rpb24odCl7cmV0dXJuIEYodCxcIidcIikmJnEodCxcIidcIil8fEYodCwnXCInKSYmcSh0LCdcIicpfSxYPWZ1bmN0aW9uKHQsZSxuKXt0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHRva2VuICdcIit0K1wiJyBhdCBwb3NpdGlvbiBcIisobi5sZW5ndGgtZS5sZW5ndGgtMSkrXCIgaW4gc3RyaW5nOiAnXCIrbitcIidcIil9LFk9ZnVuY3Rpb24odCxlLG4pe3JldHVyblwidHJ1ZVwiPT09dHx8XCJmYWxzZVwiPT09dD9cInRydWVcIj09PXQ6VSh0KT96KHQpOmlzTmFOKHQpP1YodCk/JCh6KHQpKTpXKHQpP0soeih0KSk6dm9pZCBYKHQsZSxuKTordH0sRz1mdW5jdGlvbih0KXt2YXIgZT0odD10LnRyaW0oKSkubGVuZ3RoO2lmKFwiOlwiPT09dFswXXx8XCIsXCI9PT10WzBdKWU9MTtlbHNlIGlmKFwie1wiPT09dFswXXx8XCJbXCI9PT10WzBdKXtmb3IodmFyIG49dC5jaGFyQ29kZUF0KDApLGk9MSxvPTE7bzx0Lmxlbmd0aDtvKyspaWYodC5jaGFyQ29kZUF0KG8pPT09bilpKys7ZWxzZSBpZih0LmNoYXJDb2RlQXQobyk9PT1uKzImJjA9PS0taSl7ZT1vKzE7YnJlYWt9fWVsc2UgaWYoXCInXCI9PT10WzBdfHwnXCInPT09dFswXSl7Zm9yKHZhciByPTE7cjx0Lmxlbmd0aDtyKyspaWYodFtyXT09PXRbMF0pe2U9cisxO2JyZWFrfX1lbHNlIGZvcih2YXIgYT0xO2E8dC5sZW5ndGg7YSsrKWlmKC0xIT09W1wiIFwiLFwiLFwiLFwiOlwiXS5pbmRleE9mKHRbYV0pKXtlPWE7YnJlYWt9cmV0dXJuIHQuc2xpY2UoMCxlKX0sJD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dD10LnRyaW0oKSxuPXt9LGk9ITAsbz12b2lkIDAscj12b2lkIDAsYT12b2lkIDA7dC5sZW5ndGg+MDspaWYocj1hLGE9Ryh0KSx0PXQuc2xpY2UoYS5sZW5ndGgsdC5sZW5ndGgpLnRyaW0oKSxcIjpcIj09PWEmJighaXx8IXJ8fFwiLFwiPT09cil8fFwiLFwiPT09YSYmaXx8XCI6XCIhPT1hJiZcIixcIiE9PWEmJnImJlwiLFwiIT09ciYmXCI6XCIhPT1yKVgoYSx0LGUpO2Vsc2UgaWYoXCI6XCI9PT1hJiZpJiZyKXtpZihyPVUocik/eihyKTpyLCFmdW5jdGlvbih0KXtyZXR1cm4vXltBLVpfJF1bQS1aMC05XyRdKiQvaS50ZXN0KHQpfShyKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGtleSB0b2tlbiAnXCIrcitcIicgYXQgcG9zaXRpb24gMCBpbiBzdHJpbmc6ICdcIitlK1wiJ1wiKTtvPXIsaT0hMX1lbHNlXCIsXCI9PT1hJiYhaSYmciYmKG5bb109WShyLHQsZSksaT0hMCk7cmV0dXJuIGEmJihuW29dPVkoYSx0LGUpKSxufSxLPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10PXQudHJpbSgpLG49W10saT12b2lkIDAsbz12b2lkIDA7dC5sZW5ndGg+MDspaT1vLG89Ryh0KSx0PXQuc2xpY2Uoby5sZW5ndGgsdC5sZW5ndGgpLnRyaW0oKSxcIixcIiE9PW98fGkmJlwiLFwiIT09aT9cIixcIj09PW8mJm4ucHVzaChZKGksdCxlKSk6WChvLHQsZSk7cmV0dXJuIG8mJihcIixcIiE9PW8/bi5wdXNoKFkobyx0LGUpKTpYKG8sdCxlKSksbn0sUT17fSxKPVwiW09uc2VuIFVJXVwiO1EuZ2xvYmFscz17ZmFiT2Zmc2V0OjAsZXJyb3JQcmVmaXg6SixzdXBwb3J0c1Bhc3NpdmU6ITF9LEMuX3J1bk9uQWN0dWFsUGxhdGZvcm0oZnVuY3Rpb24oKXtRLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1M9Qy5nZXRNb2JpbGVPUygpLFEuZ2xvYmFscy5pc1VJV2ViVmlldz1DLmlzVUlXZWJWaWV3KCksUS5nbG9iYWxzLmlzV0tXZWJWaWV3PUMuaXNXS1dlYlZpZXcoKX0pO3RyeXt2YXIgWj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe1EuZ2xvYmFscy5zdXBwb3J0c1Bhc3NpdmU9ITB9fSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLG51bGwsWiksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLG51bGwsWil9Y2F0Y2godCl7fVEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUsbixpLG8pe3QuYWRkRXZlbnRMaXN0ZW5lcihlLG4sUS5nbG9iYWxzLnN1cHBvcnRzUGFzc2l2ZT9pOihpfHx7fSkuY2FwdHVyZSl9LFEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUsbixpLG8pe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4sUS5nbG9iYWxzLnN1cHBvcnRzUGFzc2l2ZT9pOihpfHx7fSkuY2FwdHVyZSl9LFEucHJlcGFyZVF1ZXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dDpmdW5jdGlvbihlKXtyZXR1cm4gUS5tYXRjaChlLHQpfX0sUS5tYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3Rvcnx8dC5tc01hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfSxRLmZpbmRDaGlsZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1RLnByZXBhcmVRdWVyeShlKSxpPTA7aTx0LmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7dmFyIG89dC5jaGlsZE5vZGVzW2ldO2lmKG8ubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmbihvKSlyZXR1cm4gb31yZXR1cm4gbnVsbH0sUS5maW5kUGFyZW50PWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9US5wcmVwYXJlUXVlcnkoZSksbz10LnBhcmVudE5vZGU7Oyl7aWYoIW98fG89PT1kb2N1bWVudHx8byBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnR8fG4mJm4obykpcmV0dXJuIG51bGw7aWYoaShvKSlyZXR1cm4gbztvPW8ucGFyZW50Tm9kZX19LFEuaXNBdHRhY2hlZD1mdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuYm9keS5jb250YWlucyh0KX0sUS5oYXNBbnlDb21wb25lbnRBc1BhcmVudD1mdW5jdGlvbih0KXtmb3IoO3QmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCE9PXQ7KWlmKCh0PXQucGFyZW50Tm9kZSkmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKS5tYXRjaCgvKG9ucy1uYXZpZ2F0b3J8b25zLXRhYmJhcnxvbnMtbW9kYWwpLykpcmV0dXJuITA7cmV0dXJuITF9LFEuZ2V0QWxsQ2hpbGROb2Rlcz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4oZT1bdF0pLmNvbmNhdC5hcHBseShlLHcoQXJyYXkuZnJvbSh0LmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIFEuZ2V0QWxsQ2hpbGROb2Rlcyh0KX0pKSl9LFEuaXNQYWdlQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZS5tYXRjaCgvXm9ucy0obmF2aWdhdG9yfHNwbGl0dGVyfHRhYmJhcnxwYWdlKSQvaSl9LFEucHJvcGFnYXRlQWN0aW9uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0LmNoaWxkTm9kZXMubGVuZ3RoO24rKyl7dmFyIGk9dC5jaGlsZE5vZGVzW25dO2lbZV1pbnN0YW5jZW9mIEZ1bmN0aW9uP2lbZV0oKTpRLnByb3BhZ2F0ZUFjdGlvbihpLGUpfX0sUS5jYW1lbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oW2Etel0pL2csZnVuY3Rpb24odCxlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSl9LFEuaHlwaGVuYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoLyhbYS16QS1aXSkoW0EtWl0pL2csXCIkMS0kMlwiKS50b0xvd2VyQ2FzZSgpfSxRLmNyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49dC5zcGxpdChcIi5cIiksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KG4uc2hpZnQoKXx8XCJkaXZcIik7cmV0dXJuIG4ubGVuZ3RoJiYoaS5jbGFzc05hbWU9bi5qb2luKFwiIFwiKSksZChpLGUpLGl9LFEuY3JlYXRlRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50P2UuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuaW1wb3J0Tm9kZSh0LCEwKSk6ZS5pbm5lckhUTUw9dC50cmltKCksZS5jaGlsZHJlbi5sZW5ndGg+MSYmUS50aHJvdyhcIkhUTUwgdGVtcGxhdGUgbXVzdCBjb250YWluIGEgc2luZ2xlIHJvb3QgZWxlbWVudFwiKTt2YXIgbj1lLmNoaWxkcmVuWzBdO3JldHVybiBlLmNoaWxkcmVuWzBdLnJlbW92ZSgpLG59LFEuY3JlYXRlRnJhZ21lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO3JldHVybiBlLmlubmVySFRNTD10LGRvY3VtZW50LmltcG9ydE5vZGUoZS5jb250ZW50LCEwKX0sUS5leHRlbmQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheShlPjE/ZS0xOjApLGk9MTtpPGU7aSsrKW5baS0xXT1hcmd1bWVudHNbaV07Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspaWYobltvXSlmb3IodmFyIHI9T2JqZWN0LmtleXMobltvXSksYT0wO2E8ci5sZW5ndGg7YSsrKXt2YXIgcz1yW2FdO3Rbc109bltvXVtzXX1yZXR1cm4gdH0sUS5hcnJheUZyb209ZnVuY3Rpb24odCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseSh0KX0sUS5wYXJzZUpTT05PYmplY3RTYWZlbHk9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RyeXt2YXIgbj1KU09OLnBhcnNlKFwiXCIrdCk7aWYoXCJvYmplY3RcIj09PSh2b2lkIDA9PT1uP1widW5kZWZpbmVkXCI6ZihuKSkmJm51bGwhPT1uKXJldHVybiBufWNhdGNoKHQpe3JldHVybiBlfXJldHVybiBlfSxRLmZpbmRGcm9tUGF0aD1mdW5jdGlvbih0KXt0PXQuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZSxuPXdpbmRvdztlPXQuc2hpZnQoKTspbj1uW2VdO3JldHVybiBufSxRLmdldFRvcFBhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJihcIm9ucy1wYWdlXCI9PT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKT90OnQudG9wUGFnZSl8fG51bGx9LFEuZmluZFRvb2xiYXJQYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPVEuZ2V0VG9wUGFnZSh0KTtpZihlKXtpZihlLl9jYW5BbmltYXRlVG9vbGJhcigpKXJldHVybiBlO2Zvcih2YXIgbj0wO248ZS5fY29udGVudEVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoO24rKyl7dmFyIGk9US5nZXRUb3BQYWdlKGUuX2NvbnRlbnRFbGVtZW50LmNoaWxkcmVuW25dKTtpZihpJiYhL29ucy10YWJiYXIvaS50ZXN0KGUuX2NvbnRlbnRFbGVtZW50LmNoaWxkcmVuW25dLnRhZ05hbWUpKXJldHVybiBRLmZpbmRUb29sYmFyUGFnZShpKX19cmV0dXJuIG51bGx9LFEudHJpZ2dlckVsZW1lbnRFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxpPW5ldyBDdXN0b21FdmVudChlLHtidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsZGV0YWlsOm59KTtyZXR1cm4gT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbih0KXtpW3RdPW5bdF19KSx0LmRpc3BhdGNoRXZlbnQoaSksaX0sUS5oYXNNb2RpZmllcj1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSYmUmVnRXhwKFwiKF58XFxcXHMrKVwiK2UrXCIoJHxcXFxccyspXCIsXCJpXCIpLnRlc3QodC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSl9LFEuYWRkTW9kaWZpZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIG4uYXV0b1N0eWxlJiYoZT1OLm1hcE1vZGlmaWVyKGUsdCxuLmZvcmNlQXV0b1N0eWxlKSksIVEuaGFzTW9kaWZpZXIodCxlKSYmKHQuc2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIiwoKHQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIpK1wiIFwiK2UpLnRyaW0oKSksITApfSxRLnJlbW92ZU1vZGlmaWVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O2lmKG4uYXV0b1N0eWxlJiYoZT1OLm1hcE1vZGlmaWVyKGUsdCxuLmZvcmNlQXV0b1N0eWxlKSksIXQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fCFRLmhhc01vZGlmaWVyKHQsZSkpcmV0dXJuITE7dmFyIGk9dC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKS5zcGxpdCgvXFxzKy8pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCYmdCE9PWV9KTtyZXR1cm4gaS5sZW5ndGg/dC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLGkuam9pbihcIiBcIikpOnQucmVtb3ZlQXR0cmlidXRlKFwibW9kaWZpZXJcIiksITB9LFEudG9nZ2xlTW9kaWZpZXI9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdOnt9LGU9XCJib29sZWFuXCI9PXR5cGVvZiB0P3Q6dC5mb3JjZTsoXCJib29sZWFuXCI9PXR5cGVvZiBlP2U6IVEuaGFzTW9kaWZpZXIuYXBwbHkoUSxhcmd1bWVudHMpKT9RLmFkZE1vZGlmaWVyLmFwcGx5KFEsYXJndW1lbnRzKTpRLnJlbW92ZU1vZGlmaWVyLmFwcGx5KFEsYXJndW1lbnRzKX0sUS5yZXN0b3JlQ2xhc3M9ZnVuY3Rpb24odCxlLG4pe2Uuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPT1lJiYhdC5jbGFzc0xpc3QuY29udGFpbnMoZSkmJnQuY2xhc3NMaXN0LmFkZChlKX0pLHQuaGFzQXR0cmlidXRlKFwibW9kaWZpZXJcIikmJkIucmVmcmVzaCh0LG4pfSxRLnVwZGF0ZVBhcmVudFBvc2l0aW9uPWZ1bmN0aW9uKHQpeyF0Ll9wYXJlbnRVcGRhdGVkJiZ0LnBhcmVudEVsZW1lbnQmJihcInN0YXRpY1wiPT09d2luZG93LmdldENvbXB1dGVkU3R5bGUodC5wYXJlbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwicG9zaXRpb25cIikmJih0LnBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSx0Ll9wYXJlbnRVcGRhdGVkPSEwKX0sUS50b2dnbGVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlLG4pe24/dC5zZXRBdHRyaWJ1dGUoZSxcImJvb2xlYW5cIj09dHlwZW9mIG4/XCJcIjpuKTp0LnJlbW92ZUF0dHJpYnV0ZShlKX0sUS5iaW5kTGlzdGVuZXJzPWZ1bmN0aW9uKHQsZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWUucmVwbGFjZSgvXl9bYS16XS8sXCJfYm91bmRcIitlWzFdLnRvVXBwZXJDYXNlKCkpO3Rbbl09dFtuXXx8dFtlXS5iaW5kKHQpfSl9LFEuZWFjaD1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiBlKG4sdFtuXSl9KX0sUS51cGRhdGVSaXBwbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307dm9pZCAwPT09ZSYmKGU9dC5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIikpO3ZhciBpPVEuZmluZENoaWxkKHQsXCJvbnMtcmlwcGxlXCIpO2lmKGUpe2lmKCFpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib25zLXJpcHBsZVwiKTtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBvLnNldEF0dHJpYnV0ZSh0LG5bdF0pfSksdC5pbnNlcnRCZWZvcmUobyx0LmZpcnN0Q2hpbGQpfX1lbHNlIGkmJmkucmVtb3ZlKCl9LFEuYW5pbWF0aW9uT3B0aW9uc1BhcnNlPWZ1bmN0aW9uKHQpe2lmKHQ9dC50cmltKCksVih0KSlyZXR1cm4gJCh6KHQpKTtpZihXKHQpKXJldHVybiBLKHoodCkpO3Rocm93IG5ldyBFcnJvcihcIlByb3ZpZGVkIHN0cmluZyBtdXN0IGJlIG9iamVjdCBvciBhcnJheSBsaWtlOiBcIit0KX0sUS5pc0ludGVnZXI9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJmlzRmluaXRlKHQpJiZNYXRoLmZsb29yKHQpPT09dH0sUS5kZWZlcj1mdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0LnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXt0LnJlc29sdmU9ZSx0LnJlamVjdD1ufSksdH0sUS53YXJuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtpZighUC5jb25maWcud2FybmluZ3NEaXNhYmxlZCl7dmFyIGk7KGk9Y29uc29sZSkud2Fybi5hcHBseShpLFtKXS5jb25jYXQoZSkpfX0sUS50aHJvdz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoSitcIiBcIit0KX0sUS50aHJvd0Fic3RyYWN0PWZ1bmN0aW9uKCl7cmV0dXJuIFEudGhyb3coXCJDYW5ub3QgaW5zdGFudGlhdGUgYWJzdHJhY3QgY2xhc3NcIil9LFEudGhyb3dNZW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUS50aHJvdyhcIkNsYXNzIG1lbWJlciBtdXN0IGJlIGltcGxlbWVudGVkXCIpfSxRLnRocm93UGFnZUxvYWRlcj1mdW5jdGlvbigpe3JldHVybiBRLnRocm93KFwiRmlyc3QgcGFyYW1ldGVyIHNob3VsZCBiZSBhbiBpbnN0YW5jZSBvZiBQYWdlTG9hZGVyXCIpfSxRLnRocm93QW5pbWF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIFEudGhyb3coJ1wiQW5pbWF0b3JcIiBwYXJhbSBtdXN0IGluaGVyaXQgJyt0K1wiQW5pbWF0b3JcIil9O3ZhciB0dD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYW5jZWxhYmxlJiZ0LnByZXZlbnREZWZhdWx0KCl9O1EuaW9zUHJldmVudFNjcm9sbD1mdW5jdGlvbih0KXtpZihcImlvc1wiPT09US5nbG9iYWxzLmFjdHVhbE1vYmlsZU9TKXt0Lm9uKFwidG91Y2htb3ZlXCIsdHQpLHQub24oXCJkcmFnZW5kXCIsZnVuY3Rpb24gZShuKXt0Lm9mZihcInRvdWNobW92ZVwiLHR0KSx0Lm9mZihcImRyYWdlbmRcIixlKX0pfX0sUS5pb3NQYWdlU2Nyb2xsRml4PWZ1bmN0aW9uKHQpe1wiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1MmJihkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJvbnMtaW9zLXNjcm9sbFwiLHQpLFEuZ2xvYmFscy5pc1VJV2ViVmlldyYmIVAuY29uZmlnLmZvcmNlVUlXZWJWaWV3U2Nyb2xsRml4fHxkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJvbnMtaW9zLXNjcm9sbC1maXhcIix0KSl9LFEuaW9zTWFza1Njcm9sbEZpeD1mdW5jdGlvbih0LGUpe2lmKFEuZ2xvYmFscy5pc1VJV2ViVmlldyl7dFsoZT9cImFkZFwiOlwicmVtb3ZlXCIpK1wiRXZlbnRMaXN0ZW5lclwiXShcInRvdWNobW92ZVwiLHR0LCExKX19LFEuaXNWYWxpZEdlc3R1cmU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQuZ2VzdHVyZSYmKHQuZ2VzdHVyZS5kaXN0YW5jZTw9MTV8fHQuZ2VzdHVyZS5kZWx0YVRpbWU8PTEwMCl9LFEuY2hlY2tNaXNzaW5nSW1wb3J0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtlLmZvckVhY2goZnVuY3Rpb24odCl7Y1t0XXx8US50aHJvdyhcIk9uc1wiK3QrXCIgaXMgcmVxdWlyZWQgYnV0IHdhcyBub3QgaW1wb3J0ZWQgKEN1c3RvbSBFbGVtZW50cylcIil9KX07dmFyIGV0PXt9O2V0LmNhcGl0YWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKX0sZXQuYnVpbGRUcmFuc2l0aW9uVmFsdWU9ZnVuY3Rpb24odCl7dC5wcm9wZXJ0eT10LnByb3BlcnR5fHxcImFsbFwiLHQuZHVyYXRpb249dC5kdXJhdGlvbnx8LjQsdC50aW1pbmc9dC50aW1pbmd8fFwibGluZWFyXCI7cmV0dXJuIHQucHJvcGVydHkuc3BsaXQoLyArLykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlK1wiIFwiK3QuZHVyYXRpb24rXCJzIFwiK3QudGltaW5nfSkuam9pbihcIiwgXCIpfSxldC5vbmNlT25UcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIGZ1bmN0aW9uKCl7fTt2YXIgbj1mdW5jdGlvbihuKXt0PT1uLnRhcmdldCYmKG4uc3RvcFByb3BhZ2F0aW9uKCksaSgpLGUoKSl9LGk9ZnVuY3Rpb24oKXtldC5fdHJhbnNpdGlvbkVuZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4sITEpfSl9O3JldHVybiBldC5fdHJhbnNpdGlvbkVuZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuYWRkRXZlbnRMaXN0ZW5lcihlLG4sITEpfSksaX0sZXQuX3RyYW5zaXRpb25FbmRFdmVudHM9XCJvbnRyYW5zaXRpb25lbmRcImluIHdpbmRvdz9bXCJ0cmFuc2l0aW9uZW5kXCJdOlwib253ZWJraXR0cmFuc2l0aW9uZW5kXCJpbiB3aW5kb3c/W1wid2Via2l0VHJhbnNpdGlvbkVuZFwiXTpcIndlYmtpdFwiPT09ZXQudmVuZG9yUHJlZml4fHxcIm9cIj09PWV0LnZlbmRvclByZWZpeHx8XCJtb3pcIj09PWV0LnZlbmRvclByZWZpeHx8XCJtc1wiPT09ZXQudmVuZG9yUHJlZml4P1tldC52ZW5kb3JQcmVmaXgrXCJUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCJdOltdLGV0Ll9jc3NQcm9wZXJ0eURpY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFwiXCIpLGU9e30sbj1cIkFcIi5jaGFyQ29kZUF0KDApLGk9XCJ6XCIuY2hhckNvZGVBdCgwKSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciByPXRbb10ucmVwbGFjZSgvXlstXSsvLFwiXCIpLnJlcGxhY2UoL1stXVthLXpdL2csZnVuY3Rpb24odCl7cmV0dXJuIHQuc3Vic3RyKDEpLnRvVXBwZXJDYXNlKCl9KS5yZXBsYWNlKC9ebW96LyxcIk1velwiKTtuPD1yLmNoYXJDb2RlQXQoMCkmJmk+PXIuY2hhckNvZGVBdCgwKSYmXCJjc3NUZXh0XCIhPT1yJiZcInBhcmVudFRleHRcIiE9PXImJihlW3JdPSEwKX1yZXR1cm4gZX0oKSxldC5oYXNDc3NQcm9wZXJ0eT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbiBldC5fY3NzUHJvcGVydHlEaWN0fSxldC52ZW5kb3JQcmVmaXg9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJcIik7cmV0dXJuKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpLmpvaW4oXCJcIikubWF0Y2goLy0obW96fHdlYmtpdHxtcyktLyl8fFwiXCI9PT10Lk9MaW5rJiZbXCJcIixcIm9cIl0pWzFdfSgpLGV0LmZvcmNlTGF5b3V0QXRPbmNlPWZ1bmN0aW9uKHQsZSl7dGhpcy5iYXRjaEltbWVkaWF0ZShmdW5jdGlvbigpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0Lm9mZnNldEhlaWdodH0pLGUoKX0pfSxldC5iYXRjaEltbWVkaWF0ZT1mdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiBmdW5jdGlvbihlKXswPT09dC5sZW5ndGgmJnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3ZhciBlPXQuc2xpY2UoMCk7dD1bXSxlLmZvckVhY2goZnVuY3Rpb24odCl7dCgpfSl9KSx0LnB1c2goZSl9fSgpLGV0LmJhdGNoQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKHQpe3NldFRpbWVvdXQodCwxZTMvNjApfTtyZXR1cm4gZnVuY3Rpb24obil7MD09PXQubGVuZ3RoJiZlKGZ1bmN0aW9uKCl7dmFyIGU9dC5zbGljZSgwKTt0PVtdLGUuZm9yRWFjaChmdW5jdGlvbih0KXt0KCl9KX0pLHQucHVzaChuKX19KCksZXQudHJhbnNpdGlvblByb3BlcnR5TmFtZT1mdW5jdGlvbigpe2lmKGV0Lmhhc0Nzc1Byb3BlcnR5KFwidHJhbnNpdGlvbkR1cmF0aW9uXCIpKXJldHVyblwidHJhbnNpdGlvblwiO2lmKGV0Lmhhc0Nzc1Byb3BlcnR5KGV0LnZlbmRvclByZWZpeCtcIlRyYW5zaXRpb25EdXJhdGlvblwiKSlyZXR1cm4gZXQudmVuZG9yUHJlZml4K1wiVHJhbnNpdGlvblwiO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGVcIil9KCk7dmFyIG50PWZ1bmN0aW9uIHQoZSxuKXtpZighKHRoaXMgaW5zdGFuY2VvZiB0KSlyZXR1cm4gbmV3IHQoZSxuKTtpZihlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpdGhpcy5lbGVtZW50cz1bZV07ZWxzZXtpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpdGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBhcnJheSBvciBhbiBpbnN0YW5jZSBvZiBIVE1MRWxlbWVudC5cIik7dGhpcy5lbGVtZW50cz1lfXRoaXMuZGVmYXVsdHM9bix0aGlzLnRyYW5zaXRpb25RdWV1ZT1bXSx0aGlzLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3Q9W119O250LnByb3RvdHlwZT17dHJhbnNpdGlvblF1ZXVlOnZvaWQgMCxlbGVtZW50czp2b2lkIDAsZGVmYXVsdHM6dm9pZCAwLHBsYXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdGhpcy50cmFuc2l0aW9uUXVldWUucHVzaChmdW5jdGlvbihlKXt0KCksZSgpfSksdGhpcy5zdGFydEFuaW1hdGlvbigpLHRoaXN9LGRlZmF1bHQ6ZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe3JldHVybiB2b2lkIDAhPT10LmR1cmF0aW9uJiYoZT10LmR1cmF0aW9uKSx2b2lkIDAhPT10LnRpbWluZyYmKG49dC50aW1pbmcpLHtjc3M6dC5jc3N8fHQsZHVyYXRpb246ZSx0aW1pbmc6bn19cmV0dXJuIHRoaXMuc2F2ZVN0eWxlKCkucXVldWUoaSh0LDAsdGhpcy5kZWZhdWx0cy50aW1pbmcpKS53YWl0KHZvaWQgMD09PW4/dGhpcy5kZWZhdWx0cy5kZWxheTpuKS5xdWV1ZShpKGUsdGhpcy5kZWZhdWx0cy5kdXJhdGlvbix0aGlzLmRlZmF1bHRzLnRpbWluZykpLnJlc3RvcmVTdHlsZSgpfSxxdWV1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMudHJhbnNpdGlvblF1ZXVlO2lmKHQmJmUmJihlLmNzcz10LHQ9bmV3IG50LlRyYW5zaXRpb24oZSkpLHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8dCBpbnN0YW5jZW9mIG50LlRyYW5zaXRpb258fCh0PW5ldyBudC5UcmFuc2l0aW9uKHQuY3NzP3Q6e2Nzczp0fSkpLHQgaW5zdGFuY2VvZiBGdW5jdGlvbiluLnB1c2godCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBudC5UcmFuc2l0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50c1wiKTtuLnB1c2godC5idWlsZCgpKX1yZXR1cm4gdGhpc30sd2FpdDpmdW5jdGlvbih0KXtyZXR1cm4gdD4wJiZ0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwxZTMqdCl9KSx0aGlzfSxzYXZlU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2l0aW9uUXVldWUucHVzaChmdW5jdGlvbih0KXt0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5sYXN0U3R5bGVBdHRyaWJ1dGVEaWN0W2VdPXt9LGk9MDtpPHQuc3R5bGUubGVuZ3RoO2krKyluW3Quc3R5bGVbaV1dPXQuc3R5bGVbdC5zdHlsZVtpXV19LmJpbmQodGhpcykpLHQoKX0uYmluZCh0aGlzKSksdGhpc30scmVzdG9yZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoKHQ9dHx8e30pLnRyYW5zaXRpb24mJiF0LmR1cmF0aW9uKXRocm93IG5ldyBFcnJvcignXCJvcHRpb25zLmR1cmF0aW9uXCIgaXMgcmVxdWlyZWQgd2hlbiBcIm9wdGlvbnMudHJhbnNpdGlvblwiIGlzIGVuYWJsZWQuJyk7dmFyIG49ZXQudHJhbnNpdGlvblByb3BlcnR5TmFtZTtpZih0LnRyYW5zaXRpb258fHQuZHVyYXRpb24mJnQuZHVyYXRpb24+MCl7dmFyIGk9dC50cmFuc2l0aW9ufHxcImFsbCBcIit0LmR1cmF0aW9uK1wicyBcIisodC50aW1pbmd8fFwibGluZWFyXCIpO3RoaXMudHJhbnNpdGlvblF1ZXVlLnB1c2goZnVuY3Rpb24obyl7dmFyIHIsYT10aGlzLmVsZW1lbnRzLHM9ZnVuY3Rpb24oKXthLmZvckVhY2goZnVuY3Rpb24odCl7dC5zdHlsZVtuXT1cIlwifSl9LGw9ZXQub25jZU9uVHJhbnNpdGlvbkVuZChhWzBdLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpLHMoKSxvKCl9KTtyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsKCkscygpLG8oKX0sMWUzKnQuZHVyYXRpb24qMS40KSxhLmZvckVhY2goZnVuY3Rpb24odCxvKXt2YXIgcj1lLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3Rbb107aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwicmVzdG9yZVN0eWxlKCk6IFRoZSBzdHlsZSBpcyBub3Qgc2F2ZWQuIEludm9rZSBzYXZlU3R5bGUoKSBiZWZvcmUuXCIpO2UubGFzdFN0eWxlQXR0cmlidXRlRGljdFtvXT12b2lkIDA7Zm9yKHZhciBhLHM9MCxsPXQuc3R5bGUubGVuZ3RoO3M8bDtzKyspYT10LnN0eWxlW3NdLHZvaWQgMD09PXJbYV0mJihyW2FdPVwiXCIpO3Quc3R5bGVbbl09aSxPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UhPT1uJiYodC5zdHlsZVtlXT1yW2VdKX0pLHQuc3R5bGVbbl09aX0pfSl9ZWxzZSB0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKHQpe2UuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbih0LGkpe3Quc3R5bGVbbl09XCJub25lXCI7dmFyIG89ZS5sYXN0U3R5bGVBdHRyaWJ1dGVEaWN0W2ldO2lmKCFvKXRocm93IG5ldyBFcnJvcihcInJlc3RvcmVTdHlsZSgpOiBUaGUgc3R5bGUgaXMgbm90IHNhdmVkLiBJbnZva2Ugc2F2ZVN0eWxlKCkgYmVmb3JlLlwiKTtlLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3RbaV09dm9pZCAwO2Zvcih2YXIgcj0wO3I8dC5zdHlsZS5sZW5ndGg7cisrKXQuc3R5bGVbcl0sdm9pZCAwPT09b1t0LnN0eWxlW3JdXSYmKG9bdC5zdHlsZVtyXV09XCJcIik7T2JqZWN0LmtleXMobykuZm9yRWFjaChmdW5jdGlvbihlKXt0LnN0eWxlW2VdPW9bZV19KX0pLHQoKX0pO3JldHVybiB0aGlzfSxzdGFydEFuaW1hdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXF1ZXVlVHJhbnNpdGlvbigpLHRoaXN9LF9kZXF1ZXVlVHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMudHJhbnNpdGlvblF1ZXVlLnNoaWZ0KCk7aWYodGhpcy5fY3VycmVudFRyYW5zaXRpb24pdGhyb3cgbmV3IEVycm9yKFwiQ3VycmVudCB0cmFuc2l0aW9uIGV4aXN0cy5cIik7dGhpcy5fY3VycmVudFRyYW5zaXRpb249dDt2YXIgZT10aGlzLG49ITE7dCYmdC5jYWxsKHRoaXMsZnVuY3Rpb24oKXtpZihuKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGU6IFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIHR3aWNlLlwiKTtuPSEwLGUuX2N1cnJlbnRUcmFuc2l0aW9uPXZvaWQgMCxlLl9kZXF1ZXVlVHJhbnNpdGlvbigpfSl9fSxudC5ydW5BbGw9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWFyZ3VtZW50c1t0XS5wbGF5KCl9LChudC5UcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucz10fHx7fSx0aGlzLm9wdGlvbnMuZHVyYXRpb249dGhpcy5vcHRpb25zLmR1cmF0aW9ufHwwLHRoaXMub3B0aW9ucy50aW1pbmc9dGhpcy5vcHRpb25zLnRpbWluZ3x8XCJsaW5lYXJcIix0aGlzLm9wdGlvbnMuY3NzPXRoaXMub3B0aW9ucy5jc3N8fHt9LHRoaXMub3B0aW9ucy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fFwiYWxsXCJ9KS5wcm90b3R5cGU9e2J1aWxkOmZ1bmN0aW9uKCl7aWYoMD09PU9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5jc3MpLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLmNzcyBpcyByZXF1aXJlZC5cIik7dmFyIHQ9ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGk9dFtuXTtpZihldC5oYXNDc3NQcm9wZXJ0eShuKSllW25dPWk7ZWxzZXt2YXIgbz1ldC52ZW5kb3JQcmVmaXgrZXQuY2FwaXRhbGl6ZShuKTtldC5oYXNDc3NQcm9wZXJ0eShvKT9lW29dPWk6KGVbb109aSxlW25dPWkpfX0pLGV9KHRoaXMub3B0aW9ucy5jc3MpO2lmKHRoaXMub3B0aW9ucy5kdXJhdGlvbj4wKXt2YXIgZT1ldC5idWlsZFRyYW5zaXRpb25WYWx1ZSh0aGlzLm9wdGlvbnMpLG49dGhpcztyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIG8scj10aGlzLmVsZW1lbnRzLGE9MWUzKm4ub3B0aW9ucy5kdXJhdGlvbioxLjQscz1ldC5vbmNlT25UcmFuc2l0aW9uRW5kKHJbMF0sZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQobyksaSgpfSk7bz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cygpLGkoKX0sYSksci5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uc3R5bGVbZXQudHJhbnNpdGlvblByb3BlcnR5TmFtZV09ZSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe24uc3R5bGVbZV09dFtlXX0pfSl9fWlmKHRoaXMub3B0aW9ucy5kdXJhdGlvbjw9MClyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5lbGVtZW50cztuLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdHlsZVtldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lXT1cIlwiLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7ZS5zdHlsZVtuXT10W25dfSl9KSxuLmxlbmd0aD4wP2V0LmZvcmNlTGF5b3V0QXRPbmNlKG4sZnVuY3Rpb24oKXtldC5iYXRjaEFuaW1hdGlvbkZyYW1lKGUpfSk6ZXQuYmF0Y2hBbmltYXRpb25GcmFtZShlKX19fTt2YXIgaXQsb3QscnQsYXQsc3Q9ZnVuY3Rpb24gdChlLG4pe3JldHVybiBuZXcgdC5JbnN0YW5jZShlLG58fHt9KX07c3QuZGVmYXVsdHM9e2JlaGF2aW9yOnt0b3VjaEFjdGlvbjpcInBhbi15XCIsdG91Y2hDYWxsb3V0Olwibm9uZVwiLGNvbnRlbnRab29taW5nOlwibm9uZVwiLHVzZXJEcmFnOlwibm9uZVwiLHRhcEhpZ2hsaWdodENvbG9yOlwicmdiYSgwLDAsMCwwKVwifX0sc3QuRE9DVU1FTlQ9ZG9jdW1lbnQsc3QuSEFTX1BPSU5URVJFVkVOVFM9bmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkfHxuYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxzdC5IQVNfVE9VQ0hFVkVOVFM9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyxzdC5JU19NT0JJTEU9L21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZHxzaWxrL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzdC5OT19NT1VTRUVWRU5UUz1zdC5IQVNfVE9VQ0hFVkVOVFMmJnN0LklTX01PQklMRXx8c3QuSEFTX1BPSU5URVJFVkVOVFMsc3QuQ0FMQ1VMQVRFX0lOVEVSVkFMPTI1O3ZhciBsdD17fSx1dD1zdC5ESVJFQ1RJT05fRE9XTj1cImRvd25cIixjdD1zdC5ESVJFQ1RJT05fTEVGVD1cImxlZnRcIixodD1zdC5ESVJFQ1RJT05fVVA9XCJ1cFwiLGR0PXN0LkRJUkVDVElPTl9SSUdIVD1cInJpZ2h0XCIsZnQ9c3QuUE9JTlRFUl9NT1VTRT1cIm1vdXNlXCIscHQ9c3QuUE9JTlRFUl9UT1VDSD1cInRvdWNoXCIsZ3Q9c3QuUE9JTlRFUl9QRU49XCJwZW5cIixtdD1zdC5FVkVOVF9TVEFSVD1cInN0YXJ0XCIsX3Q9c3QuRVZFTlRfTU9WRT1cIm1vdmVcIix2dD1zdC5FVkVOVF9FTkQ9XCJlbmRcIixidD1zdC5FVkVOVF9SRUxFQVNFPVwicmVsZWFzZVwiLHl0PXN0LkVWRU5UX1RPVUNIPVwidG91Y2hcIjtzdC5SRUFEWT0hMSxzdC5wbHVnaW5zPXN0LnBsdWdpbnN8fHt9LHN0Lmdlc3R1cmVzPXN0Lmdlc3R1cmVzfHx7fSxvdD1zdC51dGlscz17ZXh0ZW5kOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGkgaW4gZSkhZS5oYXNPd25Qcm9wZXJ0eShpKXx8dm9pZCAwIT09dFtpXSYmbnx8KHRbaV09ZVtpXSk7cmV0dXJuIHR9LG9uOmZ1bmN0aW9uKHQsZSxuLGkpe1EuYWRkRXZlbnRMaXN0ZW5lcih0LGUsbixpLCEwKX0sb2ZmOmZ1bmN0aW9uKHQsZSxuLGkpe1EucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUsbixpLCEwKX0sZWFjaDpmdW5jdGlvbih0LGUsbil7dmFyIGksbztpZihcImZvckVhY2hcImluIHQpdC5mb3JFYWNoKGUsbik7ZWxzZSBpZih2b2lkIDAhPT10Lmxlbmd0aCl7Zm9yKGk9MCxvPXQubGVuZ3RoO2k8bztpKyspaWYoITE9PT1lLmNhbGwobix0W2ldLGksdCkpcmV0dXJufWVsc2UgZm9yKGkgaW4gdClpZih0Lmhhc093blByb3BlcnR5KGkpJiYhMT09PWUuY2FsbChuLHRbaV0saSx0KSlyZXR1cm59LGluU3RyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5kZXhPZihlKT4tMX0saW5BcnJheTpmdW5jdGlvbih0LGUsbil7aWYobil7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKWlmKE9iamVjdC5rZXlzKGUpLmV2ZXJ5KGZ1bmN0aW9uKG4pe3JldHVybiB0W2ldW25dPT09ZVtuXX0pKXJldHVybiBpO3JldHVybi0xfWlmKHQuaW5kZXhPZilyZXR1cm4gdC5pbmRleE9mKGUpO2Zvcih2YXIgaT0wLG89dC5sZW5ndGg7aTxvO2krKylpZih0W2ldPT09ZSlyZXR1cm4gaTtyZXR1cm4tMX0sdG9BcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwKX0saGFzUGFyZW50OmZ1bmN0aW9uKHQsZSl7Zm9yKDt0Oyl7aWYodD09ZSlyZXR1cm4hMDt0PXQucGFyZW50Tm9kZX1yZXR1cm4hMX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49W10saT1bXSxvPVtdLHI9TWF0aC5taW4sYT1NYXRoLm1heDtyZXR1cm4gMT09PXQubGVuZ3RoP3twYWdlWDp0WzBdLnBhZ2VYLHBhZ2VZOnRbMF0ucGFnZVksY2xpZW50WDp0WzBdLmNsaWVudFgsY2xpZW50WTp0WzBdLmNsaWVudFl9OihvdC5lYWNoKHQsZnVuY3Rpb24odCl7ZS5wdXNoKHQucGFnZVgpLG4ucHVzaCh0LnBhZ2VZKSxpLnB1c2godC5jbGllbnRYKSxvLnB1c2godC5jbGllbnRZKX0pLHtwYWdlWDooci5hcHBseShNYXRoLGUpK2EuYXBwbHkoTWF0aCxlKSkvMixwYWdlWTooci5hcHBseShNYXRoLG4pK2EuYXBwbHkoTWF0aCxuKSkvMixjbGllbnRYOihyLmFwcGx5KE1hdGgsaSkrYS5hcHBseShNYXRoLGkpKS8yLGNsaWVudFk6KHIuYXBwbHkoTWF0aCxvKSthLmFwcGx5KE1hdGgsbykpLzJ9KX0sZ2V0VmVsb2NpdHk6ZnVuY3Rpb24odCxlLG4pe3JldHVybnt4Ok1hdGguYWJzKGUvdCl8fDAseTpNYXRoLmFicyhuL3QpfHwwfX0sZ2V0QW5nbGU6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmNsaWVudFgtdC5jbGllbnRYLGk9ZS5jbGllbnRZLXQuY2xpZW50WTtyZXR1cm4gMTgwKk1hdGguYXRhbjIoaSxuKS9NYXRoLlBJfSxnZXREaXJlY3Rpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnModC5jbGllbnRYLWUuY2xpZW50WCk+PU1hdGguYWJzKHQuY2xpZW50WS1lLmNsaWVudFkpP3QuY2xpZW50WC1lLmNsaWVudFg+MD9jdDpkdDp0LmNsaWVudFktZS5jbGllbnRZPjA/aHQ6dXR9LGdldERpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5jbGllbnRYLXQuY2xpZW50WCxpPWUuY2xpZW50WS10LmNsaWVudFk7cmV0dXJuIE1hdGguc3FydChuKm4raSppKX0sZ2V0U2NhbGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PTImJmUubGVuZ3RoPj0yP3RoaXMuZ2V0RGlzdGFuY2UoZVswXSxlWzFdKS90aGlzLmdldERpc3RhbmNlKHRbMF0sdFsxXSk6MX0sZ2V0Um90YXRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PTImJmUubGVuZ3RoPj0yP3RoaXMuZ2V0QW5nbGUoZVsxXSxlWzBdKS10aGlzLmdldEFuZ2xlKHRbMV0sdFswXSk6MH0saXNWZXJ0aWNhbDpmdW5jdGlvbih0KXtyZXR1cm4gdD09aHR8fHQ9PXV0fSxzZXRQcmVmaXhlZENzczpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz1bXCJcIixcIldlYmtpdFwiLFwiTW96XCIsXCJPXCIsXCJtc1wiXTtlPW90LnRvQ2FtZWxDYXNlKGUpO2Zvcih2YXIgcj0wO3I8by5sZW5ndGg7cisrKXt2YXIgYT1lO2lmKG9bcl0mJihhPW9bcl0rYS5zbGljZSgwLDEpLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSksYSBpbiB0LnN0eWxlKXt0LnN0eWxlW2FdPShudWxsPT09aXx8aSkmJm58fFwiXCI7YnJlYWt9fX0sdG9nZ2xlQmVoYXZpb3I6ZnVuY3Rpb24odCxlLG4pe2lmKGUmJnQmJnQuc3R5bGUpe290LmVhY2goZSxmdW5jdGlvbihlLGkpe290LnNldFByZWZpeGVkQ3NzKHQsaSxlLG4pfSk7dmFyIGk9biYmZnVuY3Rpb24oKXtyZXR1cm4hMX07XCJub25lXCI9PWUudXNlclNlbGVjdCYmKHQub25zZWxlY3RzdGFydD1pKSxcIm5vbmVcIj09ZS51c2VyRHJhZyYmKHQub25kcmFnc3RhcnQ9aSl9fSx0b0NhbWVsQ2FzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9bXy1dKFthLXpdKS9nLGZ1bmN0aW9uKHQpe3JldHVybiB0WzFdLnRvVXBwZXJDYXNlKCl9KX19LGl0PXN0LmV2ZW50PXtwcmV2ZW50TW91c2VFdmVudHM6ITEsc3RhcnRlZDohMSxzaG91bGREZXRlY3Q6ITEsb246ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj1lLnNwbGl0KFwiIFwiKTtvdC5lYWNoKHIsZnVuY3Rpb24oZSl7b3Qub24odCxlLG4saSksbyYmbyhlKX0pfSxvZmY6ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj1lLnNwbGl0KFwiIFwiKTtvdC5lYWNoKHIsZnVuY3Rpb24oZSl7b3Qub2ZmKHQsZSxuLGkpLG8mJm8oZSl9KX0sb25Ub3VjaDpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10aGlzLHI9ZnVuY3Rpb24oaSl7dmFyIHIsYT1pLnR5cGUudG9Mb3dlckNhc2UoKSxzPXN0LkhBU19QT0lOVEVSRVZFTlRTLGw9b3QuaW5TdHIoYSxcIm1vdXNlXCIpO2wmJm8ucHJldmVudE1vdXNlRXZlbnRzfHwobCYmZT09bXQmJjA9PT1pLmJ1dHRvbj8oby5wcmV2ZW50TW91c2VFdmVudHM9ITEsby5zaG91bGREZXRlY3Q9ITApOnMmJmU9PW10P28uc2hvdWxkRGV0ZWN0PTE9PT1pLmJ1dHRvbnN8fGF0Lm1hdGNoVHlwZShwdCxpKTpsfHxlIT1tdHx8KG8ucHJldmVudE1vdXNlRXZlbnRzPSEwLG8uc2hvdWxkRGV0ZWN0PSEwKSxzJiZlIT12dCYmYXQudXBkYXRlUG9pbnRlcihlLGkpLG8uc2hvdWxkRGV0ZWN0JiYocj1vLmRvRGV0ZWN0LmNhbGwobyxpLGUsdCxuKSkscj09dnQmJihvLnByZXZlbnRNb3VzZUV2ZW50cz0hMSxvLnNob3VsZERldGVjdD0hMSxhdC5yZXNldCgpKSxzJiZlPT12dCYmYXQudXBkYXRlUG9pbnRlcihlLGkpKX07cmV0dXJuIHRoaXMub24odCxsdFtlXSxyLGkpLHJ9LGRvRGV0ZWN0OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMuZ2V0VG91Y2hMaXN0KHQsZSkscj1vLmxlbmd0aCxhPWUscz1vLnRyaWdnZXIsbD1yO2U9PW10P3M9eXQ6ZT09dnQmJihzPWJ0LGw9by5sZW5ndGgtKHQuY2hhbmdlZFRvdWNoZXM/dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg6MSkpLGw+MCYmdGhpcy5zdGFydGVkJiYoYT1fdCksdGhpcy5zdGFydGVkPSEwO3ZhciB1PXRoaXMuY29sbGVjdEV2ZW50RGF0YShuLGEsbyx0KTtyZXR1cm4gZSE9dnQmJmkuY2FsbChydCx1KSxzJiYodS5jaGFuZ2VkTGVuZ3RoPWwsdS5ldmVudFR5cGU9cyxpLmNhbGwocnQsdSksdS5ldmVudFR5cGU9YSxkZWxldGUgdS5jaGFuZ2VkTGVuZ3RoKSxhPT12dCYmKGkuY2FsbChydCx1KSx0aGlzLnN0YXJ0ZWQ9ITEpLGF9LGRldGVybWluZUV2ZW50VHlwZXM6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD1zdC5IQVNfUE9JTlRFUkVWRU5UUz93aW5kb3cuUG9pbnRlckV2ZW50P1tcInBvaW50ZXJkb3duXCIsXCJwb2ludGVybW92ZVwiLFwicG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwgbG9zdHBvaW50ZXJjYXB0dXJlXCJdOltcIk1TUG9pbnRlckRvd25cIixcIk1TUG9pbnRlck1vdmVcIixcIk1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCBNU0xvc3RQb2ludGVyQ2FwdHVyZVwiXTpzdC5OT19NT1VTRUVWRU5UUz9bXCJ0b3VjaHN0YXJ0XCIsXCJ0b3VjaG1vdmVcIixcInRvdWNoZW5kIHRvdWNoY2FuY2VsXCJdOltcInRvdWNoc3RhcnQgbW91c2Vkb3duXCIsXCJ0b3VjaG1vdmUgbW91c2Vtb3ZlXCIsXCJ0b3VjaGVuZCB0b3VjaGNhbmNlbCBtb3VzZXVwXCJdLGx0W210XT10WzBdLGx0W190XT10WzFdLGx0W3Z0XT10WzJdLGx0fSxnZXRUb3VjaExpc3Q6ZnVuY3Rpb24odCxlKXtpZihzdC5IQVNfUE9JTlRFUkVWRU5UUylyZXR1cm4gYXQuZ2V0VG91Y2hMaXN0KCk7aWYodC50b3VjaGVzKXtpZihlPT1fdClyZXR1cm4gdC50b3VjaGVzO3ZhciBuPVtdLGk9W10uY29uY2F0KG90LnRvQXJyYXkodC50b3VjaGVzKSxvdC50b0FycmF5KHQuY2hhbmdlZFRvdWNoZXMpKSxvPVtdO3JldHVybiBvdC5lYWNoKGksZnVuY3Rpb24odCl7LTE9PT1vdC5pbkFycmF5KG4sdC5pZGVudGlmaWVyKSYmby5wdXNoKHQpLG4ucHVzaCh0LmlkZW50aWZpZXIpfSksb31yZXR1cm4gdC5pZGVudGlmaWVyPTEsW3RdfSxjb2xsZWN0RXZlbnREYXRhOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXB0O3JldHVybiBvdC5pblN0cihpLnR5cGUsXCJtb3VzZVwiKXx8YXQubWF0Y2hUeXBlKGZ0LGkpP289ZnQ6YXQubWF0Y2hUeXBlKGd0LGkpJiYobz1ndCkse2NlbnRlcjpvdC5nZXRDZW50ZXIobiksdGltZVN0YW1wOkRhdGUubm93KCksdGFyZ2V0OmkudGFyZ2V0LHRvdWNoZXM6bixldmVudFR5cGU6ZSxwb2ludGVyVHlwZTpvLHNyY0V2ZW50OmkscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNyY0V2ZW50O3QucHJldmVudE1hbmlwdWxhdGlvbiYmdC5wcmV2ZW50TWFuaXB1bGF0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wRGV0ZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHJ0LnN0b3BEZXRlY3QoKX19fX0sYXQ9c3QuUG9pbnRlckV2ZW50PXtwb2ludGVyczp7fSxnZXRUb3VjaExpc3Q6ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gb3QuZWFjaCh0aGlzLnBvaW50ZXJzLGZ1bmN0aW9uKGUpe3QucHVzaChlKX0pLHR9LHVwZGF0ZVBvaW50ZXI6ZnVuY3Rpb24odCxlKXt0PT12dHx8dCE9dnQmJjEhPT1lLmJ1dHRvbnM/ZGVsZXRlIHRoaXMucG9pbnRlcnNbZS5wb2ludGVySWRdOihlLmlkZW50aWZpZXI9ZS5wb2ludGVySWQsdGhpcy5wb2ludGVyc1tlLnBvaW50ZXJJZF09ZSl9LG1hdGNoVHlwZTpmdW5jdGlvbih0LGUpe2lmKCFlLnBvaW50ZXJUeXBlKXJldHVybiExO3ZhciBuPWUucG9pbnRlclR5cGUsaT17fTtyZXR1cm4gaVtmdF09bj09PShlLk1TUE9JTlRFUl9UWVBFX01PVVNFfHxmdCksaVtwdF09bj09PShlLk1TUE9JTlRFUl9UWVBFX1RPVUNIfHxwdCksaVtndF09bj09PShlLk1TUE9JTlRFUl9UWVBFX1BFTnx8Z3QpLGlbdF19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5wb2ludGVycz17fX19LHJ0PXN0LmRldGVjdGlvbj17Z2VzdHVyZXM6W10sY3VycmVudDpudWxsLHByZXZpb3VzOm51bGwsc3RvcHBlZDohMSxzdGFydERldGVjdDpmdW5jdGlvbih0LGUpe3RoaXMuY3VycmVudHx8KHRoaXMuc3RvcHBlZD0hMSx0aGlzLmN1cnJlbnQ9e2luc3Q6dCxzdGFydEV2ZW50Om90LmV4dGVuZCh7fSxlKSxsYXN0RXZlbnQ6ITEsbGFzdENhbGNFdmVudDohMSxmdXR1cmVDYWxjRXZlbnQ6ITEsbGFzdENhbGNEYXRhOnt9LG5hbWU6XCJcIn0sdGhpcy5kZXRlY3QoZSkpfSxkZXRlY3Q6ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50JiYhdGhpcy5zdG9wcGVkKXt0PXRoaXMuZXh0ZW5kRXZlbnREYXRhKHQpO3ZhciBlPXRoaXMuY3VycmVudC5pbnN0LG49ZS5vcHRpb25zO3JldHVybiBvdC5lYWNoKHRoaXMuZ2VzdHVyZXMsZnVuY3Rpb24oaSl7IXRoaXMuc3RvcHBlZCYmZS5lbmFibGVkJiZuW2kubmFtZV0mJmkuaGFuZGxlci5jYWxsKGksdCxlKX0sdGhpcyksdGhpcy5jdXJyZW50JiYodGhpcy5jdXJyZW50Lmxhc3RFdmVudD10KSx0LmV2ZW50VHlwZT09dnQmJnRoaXMuc3RvcERldGVjdCgpLHR9fSxzdG9wRGV0ZWN0OmZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz1vdC5leHRlbmQoe30sdGhpcy5jdXJyZW50KSx0aGlzLmN1cnJlbnQ9bnVsbCx0aGlzLnN0b3BwZWQ9ITB9LGdldENhbGN1bGF0ZWREYXRhOmZ1bmN0aW9uKHQsZSxuLGksbyl7dmFyIHI9dGhpcy5jdXJyZW50LGE9ITEscz1yLmxhc3RDYWxjRXZlbnQsbD1yLmxhc3RDYWxjRGF0YTtzJiZ0LnRpbWVTdGFtcC1zLnRpbWVTdGFtcD5zdC5DQUxDVUxBVEVfSU5URVJWQUwmJihlPXMuY2VudGVyLG49dC50aW1lU3RhbXAtcy50aW1lU3RhbXAsaT10LmNlbnRlci5jbGllbnRYLXMuY2VudGVyLmNsaWVudFgsbz10LmNlbnRlci5jbGllbnRZLXMuY2VudGVyLmNsaWVudFksYT0hMCksdC5ldmVudFR5cGUhPXl0JiZ0LmV2ZW50VHlwZSE9YnR8fChyLmZ1dHVyZUNhbGNFdmVudD10KSxyLmxhc3RDYWxjRXZlbnQmJiFhfHwobC52ZWxvY2l0eT1vdC5nZXRWZWxvY2l0eShuLGksbyksbC5hbmdsZT1vdC5nZXRBbmdsZShlLHQuY2VudGVyKSxsLmRpcmVjdGlvbj1vdC5nZXREaXJlY3Rpb24oZSx0LmNlbnRlciksci5sYXN0Q2FsY0V2ZW50PXIuZnV0dXJlQ2FsY0V2ZW50fHx0LHIuZnV0dXJlQ2FsY0V2ZW50PXQpLHQudmVsb2NpdHlYPWwudmVsb2NpdHkueCx0LnZlbG9jaXR5WT1sLnZlbG9jaXR5LnksdC5pbnRlcmltQW5nbGU9bC5hbmdsZSx0LmludGVyaW1EaXJlY3Rpb249bC5kaXJlY3Rpb259LGV4dGVuZEV2ZW50RGF0YTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmN1cnJlbnQsbj1lLnN0YXJ0RXZlbnQsaT1lLmxhc3RFdmVudHx8bjt0LmV2ZW50VHlwZSE9eXQmJnQuZXZlbnRUeXBlIT1idHx8KG4udG91Y2hlcz1bXSxvdC5lYWNoKHQudG91Y2hlcyxmdW5jdGlvbih0KXtuLnRvdWNoZXMucHVzaCh7Y2xpZW50WDp0LmNsaWVudFgsY2xpZW50WTp0LmNsaWVudFl9KX0pKTt2YXIgbz10LnRpbWVTdGFtcC1uLnRpbWVTdGFtcCxyPXQuY2VudGVyLmNsaWVudFgtbi5jZW50ZXIuY2xpZW50WCxhPXQuY2VudGVyLmNsaWVudFktbi5jZW50ZXIuY2xpZW50WTtyZXR1cm4gdGhpcy5nZXRDYWxjdWxhdGVkRGF0YSh0LGkuY2VudGVyLG8scixhKSxvdC5leHRlbmQodCx7c3RhcnRFdmVudDpuLGRlbHRhVGltZTpvLGRlbHRhWDpyLGRlbHRhWTphLGRpc3RhbmNlOm90LmdldERpc3RhbmNlKG4uY2VudGVyLHQuY2VudGVyKSxhbmdsZTpvdC5nZXRBbmdsZShuLmNlbnRlcix0LmNlbnRlciksZGlyZWN0aW9uOm90LmdldERpcmVjdGlvbihuLmNlbnRlcix0LmNlbnRlciksc2NhbGU6b3QuZ2V0U2NhbGUobi50b3VjaGVzLHQudG91Y2hlcykscm90YXRpb246b3QuZ2V0Um90YXRpb24obi50b3VjaGVzLHQudG91Y2hlcyl9KSx0fSxyZWdpc3RlcjpmdW5jdGlvbih0KXt2YXIgZT10LmRlZmF1bHRzfHx7fTtyZXR1cm4gdm9pZCAwPT09ZVt0Lm5hbWVdJiYoZVt0Lm5hbWVdPSEwKSxvdC5leHRlbmQoc3QuZGVmYXVsdHMsZSwhMCksdC5pbmRleD10LmluZGV4fHwxZTMsdGhpcy5nZXN0dXJlcy5wdXNoKHQpLHRoaXMuZ2VzdHVyZXMuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LmluZGV4PGUuaW5kZXg/LTE6dC5pbmRleD5lLmluZGV4PzE6MH0pLHRoaXMuZ2VzdHVyZXN9fSxzdC5JbnN0YW5jZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1lJiZlLnBhc3NpdmU/e3Bhc3NpdmU6ITB9OnZvaWQgMDshZnVuY3Rpb24odCl7c3QuUkVBRFl8fChpdC5kZXRlcm1pbmVFdmVudFR5cGVzKCksb3QuZWFjaChzdC5nZXN0dXJlcyxmdW5jdGlvbih0KXtydC5yZWdpc3Rlcih0KX0pLGl0Lm9uVG91Y2goc3QuRE9DVU1FTlQsX3QscnQuZGV0ZWN0LHQpLGl0Lm9uVG91Y2goc3QuRE9DVU1FTlQsdnQscnQuZGV0ZWN0LHQpLHN0LlJFQURZPSEwKX0oaSksdGhpcy5lbGVtZW50PXQsdGhpcy5lbmFibGVkPSEwLG90LmVhY2goZSxmdW5jdGlvbih0LG4pe2RlbGV0ZSBlW25dLGVbb3QudG9DYW1lbENhc2UobildPXR9KSx0aGlzLm9wdGlvbnM9b3QuZXh0ZW5kKG90LmV4dGVuZCh7fSxzdC5kZWZhdWx0cyksZXx8e30pLHRoaXMub3B0aW9ucy5saXN0ZW5lck9wdGlvbnM9aSx0aGlzLm9wdGlvbnMuYmVoYXZpb3ImJm90LnRvZ2dsZUJlaGF2aW9yKHRoaXMuZWxlbWVudCx0aGlzLm9wdGlvbnMuYmVoYXZpb3IsITApLHRoaXMuZXZlbnRTdGFydEhhbmRsZXI9aXQub25Ub3VjaCh0LG10LGZ1bmN0aW9uKHQpe24uZW5hYmxlZCYmdC5ldmVudFR5cGU9PW10P3J0LnN0YXJ0RGV0ZWN0KG4sdCk6dC5ldmVudFR5cGU9PXl0JiZydC5kZXRlY3QodCl9LGkpLHRoaXMuZXZlbnRIYW5kbGVycz1bXX0sc3QuSW5zdGFuY2UucHJvdG90eXBlPXtvbjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcztyZXR1cm4gaXQub24oaS5lbGVtZW50LHQsZSxRLmV4dGVuZCh7fSxpLm9wdGlvbnMubGlzdGVuZXJPcHRpb25zLG4pLGZ1bmN0aW9uKHQpe2kuZXZlbnRIYW5kbGVycy5wdXNoKHtnZXN0dXJlOnQsaGFuZGxlcjplfSl9KSxpfSxvZmY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXM7cmV0dXJuIGl0Lm9mZihpLmVsZW1lbnQsdCxlLFEuZXh0ZW5kKHt9LGkub3B0aW9ucy5saXN0ZW5lck9wdGlvbnMsbiksZnVuY3Rpb24odCl7dmFyIG49b3QuaW5BcnJheShpLmV2ZW50SGFuZGxlcnMse2dlc3R1cmU6dCxoYW5kbGVyOmV9LCEwKTtuPj0wJiZpLmV2ZW50SGFuZGxlcnMuc3BsaWNlKG4sMSl9KSxpfSx0cmlnZ2VyOmZ1bmN0aW9uKHQsZSl7ZXx8KGU9e30pO3ZhciBuPXN0LkRPQ1VNRU5ULmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7bi5pbml0RXZlbnQodCwhMCwhMCksbi5nZXN0dXJlPWU7dmFyIGk9dGhpcy5lbGVtZW50O3JldHVybiBvdC5oYXNQYXJlbnQoZS50YXJnZXQsaSkmJihpPWUudGFyZ2V0KSxpLmRpc3BhdGNoRXZlbnQobiksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuYWJsZWQ9dCx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIHQsZTtmb3Iob3QudG9nZ2xlQmVoYXZpb3IodGhpcy5lbGVtZW50LHRoaXMub3B0aW9ucy5iZWhhdmlvciwhMSksdD0tMTtlPXRoaXMuZXZlbnRIYW5kbGVyc1srK3RdOylvdC5vZmYodGhpcy5lbGVtZW50LGUuZ2VzdHVyZSxlLmhhbmRsZXIpO3JldHVybiB0aGlzLmV2ZW50SGFuZGxlcnM9W10saXQub2ZmKHRoaXMuZWxlbWVudCxsdFttdF0sdGhpcy5ldmVudFN0YXJ0SGFuZGxlciksbnVsbH19LGZ1bmN0aW9uKHQpe3ZhciBlPSExO3N0Lmdlc3R1cmVzLkRyYWc9e25hbWU6dCxpbmRleDo1MCxoYW5kbGVyOmZ1bmN0aW9uKG4saSl7dmFyIG89cnQuY3VycmVudDtpZighKGkub3B0aW9ucy5kcmFnTWF4VG91Y2hlcz4wJiZuLnRvdWNoZXMubGVuZ3RoPmkub3B0aW9ucy5kcmFnTWF4VG91Y2hlcykpc3dpdGNoKG4uZXZlbnRUeXBlKXtjYXNlIG10OmU9ITE7YnJlYWs7Y2FzZSBfdDppZihuLmRpc3RhbmNlPGkub3B0aW9ucy5kcmFnTWluRGlzdGFuY2UmJm8ubmFtZSE9dClyZXR1cm47dmFyIHI9by5zdGFydEV2ZW50LmNlbnRlcjtpZihvLm5hbWUhPXQmJihvLm5hbWU9dCxpLm9wdGlvbnMuZHJhZ0Rpc3RhbmNlQ29ycmVjdGlvbiYmbi5kaXN0YW5jZT4wKSl7dmFyIGE9TWF0aC5hYnMoaS5vcHRpb25zLmRyYWdNaW5EaXN0YW5jZS9uLmRpc3RhbmNlKTtyLnBhZ2VYKz1uLmRlbHRhWCphLHIucGFnZVkrPW4uZGVsdGFZKmEsci5jbGllbnRYKz1uLmRlbHRhWCphLHIuY2xpZW50WSs9bi5kZWx0YVkqYSxuPXJ0LmV4dGVuZEV2ZW50RGF0YShuKX0oby5sYXN0RXZlbnQuZHJhZ0xvY2tUb0F4aXN8fGkub3B0aW9ucy5kcmFnTG9ja1RvQXhpcyYmaS5vcHRpb25zLmRyYWdMb2NrTWluRGlzdGFuY2U8PW4uZGlzdGFuY2UpJiYobi5kcmFnTG9ja1RvQXhpcz0hMCk7dmFyIHM9by5sYXN0RXZlbnQuZGlyZWN0aW9uO24uZHJhZ0xvY2tUb0F4aXMmJnMhPT1uLmRpcmVjdGlvbiYmKG90LmlzVmVydGljYWwocyk/bi5kaXJlY3Rpb249bi5kZWx0YVk8MD9odDp1dDpuLmRpcmVjdGlvbj1uLmRlbHRhWDwwP2N0OmR0KSxlfHwoaS50cmlnZ2VyKHQrXCJzdGFydFwiLG4pLGU9ITApLGkudHJpZ2dlcih0LG4pLGkudHJpZ2dlcih0K24uZGlyZWN0aW9uLG4pO3ZhciBsPW90LmlzVmVydGljYWwobi5kaXJlY3Rpb24pOyhpLm9wdGlvbnMuZHJhZ0Jsb2NrVmVydGljYWwmJmx8fGkub3B0aW9ucy5kcmFnQmxvY2tIb3Jpem9udGFsJiYhbCkmJm4ucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGJ0OmUmJm4uY2hhbmdlZExlbmd0aDw9aS5vcHRpb25zLmRyYWdNYXhUb3VjaGVzJiYoaS50cmlnZ2VyKHQrXCJlbmRcIixuKSxlPSExKTticmVhaztjYXNlIHZ0OmU9ITF9fSxkZWZhdWx0czp7ZHJhZ01pbkRpc3RhbmNlOjEwLGRyYWdEaXN0YW5jZUNvcnJlY3Rpb246ITAsZHJhZ01heFRvdWNoZXM6MSxkcmFnQmxvY2tIb3Jpem9udGFsOiExLGRyYWdCbG9ja1ZlcnRpY2FsOiExLGRyYWdMb2NrVG9BeGlzOiExLGRyYWdMb2NrTWluRGlzdGFuY2U6MjV9fX0oXCJkcmFnXCIpLHN0Lmdlc3R1cmVzLkdlc3R1cmU9e25hbWU6XCJnZXN0dXJlXCIsaW5kZXg6MTMzNyxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7ZS50cmlnZ2VyKHRoaXMubmFtZSx0KX19LGZ1bmN0aW9uKHQpe3ZhciBlO3N0Lmdlc3R1cmVzLkhvbGQ9e25hbWU6dCxpbmRleDoxMCxkZWZhdWx0czp7aG9sZFRpbWVvdXQ6NTAwLGhvbGRUaHJlc2hvbGQ6Mn0saGFuZGxlcjpmdW5jdGlvbihuLGkpe3ZhciBvPWkub3B0aW9ucyxyPXJ0LmN1cnJlbnQ7c3dpdGNoKG4uZXZlbnRUeXBlKXtjYXNlIG10OmNsZWFyVGltZW91dChlKSxyLm5hbWU9dCxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyJiZyLm5hbWU9PXQmJmkudHJpZ2dlcih0LG4pfSxvLmhvbGRUaW1lb3V0KTticmVhaztjYXNlIF90Om4uZGlzdGFuY2U+by5ob2xkVGhyZXNob2xkJiZjbGVhclRpbWVvdXQoZSk7YnJlYWs7Y2FzZSBidDpjbGVhclRpbWVvdXQoZSl9fX19KFwiaG9sZFwiKSxzdC5nZXN0dXJlcy5SZWxlYXNlPXtuYW1lOlwicmVsZWFzZVwiLGluZGV4OjEvMCxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7dC5ldmVudFR5cGU9PWJ0JiZlLnRyaWdnZXIodGhpcy5uYW1lLHQpfX0sc3QuZ2VzdHVyZXMuU3dpcGU9e25hbWU6XCJzd2lwZVwiLGluZGV4OjQwLGRlZmF1bHRzOntzd2lwZU1pblRvdWNoZXM6MSxzd2lwZU1heFRvdWNoZXM6MSxzd2lwZVZlbG9jaXR5WDouNixzd2lwZVZlbG9jaXR5WTouNn0saGFuZGxlcjpmdW5jdGlvbih0LGUpe2lmKHQuZXZlbnRUeXBlPT1idCl7dmFyIG49dC50b3VjaGVzLmxlbmd0aCxpPWUub3B0aW9ucztpZihuPGkuc3dpcGVNaW5Ub3VjaGVzfHxuPmkuc3dpcGVNYXhUb3VjaGVzKXJldHVybjsodC52ZWxvY2l0eVg+aS5zd2lwZVZlbG9jaXR5WHx8dC52ZWxvY2l0eVk+aS5zd2lwZVZlbG9jaXR5WSkmJihlLnRyaWdnZXIodGhpcy5uYW1lLHQpLGUudHJpZ2dlcih0aGlzLm5hbWUrdC5kaXJlY3Rpb24sdCkpfX19LGZ1bmN0aW9uKHQpe3ZhciBlPSExO3N0Lmdlc3R1cmVzLlRhcD17bmFtZTp0LGluZGV4OjEwMCxoYW5kbGVyOmZ1bmN0aW9uKG4saSl7dmFyIG8scixhPWkub3B0aW9ucyxzPXJ0LmN1cnJlbnQsbD1ydC5wcmV2aW91cztzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6ZT0hMTticmVhaztjYXNlIF90OmU9ZXx8bi5kaXN0YW5jZT5hLnRhcE1heERpc3RhbmNlO2JyZWFrO2Nhc2UgdnQ6IW90LmluU3RyKG4uc3JjRXZlbnQudHlwZSxcImNhbmNlbFwiKSYmbi5kZWx0YVRpbWU8YS50YXBNYXhUaW1lJiYhZSYmKG89bCYmbC5sYXN0RXZlbnQmJm4udGltZVN0YW1wLWwubGFzdEV2ZW50LnRpbWVTdGFtcCxyPSExLGwmJmwubmFtZT09dCYmbyYmbzxhLmRvdWJsZVRhcEludGVydmFsJiZuLmRpc3RhbmNlPGEuZG91YmxlVGFwRGlzdGFuY2UmJihpLnRyaWdnZXIoXCJkb3VibGV0YXBcIixuKSxyPSEwKSxyJiYhYS50YXBBbHdheXN8fChzLm5hbWU9dCxpLnRyaWdnZXIocy5uYW1lLG4pKSl9fSxkZWZhdWx0czp7dGFwTWF4VGltZToyNTAsdGFwTWF4RGlzdGFuY2U6MTAsdGFwQWx3YXlzOiEwLGRvdWJsZVRhcERpc3RhbmNlOjIwLGRvdWJsZVRhcEludGVydmFsOjMwMH19fShcInRhcFwiKSxzdC5nZXN0dXJlcy5Ub3VjaD17bmFtZTpcInRvdWNoXCIsaW5kZXg6LTEvMCxkZWZhdWx0czp7cHJldmVudERlZmF1bHQ6ITEscHJldmVudE1vdXNlOiExfSxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7ZS5vcHRpb25zLnByZXZlbnRNb3VzZSYmdC5wb2ludGVyVHlwZT09ZnQ/dC5zdG9wRGV0ZWN0KCk6KGUub3B0aW9ucy5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLHQuZXZlbnRUeXBlPT15dCYmZS50cmlnZ2VyKFwidG91Y2hcIix0KSl9fSxmdW5jdGlvbih0KXt2YXIgZT0hMTtzdC5nZXN0dXJlcy5UcmFuc2Zvcm09e25hbWU6dCxpbmRleDo0NSxkZWZhdWx0czp7dHJhbnNmb3JtTWluU2NhbGU6LjAxLHRyYW5zZm9ybU1pblJvdGF0aW9uOjF9LGhhbmRsZXI6ZnVuY3Rpb24obixpKXtzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6ZT0hMTticmVhaztjYXNlIF90OmlmKG4udG91Y2hlcy5sZW5ndGg8MilyZXR1cm47dmFyIG89TWF0aC5hYnMoMS1uLnNjYWxlKSxyPU1hdGguYWJzKG4ucm90YXRpb24pO2lmKG88aS5vcHRpb25zLnRyYW5zZm9ybU1pblNjYWxlJiZyPGkub3B0aW9ucy50cmFuc2Zvcm1NaW5Sb3RhdGlvbilyZXR1cm47cnQuY3VycmVudC5uYW1lPXQsZXx8KGkudHJpZ2dlcih0K1wic3RhcnRcIixuKSxlPSEwKSxpLnRyaWdnZXIodCxuKSxyPmkub3B0aW9ucy50cmFuc2Zvcm1NaW5Sb3RhdGlvbiYmaS50cmlnZ2VyKFwicm90YXRlXCIsbiksbz5pLm9wdGlvbnMudHJhbnNmb3JtTWluU2NhbGUmJihpLnRyaWdnZXIoXCJwaW5jaFwiLG4pLGkudHJpZ2dlcihcInBpbmNoXCIrKG4uc2NhbGU8MT9cImluXCI6XCJvdXRcIiksbikpO2JyZWFrO2Nhc2UgYnQ6ZSYmbi5jaGFuZ2VkTGVuZ3RoPDImJihpLnRyaWdnZXIodCtcImVuZFwiLG4pLGU9ITEpfX19fShcInRyYW5zZm9ybVwiKTt2YXIga3Q9dm9pZCAwLHd0PXZvaWQgMCxFdD1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpLHRoaXMucXVldWU9W119cmV0dXJuIGcodCxbe2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnF1ZXVlLnB1c2godCksMT09PXRoaXMucXVldWUubGVuZ3RoJiZzZXRJbW1lZGlhdGUodGhpcy5xdWV1ZVswXSksZS50aGVuKGZ1bmN0aW9uKCl7bi5xdWV1ZS5zaGlmdCgpLG4ucXVldWUubGVuZ3RoPjAmJnNldFRpbWVvdXQobi5xdWV1ZVswXSwxZTMvMzApfSl9fV0pLHR9KCkpLEN0PWZ1bmN0aW9uKHQsZSl7W1wiaWRcIixcImNsYXNzXCIsXCJhbmltYXRpb25cIl0uZm9yRWFjaChmdW5jdGlvbihuKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eShuKSYmdC5zZXRBdHRyaWJ1dGUobixlW25dKX0pLGUubW9kaWZpZXImJlEuYWRkTW9kaWZpZXIodCxlLm1vZGlmaWVyKX0sQXQ9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBlPV8oe30sZSksXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5tZXNzYWdlPXQ6ZT10LGUmJihlLm1lc3NhZ2V8fGUubWVzc2FnZUhUTUwpfHxRLnRocm93KFwiTm90aWZpY2F0aW9ucyBtdXN0IGNvbnRhaW4gYSBtZXNzYWdlXCIpLChlLmhhc093blByb3BlcnR5KFwiYnV0dG9uTGFiZWxzXCIpfHxlLmhhc093blByb3BlcnR5KFwiYnV0dG9uTGFiZWxcIikpJiYoZS5idXR0b25MYWJlbHM9ZS5idXR0b25MYWJlbHN8fGUuYnV0dG9uTGFiZWwsQXJyYXkuaXNBcnJheShlLmJ1dHRvbkxhYmVscyl8fChlLmJ1dHRvbkxhYmVscz1bZS5idXR0b25MYWJlbHN8fFwiXCJdKSksUS5leHRlbmQoe2NvbXBpbGU6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGNhbGxiYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxhbmltYXRpb246XCJkZWZhdWx0XCIsY2FuY2VsYWJsZTohMSxwcmltYXJ5QnV0dG9uSW5kZXg6KGUuYnV0dG9uTGFiZWxzfHxuLmJ1dHRvbkxhYmVsc3x8W10pLmxlbmd0aC0xfSxuLGUpfSxTdD17fTtTdC5fY3JlYXRlQWxlcnREaWFsb2c9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLGk9MDtpPHQ7aSsrKWVbaV09YXJndW1lbnRzW2ldO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXt2YXIgaT1BdC5hcHBseSh2b2lkIDAsZSk7US5jaGVja01pc3NpbmdJbXBvcnQoXCJBbGVydERpYWxvZ1wiLFwiQWxlcnREaWFsb2dCdXR0b25cIik7dmFyIG89XCJcIjtpLmlzUHJvbXB0JiYobz0nXFxuICAgICAgPGlucHV0XFxuICAgICAgICBjbGFzcz1cInRleHQtaW5wdXQgdGV4dC1pbnB1dC0tdW5kZXJiYXJcIlxcbiAgICAgICAgdHlwZT1cIicrKGkuaW5wdXRUeXBlfHxcInRleHRcIikrJ1wiXFxuICAgICAgICBwbGFjZWhvbGRlcj1cIicrKGkucGxhY2Vob2xkZXJ8fFwiXCIpKydcIlxcbiAgICAgICAgdmFsdWU9XCInKyhpLmRlZmF1bHRWYWx1ZXx8XCJcIikrJ1wiXFxuICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlOyBtYXJnaW4tdG9wOiAxMHB4O1wiXFxuICAgICAgLz5cXG4gICAgJyk7dmFyIHI9XCJcIjtpLmJ1dHRvbkxhYmVscy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7cis9J1xcbiAgICAgIDxvbnMtYWxlcnQtZGlhbG9nLWJ1dHRvblxcbiAgICAgICAgY2xhc3M9XCJcXG4gICAgICAgICAgJysoZT09PWkucHJpbWFyeUJ1dHRvbkluZGV4P1wiIGFsZXJ0LWRpYWxvZy1idXR0b24tLXByaW1hbFwiOlwiXCIpK1wiXFxuICAgICAgICAgIFwiKyhpLmJ1dHRvbkxhYmVscy5sZW5ndGg8PTI/XCIgYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcm93Zm9vdGVyXCI6XCJcIikrJ1xcbiAgICAgICAgXCJcXG4gICAgICAgIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlO1wiPlxcbiAgICAgICAgJyt0K1wiXFxuICAgICAgPC9vbnMtYWxlcnQtZGlhbG9nLWJ1dHRvbj5cXG4gICAgXCJ9KTt2YXIgYT17fSxzPWZ1bmN0aW9uKCl7YS5kaWFsb2cub25EaWFsb2dDYW5jZWwmJmEuZGlhbG9nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaWFsb2ctY2FuY2VsXCIsYS5kaWFsb2cub25EaWFsb2dDYW5jZWwpLE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGRlbGV0ZSBhW3RdfSksYT1udWxsLGkuZGVzdHJveSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZpLmRlc3Ryb3koKX07YS5kaWFsb2c9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9ucy1hbGVydC1kaWFsb2dcIiksYS5kaWFsb2cuaW5uZXJIVE1MPSdcXG4gICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZy1tYXNrXCJcXG4gICAgICBzdHlsZT1cIlxcbiAgICAgICAgJysoaS5tYXNrQ29sb3I/XCJiYWNrZ3JvdW5kLWNvbG9yOiBcIitpLm1hc2tDb2xvcjpcIlwiKSsnXFxuICAgICAgXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJhbGVydC1kaWFsb2dcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtZGlhbG9nLWNvbnRhaW5lclwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZy10aXRsZVwiPlxcbiAgICAgICAgICAnKyhpLnRpdGxlfHxcIlwiKSsnXFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydC1kaWFsb2ctY29udGVudFwiPlxcbiAgICAgICAgICAnKyhpLm1lc3NhZ2V8fGkubWVzc2FnZUhUTUwpK1wiXFxuICAgICAgICAgIFwiK28rJ1xcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVwiXFxuICAgICAgICAgIGFsZXJ0LWRpYWxvZy1mb290ZXJcXG4gICAgICAgICAgJysoaS5idXR0b25MYWJlbHMubGVuZ3RoPD0yP1wiIGFsZXJ0LWRpYWxvZy1mb290ZXItLXJvd2Zvb3RlclwiOlwiXCIpKydcXG4gICAgICAgIFwiPlxcbiAgICAgICAgICAnK3IrXCJcXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIFwiLG4oYS5kaWFsb2cpLEN0KGEuZGlhbG9nLGkpLGkuaXNQcm9tcHQmJmkuc3VibWl0T25FbnRlciYmKGEuaW5wdXQ9YS5kaWFsb2cucXVlcnlTZWxlY3RvcihcIi50ZXh0LWlucHV0XCIpLGEuaW5wdXQub25rZXlwcmVzcz1mdW5jdGlvbihlKXsxMz09PWUua2V5Q29kZSYmYS5kaWFsb2cuaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtpZihhKXt2YXIgZT1hLmlucHV0LnZhbHVlO3MoKSxpLmNhbGxiYWNrKGUpLHQoZSl9fSl9KSxhLmZvb3Rlcj1hLmRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiLmFsZXJ0LWRpYWxvZy1mb290ZXJcIiksUS5hcnJheUZyb20oYS5kaWFsb2cucXVlcnlTZWxlY3RvckFsbChcIi5hbGVydC1kaWFsb2ctYnV0dG9uXCIpKS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7ZS5vbmNsaWNrPWZ1bmN0aW9uKCl7YS5kaWFsb2cuaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtpZihhKXt2YXIgZT1uO2kuaXNQcm9tcHQmJihlPW49PT1pLnByaW1hcnlCdXR0b25JbmRleD9hLmlucHV0LnZhbHVlOm51bGwpLGEuZGlhbG9nLnJlbW92ZSgpLHMoKSxpLmNhbGxiYWNrKGUpLHQoZSl9fSl9LGEuZm9vdGVyLmFwcGVuZENoaWxkKGUpfSksaS5jYW5jZWxhYmxlJiYoYS5kaWFsb2cuY2FuY2VsYWJsZT0hMCxhLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbD1mdW5jdGlvbigpe3NldEltbWVkaWF0ZShmdW5jdGlvbigpe2EuZGlhbG9nLnJlbW92ZSgpLHMoKX0pO3ZhciBlPWkuaXNQcm9tcHQ/bnVsbDotMTtpLmNhbGxiYWNrKGUpLHQoZSl9LGEuZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoXCJkaWFsb2ctY2FuY2VsXCIsYS5kaWFsb2cub25EaWFsb2dDYW5jZWwsITEpKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEuZGlhbG9nKSxpLmNvbXBpbGUoYS5kaWFsb2cpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe2EuZGlhbG9nLnNob3coKS50aGVuKGZ1bmN0aW9uKCl7aWYoYS5pbnB1dCYmaS5pc1Byb21wdCYmaS5hdXRvZm9jdXMpe3ZhciB0PWEuaW5wdXQudmFsdWUubGVuZ3RoO2EuaW5wdXQuZm9jdXMoKSxhLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKHQsdCl9fSl9KX0pfSxTdC5hbGVydD1mdW5jdGlvbih0LGUpe3JldHVybiBTdC5fY3JlYXRlQWxlcnREaWFsb2codCxlLHtidXR0b25MYWJlbHM6W1wiT0tcIl0sdGl0bGU6XCJBbGVydFwifSl9LFN0LmNvbmZpcm09ZnVuY3Rpb24odCxlKXtyZXR1cm4gU3QuX2NyZWF0ZUFsZXJ0RGlhbG9nKHQsZSx7YnV0dG9uTGFiZWxzOltcIkNhbmNlbFwiLFwiT0tcIl0sdGl0bGU6XCJDb25maXJtXCJ9KX0sU3QucHJvbXB0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFN0Ll9jcmVhdGVBbGVydERpYWxvZyh0LGUse2J1dHRvbkxhYmVsczpbXCJPS1wiXSx0aXRsZTpcIkFsZXJ0XCIsaXNQcm9tcHQ6ITAsYXV0b2ZvY3VzOiEwLHN1Ym1pdE9uRW50ZXI6ITB9KX0sU3QudG9hc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgUHJvbWlzZShmdW5jdGlvbihpKXtRLmNoZWNrTWlzc2luZ0ltcG9ydChcIlRvYXN0XCIpLGU9QXQodCxlLHt0aW1lb3V0OjAsZm9yY2U6ITF9KTt2YXIgbz1RLmNyZWF0ZUVsZW1lbnQoXCJcXG4gICAgICA8b25zLXRvYXN0PlxcbiAgICAgICAgXCIrZS5tZXNzYWdlK1wiXFxuICAgICAgICBcIisoZS5idXR0b25MYWJlbHM/XCI8YnV0dG9uPlwiK2UuYnV0dG9uTGFiZWxzWzBdK1wiPC9idXR0b24+XCI6XCJcIikrXCJcXG4gICAgICA8L29ucy10b2FzdD5cXG4gICAgXCIpO0N0KG8sZSk7dmFyIHI9ZnVuY3Rpb24odCl7byYmby5oaWRlKCkudGhlbihmdW5jdGlvbigpe28mJihvLnJlbW92ZSgpLG89bnVsbCxlLmNhbGxiYWNrKHQpLGkodCkpfSl9O2UuYnV0dG9uTGFiZWxzJiYoUS5maW5kQ2hpbGQoby5fdG9hc3QsXCJidXR0b25cIikub25jbGljaz1mdW5jdGlvbigpe3JldHVybiByKDApfSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvKSxlLmNvbXBpbGUobyk7dmFyIGE9ZnVuY3Rpb24oKXtvLnBhcmVudEVsZW1lbnQmJm8uc2hvdyhlKS50aGVuKGZ1bmN0aW9uKCl7ZS50aW1lb3V0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHIoLTEpfSxlLnRpbWVvdXQpfSl9O3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLmZvcmNlP2EoKTpFdC5hZGQoYSxuKX0pfSk7cmV0dXJuIG59O3ZhciBQdD1mdW5jdGlvbigpe307UHQucHJvdG90eXBlPXtvbjpmdW5jdGlvbih0LGUpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHRoaXMuX2V2ZW50c1t0XT10aGlzLl9ldmVudHNbdF18fFtdLHRoaXMuX2V2ZW50c1t0XS5wdXNoKGUpfSxvbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLm9uKHQsZnVuY3Rpb24gaSgpe3JldHVybiBuLm9mZih0LGkpLGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfSl9LG9mZjpmdW5jdGlvbih0LGUpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHQgaW4gdGhpcy5fZXZlbnRzIT0hMSYmKHRoaXMuX2V2ZW50c1t0XT10aGlzLl9ldmVudHNbdF0uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiEhZSYmZSE9PXR9KSl9LGVtaXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdCBpbiB0aGlzLl9ldmVudHMhPSExKWZvcih2YXIgZT0wO2U8dGhpcy5fZXZlbnRzW3RdLmxlbmd0aDtlKyspdGhpcy5fZXZlbnRzW3RdW2VdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX19LFB0Lm1peGluPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXCJvblwiLFwib25jZVwiLFwib2ZmXCIsXCJlbWl0XCJdLG49MDtuPGUubGVuZ3RoO24rKylcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3QucHJvdG90eXBlW2Vbbl1dPVB0LnByb3RvdHlwZVtlW25dXTp0W2Vbbl1dPVB0LnByb3RvdHlwZVtlW25dXX0sd2luZG93Lk1pY3JvRXZlbnQ9UHQ7dmFyIE90PWZ1bmN0aW9uKCl7dmFyIHQ9e19pc1BvcnRyYWl0OiExLGlzUG9ydHJhaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNQb3J0cmFpdCgpfSxpc0xhbmRzY2FwZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzUG9ydHJhaXQoKX0sX2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLl9vbkRPTUNvbnRlbnRMb2FkZWQuYmluZCh0aGlzKSwhMSksXCJvcmllbnRhdGlvblwiaW4gd2luZG93P3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIix0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlLmJpbmQodGhpcyksITEpOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fb25SZXNpemUuYmluZCh0aGlzKSwhMSksdGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ+d2luZG93LmlubmVyV2lkdGh9LHRoaXN9LF9vbkRPTUNvbnRlbnRMb2FkZWQ6ZnVuY3Rpb24oKXt0aGlzLl9pbnN0YWxsSXNQb3J0cmFpdEltcGxlbWVudGF0aW9uKCksdGhpcy5lbWl0KFwiY2hhbmdlXCIse2lzUG9ydHJhaXQ6dGhpcy5pc1BvcnRyYWl0KCl9KX0sX2luc3RhbGxJc1BvcnRyYWl0SW1wbGVtZW50YXRpb246ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuaW5uZXJXaWR0aDx3aW5kb3cuaW5uZXJIZWlnaHQ7XCJvcmllbnRhdGlvblwiaW4gd2luZG93P3dpbmRvdy5vcmllbnRhdGlvbiUxODA9PTA/dGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiAwPT09TWF0aC5hYnMod2luZG93Lm9yaWVudGF0aW9uJTE4MCk/dDohdH06dGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiA5MD09PU1hdGguYWJzKHdpbmRvdy5vcmllbnRhdGlvbiUxODApP3Q6IXR9OnRoaXMuX2lzUG9ydHJhaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0PndpbmRvdy5pbm5lcldpZHRofX0sX29uT3JpZW50YXRpb25DaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5faXNQb3J0cmFpdCgpLG49MCxpPXNldEludGVydmFsKGZ1bmN0aW9uKCl7bisrO3ZhciBvPXdpbmRvdy5pbm5lcldpZHRoLHI9d2luZG93LmlubmVySGVpZ2h0O2UmJm88PXJ8fCFlJiZvPj1yPyh0LmVtaXQoXCJjaGFuZ2VcIix7aXNQb3J0cmFpdDplfSksY2xlYXJJbnRlcnZhbChpKSk6NTA9PT1uJiYodC5lbWl0KFwiY2hhbmdlXCIse2lzUG9ydHJhaXQ6ZX0pLGNsZWFySW50ZXJ2YWwoaSkpfSwyMCl9LF9vblJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuZW1pdChcImNoYW5nZVwiLHtpc1BvcnRyYWl0OnRoaXMuaXNQb3J0cmFpdCgpfSl9fTtyZXR1cm4gUHQubWl4aW4odCksdH0oKS5faW5pdCgpLHh0PXthZGQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheShlPjE/ZS0xOjApLGk9MTtpPGU7aSsrKW5baS0xXT1hcmd1bWVudHNbaV07cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gUS5hZGRNb2RpZmllcih0LGUpfSl9LHJlbW92ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGU+MT9lLTE6MCksaT0xO2k8ZTtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBRLnJlbW92ZU1vZGlmaWVyKHQsZSl9KX0sY29udGFpbnM6US5oYXNNb2RpZmllcix0b2dnbGU6US50b2dnbGVNb2RpZmllcn0sVHQ9bmV3IFB0O1R0Ll92aXNpYmxlPSExO3ZhciBMdD1mdW5jdGlvbigpe1R0Ll92aXNpYmxlPSEwLFR0LmVtaXQoXCJzaG93XCIpfSxNdD1mdW5jdGlvbigpe1R0Ll92aXNpYmxlPSExLFR0LmVtaXQoXCJoaWRlXCIpfSxEdD1mdW5jdGlvbigpe1Eud2FybihcIm9ucy1rZXlib2FyZDogQ29yZG92YSBLZXlib2FyZCBwbHVnaW4gaXMgbm90IHByZXNlbnQuXCIpfTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixmdW5jdGlvbigpeyhcInVuZGVmaW5lZFwiIT10eXBlb2YgS2V5Ym9hcmQ/KEtleWJvYXJkLm9uc2hvdz1MdCxLZXlib2FyZC5vbmhpZGU9TXQsVHQuZW1pdChcImluaXRcIix7dmlzaWJsZTpLZXlib2FyZC5pc1Zpc2libGV9KSwhMCk6dm9pZCAwIT09Y29yZG92YS5wbHVnaW5zJiZ2b2lkIDAhPT1jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQmJih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5rZXlib2FyZHNob3dcIixMdCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJuYXRpdmUua2V5Ym9hcmRoaWRlXCIsTXQpLFR0LmVtaXQoXCJpbml0XCIse3Zpc2libGU6Y29yZG92YS5wbHVnaW5zLktleWJvYXJkLmlzVmlzaWJsZX0pLCEwKSl8fCgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltvbnMta2V5Ym9hcmQtYWN0aXZlXVwiKXx8ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltvbnMta2V5Ym9hcmQtaW5hY3RpdmVdXCIpKSYmRHQoKSxUdC5vbj1EdCl9KTt2YXIgSXQ9ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0Kyt9fSgpLE50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtwKHRoaXMsdCksdGhpcy5fbG9ja0xpc3Q9W10sdGhpcy5fd2FpdExpc3Q9W10sdGhpcy5fbG9nPWUubG9nfHxmdW5jdGlvbigpe319cmV0dXJuIGcodCxbe2tleTpcImxvY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1mdW5jdGlvbiBlKCl7dC5fdW5sb2NrKGUpfTtyZXR1cm4gZS5pZD1JdCgpLHRoaXMuX2xvY2tMaXN0LnB1c2goZSksdGhpcy5fbG9nKFwibG9jazogXCIrZS5pZCksZX19LHtrZXk6XCJfdW5sb2NrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbG9ja0xpc3QuaW5kZXhPZih0KTtpZigtMT09PWUpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBmdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCBpbiB0aGUgbG9jayBsaXN0LlwiKTt0aGlzLl9sb2NrTGlzdC5zcGxpY2UoZSwxKSx0aGlzLl9sb2coXCJ1bmxvY2s6IFwiK3QuaWQpLHRoaXMuX3RyeVRvRnJlZVdhaXRMaXN0KCl9fSx7a2V5OlwiX3RyeVRvRnJlZVdhaXRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IoOyF0aGlzLmlzTG9ja2VkKCkmJnRoaXMuX3dhaXRMaXN0Lmxlbmd0aD4wOyl0aGlzLl93YWl0TGlzdC5zaGlmdCgpKCl9fSx7a2V5Olwid2FpdFVubG9ja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2FsbGJhY2sgcGFyYW0gbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTt0aGlzLmlzTG9ja2VkKCk/dGhpcy5fd2FpdExpc3QucHVzaCh0KTp0KCl9fSx7a2V5OlwiaXNMb2NrZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NrTGlzdC5sZW5ndGg+MH19XSksdH0oKSxCdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksdGhpcy5fbG9hZGVyPWUgaW5zdGFuY2VvZiBGdW5jdGlvbj9lOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wYWdlLGk9dC5wYXJlbnQ7dC5wYXJhbXMsUC5nZXRQYWdlSFRNTEFzeW5jKG4pLnRoZW4oZnVuY3Rpb24odCl7dmFyIG49US5jcmVhdGVFbGVtZW50KHQpO2kuYXBwZW5kQ2hpbGQobiksZShuKX0pfSx0aGlzLl91bmxvYWRlcj1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bjppfXJldHVybiBnKHQsW3trZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnBhZ2UsaT10LnBhcmVudCxvPXQucGFyYW1zLHI9dm9pZCAwPT09bz97fTpvO3RoaXMuX2xvYWRlcih7cGFnZTpuLHBhcmVudDppLHBhcmFtczpyfSxmdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBFbGVtZW50KSl0aHJvdyBFcnJvcihcInBhZ2VFbGVtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRWxlbWVudC5cIik7ZSh0KX0pfX0se2tleTpcInVubG9hZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEVsZW1lbnQpKXRocm93IEVycm9yKFwicGFnZUVsZW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBFbGVtZW50LlwiKTt0aGlzLl91bmxvYWRlcih0KX19LHtrZXk6XCJpbnRlcm5hbExvYWRlclwiLHNldDpmdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBGdW5jdGlvbikpdGhyb3cgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGdW5jdGlvblwiKTt0aGlzLl9sb2FkZXI9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRlcn19XSksdH0oKSxqdD1uZXcgQnQsSHQ9bmV3IEJ0KGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wYWdlLGk9dC5wYXJlbnQsbz0odC5wYXJhbXMsUS5jcmVhdGVFbGVtZW50KG4udHJpbSgpKSk7aS5hcHBlbmRDaGlsZChvKSxlKG8pfSxpKSxSdD17YW5pbWl0Om50LGRlZmF1bHRQYWdlTG9hZGVyOmp0LGVsZW1lbnRzOmMsR2VzdHVyZURldGVjdG9yOnN0LG1vZGlmaWVyOnh0LG5vdGlmaWNhdGlvbjpTdCxvcmllbnRhdGlvbjpPdCxwYWdlQXR0cmlidXRlRXhwcmVzc2lvbjpTLFBhZ2VMb2FkZXI6QnQscGxhdGZvcm06Qyxzb2Z0d2FyZUtleWJvYXJkOlR0LF9hdXRvU3R5bGU6TixfaW50ZXJuYWw6UCxfcmVhZHlMb2NrOm5ldyBOdCxfdXRpbDpRfTtSdC5wbGF0Zm9ybS5zZWxlY3QoKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gubWF0Y2goL3BsYXRmb3JtPShbXFx3LV0rKS8pfHxbXSlbMV0pLGZ1bmN0aW9uKCl7dmFyIHQ9UnQuX3JlYWR5TG9jay5sb2NrKCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtSdC5pc1dlYlZpZXcoKT93aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsdCwhMSk6dCgpfSwhMSl9KCk7dmFyIEZ0PWZ1bmN0aW9uKHQpe3JldHVybiBRLnRocm93KFwiVGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgXCIrKHQ/XCJhZnRlclwiOlwiYmVmb3JlXCIpK1wiIG9ucy5pc1JlYWR5KCkgaXMgdHJ1ZVwiKX07UnQuaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiFSdC5fcmVhZHlMb2NrLmlzTG9ja2VkKCl9LFJ0LmlzV2ViVmlldz1SdC5wbGF0Zm9ybS5pc1dlYlZpZXcsUnQucmVhZHk9ZnVuY3Rpb24odCl7UnQuaXNSZWFkeSgpP3QoKTpSdC5fcmVhZHlMb2NrLndhaXRVbmxvY2sodCl9LFJ0LnNldERlZmF1bHREZXZpY2VCYWNrQnV0dG9uTGlzdGVuZXI9ZnVuY3Rpb24odCl7UnQuaXNSZWFkeSgpfHxGdCghMCksUnQuX2RlZmF1bHREZXZpY2VCYWNrQnV0dG9uSGFuZGxlci5zZXRMaXN0ZW5lcih0KX0sUnQuZGlzYWJsZURldmljZUJhY2tCdXR0b25IYW5kbGVyPWZ1bmN0aW9uKCl7UnQuaXNSZWFkeSgpfHxGdCghMCksUC5kYmJEaXNwYXRjaGVyLmRpc2FibGUoKX0sUnQuZW5hYmxlRGV2aWNlQmFja0J1dHRvbkhhbmRsZXI9ZnVuY3Rpb24oKXtSdC5pc1JlYWR5KCl8fEZ0KCEwKSxQLmRiYkRpc3BhdGNoZXIuZW5hYmxlKCl9LFJ0LmZpcmVEZXZpY2VCYWNrQnV0dG9uRXZlbnQ9ZnVuY3Rpb24oKXtQLmRiYkRpc3BhdGNoZXIuZmlyZURldmljZUJhY2tCdXR0b25FdmVudCgpfSxSdC5lbmFibGVBdXRvU3RhdHVzQmFyRmlsbD1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKSYmRnQoITEpLFAuY29uZmlnLmF1dG9TdGF0dXNCYXJGaWxsPSEwfSxSdC5kaXNhYmxlQXV0b1N0YXR1c0JhckZpbGw9ZnVuY3Rpb24oKXtSdC5pc1JlYWR5KCkmJkZ0KCExKSxQLmNvbmZpZy5hdXRvU3RhdHVzQmFyRmlsbD0hMX0sUnQubW9ja1N0YXR1c0Jhcj1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKSYmRnQoITEpO3ZhciB0PWZ1bmN0aW9uKCl7aWYoIWRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF18fCFkb2N1bWVudC5ib2R5LmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhcIm9ucy1zdGF0dXMtYmFyLW1vY2tcIikpe3ZhciB0PUMuaXNBbmRyb2lkKCksZT1mdW5jdGlvbih0KXtyZXR1cm4nPGkgY2xhc3M9XCInK3Quc3BsaXQoXCItXCIpWzBdK1wiIFwiK3QrJ1wiPjwvaT4nfSxuPXQ/ZShcInptZGktdHdpdHRlclwiKStcIiBcIitlKFwiem1kaS1nb29nbGUtcGxheVwiKTpcIk5vIFNJTSBcIitlKFwiZmEtd2lmaVwiKSxpPXQ/XCJcIjpcIjEyOjI4IFBNXCIsbz10P2UoXCJ6bWRpLW5ldHdvcmtcIikrXCIgXCIrZShcInptZGktd2lmaVwiKStcIiBcIitlKFwiem1kaS1iYXR0ZXJ5XCIpK1wiIDEyOjI4IFBNXCI6XCI4MCUgXCIrZShcImZhLWJhdHRlcnktdGhyZWUtcXVhcnRlcnNcIik7ZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoUS5jcmVhdGVFbGVtZW50KCc8ZGl2IGNsYXNzPVwib25zLXN0YXR1cy1iYXItbW9jayAnKyh0P1wiYW5kcm9pZFwiOlwiaW9zXCIpKydcIj48ZGl2PicrbitcIjwvZGl2PjxkaXY+XCIraStcIjwvZGl2PjxkaXY+XCIrbytcIjwvZGl2PjwvZGl2PlwiKSxkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpfX07ZG9jdW1lbnQuYm9keT90KCk6UC53YWl0RE9NQ29udGVudExvYWRlZCh0KX0sUnQuZGlzYWJsZUFuaW1hdGlvbnM9ZnVuY3Rpb24oKXtQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ9ITB9LFJ0LmVuYWJsZUFuaW1hdGlvbnM9ZnVuY3Rpb24oKXtQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ9ITF9LFJ0Ll9kaXNhYmxlV2FybmluZ3M9ZnVuY3Rpb24oKXtQLmNvbmZpZy53YXJuaW5nc0Rpc2FibGVkPSEwfSxSdC5fZW5hYmxlV2FybmluZ3M9ZnVuY3Rpb24oKXtQLmNvbmZpZy53YXJuaW5nc0Rpc2FibGVkPSExfSxSdC5kaXNhYmxlQXV0b1N0eWxpbmc9Ti5kaXNhYmxlLFJ0LmVuYWJsZUF1dG9TdHlsaW5nPU4uZW5hYmxlLFJ0LmRpc2FibGVJY29uQXV0b1ByZWZpeD1mdW5jdGlvbigpe1EuY2hlY2tNaXNzaW5nSW1wb3J0KFwiSWNvblwiKSxjLkljb24uc2V0QXV0b1ByZWZpeCghMSl9LFJ0LmZvcmNlVUlXZWJWaWV3U2Nyb2xsRml4PWZ1bmN0aW9uKCl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTtQLmNvbmZpZy5mb3JjZVVJV2ViVmlld1Njcm9sbEZpeD10fSxSdC5mb3JjZVBsYXRmb3JtU3R5bGluZz1mdW5jdGlvbih0KXtSdC5lbmFibGVBdXRvU3R5bGluZygpLFJ0LnBsYXRmb3JtLnNlbGVjdCh0fHxcImlvc1wiKSxSdC5fdXRpbC5hcnJheUZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipcIikpLmZvckVhY2goZnVuY3Rpb24odCl7XCJvbnMtaWZcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpP3QuX3BsYXRmb3JtVXBkYXRlKCk6dC50YWdOYW1lLm1hdGNoKC9eb25zLS9pKSYmKE4ucHJlcGFyZSh0LCEwKSxcIm9ucy10YWJiYXJcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZ0Ll91cGRhdGVQb3NpdGlvbigpKX0pfSxSdC5wcmVsb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdO3JldHVybiBQcm9taXNlLmFsbCgodCBpbnN0YW5jZW9mIEFycmF5P3Q6W3RdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQmJlEudGhyb3coXCJFeHBlY3RlZCBzdHJpbmcgYXJndW1lbnRzIGJ1dCBnb3QgXCIrKHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpmKHQpKSksUC5nZXRUZW1wbGF0ZUhUTUxBc3luYyh0KX0pKX0sUnQuY3JlYXRlRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1mdW5jdGlvbih0KXt2YXIgbj1SdC5fdXRpbC5jcmVhdGVFbGVtZW50KHQpO2lmKG4ucmVtb3ZlKCksZS5hcHBlbmQpeyhlLmFwcGVuZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50P2UuYXBwZW5kOmRvY3VtZW50LmJvZHkpLmluc2VydEJlZm9yZShuLGUuaW5zZXJ0QmVmb3JlfHxudWxsKSxlLmxpbmsgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5saW5rKG4pfXJldHVybiBufTtyZXR1cm5cIjxcIj09PSh0PXQudHJpbSgpKS5jaGFyQXQoMCk/bih0KTpQLmdldFBhZ2VIVE1MQXN5bmModCkudGhlbihuKX0sUnQuY3JlYXRlUG9wb3Zlcj1SdC5jcmVhdGVEaWFsb2c9UnQuY3JlYXRlQWxlcnREaWFsb2c9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBSdC5jcmVhdGVFbGVtZW50KHQsXyh7YXBwZW5kOiEwfSxlKSl9LFJ0Lm9wZW5BY3Rpb25TaGVldD1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7US5jaGVja01pc3NpbmdJbXBvcnQoXCJBY3Rpb25TaGVldFwiKSxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJGdW5jdGlvblwiO3JldHVybiBRLnRocm93KCdcIm9wdGlvbnMuJyt0KydcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mICcrZSl9LG49ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGk9ZnVuY3Rpb24oZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOkZ1bmN0aW9uO3JldHVybiB0W2VdaW5zdGFuY2VvZiBufSxvPVwiYnV0dG9uc1wiLHI9XCJjYWxsYmFja1wiLGE9XCJjb21waWxlXCIscz1cImRlc3Ryb3lcIjsoIW4obyl8fCFpKG8sQXJyYXkpKSYmZShvLFwiQXJyYXlcIiksbihyKSYmIWkocikmJmUociksbihhKSYmIWkoYSkmJmUoYSksbihzKSYmIWkocykmJmUocyl9KHQpO3ZhciBuPVEuY3JlYXRlRWxlbWVudChcIlxcbiAgICA8b25zLWFjdGlvbi1zaGVldFxcbiAgICAgIFwiKyh0LnRpdGxlPyd0aXRsZT1cIicrdC50aXRsZSsnXCInOlwiXCIpK1wiXFxuICAgICAgXCIrKHQuY2FuY2VsYWJsZT9cImNhbmNlbGFibGVcIjpcIlwiKStcIlxcbiAgICAgIFwiKyh0Lm1vZGlmaWVyPydtb2RpZmllcj1cIicrdC5tb2RpZmllcisnXCInOlwiXCIpK1wiXFxuICAgICAgXCIrKHQubWFza0NvbG9yPydtYXNrLWNvbG9yPVwiJyt0Lm1hc2tDb2xvcisnXCInOlwiXCIpK1wiXFxuICAgICAgXCIrKHQuaWQ/J2lkPVwiJyt0LmlkKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5jbGFzcz8nY2xhc3M9XCInK3QuY2xhc3MrJ1wiJzpcIlwiKSsnXFxuICAgID5cXG4gICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLXNoZWV0XCI+PC9kaXY+XFxuICAgIDwvb25zLWFjdGlvbi1zaGVldD5cXG4gICcpLGk9ZnVuY3Rpb24gaShvKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06LTE7biYmKHQuZGVzdHJveSYmdC5kZXN0cm95KG4pLG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixpLCExKSxuLnJlbW92ZSgpLG49bnVsbCx0LmNhbGxiYWNrJiZ0LmNhbGxiYWNrKHIpLGUocikpfTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJkaWFsb2ctY2FuY2VsXCIsaSwhMSk7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3QuYnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUscil7dmFyIGE9XCJzdHJpbmdcIj09dHlwZW9mIGU/e2xhYmVsOmV9Ol8oe30sZSk7dC5kZXN0cnVjdGl2ZT09PXImJihhLm1vZGlmaWVyPShhLm1vZGlmaWVyfHxcIlwiKStcIiBkZXN0cnVjdGl2ZVwiKTt2YXIgcz1RLmNyZWF0ZUVsZW1lbnQoXCJcXG4gICAgICA8b25zLWFjdGlvbi1zaGVldC1idXR0b25cXG4gICAgICAgIFwiKyhhLmljb24/J2ljb249XCInK2EuaWNvbisnXCInOlwiXCIpK1wiXFxuICAgICAgICBcIisoYS5tb2RpZmllcj8nbW9kaWZpZXI9XCInK2EubW9kaWZpZXIrJ1wiJzpcIlwiKStcIlxcbiAgICAgID5cXG4gICAgICAgIFwiK2EubGFiZWwrXCJcXG4gICAgICA8L29ucy1hY3Rpb24tc2hlZXQtYnV0dG9uPlxcbiAgICBcIik7cy5vbmNsaWNrPWZ1bmN0aW9uKHQpe3JldHVybiBuLmhpZGUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkodCxyKX0pfSxvLmFwcGVuZENoaWxkKHMpfSksUS5maW5kQ2hpbGQobixcIi5hY3Rpb24tc2hlZXRcIikuYXBwZW5kQ2hpbGQobyksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKSx0LmNvbXBpbGUmJnQuY29tcGlsZShlbC5kaWFsb2cpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBuLnNob3coe2FuaW1hdGlvbjp0LmFuaW1hdGlvbixhbmltYXRpb25PcHRpb25zOnQuYW5pbWF0aW9uT3B0aW9uc30pfSl9KX0sUnQucmVzb2x2ZUxvYWRpbmdQbGFjZWhvbGRlcj1mdW5jdGlvbih0LGUpe3ZhciBuPVJ0Ll91dGlsLmFycmF5RnJvbSh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltvbnMtbG9hZGluZy1wbGFjZWhvbGRlcl1cIikpOzA9PT1uLmxlbmd0aCYmUS50aHJvdyhcIk5vIG9ucy1sb2FkaW5nLXBsYWNlaG9sZGVyIGV4aXN0c1wiKSxuLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hdC5nZXRBdHRyaWJ1dGUoXCJwYWdlXCIpfSkuZm9yRWFjaChmdW5jdGlvbihuKXtuLnNldEF0dHJpYnV0ZShcIm9ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXCIsdCksUnQuX3Jlc29sdmVMb2FkaW5nUGxhY2Vob2xkZXIobix0LGUpfSl9LFJ0Ll9zZXR1cExvYWRpbmdQbGFjZUhvbGRlcnM9ZnVuY3Rpb24oKXtSdC5yZWFkeShmdW5jdGlvbigpe1J0Ll91dGlsLmFycmF5RnJvbSh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltvbnMtbG9hZGluZy1wbGFjZWhvbGRlcl1cIikpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoXCJvbnMtbG9hZGluZy1wbGFjZWhvbGRlclwiKTtcInN0cmluZ1wiPT10eXBlb2YgZSYmUnQuX3Jlc29sdmVMb2FkaW5nUGxhY2Vob2xkZXIodCxlKX0pfSl9LFJ0Ll9yZXNvbHZlTG9hZGluZ1BsYWNlaG9sZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUoKX07ZSYmUnQuY3JlYXRlRWxlbWVudChlKS50aGVuKGZ1bmN0aW9uKGUpe2Uuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0LmFwcGVuZENoaWxkKGUpLG4oZSxmdW5jdGlvbigpe2Zvcig7dC5maXJzdENoaWxkJiZ0LmZpcnN0Q2hpbGQhPT1lOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7ZS5zdHlsZS5kaXNwbGF5PVwiXCJ9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBQcm9taXNlLnJlamVjdChcIlVuYWJsZWQgdG8gcmVzb2x2ZSBwbGFjZWhvbGRlcjogXCIrdCl9KX07dmFyIHF0PVwiY3VycmVudFNjcmlwdFwiaW4gZG9jdW1lbnQ/ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuY3VycmVudFNjcmlwdH06ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuc2NyaXB0c1tkb2N1bWVudC5zY3JpcHRzLmxlbmd0aC0xXX07UnQuZ2V0U2NyaXB0UGFnZT1mdW5jdGlvbigpe3JldHVybiBxdCgpJiYvb25zLXBhZ2UvaS50ZXN0KHF0KCkucGFyZW50RWxlbWVudC50YWdOYW1lKSYmcXQoKS5wYXJlbnRFbGVtZW50fHxudWxsfTt2YXIgenQ9byhmdW5jdGlvbih0KXshZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7dmFyIG87aWYobj1ufHx7fSx0aGlzLnRyYWNraW5nQ2xpY2s9ITEsdGhpcy50cmFja2luZ0NsaWNrU3RhcnQ9MCx0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCx0aGlzLnRvdWNoU3RhcnRYPTAsdGhpcy50b3VjaFN0YXJ0WT0wLHRoaXMubGFzdFRvdWNoSWRlbnRpZmllcj0wLHRoaXMudG91Y2hCb3VuZGFyeT1uLnRvdWNoQm91bmRhcnl8fDEwLHRoaXMubGF5ZXI9dCx0aGlzLnRhcERlbGF5PW4udGFwRGVsYXl8fDIwMCx0aGlzLnRhcFRpbWVvdXQ9bi50YXBUaW1lb3V0fHw3MDAsIWUubm90TmVlZGVkKHQpKXtmb3IodmFyIHI9W1wib25Nb3VzZVwiLFwib25DbGlja1wiLFwib25Ub3VjaFN0YXJ0XCIsXCJvblRvdWNoTW92ZVwiLFwib25Ub3VjaEVuZFwiLFwib25Ub3VjaENhbmNlbFwiXSxhPTAscz1yLmxlbmd0aDthPHM7YSsrKXRoaXNbclthXV09ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fSh0aGlzW3JbYV1dLHRoaXMpO2kmJih0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIix0aGlzLm9uTW91c2UsITApLHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZSwhMCksdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZSwhMCkpLHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLCEwKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaENhbmNlbCwhMSksRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbnx8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLG4saSl7dmFyIG89Tm9kZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcImNsaWNrXCI9PT1lP28uY2FsbCh0LGUsbi5oaWphY2tlZHx8bixpKTpvLmNhbGwodCxlLG4saSl9LHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLG4saSl7dmFyIG89Tm9kZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcImNsaWNrXCI9PT1lP28uY2FsbCh0LGUsbi5oaWphY2tlZHx8KG4uaGlqYWNrZWQ9ZnVuY3Rpb24odCl7dC5wcm9wYWdhdGlvblN0b3BwZWR8fG4odCl9KSxpKTpvLmNhbGwodCxlLG4saSl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9uY2xpY2smJihvPXQub25jbGljayx0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKHQpe28odCl9LCExKSx0Lm9uY2xpY2s9bnVsbCl9fXZhciBuPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIldpbmRvd3MgUGhvbmVcIik+PTAsaT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJBbmRyb2lkXCIpPjAmJiFuLG89L2lQKGFkfGhvbmV8b2QpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhbixyPW8mJi9PUyA0X1xcZChfXFxkKT8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksYT1vJiYvT1MgWzYtN11fXFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHM9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiQkIxMFwiKT4wLGw9W1wiZW1haWxcIixcIm51bWJlclwiLFwicGFzc3dvcmRcIixcInNlYXJjaFwiLFwidGVsXCIsXCJ0ZXh0XCIsXCJ1cmxcIl07ZS5wcm90b3R5cGUubmVlZHNDbGljaz1mdW5jdGlvbih0KXtzd2l0Y2godC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJidXR0b25cIjpjYXNlXCJzZWxlY3RcIjpjYXNlXCJ0ZXh0YXJlYVwiOmlmKHQuZGlzYWJsZWQpcmV0dXJuITA7YnJlYWs7Y2FzZVwiaW5wdXRcIjppZihvJiZcImZpbGVcIj09PXQudHlwZXx8dC5kaXNhYmxlZClyZXR1cm4hMDticmVhaztjYXNlXCJsYWJlbFwiOmNhc2VcImlmcmFtZVwiOmNhc2VcInZpZGVvXCI6cmV0dXJuITB9cmV0dXJuL1xcYm5lZWRzY2xpY2tcXGIvLnRlc3QodC5jbGFzc05hbWUpfSxlLnByb3RvdHlwZS5uZWVkc0ZvY3VzPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Nhc2VcInRleHRhcmVhXCI6cmV0dXJuITA7Y2FzZVwic2VsZWN0XCI6cmV0dXJuIWk7Y2FzZVwiaW5wdXRcIjpzd2l0Y2godC50eXBlKXtjYXNlXCJidXR0b25cIjpjYXNlXCJjaGVja2JveFwiOmNhc2VcImZpbGVcIjpjYXNlXCJpbWFnZVwiOmNhc2VcInJhZGlvXCI6Y2FzZVwic3VibWl0XCI6cmV0dXJuITF9cmV0dXJuIXQuZGlzYWJsZWQmJiF0LnJlYWRPbmx5O2RlZmF1bHQ6cmV0dXJuL1xcYm5lZWRzZm9jdXNcXGIvLnRlc3QodC5jbGFzc05hbWUpfX0sZS5wcm90b3R5cGUuc2VuZENsaWNrPWZ1bmN0aW9uKHQsZSl7dmFyIG4saTtkb2N1bWVudC5hY3RpdmVFbGVtZW50JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50IT09dCYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksaT1lLmNoYW5nZWRUb3VjaGVzWzBdLChuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIikpLmluaXRNb3VzZUV2ZW50KHRoaXMuZGV0ZXJtaW5lRXZlbnRUeXBlKHQpLCEwLCEwLHdpbmRvdywxLGkuc2NyZWVuWCxpLnNjcmVlblksaS5jbGllbnRYLGkuY2xpZW50WSwhMSwhMSwhMSwhMSwwLG51bGwpLG4uZm9yd2FyZGVkVG91Y2hFdmVudD0hMCx0LmRpc3BhdGNoRXZlbnQobil9LGUucHJvdG90eXBlLmRldGVybWluZUV2ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gaSYmXCJzZWxlY3RcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpP1wibW91c2Vkb3duXCI6XCJjbGlja1wifSxlLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbih0KXt2YXIgZTtvJiZ0LnNldFNlbGVjdGlvblJhbmdlJiYwIT09dC50eXBlLmluZGV4T2YoXCJkYXRlXCIpJiZcInRpbWVcIiE9PXQudHlwZSYmXCJtb250aFwiIT09dC50eXBlJiZcImVtYWlsXCIhPT10LnR5cGUmJlwibnVtYmVyXCIhPT10LnR5cGU/KGU9dC52YWx1ZS5sZW5ndGgsdC5zZXRTZWxlY3Rpb25SYW5nZShlLGUpKTp0LmZvY3VzKCl9LGUucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFBhcmVudD1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKCEoZT10LmZhc3RDbGlja1Njcm9sbFBhcmVudCl8fCFlLmNvbnRhaW5zKHQpKXtuPXQ7ZG97aWYobi5zY3JvbGxIZWlnaHQ+bi5vZmZzZXRIZWlnaHQpe2U9bix0LmZhc3RDbGlja1Njcm9sbFBhcmVudD1uO2JyZWFrfW49bi5wYXJlbnRFbGVtZW50fXdoaWxlKG4pfWUmJihlLmZhc3RDbGlja0xhc3RTY3JvbGxUb3A9ZS5zY3JvbGxUb3ApfSxlLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50RnJvbUV2ZW50VGFyZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0Lm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREU/dC5wYXJlbnROb2RlOnR9LGUucHJvdG90eXBlLmlzVGV4dEZpZWxkPWZ1bmN0aW9uKHQpe3JldHVyblwidGV4dGFyZWFcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHwtMSE9PWwuaW5kZXhPZih0LnR5cGUpfSxlLnByb3RvdHlwZS5vblRvdWNoU3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGUsbjtpZih0LnRhcmdldFRvdWNoZXMubGVuZ3RoPjEpcmV0dXJuITA7aWYoZT10aGlzLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQodC50YXJnZXQpLG49dC50YXJnZXRUb3VjaGVzWzBdLGUuaXNDb250ZW50RWRpdGFibGUpcmV0dXJuITA7aWYobyl7aWYoZT09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJnRoaXMuaXNUZXh0RmllbGQoZSkpcmV0dXJuITA7aWYoIXIpe2lmKG4uaWRlbnRpZmllciYmbi5pZGVudGlmaWVyPT09dGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksITE7dGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyPW4uaWRlbnRpZmllcix0aGlzLnVwZGF0ZVNjcm9sbFBhcmVudChlKX19cmV0dXJuIHRoaXMudHJhY2tpbmdDbGljaz0hMCx0aGlzLnRyYWNraW5nQ2xpY2tTdGFydD10LnRpbWVTdGFtcCx0aGlzLnRhcmdldEVsZW1lbnQ9ZSx0aGlzLnRvdWNoU3RhcnRYPW4ucGFnZVgsdGhpcy50b3VjaFN0YXJ0WT1uLnBhZ2VZLHQudGltZVN0YW1wLXRoaXMubGFzdENsaWNrVGltZTx0aGlzLnRhcERlbGF5JiZ0LnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU+LTEmJnQucHJldmVudERlZmF1bHQoKSwhMH0sZS5wcm90b3R5cGUudG91Y2hIYXNNb3ZlZD1mdW5jdGlvbih0KXt2YXIgZT10LmNoYW5nZWRUb3VjaGVzWzBdLG49dGhpcy50b3VjaEJvdW5kYXJ5O3JldHVybiBNYXRoLmFicyhlLnBhZ2VYLXRoaXMudG91Y2hTdGFydFgpPm58fE1hdGguYWJzKGUucGFnZVktdGhpcy50b3VjaFN0YXJ0WSk+bn0sZS5wcm90b3R5cGUub25Ub3VjaE1vdmU9ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMudHJhY2tpbmdDbGlja3x8KCh0aGlzLnRhcmdldEVsZW1lbnQhPT10aGlzLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQodC50YXJnZXQpfHx0aGlzLnRvdWNoSGFzTW92ZWQodCkpJiYodGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsKSwhMCl9LGUucHJvdG90eXBlLmZpbmRDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10LmNvbnRyb2w/dC5jb250cm9sOnQuaHRtbEZvcj9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0Lmh0bWxGb3IpOnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbiwgaW5wdXQ6bm90KFt0eXBlPWhpZGRlbl0pLCBrZXlnZW4sIG1ldGVyLCBvdXRwdXQsIHByb2dyZXNzLCBzZWxlY3QsIHRleHRhcmVhXCIpfSxlLnByb3RvdHlwZS5vblRvdWNoRW5kPWZ1bmN0aW9uKHQpe3ZhciBlLG4scyxsLHUsYz10aGlzLnRhcmdldEVsZW1lbnQ7aWYoIXRoaXMudHJhY2tpbmdDbGljaylyZXR1cm4hMDtpZih0LnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU8dGhpcy50YXBEZWxheSYmdC50aW1lU3RhbXAtdGhpcy5sYXN0Q2xpY2tUaW1lPi0xKXJldHVybiB0aGlzLmNhbmNlbE5leHRDbGljaz0hMCwhMDtpZih0LnRpbWVTdGFtcC10aGlzLnRyYWNraW5nQ2xpY2tTdGFydD50aGlzLnRhcFRpbWVvdXQpcmV0dXJuITA7aWYodGhpcy5jYW5jZWxOZXh0Q2xpY2s9ITEsdGhpcy5sYXN0Q2xpY2tUaW1lPXQudGltZVN0YW1wLG49dGhpcy50cmFja2luZ0NsaWNrU3RhcnQsdGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0PTAsYSYmKHU9dC5jaGFuZ2VkVG91Y2hlc1swXSwoYz1kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHUucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LHUucGFnZVktd2luZG93LnBhZ2VZT2Zmc2V0KXx8YykuZmFzdENsaWNrU2Nyb2xsUGFyZW50PXRoaXMudGFyZ2V0RWxlbWVudC5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQpLFwibGFiZWxcIj09PShzPWMudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSl7aWYoZT10aGlzLmZpbmRDb250cm9sKGMpKXtpZih0aGlzLmZvY3VzKGMpLGkpcmV0dXJuITE7Yz1lfX1lbHNlIGlmKHRoaXMubmVlZHNGb2N1cyhjKSlyZXR1cm4gdC50aW1lU3RhbXAtbj4xMDB8fG8mJndpbmRvdy50b3AhPT13aW5kb3cmJlwiaW5wdXRcIj09PXM/KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLCExKToodGhpcy5mb2N1cyhjKSx0aGlzLnNlbmRDbGljayhjLHQpLHImJlwic2VsZWN0XCI9PT1zfHwodGhpcy50YXJnZXRFbGVtZW50PW51bGwsdC5wcmV2ZW50RGVmYXVsdCgpKSwhMSk7cmV0dXJuISghb3x8cnx8IShsPWMuZmFzdENsaWNrU2Nyb2xsUGFyZW50KXx8bC5mYXN0Q2xpY2tMYXN0U2Nyb2xsVG9wPT09bC5zY3JvbGxUb3ApfHwodGhpcy5uZWVkc0NsaWNrKGMpfHwodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc2VuZENsaWNrKGMsdCkpLCExKX0sZS5wcm90b3R5cGUub25Ub3VjaENhbmNlbD1mdW5jdGlvbigpe3RoaXMudHJhY2tpbmdDbGljaz0hMSx0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbH0sZS5wcm90b3R5cGUub25Nb3VzZT1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy50YXJnZXRFbGVtZW50fHwoISF0LmZvcndhcmRlZFRvdWNoRXZlbnR8fCghdC5jYW5jZWxhYmxlfHwoISghdGhpcy5uZWVkc0NsaWNrKHRoaXMudGFyZ2V0RWxlbWVudCl8fHRoaXMuY2FuY2VsTmV4dENsaWNrKXx8KHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uP3Quc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk6dC5wcm9wYWdhdGlvblN0b3BwZWQ9ITAsdC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksITEpKSkpfSxlLnByb3RvdHlwZS5vbkNsaWNrPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0aGlzLnRyYWNraW5nQ2xpY2s/KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLHRoaXMudHJhY2tpbmdDbGljaz0hMSwhMCk6XCJzdWJtaXRcIj09PXQudGFyZ2V0LnR5cGUmJjA9PT10LmRldGFpbHx8KChlPXRoaXMub25Nb3VzZSh0KSl8fCh0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCksZSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxheWVyO2kmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIix0aGlzLm9uTW91c2UsITApLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZSwhMCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZSwhMCkpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLCEwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kLCExKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaENhbmNlbCwhMSl9LGUubm90TmVlZGVkPWZ1bmN0aW9uKHQpe3ZhciBlLG4sbztpZih2b2lkIDA9PT13aW5kb3cub250b3VjaHN0YXJ0KXJldHVybiEwO2lmKG49KygvQ2hyb21lXFwvKFswLTldKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFssMF0pWzFdKXtpZighaSlyZXR1cm4hMDtpZihlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpKXtpZigtMSE9PWUuY29udGVudC5pbmRleE9mKFwidXNlci1zY2FsYWJsZT1ub1wiKSlyZXR1cm4hMDtpZihuPjMxJiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg8PXdpbmRvdy5vdXRlcldpZHRoKXJldHVybiEwfX1pZihzJiYobz1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFswLTldKilcXC4oWzAtOV0qKS8pKVsxXT49MTAmJm9bMl0+PTMmJihlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpKSl7aWYoLTEhPT1lLmNvbnRlbnQuaW5kZXhPZihcInVzZXItc2NhbGFibGU9bm9cIikpcmV0dXJuITA7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoPD13aW5kb3cub3V0ZXJXaWR0aClyZXR1cm4hMH1yZXR1cm5cIm5vbmVcIj09PXQuc3R5bGUubXNUb3VjaEFjdGlvbnx8XCJtYW5pcHVsYXRpb25cIj09PXQuc3R5bGUudG91Y2hBY3Rpb258fCghISgrKC9GaXJlZm94XFwvKFswLTldKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFssMF0pWzFdPj0yNyYmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpJiYoLTEhPT1lLmNvbnRlbnQuaW5kZXhPZihcInVzZXItc2NhbGFibGU9bm9cIil8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDw9d2luZG93Lm91dGVyV2lkdGgpKXx8XCJub25lXCI9PT10LnN0eWxlLnRvdWNoQWN0aW9ufHxcIm1hbmlwdWxhdGlvblwiPT09dC5zdHlsZS50b3VjaEFjdGlvbil9LGUuYXR0YWNoPWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlKHQsbil9LHQuZXhwb3J0cz8odC5leHBvcnRzPWUuYXR0YWNoLHQuZXhwb3J0cy5GYXN0Q2xpY2s9ZSk6d2luZG93LkZhc3RDbGljaz1lfSgpfSkuRmFzdENsaWNrO3dpbmRvdy5jdXN0b21FbGVtZW50cyYmKHdpbmRvdy5jdXN0b21FbGVtZW50cy5mb3JjZVBvbHlmaWxsPSEwKTt2YXIgVnQ9byhmdW5jdGlvbih0KXt2YXIgZT10LmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1lKX0pLFd0PW8oZnVuY3Rpb24odCl7dmFyIGU9dC5leHBvcnRzPXt2ZXJzaW9uOlwiMi41LjFcIn07XCJudW1iZXJcIj09dHlwZW9mIF9fZSYmKF9fZT1lKX0pLFV0PShXdC52ZXJzaW9uLGZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpP251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9KSxYdD1mdW5jdGlvbih0KXtpZighVXQodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIHR9LFl0PWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaCh0KXtyZXR1cm4hMH19LEd0PSFZdChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KSwkdD1WdC5kb2N1bWVudCxLdD1VdCgkdCkmJlV0KCR0LmNyZWF0ZUVsZW1lbnQpLFF0PWZ1bmN0aW9uKHQpe3JldHVybiBLdD8kdC5jcmVhdGVFbGVtZW50KHQpOnt9fSxKdD0hR3QmJiFZdChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoUXQoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KSxadD1mdW5jdGlvbih0LGUpe2lmKCFVdCh0KSlyZXR1cm4gdDt2YXIgbixpO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFVdChpPW4uY2FsbCh0KSkpcmV0dXJuIGk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnZhbHVlT2YpJiYhVXQoaT1uLmNhbGwodCkpKXJldHVybiBpO2lmKCFlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhVXQoaT1uLmNhbGwodCkpKXJldHVybiBpO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX0sdGU9T2JqZWN0LmRlZmluZVByb3BlcnR5LGVlPXtmOkd0P09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0LGUsbil7aWYoWHQodCksZT1adChlLCEwKSxYdChuKSxKdCl0cnl7cmV0dXJuIHRlKHQsZSxuKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYodFtlXT1uLnZhbHVlKSx0fX0sbmU9ZnVuY3Rpb24odCxlKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmdCksY29uZmlndXJhYmxlOiEoMiZ0KSx3cml0YWJsZTohKDQmdCksdmFsdWU6ZX19LGllPUd0P2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZWUuZih0LGUsbmUoMSxuKSl9OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtlXT1uLHR9LG9lPXt9Lmhhc093blByb3BlcnR5LHJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG9lLmNhbGwodCxlKX0sYWU9MCxzZT1NYXRoLnJhbmRvbSgpLGxlPWZ1bmN0aW9uKHQpe3JldHVyblwiU3ltYm9sKFwiLmNvbmNhdCh2b2lkIDA9PT10P1wiXCI6dCxcIilfXCIsKCsrYWUrc2UpLnRvU3RyaW5nKDM2KSl9LHVlPW8oZnVuY3Rpb24odCl7dmFyIGU9bGUoXCJzcmNcIiksbj1GdW5jdGlvbi50b1N0cmluZyxpPShcIlwiK24pLnNwbGl0KFwidG9TdHJpbmdcIik7V3QuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHQpfSwodC5leHBvcnRzPWZ1bmN0aW9uKHQsbixvLHIpe3ZhciBhPVwiZnVuY3Rpb25cIj09dHlwZW9mIG87YSYmKHJlKG8sXCJuYW1lXCIpfHxpZShvLFwibmFtZVwiLG4pKSx0W25dIT09byYmKGEmJihyZShvLGUpfHxpZShvLGUsdFtuXT9cIlwiK3Rbbl06aS5qb2luKFN0cmluZyhuKSkpKSx0PT09VnQ/dFtuXT1vOnI/dFtuXT90W25dPW86aWUodCxuLG8pOihkZWxldGUgdFtuXSxpZSh0LG4sbykpKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzJiZ0aGlzW2VdfHxuLmNhbGwodGhpcyl9KX0pLGNlPWZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiB0fSxoZT1mdW5jdGlvbih0LGUsbil7aWYoY2UodCksdm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdC5jYWxsKGUsbil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixpKXtyZXR1cm4gdC5jYWxsKGUsbixpKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLGksbyl7cmV0dXJuIHQuY2FsbChlLG4saSxvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0sZGU9ZnVuY3Rpb24gdChlLG4saSl7dmFyIG8scixhLHMsbD1lJnQuRix1PWUmdC5HLGM9ZSZ0LlAsaD1lJnQuQixkPXU/VnQ6ZSZ0LlM/VnRbbl18fChWdFtuXT17fSk6KFZ0W25dfHx7fSkucHJvdG90eXBlLGY9dT9XdDpXdFtuXXx8KFd0W25dPXt9KSxwPWYucHJvdG90eXBlfHwoZi5wcm90b3R5cGU9e30pO3UmJihpPW4pO2ZvcihvIGluIGkpYT0oKHI9IWwmJmQmJnZvaWQgMCE9PWRbb10pP2Q6aSlbb10scz1oJiZyP2hlKGEsVnQpOmMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGE/aGUoRnVuY3Rpb24uY2FsbCxhKTphLGQmJnVlKGQsbyxhLGUmdC5VKSxmW29dIT1hJiZpZShmLG8scyksYyYmcFtvXSE9YSYmKHBbb109YSl9O1Z0LmNvcmU9V3QsZGUuRj0xLGRlLkc9MixkZS5TPTQsZGUuUD04LGRlLkI9MTYsZGUuVz0zMixkZS5VPTY0LGRlLlI9MTI4O3ZhciBmZT1kZSxwZT17Zjp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sZ2U9e30udG9TdHJpbmcsbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGdlLmNhbGwodCkuc2xpY2UoOCwtMSl9LF9lPU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVyblwiU3RyaW5nXCI9PW1lKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfSx2ZT1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fSxiZT1mdW5jdGlvbih0KXtyZXR1cm4gX2UodmUodCkpfSx5ZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLGtlPXtmOkd0P3llOmZ1bmN0aW9uKHQsZSl7aWYodD1iZSh0KSxlPVp0KGUsITApLEp0KXRyeXtyZXR1cm4geWUodCxlKX1jYXRjaCh0KXt9aWYocmUodCxlKSlyZXR1cm4gbmUoIXBlLmYuY2FsbCh0LGUpLHRbZV0pfX0sd2U9ZnVuY3Rpb24odCxlKXtpZihYdCh0KSwhVXQoZSkmJm51bGwhPT1lKXRocm93IFR5cGVFcnJvcihlK1wiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlIVwiKX0sRWU9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbih0LGUsbil7dHJ5eyhuPWhlKEZ1bmN0aW9uLmNhbGwsa2UuZihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCwyKSkodCxbXSksZT0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2godCl7ZT0hMH1yZXR1cm4gZnVuY3Rpb24odCxpKXtyZXR1cm4gd2UodCxpKSxlP3QuX19wcm90b19fPWk6bih0LGkpLHR9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazp3ZX07ZmUoZmUuUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpFZS5zZXR9KTtXdC5PYmplY3Quc2V0UHJvdG90eXBlT2Y7dmFyIENlPVZ0W1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwoVnRbXCJfX2NvcmUtanNfc2hhcmVkX19cIl09e30pLEFlPWZ1bmN0aW9uKHQpe3JldHVybiBDZVt0XXx8KENlW3RdPXt9KX0sU2U9byhmdW5jdGlvbih0KXt2YXIgZT1BZShcIndrc1wiKSxuPVZ0LlN5bWJvbCxpPVwiZnVuY3Rpb25cIj09dHlwZW9mIG47KHQuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZVt0XXx8KGVbdF09aSYmblt0XXx8KGk/bjpsZSkoXCJTeW1ib2wuXCIrdCkpfSkuc3RvcmU9ZX0pLFBlPVNlKFwidG9TdHJpbmdUYWdcIiksT2U9XCJBcmd1bWVudHNcIj09bWUoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSx4ZT1mdW5jdGlvbih0KXt2YXIgZSxuLGk7cmV0dXJuIHZvaWQgMD09PXQ/XCJVbmRlZmluZWRcIjpudWxsPT09dD9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2Yobj1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gdFtlXX1jYXRjaCh0KXt9fShlPU9iamVjdCh0KSxQZSkpP246T2U/bWUoZSk6XCJPYmplY3RcIj09KGk9bWUoZSkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNhbGxlZT9cIkFyZ3VtZW50c1wiOml9LFRlPXt9O1RlW1NlKFwidG9TdHJpbmdUYWdcIildPVwielwiLFRlK1wiXCIhPVwiW29iamVjdCB6XVwiJiZ1ZShPYmplY3QucHJvdG90eXBlLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBcIit4ZSh0aGlzKStcIl1cIn0sITApO3ZhciBMZT1NYXRoLmNlaWwsTWU9TWF0aC5mbG9vcixEZT1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP01lOkxlKSh0KX0sSWU9e30sTmU9TWF0aC5taW4sQmU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9OZShEZSh0KSw5MDA3MTk5MjU0NzQwOTkxKTowfSxqZT1NYXRoLm1heCxIZT1NYXRoLm1pbixSZT1BZShcImtleXNcIiksRmU9ZnVuY3Rpb24odCl7cmV0dXJuIFJlW3RdfHwoUmVbdF09bGUodCkpfSxxZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3ZhciBvLHI9YmUoZSksYT1CZShyLmxlbmd0aCkscz1mdW5jdGlvbih0LGUpe3JldHVybih0PURlKHQpKTwwP2plKHQrZSwwKTpIZSh0LGUpfShpLGEpO2lmKHQmJm4hPW4pe2Zvcig7YT5zOylpZigobz1yW3MrK10pIT1vKXJldHVybiEwfWVsc2UgZm9yKDthPnM7cysrKWlmKCh0fHxzIGluIHIpJiZyW3NdPT09bilyZXR1cm4gdHx8c3x8MDtyZXR1cm4hdCYmLTF9fSghMSksemU9RmUoXCJJRV9QUk9UT1wiKSxWZT1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKSxXZT1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG4saT1iZSh0KSxvPTAscj1bXTtmb3IobiBpbiBpKW4hPXplJiZyZShpLG4pJiZyLnB1c2gobik7Zm9yKDtlLmxlbmd0aD5vOylyZShpLG49ZVtvKytdKSYmKH5xZShyLG4pfHxyLnB1c2gobikpO3JldHVybiByfSh0LFZlKX0sVWU9R3Q/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXtYdCh0KTtmb3IodmFyIG4saT1XZShlKSxvPWkubGVuZ3RoLHI9MDtvPnI7KWVlLmYodCxuPWlbcisrXSxlW25dKTtyZXR1cm4gdH0sWGU9VnQuZG9jdW1lbnQsWWU9WGUmJlhlLmRvY3VtZW50RWxlbWVudCxHZT1GZShcIklFX1BST1RPXCIpLCRlPWZ1bmN0aW9uKCl7fSxLZT1mdW5jdGlvbigpe3ZhciB0LGU9UXQoXCJpZnJhbWVcIiksbj1WZS5sZW5ndGg7Zm9yKGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixZZS5hcHBlbmRDaGlsZChlKSxlLnNyYz1cImphdmFzY3JpcHQ6XCIsKHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50KS5vcGVuKCksdC53cml0ZShcIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XFwvc2NyaXB0PlwiKSx0LmNsb3NlKCksS2U9dC5GO24tLTspZGVsZXRlIEtlLnByb3RvdHlwZVtWZVtuXV07cmV0dXJuIEtlKCl9LFFlPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG51bGwhPT10PygkZS5wcm90b3R5cGU9WHQodCksbj1uZXcgJGUsJGUucHJvdG90eXBlPW51bGwsbltHZV09dCk6bj1LZSgpLHZvaWQgMD09PWU/bjpVZShuLGUpfSxKZT1lZS5mLFplPVNlKFwidG9TdHJpbmdUYWdcIiksdG49ZnVuY3Rpb24odCxlLG4pe3QmJiFyZSh0PW4/dDp0LnByb3RvdHlwZSxaZSkmJkplKHQsWmUse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTplfSl9LGVuPXt9O2llKGVuLFNlKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pO3ZhciBubj1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9UWUoZW4se25leHQ6bmUoMSxuKX0pLHRuKHQsZStcIiBJdGVyYXRvclwiKX0sb249ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdCh2ZSh0KSl9LHJuPUZlKFwiSUVfUFJPVE9cIiksYW49T2JqZWN0LnByb3RvdHlwZSxzbj1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQpe3JldHVybiB0PW9uKHQpLHJlKHQscm4pP3Rbcm5dOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/YW46bnVsbH0sbG49U2UoXCJpdGVyYXRvclwiKSx1bj0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLGNuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGhuPWZ1bmN0aW9uKHQsZSxuLGksbyxyLGEpe25uKG4sZSxpKTt2YXIgcyxsLHUsYz1mdW5jdGlvbih0KXtpZighdW4mJnQgaW4gcClyZXR1cm4gcFt0XTtzd2l0Y2godCl7Y2FzZVwia2V5c1wiOmNhc2VcInZhbHVlc1wiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19LGg9ZStcIiBJdGVyYXRvclwiLGQ9XCJ2YWx1ZXNcIj09byxmPSExLHA9dC5wcm90b3R5cGUsZz1wW2xuXXx8cFtcIkBAaXRlcmF0b3JcIl18fG8mJnBbb10sbT1nfHxjKG8pLF89bz9kP2MoXCJlbnRyaWVzXCIpOm06dm9pZCAwLHY9XCJBcnJheVwiPT1lP3AuZW50cmllc3x8ZzpnO2lmKHYmJih1PXNuKHYuY2FsbChuZXcgdCkpKSE9PU9iamVjdC5wcm90b3R5cGUmJnUubmV4dCYmKHRuKHUsaCwhMCkscmUodSxsbil8fGllKHUsbG4sY24pKSxkJiZnJiZcInZhbHVlc1wiIT09Zy5uYW1lJiYoZj0hMCxtPWZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FsbCh0aGlzKX0pLCh1bnx8Znx8IXBbbG5dKSYmaWUocCxsbixtKSxJZVtlXT1tLEllW2hdPWNuLG8paWYocz17dmFsdWVzOmQ/bTpjKFwidmFsdWVzXCIpLGtleXM6cj9tOmMoXCJrZXlzXCIpLGVudHJpZXM6X30sYSlmb3IobCBpbiBzKWwgaW4gcHx8dWUocCxsLHNbbF0pO2Vsc2UgZmUoZmUuUCtmZS5GKih1bnx8ZiksZSxzKTtyZXR1cm4gc30sZG49ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIGksbyxyPVN0cmluZyh2ZShlKSksYT1EZShuKSxzPXIubGVuZ3RoO3JldHVybiBhPDB8fGE+PXM/dD9cIlwiOnZvaWQgMDooaT1yLmNoYXJDb2RlQXQoYSkpPDU1Mjk2fHxpPjU2MzE5fHxhKzE9PT1zfHwobz1yLmNoYXJDb2RlQXQoYSsxKSk8NTYzMjB8fG8+NTczNDM/dD9yLmNoYXJBdChhKTppOnQ/ci5zbGljZShhLGErMik6by01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2fX0oITApO2huKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe3RoaXMuX3Q9U3RyaW5nKHQpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX3Qsbj10aGlzLl9pO3JldHVybiBuPj1lLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PWRuKGUsbiksdGhpcy5faSs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSk7dmFyIGZuPVNlKFwidW5zY29wYWJsZXNcIikscG49QXJyYXkucHJvdG90eXBlO3ZvaWQgMD09cG5bZm5dJiZpZShwbixmbix7fSk7dmFyIGduPWZ1bmN0aW9uKHQpe3BuW2ZuXVt0XT0hMH0sbW49ZnVuY3Rpb24odCxlKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEhdH19LF9uPWhuKEFycmF5LFwiQXJyYXlcIixmdW5jdGlvbih0LGUpe3RoaXMuX3Q9YmUodCksdGhpcy5faT0wLHRoaXMuX2s9ZX0sZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90LGU9dGhpcy5fayxuPXRoaXMuX2krKztyZXR1cm4hdHx8bj49dC5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG1uKDEpKTpcImtleXNcIj09ZT9tbigwLG4pOlwidmFsdWVzXCI9PWU/bW4oMCx0W25dKTptbigwLFtuLHRbbl1dKX0sXCJ2YWx1ZXNcIik7SWUuQXJndW1lbnRzPUllLkFycmF5LGduKFwia2V5c1wiKSxnbihcInZhbHVlc1wiKSxnbihcImVudHJpZXNcIik7Zm9yKHZhciB2bj1TZShcIml0ZXJhdG9yXCIpLGJuPVNlKFwidG9TdHJpbmdUYWdcIikseW49SWUuQXJyYXksa249e0NTU1J1bGVMaXN0OiEwLENTU1N0eWxlRGVjbGFyYXRpb246ITEsQ1NTVmFsdWVMaXN0OiExLENsaWVudFJlY3RMaXN0OiExLERPTVJlY3RMaXN0OiExLERPTVN0cmluZ0xpc3Q6ITEsRE9NVG9rZW5MaXN0OiEwLERhdGFUcmFuc2Zlckl0ZW1MaXN0OiExLEZpbGVMaXN0OiExLEhUTUxBbGxDb2xsZWN0aW9uOiExLEhUTUxDb2xsZWN0aW9uOiExLEhUTUxGb3JtRWxlbWVudDohMSxIVE1MU2VsZWN0RWxlbWVudDohMSxNZWRpYUxpc3Q6ITAsTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCxUZXh0VHJhY2tDdWVMaXN0OiExLFRleHRUcmFja0xpc3Q6ITEsVG91Y2hMaXN0OiExfSx3bj1XZShrbiksRW49MDtFbjx3bi5sZW5ndGg7RW4rKyl7dmFyIENuLEFuPXduW0VuXSxTbj1rbltBbl0sUG49VnRbQW5dLE9uPVBuJiZQbi5wcm90b3R5cGU7aWYoT24mJihPblt2bl18fGllKE9uLHZuLHluKSxPbltibl18fGllKE9uLGJuLEFuKSxJZVtBbl09eW4sU24pKWZvcihDbiBpbiBfbilPbltDbl18fHVlKE9uLENuLF9uW0NuXSwhMCl9dmFyIHhuPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGkgaW4gZSl1ZSh0LGksZVtpXSxuKTtyZXR1cm4gdH0sVG49ZnVuY3Rpb24odCxlLG4saSl7aWYoISh0IGluc3RhbmNlb2YgZSl8fHZvaWQgMCE9PWkmJmkgaW4gdCl0aHJvdyBUeXBlRXJyb3IobitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiB0fSxMbj1mdW5jdGlvbih0LGUsbixpKXt0cnl7cmV0dXJuIGk/ZShYdChuKVswXSxuWzFdKTplKG4pfWNhdGNoKGUpe3ZhciBvPXQucmV0dXJuO3Rocm93IHZvaWQgMCE9PW8mJlh0KG8uY2FsbCh0KSksZX19LE1uPVNlKFwiaXRlcmF0b3JcIiksRG49QXJyYXkucHJvdG90eXBlLEluPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYoSWUuQXJyYXk9PT10fHxEbltNbl09PT10KX0sTm49U2UoXCJpdGVyYXRvclwiKSxCbj1XdC5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbih0KXtpZih2b2lkIDAhPXQpcmV0dXJuIHRbTm5dfHx0W1wiQEBpdGVyYXRvclwiXXx8SWVbeGUodCldfSxqbj1vKGZ1bmN0aW9uKHQpe3ZhciBlPXt9LG49e30saT10LmV4cG9ydHM9ZnVuY3Rpb24odCxpLG8scixhKXt2YXIgcyxsLHUsYyxoPWE/ZnVuY3Rpb24oKXtyZXR1cm4gdH06Qm4odCksZD1oZShvLHIsaT8yOjEpLGY9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBoKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7aWYoSW4oaCkpe2ZvcihzPUJlKHQubGVuZ3RoKTtzPmY7ZisrKWlmKChjPWk/ZChYdChsPXRbZl0pWzBdLGxbMV0pOmQodFtmXSkpPT09ZXx8Yz09PW4pcmV0dXJuIGN9ZWxzZSBmb3IodT1oLmNhbGwodCk7IShsPXUubmV4dCgpKS5kb25lOylpZigoYz1Mbih1LGQsbC52YWx1ZSxpKSk9PT1lfHxjPT09bilyZXR1cm4gY307aS5CUkVBSz1lLGkuUkVUVVJOPW59KSxIbj1TZShcInNwZWNpZXNcIiksUm49byhmdW5jdGlvbih0KXt2YXIgZT1sZShcIm1ldGFcIiksbj1lZS5mLGk9MCxvPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LHI9IVl0KGZ1bmN0aW9uKCl7cmV0dXJuIG8oT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxhPWZ1bmN0aW9uKHQpe24odCxlLHt2YWx1ZTp7aTpcIk9cIisgKytpLHc6e319fSl9LHM9dC5leHBvcnRzPXtLRVk6ZSxORUVEOiExLGZhc3RLZXk6ZnVuY3Rpb24odCxuKXtpZighVXQodCkpcmV0dXJuXCJzeW1ib2xcIj09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpmKHQpKT90OihcInN0cmluZ1wiPT10eXBlb2YgdD9cIlNcIjpcIlBcIikrdDtpZighcmUodCxlKSl7aWYoIW8odCkpcmV0dXJuXCJGXCI7aWYoIW4pcmV0dXJuXCJFXCI7YSh0KX1yZXR1cm4gdFtlXS5pfSxnZXRXZWFrOmZ1bmN0aW9uKHQsbil7aWYoIXJlKHQsZSkpe2lmKCFvKHQpKXJldHVybiEwO2lmKCFuKXJldHVybiExO2EodCl9cmV0dXJuIHRbZV0ud30sb25GcmVlemU6ZnVuY3Rpb24odCl7cmV0dXJuIHImJnMuTkVFRCYmbyh0KSYmIXJlKHQsZSkmJmEodCksdH19fSksRm49KFJuLktFWSxSbi5ORUVELFJuLmZhc3RLZXksUm4uZ2V0V2VhayxSbi5vbkZyZWV6ZSxmdW5jdGlvbih0LGUpe2lmKCFVdCh0KXx8dC5fdCE9PWUpdGhyb3cgVHlwZUVycm9yKFwiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCBcIitlK1wiIHJlcXVpcmVkIVwiKTtyZXR1cm4gdH0pLHFuPWVlLmYsem49Um4uZmFzdEtleSxWbj1HdD9cIl9zXCI6XCJzaXplXCIsV249ZnVuY3Rpb24odCxlKXt2YXIgbixpPXpuKGUpO2lmKFwiRlwiIT09aSlyZXR1cm4gdC5faVtpXTtmb3Iobj10Ll9mO247bj1uLm4paWYobi5rPT1lKXJldHVybiBufSxVbj17Z2V0Q29uc3RydWN0b3I6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dChmdW5jdGlvbih0LHIpe1RuKHQsbyxlLFwiX2lcIiksdC5fdD1lLHQuX2k9UWUobnVsbCksdC5fZj12b2lkIDAsdC5fbD12b2lkIDAsdFtWbl09MCx2b2lkIDAhPXImJmpuKHIsbix0W2ldLHQpfSk7cmV0dXJuIHhuKG8ucHJvdG90eXBlLHtjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdD1Gbih0aGlzLGUpLG49dC5faSxpPXQuX2Y7aTtpPWkubilpLnI9ITAsaS5wJiYoaS5wPWkucC5uPXZvaWQgMCksZGVsZXRlIG5baS5pXTt0Ll9mPXQuX2w9dm9pZCAwLHRbVm5dPTB9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgbj1Gbih0aGlzLGUpLGk9V24obix0KTtpZihpKXt2YXIgbz1pLm4scj1pLnA7ZGVsZXRlIG4uX2lbaS5pXSxpLnI9ITAsciYmKHIubj1vKSxvJiYoby5wPXIpLG4uX2Y9PWkmJihuLl9mPW8pLG4uX2w9PWkmJihuLl9sPXIpLG5bVm5dLS19cmV0dXJuISFpfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe0ZuKHRoaXMsZSk7Zm9yKHZhciBuLGk9aGUodCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtuPW4/bi5uOnRoaXMuX2Y7KWZvcihpKG4udixuLmssdGhpcyk7biYmbi5yOyluPW4ucH0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhV24oRm4odGhpcyxlKSx0KX19KSxHdCYmcW4oby5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBGbih0aGlzLGUpW1ZuXX19KSxvfSxkZWY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG8scj1Xbih0LGUpO3JldHVybiByP3Iudj1uOih0Ll9sPXI9e2k6bz16bihlLCEwKSxrOmUsdjpuLHA6aT10Ll9sLG46dm9pZCAwLHI6ITF9LHQuX2Z8fCh0Ll9mPXIpLGkmJihpLm49ciksdFtWbl0rKyxcIkZcIiE9PW8mJih0Ll9pW29dPXIpKSx0fSxnZXRFbnRyeTpXbixzZXRTdHJvbmc6ZnVuY3Rpb24odCxlLG4pe2huKHQsZSxmdW5jdGlvbih0LG4pe3RoaXMuX3Q9Rm4odCxlKSx0aGlzLl9rPW4sdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2ssZT10aGlzLl9sO2UmJmUucjspZT1lLnA7cmV0dXJuIHRoaXMuX3QmJih0aGlzLl9sPWU9ZT9lLm46dGhpcy5fdC5fZik/XCJrZXlzXCI9PXQ/bW4oMCxlLmspOlwidmFsdWVzXCI9PXQ/bW4oMCxlLnYpOm1uKDAsW2UuayxlLnZdKToodGhpcy5fdD12b2lkIDAsbW4oMSkpfSxuP1wiZW50cmllc1wiOlwidmFsdWVzXCIsIW4sITApLGZ1bmN0aW9uKHQpe3ZhciBlPVZ0W3RdO0d0JiZlJiYhZVtIbl0mJmVlLmYoZSxIbix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfShlKX19LFhuPVNlKFwiaXRlcmF0b3JcIiksWW49ITE7dHJ5e1s3XVtYbl0oKS5yZXR1cm49ZnVuY3Rpb24oKXtZbj0hMH19Y2F0Y2godCl7fXZhciBHbj1mdW5jdGlvbih0LGUpe2lmKCFlJiYhWW4pcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBpPVs3XSxvPWlbWG5dKCk7by5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6bj0hMH19LGlbWG5dPWZ1bmN0aW9uKCl7cmV0dXJuIG99LHQoaSl9Y2F0Y2godCl7fXJldHVybiBufSwkbj1FZS5zZXQsS249ZnVuY3Rpb24odCxlLG4saSxvLHIpe3ZhciBhPVZ0W3RdLHM9YSxsPW8/XCJzZXRcIjpcImFkZFwiLHU9cyYmcy5wcm90b3R5cGUsYz17fSxoPWZ1bmN0aW9uKHQpe3ZhciBlPXVbdF07dWUodSx0LFwiZGVsZXRlXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShyJiYhVXQodCkpJiZlLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImhhc1wiPT10P2Z1bmN0aW9uKHQpe3JldHVybiEociYmIVV0KHQpKSYmZS5jYWxsKHRoaXMsMD09PXQ/MDp0KX06XCJnZXRcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4gciYmIVV0KHQpP3ZvaWQgMDplLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImFkZFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiBlLmNhbGwodGhpcywwPT09dD8wOnQpLHRoaXN9OmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0aGlzLDA9PT10PzA6dCxuKSx0aGlzfSl9O2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHMmJihyfHx1LmZvckVhY2gmJiFZdChmdW5jdGlvbigpeyhuZXcgcykuZW50cmllcygpLm5leHQoKX0pKSl7dmFyIGQ9bmV3IHMsZj1kW2xdKHI/e306LTAsMSkhPWQscD1ZdChmdW5jdGlvbigpe2QuaGFzKDEpfSksZz1HbihmdW5jdGlvbih0KXtuZXcgcyh0KX0pLG09IXImJll0KGZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBzLGU9NTtlLS07KXRbbF0oZSxlKTtyZXR1cm4hdC5oYXMoLTApfSk7Z3x8KChzPWUoZnVuY3Rpb24oZSxuKXtUbihlLHMsdCk7dmFyIGk9ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG89ZS5jb25zdHJ1Y3RvcjtyZXR1cm4gbyE9PW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG8mJihpPW8ucHJvdG90eXBlKSE9PW4ucHJvdG90eXBlJiZVdChpKSYmJG4mJiRuKHQsaSksdH0obmV3IGEsZSxzKTtyZXR1cm4gdm9pZCAwIT1uJiZqbihuLG8saVtsXSxpKSxpfSkpLnByb3RvdHlwZT11LHUuY29uc3RydWN0b3I9cyksKHB8fG0pJiYoaChcImRlbGV0ZVwiKSxoKFwiaGFzXCIpLG8mJmgoXCJnZXRcIikpLChtfHxmKSYmaChsKSxyJiZ1LmNsZWFyJiZkZWxldGUgdS5jbGVhcn1lbHNlIHM9aS5nZXRDb25zdHJ1Y3RvcihlLHQsbyxsKSx4bihzLnByb3RvdHlwZSxuKSxSbi5ORUVEPSEwO3JldHVybiB0bihzLHQpLGNbdF09cyxmZShmZS5HK2ZlLlcrZmUuRioocyE9YSksYykscnx8aS5zZXRTdHJvbmcocyx0LG8pLHN9LFFuPShLbihcIlNldFwiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gVW4uZGVmKEZuKHRoaXMsXCJTZXRcIiksdD0wPT09dD8wOnQsdCl9fSxVbiksZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoeGUodGhpcykhPXQpdGhyb3cgVHlwZUVycm9yKHQrXCIjdG9KU09OIGlzbid0IGdlbmVyaWNcIik7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG49W107cmV0dXJuIGpuKHQsITEsbi5wdXNoLG4sZSksbn0odGhpcyl9fSk7ZmUoZmUuUCtmZS5SLFwiU2V0XCIse3RvSlNPTjpRbihcIlNldFwiKX0pO3ZhciBKbj1mdW5jdGlvbih0KXtmZShmZS5TLHQse29mOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KTt0LS07KWVbdF09YXJndW1lbnRzW3RdO3JldHVybiBuZXcgdGhpcyhlKX19KX07Sm4oXCJTZXRcIik7dmFyIFpuPWZ1bmN0aW9uKHQpe2ZlKGZlLlMsdCx7ZnJvbTpmdW5jdGlvbih0KXt2YXIgZSxuLGksbyxyPWFyZ3VtZW50c1sxXTtyZXR1cm4gY2UodGhpcyksKGU9dm9pZCAwIT09cikmJmNlKHIpLHZvaWQgMD09dD9uZXcgdGhpczoobj1bXSxlPyhpPTAsbz1oZShyLGFyZ3VtZW50c1syXSwyKSxqbih0LCExLGZ1bmN0aW9uKHQpe24ucHVzaChvKHQsaSsrKSl9KSk6am4odCwhMSxuLnB1c2gsbiksbmV3IHRoaXMobikpfX0pfTtabihcIlNldFwiKTtXdC5TZXQsS24oXCJNYXBcIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHtnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9VW4uZ2V0RW50cnkoRm4odGhpcyxcIk1hcFwiKSx0KTtyZXR1cm4gZSYmZS52fSxzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gVW4uZGVmKEZuKHRoaXMsXCJNYXBcIiksMD09PXQ/MDp0LGUpfX0sVW4sITApO2ZlKGZlLlArZmUuUixcIk1hcFwiLHt0b0pTT046UW4oXCJNYXBcIil9KSxKbihcIk1hcFwiKSxabihcIk1hcFwiKTtXdC5NYXA7dmFyIHRpPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiQXJyYXlcIj09bWUodCl9LGVpPVNlKFwic3BlY2llc1wiKSxuaT1mdW5jdGlvbih0LGUpe3ZhciBuPTE9PXQsaT0yPT10LG89Mz09dCxyPTQ9PXQsYT02PT10LHM9NT09dHx8YSxsPWV8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyhmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGkodCkmJihcImZ1bmN0aW9uXCIhPXR5cGVvZihlPXQuY29uc3RydWN0b3IpfHxlIT09QXJyYXkmJiF0aShlLnByb3RvdHlwZSl8fChlPXZvaWQgMCksVXQoZSkmJm51bGw9PT0oZT1lW2VpXSkmJihlPXZvaWQgMCkpLHZvaWQgMD09PWU/QXJyYXk6ZX0odCkpKGUpfTtyZXR1cm4gZnVuY3Rpb24oZSx1LGMpe2Zvcih2YXIgaCxkLGY9b24oZSkscD1fZShmKSxnPWhlKHUsYywzKSxtPUJlKHAubGVuZ3RoKSxfPTAsdj1uP2woZSxtKTppP2woZSwwKTp2b2lkIDA7bT5fO18rKylpZigoc3x8XyBpbiBwKSYmKGg9cFtfXSxkPWcoaCxfLGYpLHQpKWlmKG4pdltfXT1kO2Vsc2UgaWYoZClzd2l0Y2godCl7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gaDtjYXNlIDY6cmV0dXJuIF87Y2FzZSAyOnYucHVzaChoKX1lbHNlIGlmKHIpcmV0dXJuITE7cmV0dXJuIGE/LTE6b3x8cj9yOnZ9fSxpaT17ZjpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxvaT1PYmplY3QuYXNzaWduLHJpPSFvaXx8WXQoZnVuY3Rpb24oKXt2YXIgdD17fSxlPXt9LG49U3ltYm9sKCksaT1cImFiY2RlZmdoaWprbG1ub3BxcnN0XCI7cmV0dXJuIHRbbl09NyxpLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT10fSksNyE9b2koe30sdClbbl18fE9iamVjdC5rZXlzKG9pKHt9LGUpKS5qb2luKFwiXCIpIT1pfSk/ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49b24odCksaT1hcmd1bWVudHMubGVuZ3RoLG89MSxyPWlpLmYsYT1wZS5mO2k+bzspZm9yKHZhciBzLGw9X2UoYXJndW1lbnRzW28rK10pLHU9cj9XZShsKS5jb25jYXQocihsKSk6V2UobCksYz11Lmxlbmd0aCxoPTA7Yz5oOylhLmNhbGwobCxzPXVbaCsrXSkmJihuW3NdPWxbc10pO3JldHVybiBufTpvaSxhaT1Sbi5nZXRXZWFrLHNpPW5pKDUpLGxpPW5pKDYpLHVpPTAsY2k9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2x8fCh0Ll9sPW5ldyBoaSl9LGhpPWZ1bmN0aW9uKCl7dGhpcy5hPVtdfSxkaT1mdW5jdGlvbih0LGUpe3JldHVybiBzaSh0LmEsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09PT1lfSl9O2hpLnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKHQpe3ZhciBlPWRpKHRoaXMsdCk7aWYoZSlyZXR1cm4gZVsxXX0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhZGkodGhpcyx0KX0sc2V0OmZ1bmN0aW9uKHQsZSl7dmFyIG49ZGkodGhpcyx0KTtuP25bMV09ZTp0aGlzLmEucHVzaChbdCxlXSl9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT1saSh0aGlzLmEsZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF09PT10fSk7cmV0dXJufmUmJnRoaXMuYS5zcGxpY2UoZSwxKSwhIX5lfX07dmFyIGZpPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10KGZ1bmN0aW9uKHQscil7VG4odCxvLGUsXCJfaVwiKSx0Ll90PWUsdC5faT11aSsrLHQuX2w9dm9pZCAwLHZvaWQgMCE9ciYmam4ocixuLHRbaV0sdCl9KTtyZXR1cm4geG4oby5wcm90b3R5cGUse2RlbGV0ZTpmdW5jdGlvbih0KXtpZighVXQodCkpcmV0dXJuITE7dmFyIG49YWkodCk7cmV0dXJuITA9PT1uP2NpKEZuKHRoaXMsZSkpLmRlbGV0ZSh0KTpuJiZyZShuLHRoaXMuX2kpJiZkZWxldGUgblt0aGlzLl9pXX0saGFzOmZ1bmN0aW9uKHQpe2lmKCFVdCh0KSlyZXR1cm4hMTt2YXIgbj1haSh0KTtyZXR1cm4hMD09PW4/Y2koRm4odGhpcyxlKSkuaGFzKHQpOm4mJnJlKG4sdGhpcy5faSl9fSksb30sZGVmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1haShYdChlKSwhMCk7cmV0dXJuITA9PT1pP2NpKHQpLnNldChlLG4pOmlbdC5faV09bix0fSx1ZnN0b3JlOmNpfTtvKGZ1bmN0aW9uKHQpe3ZhciBlLG49bmkoMCksaT1Sbi5nZXRXZWFrLG89T2JqZWN0LmlzRXh0ZW5zaWJsZSxyPWZpLnVmc3RvcmUsYT17fSxzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sbD17Z2V0OmZ1bmN0aW9uKHQpe2lmKFV0KHQpKXt2YXIgZT1pKHQpO3JldHVybiEwPT09ZT9yKEZuKHRoaXMsXCJXZWFrTWFwXCIpKS5nZXQodCk6ZT9lW3RoaXMuX2ldOnZvaWQgMH19LHNldDpmdW5jdGlvbih0LGUpe3JldHVybiBmaS5kZWYoRm4odGhpcyxcIldlYWtNYXBcIiksdCxlKX19LHU9dC5leHBvcnRzPUtuKFwiV2Vha01hcFwiLHMsbCxmaSwhMCwhMCk7WXQoZnVuY3Rpb24oKXtyZXR1cm4gNyE9KG5ldyB1KS5zZXQoKE9iamVjdC5mcmVlemV8fE9iamVjdCkoYSksNykuZ2V0KGEpfSkmJihlPWZpLmdldENvbnN0cnVjdG9yKHMsXCJXZWFrTWFwXCIpLHJpKGUucHJvdG90eXBlLGwpLFJuLk5FRUQ9ITAsbihbXCJkZWxldGVcIixcImhhc1wiLFwiZ2V0XCIsXCJzZXRcIl0sZnVuY3Rpb24odCl7dmFyIG49dS5wcm90b3R5cGUsaT1uW3RdO3VlKG4sdCxmdW5jdGlvbihuLHIpe2lmKFV0KG4pJiYhbyhuKSl7dGhpcy5fZnx8KHRoaXMuX2Y9bmV3IGUpO3ZhciBhPXRoaXMuX2ZbdF0obixyKTtyZXR1cm5cInNldFwiPT10P3RoaXM6YX1yZXR1cm4gaS5jYWxsKHRoaXMsbixyKX0pfSkpfSk7Sm4oXCJXZWFrTWFwXCIpLFpuKFwiV2Vha01hcFwiKTtXdC5XZWFrTWFwO3ZhciBwaT1mdW5jdGlvbih0LGUsbil7ZSBpbiB0P2VlLmYodCxlLG5lKDAsbikpOnRbZV09bn07ZmUoZmUuUytmZS5GKiFHbihmdW5jdGlvbih0KXt9KSxcIkFycmF5XCIse2Zyb206ZnVuY3Rpb24odCl7dmFyIGUsbixpLG8scj1vbih0KSxhPVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSxzPWFyZ3VtZW50cy5sZW5ndGgsbD1zPjE/YXJndW1lbnRzWzFdOnZvaWQgMCx1PXZvaWQgMCE9PWwsYz0wLGg9Qm4ocik7aWYodSYmKGw9aGUobCxzPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT1ofHxhPT1BcnJheSYmSW4oaCkpZm9yKG49bmV3IGEoZT1CZShyLmxlbmd0aCkpO2U+YztjKyspcGkobixjLHU/bChyW2NdLGMpOnJbY10pO2Vsc2UgZm9yKG89aC5jYWxsKHIpLG49bmV3IGE7IShpPW8ubmV4dCgpKS5kb25lO2MrKylwaShuLGMsdT9MbihvLGwsW2kudmFsdWUsY10sITApOmkudmFsdWUpO3JldHVybiBuLmxlbmd0aD1jLG59fSk7V3QuQXJyYXkuZnJvbTt2YXIgZ2k9bmV3IFNldChbXCJhbm5vdGF0aW9uLXhtbFwiLFwiY29sb3ItcHJvZmlsZVwiLFwiZm9udC1mYWNlXCIsXCJmb250LWZhY2Utc3JjXCIsXCJmb250LWZhY2UtdXJpXCIsXCJmb250LWZhY2UtZm9ybWF0XCIsXCJmb250LWZhY2UtbmFtZVwiLFwibWlzc2luZy1nbHlwaFwiXSksbWk9e2N1c3RvbToxLGZhaWxlZDoyfSxfaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKHRoaXMsdCksdGhpcy5fbG9jYWxOYW1lVG9EZWZpbml0aW9uPW5ldyBNYXAsdGhpcy5fY29uc3RydWN0b3JUb0RlZmluaXRpb249bmV3IE1hcCx0aGlzLl9wYXRjaGVzPVtdLHRoaXMuX2hhc1BhdGNoZXM9ITF9cmV0dXJuIGcodCxbe2tleTpcInNldERlZmluaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2xvY2FsTmFtZVRvRGVmaW5pdGlvbi5zZXQodCxlKSx0aGlzLl9jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbi5zZXQoZS5jb25zdHJ1Y3RvcixlKX19LHtrZXk6XCJsb2NhbE5hbWVUb0RlZmluaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbG9jYWxOYW1lVG9EZWZpbml0aW9uLmdldCh0KX19LHtrZXk6XCJjb25zdHJ1Y3RvclRvRGVmaW5pdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbi5nZXQodCl9fSx7a2V5OlwiYWRkUGF0Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9oYXNQYXRjaGVzPSEwLHRoaXMuX3BhdGNoZXMucHVzaCh0KX19LHtrZXk6XCJwYXRjaFRyZWVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2hhc1BhdGNoZXMmJmwodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5wYXRjaCh0KX0pfX0se2tleTpcInBhdGNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5faGFzUGF0Y2hlcyYmIXQuX19DRV9wYXRjaGVkKXt0Ll9fQ0VfcGF0Y2hlZD0hMDtmb3IodmFyIGU9MDtlPHRoaXMuX3BhdGNoZXMubGVuZ3RoO2UrKyl0aGlzLl9wYXRjaGVzW2VdKHQpfX19LHtrZXk6XCJjb25uZWN0VHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO2wodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpfSk7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5fX0NFX3N0YXRlPT09bWkuY3VzdG9tP2EoaSkmJnRoaXMuY29ubmVjdGVkQ2FsbGJhY2soaSk6dGhpcy51cGdyYWRlRWxlbWVudChpKX19fSx7a2V5OlwiZGlzY29ubmVjdFRyZWVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1bXTtsKHQsZnVuY3Rpb24odCl7cmV0dXJuIGUucHVzaCh0KX0pO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuX19DRV9zdGF0ZT09PW1pLmN1c3RvbSYmdGhpcy5kaXNjb25uZWN0ZWRDYWxsYmFjayhpKX19fSx7a2V5OlwicGF0Y2hBbmRVcGdyYWRlVHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bmV3IFNldCxpPVtdO2lmKGwodCxmdW5jdGlvbih0KXtpZihcImxpbmtcIj09PXQubG9jYWxOYW1lJiZcImltcG9ydFwiPT09dC5nZXRBdHRyaWJ1dGUoXCJyZWxcIikpe3ZhciBvPXQuaW1wb3J0O28gaW5zdGFuY2VvZiBOb2RlJiZcImNvbXBsZXRlXCI9PT1vLnJlYWR5U3RhdGU/KG8uX19DRV9pc0ltcG9ydERvY3VtZW50PSEwLG8uX19DRV9oYXNSZWdpc3RyeT0hMCk6dC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGk9dC5pbXBvcnQ7aS5fX0NFX2RvY3VtZW50TG9hZEhhbmRsZWR8fChpLl9fQ0VfZG9jdW1lbnRMb2FkSGFuZGxlZD0hMCxpLl9fQ0VfaXNJbXBvcnREb2N1bWVudD0hMCxpLl9fQ0VfaGFzUmVnaXN0cnk9ITAsbi5kZWxldGUoaSksZS5wYXRjaEFuZFVwZ3JhZGVUcmVlKGksbikpfSl9ZWxzZSBpLnB1c2godCl9LG4pLHRoaXMuX2hhc1BhdGNoZXMpZm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspdGhpcy5wYXRjaChpW29dKTtmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl0aGlzLnVwZ3JhZGVFbGVtZW50KGlbcl0pfX0se2tleTpcInVwZ3JhZGVFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dC5fX0NFX3N0YXRlKXt2YXIgZT10aGlzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0LmxvY2FsTmFtZSk7aWYoZSl7ZS5jb25zdHJ1Y3Rpb25TdGFjay5wdXNoKHQpO3ZhciBuPWUuY29uc3RydWN0b3I7dHJ5e3RyeXtpZihuZXcgbiE9PXQpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGN1c3RvbSBlbGVtZW50IGNvbnN0cnVjdG9yIGRpZCBub3QgcHJvZHVjZSB0aGUgZWxlbWVudCBiZWluZyB1cGdyYWRlZC5cIil9ZmluYWxseXtlLmNvbnN0cnVjdGlvblN0YWNrLnBvcCgpfX1jYXRjaChlKXt0aHJvdyB0Ll9fQ0Vfc3RhdGU9bWkuZmFpbGVkLGV9aWYodC5fX0NFX3N0YXRlPW1pLmN1c3RvbSx0Ll9fQ0VfZGVmaW5pdGlvbj1lLGUuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKWZvcih2YXIgaT1lLm9ic2VydmVkQXR0cmlidXRlcyxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciByPWlbb10scz10LmdldEF0dHJpYnV0ZShyKTtudWxsIT09cyYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodCxyLG51bGwscyxudWxsKX1hKHQpJiZ0aGlzLmNvbm5lY3RlZENhbGxiYWNrKHQpfX19fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9fQ0VfZGVmaW5pdGlvbjtlLmNvbm5lY3RlZENhbGxiYWNrJiZlLmNvbm5lY3RlZENhbGxiYWNrLmNhbGwodCksdC5fX0NFX2lzQ29ubmVjdGVkQ2FsbGJhY2tDYWxsZWQ9ITB9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt0Ll9fQ0VfaXNDb25uZWN0ZWRDYWxsYmFja0NhbGxlZHx8dGhpcy5jb25uZWN0ZWRDYWxsYmFjayh0KTt2YXIgZT10Ll9fQ0VfZGVmaW5pdGlvbjtlLmRpc2Nvbm5lY3RlZENhbGxiYWNrJiZlLmRpc2Nvbm5lY3RlZENhbGxiYWNrLmNhbGwodCksdC5fX0NFX2lzQ29ubmVjdGVkQ2FsbGJhY2tDYWxsZWQ9dm9pZCAwfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGksbyl7dmFyIHI9dC5fX0NFX2RlZmluaXRpb247ci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJnIub2JzZXJ2ZWRBdHRyaWJ1dGVzLmluZGV4T2YoZSk+LTEmJnIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLmNhbGwodCxlLG4saSxvKX19XSksdH0oKSx2aT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksdGhpcy5faW50ZXJuYWxzPWUsdGhpcy5fZG9jdW1lbnQ9bix0aGlzLl9vYnNlcnZlcj12b2lkIDAsdGhpcy5faW50ZXJuYWxzLnBhdGNoQW5kVXBncmFkZVRyZWUodGhpcy5fZG9jdW1lbnQpLFwibG9hZGluZ1wiPT09dGhpcy5fZG9jdW1lbnQucmVhZHlTdGF0ZSYmKHRoaXMuX29ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMuX2hhbmRsZU11dGF0aW9ucy5iaW5kKHRoaXMpKSx0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMuX2RvY3VtZW50LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pKX1yZXR1cm4gZyh0LFt7a2V5OlwiZGlzY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb2JzZXJ2ZXImJnRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKX19LHtrZXk6XCJfaGFuZGxlTXV0YXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZG9jdW1lbnQucmVhZHlTdGF0ZTtcImludGVyYWN0aXZlXCIhPT1lJiZcImNvbXBsZXRlXCIhPT1lfHx0aGlzLmRpc2Nvbm5lY3QoKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylmb3IodmFyIGk9dFtuXS5hZGRlZE5vZGVzLG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIHI9aVtvXTt0aGlzLl9pbnRlcm5hbHMucGF0Y2hBbmRVcGdyYWRlVHJlZShyKX19fV0pLHR9KCksYmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9dGhpcztwKHRoaXMsdCksdGhpcy5fdmFsdWU9dm9pZCAwLHRoaXMuX3Jlc29sdmU9dm9pZCAwLHRoaXMuX3Byb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24odCl7ZS5fcmVzb2x2ZT10LGUuX3ZhbHVlJiZ0KGUuX3ZhbHVlKX0pfXJldHVybiBnKHQsW3trZXk6XCJyZXNvbHZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5fdmFsdWUpdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSByZXNvbHZlZC5cIik7dGhpcy5fdmFsdWU9dCx0aGlzLl9yZXNvbHZlJiZ0aGlzLl9yZXNvbHZlKHQpfX0se2tleTpcInRvUHJvbWlzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb21pc2V9fV0pLHR9KCkseWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3AodGhpcyx0KSx0aGlzLl9lbGVtZW50RGVmaW5pdGlvbklzUnVubmluZz0hMSx0aGlzLl9pbnRlcm5hbHM9ZSx0aGlzLl93aGVuRGVmaW5lZERlZmVycmVkPW5ldyBNYXAsdGhpcy5fZmx1c2hDYWxsYmFjaz1mdW5jdGlvbih0KXtyZXR1cm4gdCgpfSx0aGlzLl9mbHVzaFBlbmRpbmc9ITEsdGhpcy5fdW5mbHVzaGVkTG9jYWxOYW1lcz1bXSx0aGlzLl9kb2N1bWVudENvbnN0cnVjdGlvbk9ic2VydmVyPW5ldyB2aShlLGRvY3VtZW50KX1yZXR1cm4gZyh0LFt7a2V5OlwiZGVmaW5lXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKCEoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3JzIG11c3QgYmUgZnVuY3Rpb25zLlwiKTtpZighcih0KSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgZWxlbWVudCBuYW1lICdcIit0K1wiJyBpcyBub3QgdmFsaWQuXCIpO2lmKHRoaXMuX2ludGVybmFscy5sb2NhbE5hbWVUb0RlZmluaXRpb24odCkpdGhyb3cgbmV3IEVycm9yKFwiQSBjdXN0b20gZWxlbWVudCB3aXRoIG5hbWUgJ1wiK3QrXCInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5cIik7aWYodGhpcy5fZWxlbWVudERlZmluaXRpb25Jc1J1bm5pbmcpdGhyb3cgbmV3IEVycm9yKFwiQSBjdXN0b20gZWxlbWVudCBpcyBhbHJlYWR5IGJlaW5nIGRlZmluZWQuXCIpO3RoaXMuX2VsZW1lbnREZWZpbml0aW9uSXNSdW5uaW5nPSEwO3ZhciBpPXZvaWQgMCxvPXZvaWQgMCxhPXZvaWQgMCxzPXZvaWQgMCxsPXZvaWQgMDt0cnl7dmFyIHU9ZnVuY3Rpb24odCl7dmFyIGU9Y1t0XTtpZih2b2lkIDAhPT1lJiYhKGUgaW5zdGFuY2VvZiBGdW5jdGlvbikpdGhyb3cgbmV3IEVycm9yKFwiVGhlICdcIit0K1wiJyBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3JldHVybiBlfSxjPWUucHJvdG90eXBlO2lmKCEoYyBpbnN0YW5jZW9mIE9iamVjdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBjdXN0b20gZWxlbWVudCBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZSBpcyBub3QgYW4gb2JqZWN0LlwiKTtpPXUoXCJjb25uZWN0ZWRDYWxsYmFja1wiKSxvPXUoXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiKSxhPXUoXCJhZG9wdGVkQ2FsbGJhY2tcIikscz11KFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIpLGw9ZS5vYnNlcnZlZEF0dHJpYnV0ZXN8fFtdfWNhdGNoKHQpe3JldHVybn1maW5hbGx5e3RoaXMuX2VsZW1lbnREZWZpbml0aW9uSXNSdW5uaW5nPSExfXZhciBoPXtsb2NhbE5hbWU6dCxjb25zdHJ1Y3RvcjplLGNvbm5lY3RlZENhbGxiYWNrOmksZGlzY29ubmVjdGVkQ2FsbGJhY2s6byxhZG9wdGVkQ2FsbGJhY2s6YSxhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2s6cyxvYnNlcnZlZEF0dHJpYnV0ZXM6bCxjb25zdHJ1Y3Rpb25TdGFjazpbXX07dGhpcy5faW50ZXJuYWxzLnNldERlZmluaXRpb24odCxoKSx0aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzLnB1c2godCksdGhpcy5fZmx1c2hQZW5kaW5nfHwodGhpcy5fZmx1c2hQZW5kaW5nPSEwLHRoaXMuX2ZsdXNoQ2FsbGJhY2soZnVuY3Rpb24oKXtyZXR1cm4gbi5fZmx1c2goKX0pKX19LHtrZXk6XCJfZmx1c2hcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCExIT09dGhpcy5fZmx1c2hQZW5kaW5nKWZvcih0aGlzLl9mbHVzaFBlbmRpbmc9ITEsdGhpcy5faW50ZXJuYWxzLnBhdGNoQW5kVXBncmFkZVRyZWUoZG9jdW1lbnQpO3RoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMubGVuZ3RoPjA7KXt2YXIgdD10aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzLnNoaWZ0KCksZT10aGlzLl93aGVuRGVmaW5lZERlZmVycmVkLmdldCh0KTtlJiZlLnJlc29sdmUodm9pZCAwKX19fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faW50ZXJuYWxzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0KTtpZihlKXJldHVybiBlLmNvbnN0cnVjdG9yfX0se2tleTpcIndoZW5EZWZpbmVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoIXIodCkpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBTeW50YXhFcnJvcihcIidcIit0K1wiJyBpcyBub3QgYSB2YWxpZCBjdXN0b20gZWxlbWVudCBuYW1lLlwiKSk7dmFyIGU9dGhpcy5fd2hlbkRlZmluZWREZWZlcnJlZC5nZXQodCk7aWYoZSlyZXR1cm4gZS50b1Byb21pc2UoKTt2YXIgbj1uZXcgYmk7dGhpcy5fd2hlbkRlZmluZWREZWZlcnJlZC5zZXQodCxuKTtyZXR1cm4gdGhpcy5faW50ZXJuYWxzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0KSYmLTE9PT10aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzLmluZGV4T2YodCkmJm4ucmVzb2x2ZSh2b2lkIDApLG4udG9Qcm9taXNlKCl9fSx7a2V5OlwicG9seWZpbGxXcmFwRmx1c2hDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2RvY3VtZW50Q29uc3RydWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO3ZhciBlPXRoaXMuX2ZsdXNoQ2FsbGJhY2s7dGhpcy5fZmx1c2hDYWxsYmFjaz1mdW5jdGlvbihuKXtyZXR1cm4gdChmdW5jdGlvbigpe3JldHVybiBlKG4pfSl9fX1dKSx0fSgpO3dpbmRvdy5DdXN0b21FbGVtZW50UmVnaXN0cnk9eWkseWkucHJvdG90eXBlLmRlZmluZT15aS5wcm90b3R5cGUuZGVmaW5lLHlpLnByb3RvdHlwZS5nZXQ9eWkucHJvdG90eXBlLmdldCx5aS5wcm90b3R5cGUud2hlbkRlZmluZWQ9eWkucHJvdG90eXBlLndoZW5EZWZpbmVkLHlpLnByb3RvdHlwZS5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrPXlpLnByb3RvdHlwZS5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrO3ZhciBraT17RG9jdW1lbnRfY3JlYXRlRWxlbWVudDp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQsRG9jdW1lbnRfY3JlYXRlRWxlbWVudE5TOndpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudE5TLERvY3VtZW50X2ltcG9ydE5vZGU6d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlLERvY3VtZW50X3ByZXBlbmQ6d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5wcmVwZW5kLERvY3VtZW50X2FwcGVuZDp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLmFwcGVuZCxOb2RlX2Nsb25lTm9kZTp3aW5kb3cuTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlLE5vZGVfYXBwZW5kQ2hpbGQ6d2luZG93Lk5vZGUucHJvdG90eXBlLmFwcGVuZENoaWxkLE5vZGVfaW5zZXJ0QmVmb3JlOndpbmRvdy5Ob2RlLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUsTm9kZV9yZW1vdmVDaGlsZDp3aW5kb3cuTm9kZS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsTm9kZV9yZXBsYWNlQ2hpbGQ6d2luZG93Lk5vZGUucHJvdG90eXBlLnJlcGxhY2VDaGlsZCxOb2RlX3RleHRDb250ZW50Ok9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93Lk5vZGUucHJvdG90eXBlLFwidGV4dENvbnRlbnRcIiksRWxlbWVudF9hdHRhY2hTaGFkb3c6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmF0dGFjaFNoYWRvdyxFbGVtZW50X2lubmVySFRNTDpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZSxcImlubmVySFRNTFwiKSxFbGVtZW50X2dldEF0dHJpYnV0ZTp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlLEVsZW1lbnRfc2V0QXR0cmlidXRlOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUsRWxlbWVudF9yZW1vdmVBdHRyaWJ1dGU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZSxFbGVtZW50X2dldEF0dHJpYnV0ZU5TOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOUyxFbGVtZW50X3NldEF0dHJpYnV0ZU5TOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVOUyxFbGVtZW50X3JlbW92ZUF0dHJpYnV0ZU5TOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGVOUyxFbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuaW5zZXJ0QWRqYWNlbnRFbGVtZW50LEVsZW1lbnRfcHJlcGVuZDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucHJlcGVuZCxFbGVtZW50X2FwcGVuZDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYXBwZW5kLEVsZW1lbnRfYmVmb3JlOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5iZWZvcmUsRWxlbWVudF9hZnRlcjp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYWZ0ZXIsRWxlbWVudF9yZXBsYWNlV2l0aDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucmVwbGFjZVdpdGgsRWxlbWVudF9yZW1vdmU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSxIVE1MRWxlbWVudDp3aW5kb3cuSFRNTEVsZW1lbnQsSFRNTEVsZW1lbnRfaW5uZXJIVE1MOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZSxcImlubmVySFRNTFwiKSxIVE1MRWxlbWVudF9pbnNlcnRBZGphY2VudEVsZW1lbnQ6d2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnR9LHdpPW5ldyBmdW5jdGlvbiB0KCl7cCh0aGlzLHQpfSxFaT1mdW5jdGlvbih0LGUsbil7ZS5wcmVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KTtuLnByZXBlbmQuYXBwbHkodGhpcyxpKTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl0LmRpc2Nvbm5lY3RUcmVlKHJbc10pO2lmKGEodGhpcykpZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspe3ZhciB1PWlbbF07dSBpbnN0YW5jZW9mIEVsZW1lbnQmJnQuY29ubmVjdFRyZWUodSl9fSxlLmFwcGVuZD1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkoZSksbz0wO288ZTtvKyspaVtvXT1hcmd1bWVudHNbb107dmFyIHI9aS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBOb2RlJiZhKHQpfSk7bi5hcHBlbmQuYXBwbHkodGhpcyxpKTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl0LmRpc2Nvbm5lY3RUcmVlKHJbc10pO2lmKGEodGhpcykpZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspe3ZhciB1PWlbbF07dSBpbnN0YW5jZW9mIEVsZW1lbnQmJnQuY29ubmVjdFRyZWUodSl9fX0sQ2k9d2luZG93LmN1c3RvbUVsZW1lbnRzO2lmKCFDaXx8Q2kuZm9yY2VQb2x5ZmlsbHx8XCJmdW5jdGlvblwiIT10eXBlb2YgQ2kuZGVmaW5lfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBDaS5nZXQpe3ZhciBBaT1uZXcgX2k7IWZ1bmN0aW9uKHQpe3dpbmRvdy5IVE1MRWxlbWVudD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgZT10aGlzLmNvbnN0cnVjdG9yLG49dC5jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbihlKTtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY3VzdG9tIGVsZW1lbnQgYmVpbmcgY29uc3RydWN0ZWQgd2FzIG5vdCByZWdpc3RlcmVkIHdpdGggYGN1c3RvbUVsZW1lbnRzYC5cIik7dmFyIGk9bi5jb25zdHJ1Y3Rpb25TdGFjaztpZigwPT09aS5sZW5ndGgpe3ZhciBvPWtpLkRvY3VtZW50X2NyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCxuLmxvY2FsTmFtZSk7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihvLGUucHJvdG90eXBlKSxvLl9fQ0Vfc3RhdGU9bWkuY3VzdG9tLG8uX19DRV9kZWZpbml0aW9uPW4sdC5wYXRjaChvKSxvfXZhciByPWkubGVuZ3RoLTEsYT1pW3JdO2lmKGE9PT13aSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgSFRNTEVsZW1lbnQgY29uc3RydWN0b3Igd2FzIGVpdGhlciBjYWxsZWQgcmVlbnRyYW50bHkgZm9yIHRoaXMgY29uc3RydWN0b3Igb3IgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlwiKTtyZXR1cm4gaVtyXT13aSxPYmplY3Quc2V0UHJvdG90eXBlT2YoYSxlLnByb3RvdHlwZSksdC5wYXRjaChhKSxhfXJldHVybiBlLnByb3RvdHlwZT1raS5IVE1MRWxlbWVudC5wcm90b3R5cGUsZX0oKX0oQWkpLGZ1bmN0aW9uKHQpe3UoRG9jdW1lbnQucHJvdG90eXBlLFwiY3JlYXRlRWxlbWVudFwiLGZ1bmN0aW9uKGUpe2lmKHRoaXMuX19DRV9oYXNSZWdpc3RyeSl7dmFyIG49dC5sb2NhbE5hbWVUb0RlZmluaXRpb24oZSk7aWYobilyZXR1cm4gbmV3IG4uY29uc3RydWN0b3J9dmFyIGk9a2kuRG9jdW1lbnRfY3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsZSk7cmV0dXJuIHQucGF0Y2goaSksaX0pLHUoRG9jdW1lbnQucHJvdG90eXBlLFwiaW1wb3J0Tm9kZVwiLGZ1bmN0aW9uKGUsbil7dmFyIGk9a2kuRG9jdW1lbnRfaW1wb3J0Tm9kZS5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gdGhpcy5fX0NFX2hhc1JlZ2lzdHJ5P3QucGF0Y2hBbmRVcGdyYWRlVHJlZShpKTp0LnBhdGNoVHJlZShpKSxpfSk7dShEb2N1bWVudC5wcm90b3R5cGUsXCJjcmVhdGVFbGVtZW50TlNcIixmdW5jdGlvbihlLG4pe2lmKHRoaXMuX19DRV9oYXNSZWdpc3RyeSYmKG51bGw9PT1lfHxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIj09PWUpKXt2YXIgaT10LmxvY2FsTmFtZVRvRGVmaW5pdGlvbihuKTtpZihpKXJldHVybiBuZXcgaS5jb25zdHJ1Y3Rvcn12YXIgbz1raS5Eb2N1bWVudF9jcmVhdGVFbGVtZW50TlMuY2FsbCh0aGlzLGUsbik7cmV0dXJuIHQucGF0Y2gobyksb30pLEVpKHQsRG9jdW1lbnQucHJvdG90eXBlLHtwcmVwZW5kOmtpLkRvY3VtZW50X3ByZXBlbmQsYXBwZW5kOmtpLkRvY3VtZW50X2FwcGVuZH0pfShBaSksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwidGV4dENvbnRlbnRcIix7ZW51bWVyYWJsZTpuLmVudW1lcmFibGUsY29uZmlndXJhYmxlOiEwLGdldDpuLmdldCxzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5ub2RlVHlwZSE9PU5vZGUuVEVYVF9OT0RFKXt2YXIgaT12b2lkIDA7aWYodGhpcy5maXJzdENoaWxkKXt2YXIgbz10aGlzLmNoaWxkTm9kZXMscj1vLmxlbmd0aDtpZihyPjAmJmEodGhpcykpe2k9bmV3IEFycmF5KHIpO2Zvcih2YXIgcz0wO3M8cjtzKyspaVtzXT1vW3NdfX1pZihuLnNldC5jYWxsKHRoaXMsZSksaSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl0LmRpc2Nvbm5lY3RUcmVlKGlbbF0pfWVsc2Ugbi5zZXQuY2FsbCh0aGlzLGUpfX0pfXUoTm9kZS5wcm90b3R5cGUsXCJpbnNlcnRCZWZvcmVcIixmdW5jdGlvbihlLG4pe2lmKGUgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZS5jaGlsZE5vZGVzKSxvPWtpLk5vZGVfaW5zZXJ0QmVmb3JlLmNhbGwodGhpcyxlLG4pO2lmKGEodGhpcykpZm9yKHZhciByPTA7cjxpLmxlbmd0aDtyKyspdC5jb25uZWN0VHJlZShpW3JdKTtyZXR1cm4gb312YXIgcz1hKGUpLGw9a2kuTm9kZV9pbnNlcnRCZWZvcmUuY2FsbCh0aGlzLGUsbik7cmV0dXJuIHMmJnQuZGlzY29ubmVjdFRyZWUoZSksYSh0aGlzKSYmdC5jb25uZWN0VHJlZShlKSxsfSksdShOb2RlLnByb3RvdHlwZSxcImFwcGVuZENoaWxkXCIsZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShlLmNoaWxkTm9kZXMpLGk9a2kuTm9kZV9hcHBlbmRDaGlsZC5jYWxsKHRoaXMsZSk7aWYoYSh0aGlzKSlmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0LmNvbm5lY3RUcmVlKG5bb10pO3JldHVybiBpfXZhciByPWEoZSkscz1raS5Ob2RlX2FwcGVuZENoaWxkLmNhbGwodGhpcyxlKTtyZXR1cm4gciYmdC5kaXNjb25uZWN0VHJlZShlKSxhKHRoaXMpJiZ0LmNvbm5lY3RUcmVlKGUpLHN9KSx1KE5vZGUucHJvdG90eXBlLFwiY2xvbmVOb2RlXCIsZnVuY3Rpb24oZSl7dmFyIG49a2kuTm9kZV9jbG9uZU5vZGUuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT90LnBhdGNoQW5kVXBncmFkZVRyZWUobik6dC5wYXRjaFRyZWUobiksbn0pLHUoTm9kZS5wcm90b3R5cGUsXCJyZW1vdmVDaGlsZFwiLGZ1bmN0aW9uKGUpe3ZhciBuPWEoZSksaT1raS5Ob2RlX3JlbW92ZUNoaWxkLmNhbGwodGhpcyxlKTtyZXR1cm4gbiYmdC5kaXNjb25uZWN0VHJlZShlKSxpfSksdShOb2RlLnByb3RvdHlwZSxcInJlcGxhY2VDaGlsZFwiLGZ1bmN0aW9uKGUsbil7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShlLmNoaWxkTm9kZXMpLG89a2kuTm9kZV9yZXBsYWNlQ2hpbGQuY2FsbCh0aGlzLGUsbik7aWYoYSh0aGlzKSl7dC5kaXNjb25uZWN0VHJlZShuKTtmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl0LmNvbm5lY3RUcmVlKGlbcl0pfXJldHVybiBvfXZhciBzPWEoZSksbD1raS5Ob2RlX3JlcGxhY2VDaGlsZC5jYWxsKHRoaXMsZSxuKSx1PWEodGhpcyk7cmV0dXJuIHUmJnQuZGlzY29ubmVjdFRyZWUobikscyYmdC5kaXNjb25uZWN0VHJlZShlKSx1JiZ0LmNvbm5lY3RUcmVlKGUpLGx9KSxraS5Ob2RlX3RleHRDb250ZW50JiZraS5Ob2RlX3RleHRDb250ZW50LmdldD9lKE5vZGUucHJvdG90eXBlLGtpLk5vZGVfdGV4dENvbnRlbnQpOnQuYWRkUGF0Y2goZnVuY3Rpb24odCl7ZSh0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8dGhpcy5jaGlsZE5vZGVzLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMuY2hpbGROb2Rlc1tlXS50ZXh0Q29udGVudCk7cmV0dXJuIHQuam9pbihcIlwiKX0sc2V0OmZ1bmN0aW9uKHQpe2Zvcig7dGhpcy5maXJzdENoaWxkOylraS5Ob2RlX3JlbW92ZUNoaWxkLmNhbGwodGhpcyx0aGlzLmZpcnN0Q2hpbGQpO2tpLk5vZGVfYXBwZW5kQ2hpbGQuY2FsbCh0aGlzLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHQpKX19KX0pfShBaSksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiaW5uZXJIVE1MXCIse2VudW1lcmFibGU6bi5lbnVtZXJhYmxlLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bi5nZXQsc2V0OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMsbz12b2lkIDA7aWYoYSh0aGlzKSYmKG89W10sbCh0aGlzLGZ1bmN0aW9uKHQpe3QhPT1pJiZvLnB1c2godCl9KSksbi5zZXQuY2FsbCh0aGlzLGUpLG8pZm9yKHZhciByPTA7cjxvLmxlbmd0aDtyKyspe3ZhciBzPW9bcl07cy5fX0NFX3N0YXRlPT09bWkuY3VzdG9tJiZ0LmRpc2Nvbm5lY3RlZENhbGxiYWNrKHMpfXJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT90LnBhdGNoQW5kVXBncmFkZVRyZWUodGhpcyk6dC5wYXRjaFRyZWUodGhpcyksZX19KX1mdW5jdGlvbiBuKGUsbil7dShlLFwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50XCIsZnVuY3Rpb24oZSxpKXt2YXIgbz1hKGkpLHI9bi5jYWxsKHRoaXMsZSxpKTtyZXR1cm4gbyYmdC5kaXNjb25uZWN0VHJlZShpKSxhKHIpJiZ0LmNvbm5lY3RUcmVlKGkpLHJ9KX1pZihraS5FbGVtZW50X2F0dGFjaFNoYWRvdz91KEVsZW1lbnQucHJvdG90eXBlLFwiYXR0YWNoU2hhZG93XCIsZnVuY3Rpb24odCl7dmFyIGU9a2kuRWxlbWVudF9hdHRhY2hTaGFkb3cuY2FsbCh0aGlzLHQpO3JldHVybiB0aGlzLl9fQ0Vfc2hhZG93Um9vdD1lLGV9KTpjb25zb2xlLndhcm4oXCJDdXN0b20gRWxlbWVudHM6IGBFbGVtZW50I2F0dGFjaFNoYWRvd2Agd2FzIG5vdCBwYXRjaGVkLlwiKSxraS5FbGVtZW50X2lubmVySFRNTCYma2kuRWxlbWVudF9pbm5lckhUTUwuZ2V0KWUoRWxlbWVudC5wcm90b3R5cGUsa2kuRWxlbWVudF9pbm5lckhUTUwpO2Vsc2UgaWYoa2kuSFRNTEVsZW1lbnRfaW5uZXJIVE1MJiZraS5IVE1MRWxlbWVudF9pbm5lckhUTUwuZ2V0KWUoSFRNTEVsZW1lbnQucHJvdG90eXBlLGtpLkhUTUxFbGVtZW50X2lubmVySFRNTCk7ZWxzZXt2YXIgaT1raS5Eb2N1bWVudF9jcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsXCJkaXZcIik7dC5hZGRQYXRjaChmdW5jdGlvbih0KXtlKHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBraS5Ob2RlX2Nsb25lTm9kZS5jYWxsKHRoaXMsITApLmlubmVySFRNTH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPVwidGVtcGxhdGVcIj09PXRoaXMubG9jYWxOYW1lP3RoaXMuY29udGVudDp0aGlzO2ZvcihpLmlubmVySFRNTD10O2UuY2hpbGROb2Rlcy5sZW5ndGg+MDspa2kuTm9kZV9yZW1vdmVDaGlsZC5jYWxsKGUsZS5jaGlsZE5vZGVzWzBdKTtmb3IoO2kuY2hpbGROb2Rlcy5sZW5ndGg+MDspa2kuTm9kZV9hcHBlbmRDaGlsZC5jYWxsKGUsaS5jaGlsZE5vZGVzWzBdKX19KX0pfXUoRWxlbWVudC5wcm90b3R5cGUsXCJzZXRBdHRyaWJ1dGVcIixmdW5jdGlvbihlLG4pe2lmKHRoaXMuX19DRV9zdGF0ZSE9PW1pLmN1c3RvbSlyZXR1cm4ga2kuRWxlbWVudF9zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUsbik7dmFyIGk9a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpO2tpLkVsZW1lbnRfc2V0QXR0cmlidXRlLmNhbGwodGhpcyxlLG4pLG49a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpLHQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsZSxpLG4sbnVsbCl9KSx1KEVsZW1lbnQucHJvdG90eXBlLFwic2V0QXR0cmlidXRlTlNcIixmdW5jdGlvbihlLG4saSl7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3NldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4saSk7dmFyIG89a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGVOUy5jYWxsKHRoaXMsZSxuKTtraS5FbGVtZW50X3NldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4saSksaT1raS5FbGVtZW50X2dldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pLHQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsbixvLGksZSl9KSx1KEVsZW1lbnQucHJvdG90eXBlLFwicmVtb3ZlQXR0cmlidXRlXCIsZnVuY3Rpb24oZSl7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3JlbW92ZUF0dHJpYnV0ZS5jYWxsKHRoaXMsZSk7dmFyIG49a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpO2tpLkVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcyxlKSxudWxsIT09biYmdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxlLG4sbnVsbCxudWxsKX0pLHUoRWxlbWVudC5wcm90b3R5cGUsXCJyZW1vdmVBdHRyaWJ1dGVOU1wiLGZ1bmN0aW9uKGUsbil7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3JlbW92ZUF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO3ZhciBpPWtpLkVsZW1lbnRfZ2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbik7a2kuRWxlbWVudF9yZW1vdmVBdHRyaWJ1dGVOUy5jYWxsKHRoaXMsZSxuKTt2YXIgbz1raS5FbGVtZW50X2dldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO2khPT1vJiZ0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0aGlzLG4saSxvLGUpfSksa2kuSFRNTEVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50P24oSFRNTEVsZW1lbnQucHJvdG90eXBlLGtpLkhUTUxFbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudCk6a2kuRWxlbWVudF9pbnNlcnRBZGphY2VudEVsZW1lbnQ/bihFbGVtZW50LnByb3RvdHlwZSxraS5FbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudCk6Y29uc29sZS53YXJuKFwiQ3VzdG9tIEVsZW1lbnRzOiBgRWxlbWVudCNpbnNlcnRBZGphY2VudEVsZW1lbnRgIHdhcyBub3QgcGF0Y2hlZC5cIiksRWkodCxFbGVtZW50LnByb3RvdHlwZSx7cHJlcGVuZDpraS5FbGVtZW50X3ByZXBlbmQsYXBwZW5kOmtpLkVsZW1lbnRfYXBwZW5kfSksZnVuY3Rpb24odCxlLG4pe2UuYmVmb3JlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KTtuLmJlZm9yZS5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19LGUuYWZ0ZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pO24uYWZ0ZXIuYXBwbHkodGhpcyxpKTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl0LmRpc2Nvbm5lY3RUcmVlKHJbc10pO2lmKGEodGhpcykpZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspe3ZhciB1PWlbbF07dSBpbnN0YW5jZW9mIEVsZW1lbnQmJnQuY29ubmVjdFRyZWUodSl9fSxlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KSxzPWEodGhpcyk7bi5yZXBsYWNlV2l0aC5hcHBseSh0aGlzLGkpO2Zvcih2YXIgbD0wO2w8ci5sZW5ndGg7bCsrKXQuZGlzY29ubmVjdFRyZWUocltsXSk7aWYocyl7dC5kaXNjb25uZWN0VHJlZSh0aGlzKTtmb3IodmFyIHU9MDt1PGkubGVuZ3RoO3UrKyl7dmFyIGM9aVt1XTtjIGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZShjKX19fSxlLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBlPWEodGhpcyk7bi5yZW1vdmUuY2FsbCh0aGlzKSxlJiZ0LmRpc2Nvbm5lY3RUcmVlKHRoaXMpfX0odCxFbGVtZW50LnByb3RvdHlwZSx7YmVmb3JlOmtpLkVsZW1lbnRfYmVmb3JlLGFmdGVyOmtpLkVsZW1lbnRfYWZ0ZXIscmVwbGFjZVdpdGg6a2kuRWxlbWVudF9yZXBsYWNlV2l0aCxyZW1vdmU6a2kuRWxlbWVudF9yZW1vdmV9KX0oQWkpLGRvY3VtZW50Ll9fQ0VfaGFzUmVnaXN0cnk9ITA7dmFyIFNpPW5ldyB5aShBaSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdyxcImN1c3RvbUVsZW1lbnRzXCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOlNpfSl9IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtkPSExO3ZhciB0PWY7Zj1bXSx0LnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC51aWRfLWUudWlkX30pO3ZhciBuPSExO3QuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LnRha2VSZWNvcmRzKCk7IWZ1bmN0aW9uKHQpe3Qubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dS5nZXQoZSk7biYmbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uub2JzZXJ2ZXI9PT10JiZlLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX0odCksZS5sZW5ndGgmJih0LmNhbGxiYWNrXyhlLHQpLG49ITApfSksbiYmZSgpfWZ1bmN0aW9uIG4odCxlKXtmb3IodmFyIG49dDtuO249bi5wYXJlbnROb2RlKXt2YXIgaT11LmdldChuKTtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcj1pW29dLGE9ci5vcHRpb25zO2lmKG49PT10fHxhLnN1YnRyZWUpe3ZhciBzPWUoYSk7cyYmci5lbnF1ZXVlKHMpfX19fWZ1bmN0aW9uIGkodCl7dGhpcy5jYWxsYmFja189dCx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3B9ZnVuY3Rpb24gbyh0LGUpe3RoaXMudHlwZT10LHRoaXMudGFyZ2V0PWUsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gZz1uZXcgbyh0LGUpfWZ1bmN0aW9uIGEodCl7cmV0dXJuIG18fChtPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBvKHQudHlwZSx0LnRhcmdldCk7cmV0dXJuIGUuYWRkZWROb2Rlcz10LmFkZGVkTm9kZXMuc2xpY2UoKSxlLnJlbW92ZWROb2Rlcz10LnJlbW92ZWROb2Rlcy5zbGljZSgpLGUucHJldmlvdXNTaWJsaW5nPXQucHJldmlvdXNTaWJsaW5nLGUubmV4dFNpYmxpbmc9dC5uZXh0U2libGluZyxlLmF0dHJpYnV0ZU5hbWU9dC5hdHRyaWJ1dGVOYW1lLGUuYXR0cmlidXRlTmFtZXNwYWNlPXQuYXR0cmlidXRlTmFtZXNwYWNlLGUub2xkVmFsdWU9dC5vbGRWYWx1ZSxlfShnKSxtLm9sZFZhbHVlPXQsbSl9ZnVuY3Rpb24gcyh0LGUsbil7dGhpcy5vYnNlcnZlcj10LHRoaXMudGFyZ2V0PWUsdGhpcy5vcHRpb25zPW4sdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfWlmKCF0LkpzTXV0YXRpb25PYnNlcnZlcil7dmFyIGwsdT1uZXcgV2Vha01hcDtpZigvVHJpZGVudHxFZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKWw9c2V0VGltZW91dDtlbHNlIGlmKHdpbmRvdy5zZXRJbW1lZGlhdGUpbD13aW5kb3cuc2V0SW1tZWRpYXRlO2Vsc2V7dmFyIGM9W10saD1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24odCl7aWYodC5kYXRhPT09aCl7dmFyIGU9YztjPVtdLGUuZm9yRWFjaChmdW5jdGlvbih0KXt0KCl9KX19KSxsPWZ1bmN0aW9uKHQpe2MucHVzaCh0KSx3aW5kb3cucG9zdE1lc3NhZ2UoaCxcIipcIil9fXZhciBkPSExLGY9W10scD0wO2kucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKHQsZSl7aWYodD1mdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZ3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKHQpfHx0fSh0KSwhZS5jaGlsZExpc3QmJiFlLmF0dHJpYnV0ZXMmJiFlLmNoYXJhY3RlckRhdGF8fGUuYXR0cmlidXRlT2xkVmFsdWUmJiFlLmF0dHJpYnV0ZXN8fGUuYXR0cmlidXRlRmlsdGVyJiZlLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFlLmF0dHJpYnV0ZXN8fGUuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhZS5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgbj11LmdldCh0KTtufHx1LnNldCh0LG49W10pO2Zvcih2YXIgaSxvPTA7bzxuLmxlbmd0aDtvKyspaWYobltvXS5vYnNlcnZlcj09PXRoaXMpeyhpPW5bb10pLnJlbW92ZUxpc3RlbmVycygpLGkub3B0aW9ucz1lO2JyZWFrfWl8fChpPW5ldyBzKHRoaXMsdCxlKSxuLnB1c2goaSksdGhpcy5ub2Rlc18ucHVzaCh0KSksaS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24odCl7Zm9yKHZhciBlPXUuZ2V0KHQpLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpZihpLm9ic2VydmVyPT09dGhpcyl7aS5yZW1vdmVMaXN0ZW5lcnMoKSxlLnNwbGljZShuLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSx0fX07dmFyIGcsbTtzLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9ic2VydmVyLnJlY29yZHNfLGk9bi5sZW5ndGg7aWYobi5sZW5ndGg+MCl7dmFyIG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWU/dDptJiZmdW5jdGlvbih0KXtyZXR1cm4gdD09PW18fHQ9PT1nfSh0KT9tOm51bGx9KG5baS0xXSx0KTtpZihvKXJldHVybiB2b2lkKG5baS0xXT1vKX1lbHNlIWZ1bmN0aW9uKHQpe2YucHVzaCh0KSxkfHwoZD0hMCxsKGUpKX0odGhpcy5vYnNlcnZlcik7bltpXT10fSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucztlLmF0dHJpYnV0ZXMmJnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUF0dHJNb2RpZmllZFwiLHRoaXMsITApLGUuY2hhcmFjdGVyRGF0YSYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsdGhpcywhMCksZS5jaGlsZExpc3QmJnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVJbnNlcnRlZFwiLHRoaXMsITApLChlLmNoaWxkTGlzdHx8ZS5zdWJ0cmVlKSYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZVJlbW92ZWRcIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnM7ZS5hdHRyaWJ1dGVzJiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIix0aGlzLCEwKSxlLmNoYXJhY3RlckRhdGEmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLHRoaXMsITApLGUuY2hpbGRMaXN0JiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Ob2RlSW5zZXJ0ZWRcIix0aGlzLCEwKSwoZS5jaGlsZExpc3R8fGUuc3VidHJlZSkmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKHQpe2lmKHQhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHQpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKHQpO3ZhciBlPXUuZ2V0KHQpO2V8fHUuc2V0KHQsZT1bXSksZS5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSx0LmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHQpO2Zvcih2YXIgZT11LmdldCh0KSxuPTA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXRoaXMpe2Uuc3BsaWNlKG4sMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24odCl7c3dpdGNoKHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdC50eXBlKXtjYXNlXCJET01BdHRyTW9kaWZpZWRcIjp2YXIgZT10LmF0dHJOYW1lLGk9dC5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksbz10LnRhcmdldDsocz1uZXcgcihcImF0dHJpYnV0ZXNcIixvKSkuYXR0cmlidXRlTmFtZT1lLHMuYXR0cmlidXRlTmFtZXNwYWNlPWk7bD10LmF0dHJDaGFuZ2U9PT1NdXRhdGlvbkV2ZW50LkFERElUSU9OP251bGw6dC5wcmV2VmFsdWU7bihvLGZ1bmN0aW9uKHQpe2lmKHQuYXR0cmlidXRlcyYmKCF0LmF0dHJpYnV0ZUZpbHRlcnx8IXQuYXR0cmlidXRlRmlsdGVyLmxlbmd0aHx8LTEhPT10LmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUpfHwtMSE9PXQuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoaSkpKXJldHVybiB0LmF0dHJpYnV0ZU9sZFZhbHVlP2EobCk6c30pO2JyZWFrO2Nhc2VcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiOnZhciBzPXIoXCJjaGFyYWN0ZXJEYXRhXCIsbz10LnRhcmdldCksbD10LnByZXZWYWx1ZTtuKG8sZnVuY3Rpb24odCl7aWYodC5jaGFyYWN0ZXJEYXRhKXJldHVybiB0LmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9hKGwpOnN9KTticmVhaztjYXNlXCJET01Ob2RlUmVtb3ZlZFwiOnRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIodC50YXJnZXQpO2Nhc2VcIkRPTU5vZGVJbnNlcnRlZFwiOnZhciB1LGMsaD10LnRhcmdldDtcIkRPTU5vZGVJbnNlcnRlZFwiPT09dC50eXBlPyh1PVtoXSxjPVtdKToodT1bXSxjPVtoXSk7dmFyIGQ9aC5wcmV2aW91c1NpYmxpbmcsZj1oLm5leHRTaWJsaW5nOyhzPXIoXCJjaGlsZExpc3RcIix0LnRhcmdldC5wYXJlbnROb2RlKSkuYWRkZWROb2Rlcz11LHMucmVtb3ZlZE5vZGVzPWMscy5wcmV2aW91c1NpYmxpbmc9ZCxzLm5leHRTaWJsaW5nPWYsbih0LnJlbGF0ZWROb2RlLGZ1bmN0aW9uKHQpe2lmKHQuY2hpbGRMaXN0KXJldHVybiBzfSl9Zz1tPXZvaWQgMH19LHQuSnNNdXRhdGlvbk9ic2VydmVyPWksdC5NdXRhdGlvbk9ic2VydmVyfHwodC5NdXRhdGlvbk9ic2VydmVyPWksaS5faXNQb2x5ZmlsbGVkPSEwKX19KHNlbGYpLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gbFtzXT1pLmFwcGx5KGUsdCkscysrfWZ1bmN0aW9uIGkodCl7dmFyIG49W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgdD90LmFwcGx5KGUsbik6bmV3IEZ1bmN0aW9uKFwiXCIrdCkoKX19ZnVuY3Rpb24gbyh0KXtpZih1KXNldFRpbWVvdXQoaShvLHQpLDApO2Vsc2V7dmFyIGU9bFt0XTtpZihlKXt1PSEwO3RyeXtlKCl9ZmluYWxseXtyKHQpLHU9ITF9fX19ZnVuY3Rpb24gcih0KXtkZWxldGUgbFt0XX1pZighdC5zZXRJbW1lZGlhdGUpe3ZhciBhLHM9MSxsPXt9LHU9ITEsYz10LmRvY3VtZW50LGg9T2JqZWN0LmdldFByb3RvdHlwZU9mJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7aD1oJiZoLnNldFRpbWVvdXQ/aDp0LFwiW29iamVjdCBwcm9jZXNzXVwiPT09e30udG9TdHJpbmcuY2FsbCh0LnByb2Nlc3MpP2E9ZnVuY3Rpb24oKXt2YXIgdD1uKGFyZ3VtZW50cyk7cmV0dXJuIHByb2Nlc3MubmV4dFRpY2soaShvLHQpKSx0fTpmdW5jdGlvbigpe2lmKHQucG9zdE1lc3NhZ2UmJiF0LmltcG9ydFNjcmlwdHMpe3ZhciBlPSEwLG49dC5vbm1lc3NhZ2U7cmV0dXJuIHQub25tZXNzYWdlPWZ1bmN0aW9uKCl7ZT0hMX0sdC5wb3N0TWVzc2FnZShcIlwiLFwiKlwiKSx0Lm9ubWVzc2FnZT1uLGV9fSgpP2Z1bmN0aW9uKCl7dmFyIGU9XCJzZXRJbW1lZGlhdGUkXCIrTWF0aC5yYW5kb20oKStcIiRcIixpPWZ1bmN0aW9uKG4pe24uc291cmNlPT09dCYmXCJzdHJpbmdcIj09dHlwZW9mIG4uZGF0YSYmMD09PW4uZGF0YS5pbmRleE9mKGUpJiZvKCtuLmRhdGEuc2xpY2UoZS5sZW5ndGgpKX07dC5hZGRFdmVudExpc3RlbmVyP3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixpLCExKTp0LmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsaSksYT1mdW5jdGlvbigpe3ZhciBpPW4oYXJndW1lbnRzKTtyZXR1cm4gdC5wb3N0TWVzc2FnZShlK2ksXCIqXCIpLGl9fSgpOnQuTWVzc2FnZUNoYW5uZWw/ZnVuY3Rpb24oKXt2YXIgdD1uZXcgTWVzc2FnZUNoYW5uZWw7dC5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7byh0LmRhdGEpfSxhPWZ1bmN0aW9uKCl7dmFyIGU9bihhcmd1bWVudHMpO3JldHVybiB0LnBvcnQyLnBvc3RNZXNzYWdlKGUpLGV9fSgpOmMmJlwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBjLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik/ZnVuY3Rpb24oKXt2YXIgdD1jLmRvY3VtZW50RWxlbWVudDthPWZ1bmN0aW9uKCl7dmFyIGU9bihhcmd1bWVudHMpLGk9Yy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3JldHVybiBpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe28oZSksaS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCx0LnJlbW92ZUNoaWxkKGkpLGk9bnVsbH0sdC5hcHBlbmRDaGlsZChpKSxlfX0oKTphPWZ1bmN0aW9uKCl7dmFyIHQ9bihhcmd1bWVudHMpO3JldHVybiBzZXRUaW1lb3V0KGkobyx0KSwwKSx0fSxoLnNldEltbWVkaWF0ZT1hLGguY2xlYXJJbW1lZGlhdGU9cn19KHNlbGYpLGZ1bmN0aW9uKCl7dmFyIHQ9e2Vuc3VyZVZpZXdwb3J0RWxlbWVudDpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpO3JldHVybiB0fHwoKHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1ldGFcIikpLm5hbWU9XCJ2aWV3cG9ydFwiLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodCkpLHR9LHNldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dC5lbnN1cmVWaWV3cG9ydEVsZW1lbnQoKTtlJiYoZS5oYXNBdHRyaWJ1dGUoXCJjb250ZW50XCIpfHxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIixcIndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEsbWF4aW11bS1zY2FsZT0xLG1pbmltdW0tc2NhbGU9MSx1c2VyLXNjYWxhYmxlPW5vXCIpKX19O3dpbmRvdy5WaWV3cG9ydD10fSgpO3ZhciBQaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpfXJldHVybiBiKGUsdCksZX0oZnVuY3Rpb24oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBIVE1MRWxlbWVudCl7dmFyIHQ9ZnVuY3Rpb24oKXt9O3JldHVybiB0LnByb3RvdHlwZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHR9cmV0dXJuIEhUTUxFbGVtZW50fSgpKSxPaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7Zm9yKHQudGVtcGxhdGU9dC5pbm5lckhUTUw7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7cmV0dXJuIHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlIT09ZG9jdW1lbnQuYm9keSYmUS53YXJuKFwib25zLXRlbXBsYXRlIChpZCA9IFwiK3RoaXMuZ2V0QXR0cmlidXRlKFwiaWRcIikrXCIpIG11c3QgYmUgbG9jYXRlZCBqdXN0IHVuZGVyIGRvY3VtZW50LmJvZHlcIisodGhpcy5wYXJlbnROb2RlLm91dGVySFRNTD9cIjpcXG5cXG5cIit0aGlzLnBhcmVudE5vZGUub3V0ZXJIVE1MOlwiLlwiKSk7dmFyIHQ9bmV3IEN1c3RvbUV2ZW50KFwiX3RlbXBsYXRlbG9hZGVkXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pO3QudGVtcGxhdGU9dGhpcy50ZW1wbGF0ZSx0LnRlbXBsYXRlSWQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJpZFwiKSx0aGlzLmRpc3BhdGNoRXZlbnQodCl9fV0pLGV9KCk7Yy5UZW1wbGF0ZT1PaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdGVtcGxhdGVcIixPaSk7dmFyIHhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7aWYobnVsbCE9PUMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKSl0Ll9wbGF0Zm9ybVVwZGF0ZSgpO2Vsc2UgaWYoIXQuX2lzQWxsb3dlZFBsYXRmb3JtKCkpe2Zvcig7dC5jaGlsZE5vZGVzWzBdOyl0LmNoaWxkTm9kZXNbMF0ucmVtb3ZlKCk7dC5fcGxhdGZvcm1VcGRhdGUoKX19KSx0Ll9vbk9yaWVudGF0aW9uQ2hhbmdlKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7T3Qub24oXCJjaGFuZ2VcIix0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlLmJpbmQodGhpcykpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe1wib3JpZW50YXRpb25cIj09PXQmJnRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UoKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7T3Qub2ZmKFwiY2hhbmdlXCIsdGhpcy5fb25PcmllbnRhdGlvbkNoYW5nZSl9fSx7a2V5OlwiX3BsYXRmb3JtVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9dGhpcy5faXNBbGxvd2VkUGxhdGZvcm0oKT9cIlwiOlwibm9uZVwifX0se2tleTpcIl9pc0FsbG93ZWRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZ2V0QXR0cmlidXRlKFwicGxhdGZvcm1cIil8fHRoaXMuZ2V0QXR0cmlidXRlKFwicGxhdGZvcm1cIikuc3BsaXQoL1xccysvKS5pbmRleE9mKEMuZ2V0TW9iaWxlT1MoKSk+PTB9fSx7a2V5OlwiX29uT3JpZW50YXRpb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGFzQXR0cmlidXRlKFwib3JpZW50YXRpb25cIikmJnRoaXMuX2lzQWxsb3dlZFBsYXRmb3JtKCkpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwib3JpZW50YXRpb25cIikudG9Mb3dlckNhc2UoKSxlPU90LmlzUG9ydHJhaXQoKT9cInBvcnRyYWl0XCI6XCJsYW5kc2NhcGVcIjt0aGlzLnN0eWxlLmRpc3BsYXk9dD09PWU/XCJcIjpcIm5vbmVcIn19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJvcmllbnRhdGlvblwiXX19XSksZX0oKTtjLklmPXhpLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1pZlwiLHhpKTt2YXIgVGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3AodGhpcyx0KSx0aGlzLnRpbWluZz1lLnRpbWluZ3x8XCJsaW5lYXJcIix0aGlzLmR1cmF0aW9uPWUuZHVyYXRpb258fDAsdGhpcy5kZWxheT1lLmRlbGF5fHwwLHRoaXMuZGVmPXt0aW1pbmc6dGhpcy50aW1pbmcsZHVyYXRpb246dGhpcy5kdXJhdGlvbixkZWxheTp0aGlzLmRlbGF5fX1yZXR1cm4gZyh0LG51bGwsW3trZXk6XCJleHRlbmRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxlPXRoaXMsbj1mdW5jdGlvbigpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpLFEuZXh0ZW5kKHRoaXMsdCl9O3JldHVybiBuLnByb3RvdHlwZT10aGlzLnByb3RvdHlwZSxufX1dKSx0fSgpLExpPXt9O0xpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcIm9uc2ZsYWctaXBob25leC1wb3J0cmFpdFwiKSYmd2luZG93LmlubmVyV2lkdGg8d2luZG93LmlubmVySGVpZ2h0fSxMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwib25zZmxhZy1pcGhvbmV4LWxhbmRzY2FwZVwiKSYmd2luZG93LmlubmVyV2lkdGg+PXdpbmRvdy5pbm5lckhlaWdodH0sTGkuZ2V0U2FmZUFyZWFMZW5ndGhzPWZ1bmN0aW9uKCl7cmV0dXJuIExpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT97dG9wOjQ0LHJpZ2h0OjAsYm90dG9tOjM0LGxlZnQ6MH06TGkuaXNJUGhvbmVYTGFuZHNjYXBlUGF0Y2hBY3RpdmUoKT97dG9wOjAscmlnaHQ6NDQsYm90dG9tOjIxLGxlZnQ6NDR9Ont0b3A6MCxyaWdodDowLGJvdHRvbTowLGxlZnQ6MH19LExpLmdldFNhZmVBcmVhRE9NUmVjdD1mdW5jdGlvbigpe3ZhciB0PXZvaWQgMDtyZXR1cm4gdD1MaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/e3g6MCx5OjQ0LHdpZHRoOndpbmRvdy5pbm5lcldpZHRoLGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHQtNzh9OkxpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlKCk/e3g6NDQseTowLHdpZHRoOndpbmRvdy5pbm5lcldpZHRoLTg4LGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHQtMjF9Ont4OjAseTowLHdpZHRoOndpbmRvdy5pbm5lcldpZHRoLGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHR9LF8oe30sdCx7bGVmdDp0LngsdG9wOnQueSxyaWdodDp0LngrdC53aWR0aCxib3R0b206dC55K3QuaGVpZ2h0fSl9O3ZhciBNaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCksRGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2VcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5tYXNrVGltaW5nPVwibGluZWFyXCIsbC5tYXNrRHVyYXRpb249LjIsbH1yZXR1cm4gYihlLE1pKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MH0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MX0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgODAlLCAwKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MX0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MH0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCA4MCUsIDApXCIsb3BhY2l0eTowfSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19XSksZX0oKSxJaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLm1hc2tUaW1pbmc9XCJsaW5lYXJcIixsLm1hc2tEdXJhdGlvbj0uMixMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgNDhweClcIjpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP2wubGlmdEFtb3VudD1cImNhbGMoMTAwJSArIDMzcHgpXCI6bC5saWZ0QW1vdW50PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LzItMStcInB4XCIsbH1yZXR1cm4gYihlLE1pKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MH0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MX0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5saWZ0QW1vdW50K1wiLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7bnQucnVuQWxsKG50KHQuX21hc2spLnF1ZXVlKHtvcGFjaXR5OjF9KS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtvcGFjaXR5OjB9LHtkdXJhdGlvbjp0aGlzLm1hc2tEdXJhdGlvbix0aW1pbmc6dGhpcy5tYXNrVGltaW5nfSksbnQodC5fc2hlZXQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmxpZnRBbW91bnQrXCIsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX1dKSxlfSgpLE5pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jb25zdHJ1Y3Rvcj09PWUmJlEudGhyb3dBYnN0cmFjdCgpLHQuX3Zpc2libGU9ITEsdC5fZG9vckxvY2s9bmV3IE50LHQuX2NhbmNlbD10Ll9jYW5jZWwuYmluZCh0KSx0Ll9zZWxmQ2FtZWxOYW1lPVEuY2FtZWxpemUodC50YWdOYW1lLnNsaWNlKDQpKSx0Ll9kZWZhdWx0REJCPWZ1bmN0aW9uKGUpe3JldHVybiB0LmNhbmNlbGFibGU/dC5fY2FuY2VsKCk6ZS5jYWxsUGFyZW50SGFuZGxlcigpfSx0Ll9hbmltYXRvckZhY3Rvcnk9dC5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX3RvZ2dsZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5zdHlsZS5kaXNwbGF5PXQ/XCJibG9ja1wiOlwibm9uZVwifX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fV0pLGcoZSxbe2tleTpcIl9jYW5jZWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jYW5jZWxhYmxlJiYhdGhpcy5fcnVubmluZyYmKHRoaXMuX3J1bm5pbmc9ITAsdGhpcy5oaWRlKCkudGhlbihmdW5jdGlvbigpe3QuX3J1bm5pbmc9ITEsUS50cmlnZ2VyRWxlbWVudEV2ZW50KHQsXCJkaWFsb2ctY2FuY2VsXCIpfSxmdW5jdGlvbigpe3JldHVybiB0Ll9ydW5uaW5nPSExfSkpfX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07cmV0dXJuIHRoaXMuX3NldFZpc2libGUuYXBwbHkodGhpcyxbITBdLmNvbmNhdChlKSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fc2V0VmlzaWJsZS5hcHBseSh0aGlzLFshMV0uY29uY2F0KGUpKX19LHtrZXk6XCJ0b2dnbGVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07cmV0dXJuIHRoaXMuX3NldFZpc2libGUuYXBwbHkodGhpcyxbIXRoaXMudmlzaWJsZV0uY29uY2F0KGUpKX19LHtrZXk6XCJfc2V0VmlzaWJsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxyPXQ/XCJzaG93XCI6XCJoaWRlXCI7KG89Xyh7fSxvKSkuYW5pbWF0aW9uT3B0aW9ucz1RLmV4dGVuZChvLmFuaW1hdGlvbk9wdGlvbnN8fHt9LE8ucGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nKHRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpKTt2YXIgYT0hMTtyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwcmVcIityLChlPXt9LG0oZSx0aGlzLl9zZWxmQ2FtZWxOYW1lLHRoaXMpLG0oZSxcImNhbmNlbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGE9ITB9KSxlKSksYT9Qcm9taXNlLnJlamVjdChcIkNhbmNlbGVkIGluIHByZVwiK3IrXCIgZXZlbnQuXCIpOm5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe2kuX2Rvb3JMb2NrLndhaXRVbmxvY2soZnVuY3Rpb24oKXt2YXIgYT1pLl9kb29yTG9jay5sb2NrKCkscz1pLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3Iobyk7dCYmaS5fdG9nZ2xlU3R5bGUoITAsbyksaS5fdmlzaWJsZT10LFEuaW9zUGFnZVNjcm9sbEZpeCh0KSxuKGksZnVuY3Rpb24oKXtzW3JdKGksZnVuY3Rpb24oKXshdCYmaS5fdG9nZ2xlU3R5bGUoITEsbyksYSgpLFEucHJvcGFnYXRlQWN0aW9uKGksXCJfXCIrciksUS50cmlnZ2VyRWxlbWVudEV2ZW50KGksXCJwb3N0XCIrcixtKHt9LGkuX3NlbGZDYW1lbE5hbWUsaSkpLG8uY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmby5jYWxsYmFjayhpKSxlKGkpfSl9KX0pfSl9fSx7a2V5OlwiX3VwZGF0ZU1hc2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5fbWFzayYmdC5nZXRBdHRyaWJ1dGUoXCJtYXNrLWNvbG9yXCIpJiYodC5fbWFzay5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dC5nZXRBdHRyaWJ1dGUoXCJtYXNrLWNvbG9yXCIpKX0pfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMub25EZXZpY2VCYWNrQnV0dG9uPXRoaXMuX2RlZmF1bHREQkIuYmluZCh0aGlzKSxuKHRoaXMsZnVuY3Rpb24oKXt0Ll9tYXNrJiYodC5fbWFzay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0Ll9jYW5jZWwsITEpLFEuaW9zTWFza1Njcm9sbEZpeCh0Ll9tYXNrLCEwKSl9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPW51bGwsdGhpcy5fbWFzayYmKHRoaXMuX21hc2sucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fY2FuY2VsLCExKSxRLmlvc01hc2tTY3JvbGxGaXgodGhpcy5fbWFzaywhMSkpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLHRoaXMuX3NjaGVtZSk7YnJlYWs7Y2FzZVwiYW5pbWF0aW9uXCI6dGhpcy5fYW5pbWF0b3JGYWN0b3J5PXRoaXMuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpO2JyZWFrO2Nhc2VcIm1hc2stY29sb3JcIjp0aGlzLl91cGRhdGVNYXNrKCl9fX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fSx7a2V5OlwidmlzaWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aXNpYmxlfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwiY2FuY2VsYWJsZVwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImNhbmNlbGFibGVcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiY2FuY2VsYWJsZVwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJhbmltYXRpb25cIixcIm1hc2stY29sb3JcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicHJlc2hvd1wiLFwicG9zdHNob3dcIixcInByZWhpZGVcIixcInBvc3RoaWRlXCIsXCJkaWFsb2ctY2FuY2VsXCJdfX1dKSxlfSgpLEJpPXtcIi5hY3Rpb24tc2hlZXRcIjpcImFjdGlvbi1zaGVldC0tKlwiLFwiLmFjdGlvbi1zaGVldC1tYXNrXCI6XCJhY3Rpb24tc2hlZXQtbWFzay0tKlwiLFwiLmFjdGlvbi1zaGVldC10aXRsZVwiOlwiYWN0aW9uLXNoZWV0LXRpdGxlLS0qXCJ9LGppPXtkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/RGk6SWl9LG5vbmU6TWl9LEhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6amksYmFzZUNsYXNzOk1pLGJhc2VDbGFzc05hbWU6XCJBY3Rpb25TaGVldEFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksdGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuc3R5bGUuekluZGV4PTEwMDAxLCF0aGlzLl9zaGVldCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodC5jbGFzc0xpc3QuYWRkKFwiYWN0aW9uLXNoZWV0XCIpO3RoaXMuZmlyc3RDaGlsZDspdC5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO3RoaXMuYXBwZW5kQ2hpbGQodCl9aWYoIXRoaXMuX3RpdGxlJiZ0aGlzLmhhc0F0dHJpYnV0ZShcInRpdGxlXCIpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaW5uZXJIVE1MPXRoaXMuZ2V0QXR0cmlidXRlKFwidGl0bGVcIiksZS5jbGFzc0xpc3QuYWRkKFwiYWN0aW9uLXNoZWV0LXRpdGxlXCIpLHRoaXMuX3NoZWV0Lmluc2VydEJlZm9yZShlLHRoaXMuX3NoZWV0LmZpcnN0Q2hpbGQpfWlmKCF0aGlzLl9tYXNrKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NMaXN0LmFkZChcImFjdGlvbi1zaGVldC1tYXNrXCIpLHRoaXMuaW5zZXJ0QmVmb3JlKG4sdGhpcy5maXJzdENoaWxkKX10aGlzLl9zaGVldC5zdHlsZS56SW5kZXg9MjAwMDEsdGhpcy5fbWFzay5zdHlsZS56SW5kZXg9MmU0LEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfdXBkYXRlVGl0bGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3RpdGxlJiYodGhpcy5fdGl0bGUuaW5uZXJIVE1MPXRoaXMuZ2V0QXR0cmlidXRlKFwidGl0bGVcIikpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXtcInRpdGxlXCI9PT10P3RoaXMuX3VwZGF0ZVRpdGxlKCk6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQml9fSx7a2V5OlwiX21hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5hY3Rpb24tc2hlZXQtbWFza1wiKX19LHtrZXk6XCJfc2hlZXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5hY3Rpb24tc2hlZXRcIil9fSx7a2V5OlwiX3RpdGxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5hY3Rpb24tc2hlZXQtdGl0bGVcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIE1pfHxRLnRocm93QW5pbWF0b3IoXCJBY3Rpb25TaGVldFwiKSxqaVt0XT1lfX0se2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdCh3KHYoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxcIm9ic2VydmVkQXR0cmlidXRlc1wiLHRoaXMpKSxbXCJ0aXRsZVwiXSl9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGppfX0se2tleTpcIkFjdGlvblNoZWV0QW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWl9fV0pLGV9KCk7Yy5BY3Rpb25TaGVldD1IaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWN0aW9uLXNoZWV0XCIsSGkpO3ZhciBSaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuY29uc3RydWN0b3I9PT1lJiZRLnRocm93QWJzdHJhY3QoKSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9yaXBwbGVPcHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpc119fV0pLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKHRoaXMuX2RlZmF1bHRDbGFzc05hbWUpLCF0aGlzLl9pY29uJiZ0aGlzLmhhc0F0dHJpYnV0ZShcImljb25cIikpe1EuY2hlY2tNaXNzaW5nSW1wb3J0KFwiSWNvblwiKTt2YXIgdD1RLmNyZWF0ZUVsZW1lbnQoJzxvbnMtaWNvbiBpY29uPVwiJyt0aGlzLmdldEF0dHJpYnV0ZShcImljb25cIikrJ1wiPjwvb25zLWljb24+Jyk7dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RlZmF1bHRDbGFzc05hbWUucmVwbGFjZShcImJ1dHRvblwiLFwiaWNvblwiKSksdGhpcy5pbnNlcnRCZWZvcmUodCx0aGlzLmZpcnN0Q2hpbGQpfXRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfdXBkYXRlSWNvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faWNvbiYmdGhpcy5faWNvbi5zZXRBdHRyaWJ1dGUoXCJpY29uXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpKX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yaXBwbGVPcHQmJlEudXBkYXRlUmlwcGxlLmFwcGx5KFEsdyh0aGlzLl9yaXBwbGVPcHQpKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyx0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lLHRoaXMuX3NjaGVtZSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLHRoaXMuX3NjaGVtZSk7YnJlYWs7Y2FzZVwiaWNvblwiOnRoaXMuX3VwZGF0ZUljb24oKTticmVhaztjYXNlXCJyaXBwbGVcIjp0aGlzLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKSYmdGhpcy5fdXBkYXRlUmlwcGxlKCl9fX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwiX2ljb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1pY29uXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCIsXCJpY29uXCIsXCJyaXBwbGVcIl19fV0pLGV9KCksRmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUmkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57XCJcIjpcImFjdGlvbi1zaGVldC1idXR0b24tLSpcIixcIi5hY3Rpb24tc2hlZXQtaWNvblwiOlwiYWN0aW9uLXNoZWV0LWljb24tLSpcIn19fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImFjdGlvbi1zaGVldC1idXR0b25cIn19LHtrZXk6XCJfcmlwcGxlT3B0XCIsZ2V0OmZ1bmN0aW9uKCl7fX1dKSxlfSgpO2MuQWN0aW9uU2hlZXRCdXR0b249RmksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWFjdGlvbi1zaGVldC1idXR0b25cIixGaSk7dmFyIHFpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSx6aT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZHVyYXRpb24scj12b2lkIDA9PT1vPy4yOm8sYT10LmRlbGF5LHM9dm9pZCAwPT09YT8wOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7ZHVyYXRpb246cix0aW1pbmc6aSxkZWxheTpzfSkpfXJldHVybiBiKGUscWkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoLjksIC45LCAxKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoMSwgMSwgMSlcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoMSwgMSwgMSlcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSBzY2FsZTNkKC45LCAuOSwgMSlcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLFZpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kdXJhdGlvbixyPXZvaWQgMD09PW8/LjI6byxhPXQuZGVsYXkscz12b2lkIDA9PT1hPzA6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHtkdXJhdGlvbjpyLHRpbWluZzppLGRlbGF5OnN9KSl9cmV0dXJuIGIoZSxxaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCgxLjMsIDEuMywgMSlcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSBzY2FsZTNkKDEsIDEsIDEpXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eToxfSx7b3BhY2l0eTowfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLFdpPXtcIi5hbGVydC1kaWFsb2dcIjpcImFsZXJ0LWRpYWxvZy0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1jb250YWluZXJcIjpcImFsZXJ0LWRpYWxvZy1jb250YWluZXItLSpcIixcIi5hbGVydC1kaWFsb2ctdGl0bGVcIjpcImFsZXJ0LWRpYWxvZy10aXRsZS0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1jb250ZW50XCI6XCJhbGVydC1kaWFsb2ctY29udGVudC0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1mb290ZXJcIjpcImFsZXJ0LWRpYWxvZy1mb290ZXItLSpcIixcIi5hbGVydC1kaWFsb2ctZm9vdGVyLS1yb3dmb290ZXJcIjpcImFsZXJ0LWRpYWxvZy1mb290ZXItLXJvd2Zvb3Rlci0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1idXR0b24tLXJvd2Zvb3RlclwiOlwiYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcm93Zm9vdGVyLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcHJpbWFsXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS1wcmltYWwtLSpcIixcIi5hbGVydC1kaWFsb2ctYnV0dG9uXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS0qXCIsXCJvbnMtYWxlcnQtZGlhbG9nLWJ1dHRvblwiOlwiYWxlcnQtZGlhbG9nLWJ1dHRvbi0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1tYXNrXCI6XCJhbGVydC1kaWFsb2ctbWFzay0tKlwiLFwiLnRleHQtaW5wdXRcIjpcInRleHQtaW5wdXQtLSpcIn0sVWk9e25vbmU6cWksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3ppOlZpfSxmYWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/emk6Vml9fSxYaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsTmkpLGcoZSxbe2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgTyh7YW5pbWF0b3JzOlVpLGJhc2VDbGFzczpxaSxiYXNlQ2xhc3NOYW1lOlwiQWxlcnREaWFsb2dBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xMDAwMTt2YXIgdD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoIXRoaXMuX21hc2smJiF0aGlzLl9kaWFsb2cpZm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KXQuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTtpZighdGhpcy5fbWFzayl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTGlzdC5hZGQoXCJhbGVydC1kaWFsb2ctbWFza1wiKSx0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuY2hpbGRyZW5bMF0pfWlmKCF0aGlzLl9kaWFsb2cpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtZGlhbG9nXCIpLHRoaXMuaW5zZXJ0QmVmb3JlKG4sbnVsbCl9aWYoIVEuZmluZENoaWxkKHRoaXMuX2RpYWxvZyxcIi5hbGVydC1kaWFsb2ctY29udGFpbmVyXCIpKXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NMaXN0LmFkZChcImFsZXJ0LWRpYWxvZy1jb250YWluZXJcIiksdGhpcy5fZGlhbG9nLmFwcGVuZENoaWxkKGkpfXRoaXMuX2RpYWxvZy5jaGlsZHJlblswXS5hcHBlbmRDaGlsZCh0KSx0aGlzLl9kaWFsb2cuc3R5bGUuekluZGV4PTIwMDAxLHRoaXMuX21hc2suc3R5bGUuekluZGV4PTJlNCxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBXaX19LHtrZXk6XCJfbWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFsZXJ0LWRpYWxvZy1tYXNrXCIpfX0se2tleTpcIl9kaWFsb2dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5hbGVydC1kaWFsb2dcIil9fSx7a2V5OlwiX3RpdGxlRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLl9kaWFsb2cuY2hpbGRyZW5bMF0sXCIuYWxlcnQtZGlhbG9nLXRpdGxlXCIpfX0se2tleTpcIl9jb250ZW50RWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLl9kaWFsb2cuY2hpbGRyZW5bMF0sXCIuYWxlcnQtZGlhbG9nLWNvbnRlbnRcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHFpfHxRLnRocm93QW5pbWF0b3IoXCJBbGVydERpYWxvZ1wiKSxVaVt0XT1lfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBVaX19LHtrZXk6XCJBbGVydERpYWxvZ0FuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHFpfX1dKSxlfSgpO2MuQWxlcnREaWFsb2c9WGksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWFsZXJ0LWRpYWxvZ1wiLFhpKTt2YXIgWWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUmkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57XCJcIjpcImFsZXJ0LWRpYWxvZy1idXR0b24tLSpcIn19fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImFsZXJ0LWRpYWxvZy1idXR0b25cIn19LHtrZXk6XCJfcmlwcGxlT3B0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMsdm9pZCAwLHttb2RpZmllcjpcImxpZ2h0LWdyYXlcIn1dfX1dKSxlfSgpO2MuQWxlcnREaWFsb2dCdXR0b249WWksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWFsZXJ0LWRpYWxvZy1idXR0b25cIixZaSk7dmFyIEdpPXtcIlwiOlwiYmFjay1idXR0b24tLSpcIixcIi5iYWNrLWJ1dHRvbl9faWNvblwiOlwiYmFjay1idXR0b24tLSpfX2ljb25cIixcIi5iYWNrLWJ1dHRvbl9fbGFiZWxcIjpcImJhY2stYnV0dG9uLS0qX19sYWJlbFwifSwkaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHQuX29wdGlvbnM9e30sdC5fYm91bmRPbkNsaWNrPXQuX29uQ2xpY2suYmluZCh0KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl91cGRhdGVJY29uXCIsdmFsdWU6ZnVuY3Rpb24oKXsoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlEuZmluZENoaWxkKHRoaXMsXCIuYmFjay1idXR0b25fX2ljb25cIikpLmlubmVySFRNTD1cImFuZHJvaWRcIj09PU4uZ2V0UGxhdGZvcm0odGhpcyl8fFEuaGFzTW9kaWZpZXIodGhpcyxcIm1hdGVyaWFsXCIpPyc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cXG48c3ZnIHdpZHRoPVwiMTZweFwiIGhlaWdodD1cIjE2cHhcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cXG4gICAgPHRpdGxlPm1kLWJhY2stYnV0dG9uLWljb248L3RpdGxlPlxcbiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz5cXG4gICAgPGRlZnM+PC9kZWZzPlxcbiAgICA8ZyBpZD1cInRvb2xiYXItYmFjay1idXR0b25cIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cXG4gICAgICAgIDxnIGlkPVwiYW5kcm9pZFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtMzIuMDAwMDAwLCAtMzIuMDAwMDAwKVwiIGZpbGwtcnVsZT1cIm5vbnplcm9cIj5cXG4gICAgICAgICAgICA8cG9seWdvbiBpZD1cIm1kLWJhY2stYnV0dG9uLWljb25cIiBwb2ludHM9XCI0OCAzOSAzNS44MyAzOSA0MS40MiAzMy40MSA0MCAzMiAzMiA0MCA0MCA0OCA0MS40MSA0Ni41OSAzNS44MyA0MSA0OCA0MVwiPjwvcG9seWdvbj5cXG4gICAgICAgIDwvZz5cXG4gICAgPC9nPlxcbjwvc3ZnPlxcbic6Jzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/Plxcbjxzdmcgd2lkdGg9XCIxM3B4XCIgaGVpZ2h0PVwiMjFweFwiIHZpZXdCb3g9XCIwIDAgMTMgMjFcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxcbiAgICA8dGl0bGU+aW9zLWJhY2stYnV0dG9uLWljb248L3RpdGxlPlxcbiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz5cXG4gICAgPGRlZnM+PC9kZWZzPlxcbiAgICA8ZyBpZD1cInRvb2xiYXItYmFjay1idXR0b25cIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cXG4gICAgICAgIDxnIGlkPVwiaW9zXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0zNC4wMDAwMDAsIC0zMC4wMDAwMDApXCI+XFxuICAgICAgICAgICAgPHBvbHlnb24gaWQ9XCJpb3MtYmFjay1idXR0b24taWNvblwiIHBvaW50cz1cIjM0IDQwLjUgNDQuNSAzMCA0Ni41IDMyIDM4IDQwLjUgNDYuNSA0OSA0NC41IDUxXCI+PC9wb2x5Z29uPlxcbiAgICAgICAgPC9nPlxcbiAgICA8L2c+XFxuPC9zdmc+XFxuJ319LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcImJhY2stYnV0dG9uXCIpLCFRLmZpbmRDaGlsZCh0aGlzLFwiLmJhY2stYnV0dG9uX19sYWJlbFwiKSl7Zm9yKHZhciB0PVEuY3JlYXRlKFwic3Bhbi5iYWNrLWJ1dHRvbl9fbGFiZWxcIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl0LmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7dGhpcy5hcHBlbmRDaGlsZCh0KX1pZighUS5maW5kQ2hpbGQodGhpcyxcIi5iYWNrLWJ1dHRvbl9faWNvblwiKSl7dmFyIGU9US5jcmVhdGUoXCJzcGFuLmJhY2stYnV0dG9uX19pY29uXCIpO3RoaXMuX3VwZGF0ZUljb24oZSksdGhpcy5pbnNlcnRCZWZvcmUoZSx0aGlzLmNoaWxkcmVuWzBdKX1RLnVwZGF0ZVJpcHBsZSh0aGlzLHZvaWQgMCx7Y2VudGVyOlwiXCIsc2l6ZTpcImNvbnRhaW5cIixiYWNrZ3JvdW5kOlwidHJhbnNwYXJlbnRcIn0pLEIuaW5pdE1vZGlmaWVyKHRoaXMsR2kpfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLm9uQ2xpY2spdGhpcy5vbkNsaWNrLmFwcGx5KHRoaXMpO2Vsc2V7dmFyIHQ9US5maW5kUGFyZW50KHRoaXMsXCJvbnMtbmF2aWdhdG9yXCIpO3QmJnQucG9wUGFnZSh0aGlzLm9wdGlvbnMpfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwiYmFjay1idXR0b25cIixHaSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLEdpKSYmdGhpcy5fdXBkYXRlSWNvbigpfX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT1cImlubGluZS1ibG9ja1wifX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn19LHtrZXk6XCJvcHRpb25zXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vcHRpb25zPXR9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5CYWNrQnV0dG9uPSRpLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1iYWNrLWJ1dHRvblwiLCRpKTt2YXIgS2k9XCJib3R0b20tYmFyXCIsUWk9e1wiXCI6XCJib3R0b20tYmFyLS0qXCJ9LEppPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jbGFzc0xpc3QuYWRkKEtpKSxCLmluaXRNb2RpZmllcih0LFFpKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLm1hdGNoKHRoaXMucGFyZW50Tm9kZSxcIm9ucy1wYWdlXCIpJiZ0aGlzLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZChcInBhZ2Utd2l0aC1ib3R0b20tdG9vbGJhclwiKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxLaSxRaSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFFpKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5Cb3R0b21Ub29sYmFyPUppLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1ib3R0b20tdG9vbGJhclwiLEppKTt2YXIgWmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUmkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57XCJcIjpcImJ1dHRvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiYnV0dG9uXCJ9fV0pLGV9KCk7Yy5CdXR0b249WmksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWJ1dHRvblwiLFppKTt2YXIgdG89e1wiXCI6XCJjYXJkLS0qXCIsXCIuY2FyZF9fdGl0bGVcIjpcImNhcmQtLSpfX3RpdGxlXCIsXCIuY2FyZF9fY29udGVudFwiOlwiY2FyZC0tKl9fY29udGVudFwifSxlbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5jaGlsZHJlbi5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLmNoaWxkcmVuW3RdO2UuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGl0bGVcIik/ZS5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fdGl0bGVcIik6ZS5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250ZW50XCIpJiZlLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19jb250ZW50XCIpfU4ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdG8pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwiY2FyZFwiLHRvKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsdG8pfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkNhcmQ9ZW8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWNhcmRcIixlbyk7dmFyIG5vPXtcIlwiOlwiY2Fyb3VzZWwtaXRlbS0tKlwifSxpbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuc3R5bGUud2lkdGg9XCIxMDAlXCIsQi5pbml0TW9kaWZpZXIodCxubyksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoXCJtb2RpZmllclwiPT09dClyZXR1cm4gQi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxubyl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiXX19XSksZX0oKTtjLkNhcm91c2VsSXRlbT1pbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtY2Fyb3VzZWwtaXRlbVwiLGlvKTt2YXIgb289e3ZlcnRpY2FsOntheGlzOlwiWVwiLHNpemU6XCJIZWlnaHRcIixkaXI6W1widXBcIixcImRvd25cIl0sdDNkOltcIjBweCwgXCIsXCJweCwgMHB4XCJdfSxob3Jpem9udGFsOntheGlzOlwiWFwiLHNpemU6XCJXaWR0aFwiLGRpcjpbXCJsZWZ0XCIsXCJyaWdodFwiXSx0M2Q6W1wiXCIsXCJweCwgMHB4LCAwcHhcIl19fSxybz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49dGhpcztwKHRoaXMsdCk7XCJnZXRJbml0aWFsSW5kZXggZ2V0QnViYmxlV2lkdGggaXNWZXJ0aWNhbCBpc092ZXJTY3JvbGxhYmxlIGlzQ2VudGVyZWRcXG4gICAgaXNBdXRvU2Nyb2xsYWJsZSByZWZyZXNoSG9vayBwcmVDaGFuZ2VIb29rIHBvc3RDaGFuZ2VIb29rIG92ZXJTY3JvbGxIb29rXCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdPWVbdF18fGZ1bmN0aW9uKCl7cmV0dXJuITF9fSksdGhpcy5nZXRFbGVtZW50PWUuZ2V0RWxlbWVudCx0aGlzLnNjcm9sbEhvb2s9ZS5zY3JvbGxIb29rLHRoaXMuaXRlbVNpemU9ZS5pdGVtU2l6ZXx8XCIxMDAlXCIsdGhpcy5nZXRBdXRvU2Nyb2xsUmF0aW89ZnVuY3Rpb24oKXt2YXIgdD1lLmdldEF1dG9TY3JvbGxSYXRpbyYmZS5nZXRBdXRvU2Nyb2xsUmF0aW8uYXBwbHkoZSxhcmd1bWVudHMpO3JldHVybigodD1cIm51bWJlclwiPT10eXBlb2YgdCYmdD09dD90Oi41KTwwfHx0PjEpJiZRLnRocm93KFwiSW52YWxpZCBhdXRvLXNjcm9sbC1yYXRpbyBcIit0K1wiLiBNdXN0IGJlIGJldHdlZW4gMCBhbmQgMVwiKSx0fSx0aGlzLnNob3VsZEJsb2NrPVwib3RoZXJcIj09PVEuZ2xvYmFscy5hY3R1YWxNb2JpbGVPUyx0aGlzLm9uRHJhZ1N0YXJ0PXRoaXMub25EcmFnU3RhcnQuYmluZCh0aGlzKSx0aGlzLm9uRHJhZz10aGlzLm9uRHJhZy5iaW5kKHRoaXMpLHRoaXMub25EcmFnRW5kPXRoaXMub25EcmFnRW5kLmJpbmQodGhpcyksdGhpcy5vblJlc2l6ZT10aGlzLm9uUmVzaXplLmJpbmQodGhpcyksdGhpcy5fc2hvdWxkRml4U2Nyb2xsPVwiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1N9cmV0dXJuIGcodCxbe2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1lLnN3aXBlYWJsZSxpPWUuYXV0b1JlZnJlc2g7dGhpcy5pbml0aWFsaXplZD0hMCx0aGlzLnRhcmdldD10aGlzLmdldEVsZW1lbnQoKS5jaGlsZHJlblswXSx0aGlzLmJsb2NrZXI9dGhpcy5nZXRFbGVtZW50KCkuY2hpbGRyZW5bMV0sdGhpcy50YXJnZXQmJnRoaXMuYmxvY2tlcnx8US50aHJvdygnRXhwZWN0ZWQgXCJ0YXJnZXRcIiBhbmQgXCJibG9ja2VyXCIgZWxlbWVudHMgdG8gZXhpc3QgYmVmb3JlIGluaXRpYWxpemluZyBTd2lwZXInKSx0aGlzLnNob3VsZEJsb2NrfHwodGhpcy5ibG9ja2VyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoXCJvbnMtc3dpcGVyXCIpLHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvbnMtc3dpcGVyLXRhcmdldFwiKSx0aGlzLmJsb2NrZXIuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXItYmxvY2tlclwiKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMuZ2V0RWxlbWVudCgpLHtkcmFnTWluRGlzdGFuY2U6MSxkcmFnTG9ja1RvQXhpczohMCxwYXNzaXZlOiF0aGlzLl9zaG91bGRGaXhTY3JvbGx9KSx0aGlzLl9tdXRhdGlvbk9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7cmV0dXJuIHQucmVmcmVzaCgpfSksdGhpcy51cGRhdGVTd2lwZWFibGUobiksdGhpcy51cGRhdGVBdXRvUmVmcmVzaChpKSx0aGlzLl9zY3JvbGw9dGhpcy5fb2Zmc2V0PXRoaXMuX2xhc3RBY3RpdmVJbmRleD0wLHRoaXMuX3VwZGF0ZUxheW91dCgpLHRoaXMuX3NldHVwSW5pdGlhbEluZGV4KCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaW5pdGlhbGl6ZWQmJnQuX3NldHVwSW5pdGlhbEluZGV4KCl9KSx3aW5kb3c9PT13aW5kb3cucGFyZW50JiYwIT09dGhpcy5vZmZzZXRIZWlnaHR8fHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtyZXR1cm4gdC5pbml0aWFsaXplZCYmdC5vblJlc2l6ZSgpfSl9fSx7a2V5OlwiZGlzcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnVwZGF0ZVN3aXBlYWJsZSghMSksdGhpcy51cGRhdGVBdXRvUmVmcmVzaCghMSksdGhpcy5fZ2VzdHVyZURldGVjdG9yJiZ0aGlzLl9nZXN0dXJlRGV0ZWN0b3IuZGlzcG9zZSgpLHRoaXMudGFyZ2V0PXRoaXMuYmxvY2tlcj10aGlzLl9nZXN0dXJlRGV0ZWN0b3I9dGhpcy5fbXV0YXRpb25PYnNlcnZlcj1udWxsLHRoaXMuc2V0dXBSZXNpemUoITEpfX0se2tleTpcIm9uUmVzaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9zY3JvbGwvdGhpcy50YXJnZXRTaXplO3RoaXMuX3Jlc2V0KCksdGhpcy5zZXRBY3RpdmVJbmRleCh0KSx0aGlzLnJlZnJlc2goKX19LHtrZXk6XCJfY2FsY3VsYXRlSXRlbVNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaXRlbVNpemUubWF0Y2goL14oXFxkKykocHh8JSkvKTt0fHxRLnRocm93KFwiSW52YWxpZCBzdGF0ZTogc3dpcGVyJ3Mgc2l6ZSB1bml0IG11c3QgYmUgJyUnIG9yICdweCdcIik7dmFyIGU9cGFyc2VJbnQodFsxXSwxMCk7cmV0dXJuXCIlXCI9PT10WzJdP01hdGgucm91bmQoZS8xMDAqdGhpcy50YXJnZXRTaXplKTplfX0se2tleTpcIl9zZXR1cEluaXRpYWxJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVzZXQoKSx0aGlzLl9sYXN0QWN0aXZlSW5kZXg9TWF0aC5tYXgoTWF0aC5taW4oTnVtYmVyKHRoaXMuZ2V0SW5pdGlhbEluZGV4KCkpLHRoaXMuaXRlbUNvdW50KSwwKSx0aGlzLl9zY3JvbGw9dGhpcy5fb2Zmc2V0K3RoaXMuaXRlbU51bVNpemUqdGhpcy5fbGFzdEFjdGl2ZUluZGV4LHRoaXMuX3Njcm9sbFRvKHRoaXMuX3Njcm9sbCl9fSx7a2V5OlwiX3NldFN3aXBpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwic3dpcGluZ1wiLHQpfX0se2tleTpcInNldEFjdGl2ZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0aGlzLl9zZXRTd2lwaW5nKCEwKSx0PU1hdGgubWF4KDAsTWF0aC5taW4odCx0aGlzLml0ZW1Db3VudC0xKSk7dmFyIGk9TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLm1heFNjcm9sbCx0aGlzLl9vZmZzZXQrdGhpcy5pdGVtTnVtU2l6ZSp0KSk7aWYoQy5pc1VJV2ViVmlldygpKXt2YXIgbz1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KX0oUS5hcnJheUZyb20odGhpcy50YXJnZXQuY2hpbGRyZW4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gUS5hcnJheUZyb20odC5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNsYXNzTGlzdC5jb250YWlucyhcInBhZ2VfX2NvbnRlbnRcIil9KX0pKSxyPW5ldyBNYXA7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe28uZm9yRWFjaChmdW5jdGlvbih0KXtyLnNldCh0LHQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpLHQuY2xhc3NMaXN0LmFkZChcInBhZ2VfX2NvbnRlbnQtLXN1cHByZXNzLWxheWVyLWNyZWF0aW9uXCIpfSkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLl9jaGFuZ2VUbyhpLG4pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtvLmZvckVhY2goZnVuY3Rpb24odCl7dC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLHIuZ2V0KHQpKX0pLHJlcXVlc3RBbmltYXRpb25GcmFtZSh0KX0pfSl9cmV0dXJuIHRoaXMuX2NoYW5nZVRvKGksbil9fSx7a2V5OlwiZ2V0QWN0aXZlSW5kZXhcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLl9zY3JvbGw7dC09dGhpcy5fb2Zmc2V0O3ZhciBlPXRoaXMuaXRlbUNvdW50LG49dGhpcy5pdGVtTnVtU2l6ZTtpZigwPT09dGhpcy5pdGVtTnVtU2l6ZXx8IVEuaXNJbnRlZ2VyKHQpKXJldHVybiB0aGlzLl9sYXN0QWN0aXZlSW5kZXg7aWYodDw9MClyZXR1cm4gMDtmb3IodmFyIGk9MDtpPGU7aSsrKWlmKG4qaTw9dCYmbiooaSsxKT50KXJldHVybiBpO3JldHVybiBlLTF9fSx7a2V5Olwic2V0dXBSZXNpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt3aW5kb3dbKHQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkV2ZW50TGlzdGVuZXJcIl0oXCJyZXNpemVcIix0aGlzLm9uUmVzaXplLCEwKX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc2V0dXBSZXNpemUoITApLHRoaXMub25SZXNpemUoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQudGFyZ2V0JiZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpfSwxZTMvNjApfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2V0dXBSZXNpemUoITEpLHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIil9fSx7a2V5OlwidXBkYXRlU3dpcGVhYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5fZ2VzdHVyZURldGVjdG9yKXt2YXIgZT10P1wib25cIjpcIm9mZlwiO3RoaXMuX2dlc3R1cmVEZXRlY3RvcltlXShcImRyYWdcIix0aGlzLm9uRHJhZyksdGhpcy5fZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZ3N0YXJ0XCIsdGhpcy5vbkRyYWdTdGFydCksdGhpcy5fZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZ2VuZFwiLHRoaXMub25EcmFnRW5kKX19fSx7a2V5OlwidXBkYXRlQXV0b1JlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9tdXRhdGlvbk9ic2VydmVyJiYodD90aGlzLl9tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy50YXJnZXQse2NoaWxkTGlzdDohMH0pOnRoaXMuX211dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpKX19LHtrZXk6XCJ1cGRhdGVJdGVtU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbVNpemU9dHx8XCIxMDAlXCIsdGhpcy5yZWZyZXNoKCl9fSx7a2V5OlwidG9nZ2xlQmxvY2tlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuYmxvY2tlci5zdHlsZS5wb2ludGVyRXZlbnRzPXQ/XCJhdXRvXCI6XCJub25lXCJ9fSx7a2V5OlwiX2NhbkNvbnN1bWVHZXN0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5kaXJlY3Rpb24sbj0wPT09dGhpcy5fc2Nyb2xsJiYhdGhpcy5pc092ZXJTY3JvbGxhYmxlKCksaT10aGlzLl9zY3JvbGw9PT10aGlzLm1heFNjcm9sbCYmIXRoaXMuaXNPdmVyU2Nyb2xsYWJsZSgpO3JldHVybiB0aGlzLmlzVmVydGljYWwoKT9cImRvd25cIj09PWUmJiFufHxcInVwXCI9PT1lJiYhaTpcInJpZ2h0XCI9PT1lJiYhbnx8XCJsZWZ0XCI9PT1lJiYhaX19LHtrZXk6XCJvbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5faWdub3JlRHJhZz10LmNvbnN1bWVkfHwhUS5pc1ZhbGlkR2VzdHVyZSh0KSwhdGhpcy5faWdub3JlRHJhZyl7dmFyIG49dC5jb25zdW1lO2lmKHQuY29uc3VtZT1mdW5jdGlvbigpe24mJm4oKSxlLl9pZ25vcmVEcmFnPSEwfSx0aGlzLl9jYW5Db25zdW1lR2VzdHVyZSh0Lmdlc3R1cmUpKXt2YXIgaT10Lmdlc3R1cmUuY2VudGVyJiZ0Lmdlc3R1cmUuY2VudGVyLmNsaWVudFh8fDAsbz10aGlzLmdldEJ1YmJsZVdpZHRoKCl8fDAscj1mdW5jdGlvbigpe24mJm4oKSx0LmNvbnN1bWVkPSEwLGUuX3N0YXJ0ZWQ9ITAsZS5zaG91bGRCbG9jayYmZS50b2dnbGVCbG9ja2VyKCEwKSxlLl9zZXRTd2lwaW5nKCEwKSxRLmlvc1ByZXZlbnRTY3JvbGwoZS5fZ2VzdHVyZURldGVjdG9yKX07aTxvfHxpPnRoaXMudGFyZ2V0U2l6ZS1vP3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiFlLl9pZ25vcmVEcmFnJiZyKCl9KTpyKCl9fX19LHtrZXk6XCJvbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt0Lmdlc3R1cmUmJiF0aGlzLl9pZ25vcmVEcmFnJiZ0aGlzLl9zdGFydGVkJiYodGhpcy5fY29udGludWVkPSEwLHQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsLXRoaXMuX2dldERlbHRhKHQpLHt0aHJvdHRsZTohMH0pKX19LHtrZXk6XCJvbkRyYWdFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9zdGFydGVkPSExLHQuZ2VzdHVyZSYmIXRoaXMuX2lnbm9yZURyYWcmJnRoaXMuX2NvbnRpbnVlZCl7dGhpcy5fY29udGludWVkPSExLHQuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGU9dGhpcy5fc2Nyb2xsLXRoaXMuX2dldERlbHRhKHQpLG49dGhpcy5fbm9ybWFsaXplU2Nyb2xsKGUpO2U9PT1uP3RoaXMuX3N0YXJ0TW9tZW50dW1TY3JvbGwoZSx0KTp0aGlzLl9raWxsT3ZlclNjcm9sbChuKSx0aGlzLnNob3VsZEJsb2NrJiZ0aGlzLnRvZ2dsZUJsb2NrZXIoITEpfWVsc2UgdGhpcy5faWdub3JlRHJhZz0hMH19LHtrZXk6XCJfc3RhcnRNb21lbnR1bVNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fZ2V0VmVsb2NpdHkoZSksaT1lLmdlc3R1cmUuaW50ZXJpbURpcmVjdGlvbj09PXRoaXMuZE0uZGlyW3RoaXMuX2dldERlbHRhKGUpPDA/MDoxXSxvPXRoaXMuX2dldEF1dG9TY3JvbGwodCxuLGkpLHI9TWF0aC5hYnMoby10KS8obisuMDEpLzFlMztyPU1hdGgubWluKC4yNSxNYXRoLm1heCguMSxyKSksdGhpcy5fY2hhbmdlVG8obyx7c3dpcGU6ITAsYW5pbWF0aW9uT3B0aW9uczp7ZHVyYXRpb246cix0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjQsIC43LCAuNSwgMSlcIn19KX19LHtrZXk6XCJfa2lsbE92ZXJTY3JvbGxcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3Njcm9sbD10O3ZhciBuPXRoaXMuZE0uZGlyW051bWJlcih0PjApXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NoYW5nZVRvKHQse2FuaW1hdGlvbk9wdGlvbnM6e2R1cmF0aW9uOi40LHRpbWluZzpcImN1YmljLWJlemllciguMSwgLjQsIC4xLCAxKVwifX0pfTt0aGlzLm92ZXJTY3JvbGxIb29rKHtkaXJlY3Rpb246bixraWxsT3ZlclNjcm9sbDppfSl8fGkoKX19LHtrZXk6XCJfY2hhbmdlVG9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9e2FjdGl2ZUluZGV4OnRoaXMuZ2V0QWN0aXZlSW5kZXgodCksbGFzdEFjdGl2ZUluZGV4OnRoaXMuX2xhc3RBY3RpdmVJbmRleCxzd2lwZTpuLnN3aXBlfHwhMX0sbz1pLmFjdGl2ZUluZGV4IT09aS5sYXN0QWN0aXZlSW5kZXgscj0hIW8mJnRoaXMucHJlQ2hhbmdlSG9vayhpKTtyZXR1cm4gdGhpcy5fc2Nyb2xsPXI/dGhpcy5fb2Zmc2V0K2kubGFzdEFjdGl2ZUluZGV4KnRoaXMuaXRlbU51bVNpemU6dCx0aGlzLl9sYXN0QWN0aXZlSW5kZXg9cj9pLmxhc3RBY3RpdmVJbmRleDppLmFjdGl2ZUluZGV4LHRoaXMuX3Njcm9sbFRvKHRoaXMuX3Njcm9sbCxuKS50aGVuKGZ1bmN0aW9uKCl7aWYodCE9PWUuX3Njcm9sbHx8cil7aWYobi5yZWplY3QpcmV0dXJuIGUuX3NldFN3aXBpbmcoITEpLFByb21pc2UucmVqZWN0KFwiQ2FuY2VsZWRcIil9ZWxzZSBlLl9zZXRTd2lwaW5nKCExKSxvJiZlLnBvc3RDaGFuZ2VIb29rKGkpfSl9fSx7a2V5OlwiX3Njcm9sbFRvXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihuLnRocm90dGxlKXtpZih0PDApdD10aGlzLmlzT3ZlclNjcm9sbGFibGUoKT9NYXRoLnJvdW5kKC4zNSp0KTowO2Vsc2V7dmFyIGk9dGhpcy5tYXhTY3JvbGw7aTx0JiYodD10aGlzLmlzT3ZlclNjcm9sbGFibGUoKT9pK01hdGgucm91bmQoLjM1Kih0LWkpKTppKX19dmFyIG89XCJub25lXCI9PT1uLmFuaW1hdGlvbj97fTpuLmFuaW1hdGlvbk9wdGlvbnM7cmV0dXJuIHRoaXMuc2Nyb2xsSG9vayYmdGhpcy5pdGVtTnVtU2l6ZT4wJiZ0aGlzLnNjcm9sbEhvb2soKHQvdGhpcy5pdGVtTnVtU2l6ZSkudG9GaXhlZCgyKSxuLmFuaW1hdGlvbk9wdGlvbnN8fHt9KSxuZXcgUHJvbWlzZShmdW5jdGlvbihuKXtyZXR1cm4gbnQoZS50YXJnZXQpLnF1ZXVlKHt0cmFuc2Zvcm06ZS5fZ2V0VHJhbnNmb3JtKHQpfSxvKS5wbGF5KG4pfSl9fSx7a2V5OlwiX2dldEF1dG9TY3JvbGxcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5tYXhTY3JvbGwsbz10aGlzLl9vZmZzZXQscj10aGlzLml0ZW1OdW1TaXplO2lmKCF0aGlzLmlzQXV0b1Njcm9sbGFibGUoKSlyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbihpLHQpKTtmb3IodmFyIGE9W10scz1vO3M8aTtzKz1yKWEucHVzaChzKTthLnB1c2goaSk7dmFyIGw9KGE9YS5zb3J0KGZ1bmN0aW9uKGUsbil7cmV0dXJuIE1hdGguYWJzKGUtdCktTWF0aC5hYnMobi10KX0pLmZpbHRlcihmdW5jdGlvbih0LGUpe3JldHVybiFlfHx0IT09YVtlLTFdfSkpWzBdLHU9dGhpcy5fbGFzdEFjdGl2ZUluZGV4KnIrbyxjPU1hdGguYWJzKHQtdSkvcjtyZXR1cm4gYzw9dGhpcy5nZXRBdXRvU2Nyb2xsUmF0aW8obixlLHIpP2w9dTpjPDEmJmFbMF09PT11JiZhLmxlbmd0aD4xJiYobD1hWzFdKSxNYXRoLm1heCgwLE1hdGgubWluKGksbCkpfX0se2tleTpcIl9yZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdGFyZ2V0U2l6ZT10aGlzLl9pdGVtTnVtU2l6ZT12b2lkIDB9fSx7a2V5OlwiX25vcm1hbGl6ZVNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heChNYXRoLm1pbih0LHRoaXMubWF4U2Nyb2xsKSwwKX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXNldCgpLHRoaXMuX3VwZGF0ZUxheW91dCgpLFEuaXNJbnRlZ2VyKHRoaXMuX3Njcm9sbCkpe3ZhciB0PXRoaXMuX25vcm1hbGl6ZVNjcm9sbCh0aGlzLl9zY3JvbGwpO3QhPT10aGlzLl9zY3JvbGw/dGhpcy5fa2lsbE92ZXJTY3JvbGwodCk6dGhpcy5fY2hhbmdlVG8odCl9ZWxzZSB0aGlzLl9zZXR1cEluaXRpYWxJbmRleCgpO3RoaXMucmVmcmVzaEhvb2soKX19LHtrZXk6XCJfZ2V0RGVsdGFcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXN0dXJlW1wiZGVsdGFcIit0aGlzLmRNLmF4aXNdfX0se2tleTpcIl9nZXRWZWxvY2l0eVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lmdlc3R1cmVbXCJ2ZWxvY2l0eVwiK3RoaXMuZE0uYXhpc119fSx7a2V5OlwiX2dldFRyYW5zZm9ybVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVyblwidHJhbnNsYXRlM2QoXCIrdGhpcy5kTS50M2RbMF0rLXQrdGhpcy5kTS50M2RbMV0rXCIpXCJ9fSx7a2V5OlwiX3VwZGF0ZUxheW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5kTT1vb1t0aGlzLmlzVmVydGljYWwoKT9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCJdLHRoaXMudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJvbnMtc3dpcGVyLXRhcmdldC0tdmVydGljYWxcIix0aGlzLmlzVmVydGljYWwoKSk7Zm9yKHZhciB0PXRoaXMudGFyZ2V0LmNoaWxkcmVuWzBdO3Q7dD10Lm5leHRFbGVtZW50U2libGluZyl0LnN0eWxlW3RoaXMuZE0uc2l6ZS50b0xvd2VyQ2FzZSgpXT10aGlzLml0ZW1TaXplO3RoaXMuaXNDZW50ZXJlZCgpJiYodGhpcy5fb2Zmc2V0PSh0aGlzLnRhcmdldFNpemUtdGhpcy5pdGVtTnVtU2l6ZSkvLTJ8fDApfX0se2tleTpcIml0ZW1Db3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhcmdldC5jaGlsZHJlbi5sZW5ndGh9fSx7a2V5OlwiaXRlbU51bVNpemVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdGhpcy5faXRlbU51bVNpemUmJnRoaXMuX2l0ZW1OdW1TaXplPT10aGlzLl9pdGVtTnVtU2l6ZXx8KHRoaXMuX2l0ZW1OdW1TaXplPXRoaXMuX2NhbGN1bGF0ZUl0ZW1TaXplKCkpLHRoaXMuX2l0ZW1OdW1TaXplfX0se2tleTpcIm1heFNjcm9sbFwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaXRlbUNvdW50KnRoaXMuaXRlbU51bVNpemUtdGhpcy50YXJnZXRTaXplO3JldHVybiBNYXRoLmNlaWwodDwwPzA6dCl9fSx7a2V5OlwidGFyZ2V0U2l6ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRTaXplfHwodGhpcy5fdGFyZ2V0U2l6ZT10aGlzLnRhcmdldFtcIm9mZnNldFwiK3RoaXMuZE0uc2l6ZV0pLHRoaXMuX3RhcmdldFNpemV9fV0pLHR9KCksYW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jaGlsZHJlblswXSYmXCJPTlMtQ0FST1VTRUwtSVRFTVwiIT09dGhpcy5jaGlsZHJlblswXS50YWdOYW1lJiZ0aGlzLmNoaWxkcmVuWzBdfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKCF0LnBhcmVudE5vZGUpe2Zvcig7dGhpcy5maXJzdENoaWxkOyl0LmFwcGVuZENoaWxkKHRoaXMuZmlyc3RDaGlsZCk7dGhpcy5hcHBlbmRDaGlsZCh0KX0hdGhpcy5jaGlsZHJlblsxXSYmdGhpcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSx0aGlzLmFwcGVuZENoaWxkPXRoaXMuYXBwZW5kQ2hpbGQuYmluZCh0KSx0aGlzLmluc2VydEJlZm9yZT10aGlzLmluc2VydEJlZm9yZS5iaW5kKHQpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3N3aXBlcnx8KHRoaXMuX3N3aXBlcj1uZXcgcm8oe2dldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sZ2V0SW5pdGlhbEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwiaW5pdGlhbC1pbmRleFwiKX0sZ2V0QXV0b1Njcm9sbFJhdGlvOmZ1bmN0aW9uKCl7cmV0dXJuIHQuYXV0b1Njcm9sbFJhdGlvfSxpc1ZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHQudmVydGljYWx9LGlzT3ZlclNjcm9sbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5vdmVyc2Nyb2xsYWJsZX0saXNDZW50ZXJlZDpmdW5jdGlvbigpe3JldHVybiB0LmNlbnRlcmVkfSxpc0F1dG9TY3JvbGxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHQuYXV0b1Njcm9sbH0saXRlbVNpemU6dGhpcy5pdGVtU2l6ZSxvdmVyU2Nyb2xsSG9vazp0aGlzLl9vbk92ZXJTY3JvbGwuYmluZCh0aGlzKSxwcmVDaGFuZ2VIb29rOnRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcyxcInByZWNoYW5nZVwiKSxwb3N0Q2hhbmdlSG9vazp0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMsXCJwb3N0Y2hhbmdlXCIpLHJlZnJlc2hIb29rOnRoaXMuX29uUmVmcmVzaC5iaW5kKHRoaXMpLHNjcm9sbEhvb2s6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25Td2lwZSYmdC5fb25Td2lwZS5hcHBseSh0LGFyZ3VtZW50cyl9fSksbih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3N3aXBlci5pbml0KHtzd2lwZWFibGU6dC5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIiksYXV0b1JlZnJlc2g6dC5oYXNBdHRyaWJ1dGUoXCJhdXRvLXJlZnJlc2hcIil9KX0pKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyJiZ0aGlzLl9zd2lwZXIuaW5pdGlhbGl6ZWQmJih0aGlzLl9zd2lwZXIuZGlzcG9zZSgpLHRoaXMuX3N3aXBlcj1udWxsKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYodGhpcy5fc3dpcGVyKXN3aXRjaCh0KXtjYXNlXCJzd2lwZWFibGVcIjp0aGlzLl9zd2lwZXIudXBkYXRlU3dpcGVhYmxlKHRoaXMuaGFzQXR0cmlidXRlKFwic3dpcGVhYmxlXCIpKTticmVhaztjYXNlXCJhdXRvLXJlZnJlc2hcIjp0aGlzLl9zd2lwZXIudXBkYXRlQXV0b1JlZnJlc2godGhpcy5oYXNBdHRyaWJ1dGUoXCJhdXRvLXJlZnJlc2hcIikpO2JyZWFrO2Nhc2VcIml0ZW0taGVpZ2h0XCI6dGhpcy52ZXJ0aWNhbCYmdGhpcy5fc3dpcGVyLnVwZGF0ZUl0ZW1TaXplKHRoaXMuaXRlbVNpemUpO2JyZWFrO2Nhc2VcIml0ZW0td2lkdGhcIjp0aGlzLnZlcnRpY2FsfHx0aGlzLl9zd2lwZXIudXBkYXRlSXRlbVNpemUodGhpcy5pdGVtU2l6ZSk7YnJlYWs7Y2FzZVwiZGlyZWN0aW9uXCI6dGhpcy5fc3dpcGVyLnJlZnJlc2goKX19fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlci5zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlci5oaWRlKCl9fSx7a2V5OlwiX29uT3ZlclNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGlyZWN0aW9uLG49dC5raWxsT3ZlclNjcm9sbCxpPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcIm92ZXJzY3JvbGxcIix7Y2Fyb3VzZWw6dGhpcyxhY3RpdmVJbmRleDp0aGlzLmdldEFjdGl2ZUluZGV4KCksZGlyZWN0aW9uOmUsd2FpdFRvUmV0dXJuOmZ1bmN0aW9uKHQpe2k9ITAsdC50aGVuKG4pfX0pLGl9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmFjdGl2ZUluZGV4LGk9ZS5sYXN0QWN0aXZlSW5kZXg7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsdCx7Y2Fyb3VzZWw6dGhpcyxhY3RpdmVJbmRleDpuLGxhc3RBY3RpdmVJbmRleDppfSl9fSx7a2V5OlwiX29uUmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJyZWZyZXNoXCIse2Nhcm91c2VsOnRoaXN9KX19LHtrZXk6XCJzZXRBY3RpdmVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIG49Xyh7YW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpLGFuaW1hdGlvbk9wdGlvbnM6dGhpcy5oYXNBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKT9RLmFuaW1hdGlvbk9wdGlvbnNQYXJzZSh0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpKTp7ZHVyYXRpb246LjMsdGltaW5nOlwiY3ViaWMtYmV6aWVyKC40LCAuNywgLjUsIDEpXCJ9fSxuKSx0aGlzLl9zd2lwZXIuc2V0QWN0aXZlSW5kZXgodCxuKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmbi5jYWxsYmFjayhlKSxQcm9taXNlLnJlc29sdmUoZSl9KX19LHtrZXk6XCJnZXRBY3RpdmVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N3aXBlci5nZXRBY3RpdmVJbmRleCgpfX0se2tleTpcIm5leHRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJbmRleCh0aGlzLmdldEFjdGl2ZUluZGV4KCkrMSx0KX19LHtrZXk6XCJwcmV2XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0QWN0aXZlSW5kZXgodGhpcy5nZXRBY3RpdmVJbmRleCgpLTEsdCl9fSx7a2V5OlwiZmlyc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJbmRleCgwLHQpfX0se2tleTpcImxhc3RcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnNldEFjdGl2ZUluZGV4KE1hdGgubWF4KHRoaXMuaXRlbUNvdW50LTEsMCksdCl9fSx7a2V5OlwicmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyLnJlZnJlc2goKX19LHtrZXk6XCJpdGVtQ291bnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3dpcGVyLml0ZW1Db3VudH19LHtrZXk6XCJzd2lwZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcInN3aXBlYWJsZVwiLHQpfX0se2tleTpcIm9uU3dpcGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Td2lwZX0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wib25Td2lwZVwiIG11c3QgYmUgYSBmdW5jdGlvbicpLHRoaXMuX29uU3dpcGU9dH19LHtrZXk6XCJhdXRvU2Nyb2xsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiYXV0by1zY3JvbGxcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImF1dG8tc2Nyb2xsXCIsdCl9fSx7a2V5OlwidmVydGljYWxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInZlcnRpY2FsXCI9PT10aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKX19LHtrZXk6XCJpdGVtU2l6ZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PSh0aGlzLmdldEF0dHJpYnV0ZShcIml0ZW0tXCIrKHRoaXMudmVydGljYWw/XCJoZWlnaHRcIjpcIndpZHRoXCIpKXx8XCJcIikudHJpbSgpO3JldHVybiB0Lm1hdGNoKC9eXFxkKyhweHwlKSQvKT90OlwiMTAwJVwifX0se2tleTpcImF1dG9TY3JvbGxSYXRpb1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMuZ2V0QXR0cmlidXRlKFwiYXV0by1zY3JvbGwtcmF0aW9cIikpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJhdXRvLXNjcm9sbC1yYXRpb1wiLHQpfX0se2tleTpcImRpc2FibGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9fSx7a2V5Olwib3ZlcnNjcm9sbGFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJvdmVyc2Nyb2xsYWJsZVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwib3ZlcnNjcm9sbGFibGVcIix0KX19LHtrZXk6XCJjZW50ZXJlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImNlbnRlcmVkXCIpfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJjZW50ZXJlZFwiLHQpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wic3dpcGVhYmxlXCIsXCJhdXRvLXJlZnJlc2hcIixcImRpcmVjdGlvblwiLFwiaXRlbS1oZWlnaHRcIixcIml0ZW0td2lkdGhcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicG9zdGNoYW5nZVwiLFwicmVmcmVzaFwiLFwib3ZlcnNjcm9sbFwiXX19XSksZX0oKTtjLkNhcm91c2VsPWFvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jYXJvdXNlbFwiLGFvKTt2YXIgc289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmdldEF0dHJpYnV0ZShcIndpZHRoXCIpJiZ0Ll91cGRhdGVXaWR0aCgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe1wid2lkdGhcIj09PXQmJnRoaXMuX3VwZGF0ZVdpZHRoKCl9fSx7a2V5OlwiX3VwZGF0ZVdpZHRoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpO3Q/KHQ9dC50cmltKCkubWF0Y2goL15cXGQrJC8pP3QrXCIlXCI6dCxkKHRoaXMse2ZsZXg6XCIwIDAgXCIrdCxtYXhXaWR0aDp0fSkpOmQuY2xlYXIodGhpcyxcImZsZXggbWF4V2lkdGhcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJ3aWR0aFwiXX19XSksZX0oKTtjLkNvbD1zbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtY29sXCIsc28pO3ZhciBsbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCksdW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2UtaW4tb3V0XCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsbG8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC02MCUsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApXCIsb3BhY2l0eToxfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTYwJSwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLGNvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlLWluLW91dFwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLmJvZHlIZWlnaHQ9ZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsbH1yZXR1cm4gYihlLGxvKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCBcIisodGhpcy5ib2R5SGVpZ2h0LzItMSkrXCJweCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCBcIisodGhpcy5ib2R5SGVpZ2h0LzItMSkrXCJweCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksaG89e1wiLmRpYWxvZ1wiOlwiZGlhbG9nLS0qXCIsXCIuZGlhbG9nLWNvbnRhaW5lclwiOlwiZGlhbG9nLWNvbnRhaW5lci0tKlwiLFwiLmRpYWxvZy1tYXNrXCI6XCJkaWFsb2ctbWFzay0tKlwifSxmbz17ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3VvOmNvfSxzbGlkZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYm9keUhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxsfXJldHVybiBiKGUsbG8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKygtdGhpcy5ib2R5SGVpZ2h0LzIrMS10Ll9kaWFsb2cuY2xpZW50SGVpZ2h0KStcInB4LCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKygtdGhpcy5ib2R5SGVpZ2h0LzIrMS10Ll9kaWFsb2cuY2xpZW50SGVpZ2h0KStcInB4LCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19XSksZX0oKSxub25lOmxvfSxwbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsTmkpLGcoZSxbe2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgTyh7YW5pbWF0b3JzOmZvLGJhc2VDbGFzczpsbyxiYXNlQ2xhc3NOYW1lOlwiRGlhbG9nQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5zdHlsZS56SW5kZXg9MTAwMDEsIXRoaXMuX2RpYWxvZyl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJkaWFsb2dcIik7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IoZS5jbGFzc0xpc3QuYWRkKFwiZGlhbG9nLWNvbnRhaW5lclwiKTt0aGlzLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTt0LmFwcGVuZENoaWxkKGUpLHRoaXMuYXBwZW5kQ2hpbGQodCl9aWYoIXRoaXMuX21hc2spe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwiZGlhbG9nLW1hc2tcIiksdGhpcy5pbnNlcnRCZWZvcmUobix0aGlzLmZpcnN0Q2hpbGQpfXRoaXMuX2RpYWxvZy5zdHlsZS56SW5kZXg9MjAwMDEsdGhpcy5fbWFzay5zdHlsZS56SW5kZXg9MmU0LHRoaXMuc2V0QXR0cmlidXRlKFwic3RhdHVzLWJhci1maWxsXCIsXCJcIiksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaG99fSx7a2V5OlwiX21hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5kaWFsb2ctbWFza1wiKX19LHtrZXk6XCJfZGlhbG9nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIuZGlhbG9nXCIpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBsb3x8US50aHJvd0FuaW1hdG9yKFwiRGlhbG9nXCIpLGZvW3RdPWV9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZvfX0se2tleTpcIkRpYWxvZ0FuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGxvfX1dKSxlfSgpO2MuRGlhbG9nPXBvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1kaWFsb2dcIixwbyk7dmFyIGdvPVwiZmFiXCIsbW89e1wiXCI6XCJmYWItLSpcIixcIi5mYWJfX2ljb25cIjpcImZhYi0tKl9faWNvblwifSxfbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuaGlkZSgpLHQuY2xhc3NMaXN0LmFkZChnbyksbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLCFRLmZpbmRDaGlsZCh0aGlzLFwiLmZhYl9faWNvblwiKSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7dC5jbGFzc0xpc3QuYWRkKFwiZmFiX19pY29uXCIpLFEuYXJyYXlGcm9tKHRoaXMuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbihlKXtlLnRhZ05hbWUmJlwib25zLXJpcHBsZVwiPT09ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fHQuYXBwZW5kQ2hpbGQoZSl9KSx0aGlzLmFwcGVuZENoaWxkKHQpfXRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsbW8pLHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc2hvdygpfSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsZ28sbW8pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxtbyk7YnJlYWs7Y2FzZVwicmlwcGxlXCI6dGhpcy5fdXBkYXRlUmlwcGxlKCk7YnJlYWs7Y2FzZVwicG9zaXRpb25cIjp0aGlzLl91cGRhdGVQb3NpdGlvbigpfX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaGlkZSgpfSl9fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7US51cGRhdGVSaXBwbGUodGhpcyl9fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3N3aXRjaCh0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJmYWItLXRvcF9fbGVmdFwiLFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIsXCJmYWItLWJvdHRvbV9fbGVmdFwiLFwiZmFiLS10b3BfX3JpZ2h0XCIsXCJmYWItLXRvcF9fY2VudGVyXCIsXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpLHQpe2Nhc2VcInRvcCByaWdodFwiOmNhc2VcInJpZ2h0IHRvcFwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19yaWdodFwiKTticmVhaztjYXNlXCJ0b3AgbGVmdFwiOmNhc2VcImxlZnQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2xlZnRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIHJpZ2h0XCI6Y2FzZVwicmlnaHQgYm90dG9tXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcImJvdHRvbSBsZWZ0XCI6Y2FzZVwibGVmdCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fbGVmdFwiKTticmVhaztjYXNlXCJjZW50ZXIgdG9wXCI6Y2FzZVwidG9wIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19jZW50ZXJcIik7YnJlYWs7Y2FzZVwiY2VudGVyIGJvdHRvbVwiOmNhc2VcImJvdHRvbSBjZW50ZXJcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpfX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZSghMCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGUoITEpfX0se2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiF0aGlzLnZpc2libGUsZT0odGhpcy5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKXx8XCJcIikuaW5kZXhPZihcImJvdHRvbVwiKT49MD9cInRyYW5zbGF0ZTNkKDBweCwgLVwiKyhRLmdsb2JhbHMuZmFiT2Zmc2V0fHwwKStcInB4LCAwcHgpXCI6XCJcIjtkKHRoaXMse3RyYW5zZm9ybTplK1wiIHNjYWxlKFwiK051bWJlcih0KStcIilcIn0pfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwidmlzaWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybi0xPT09dGhpcy5zdHlsZS50cmFuc2Zvcm0uaW5kZXhPZihcInNjYWxlKDApXCIpJiZcIm5vbmVcIiE9PXRoaXMuc3R5bGUuZGlzcGxheX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcInBvc2l0aW9uXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkZhYj1fbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtZmFiXCIsX28pO3ZhciB2bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodCx7cGFzc2l2ZTohMH0pLHR9cmV0dXJuIGIoZSxQaSksZX0oKTtjLkdlc3R1cmVEZXRlY3Rvcj12byxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtZ2VzdHVyZS1kZXRlY3RvclwiLHZvKTt2YXIgYm89XCJmYVwiLHlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3RoaXMuX2NsZWFuQ2xhc3NBdHRyaWJ1dGUoXCJpY29uXCI9PT10P2U6dGhpcy5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpLFwibW9kaWZpZXJcIj09PXQ/ZTp2b2lkIDApLHRoaXMuX3VwZGF0ZSgpfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5fdXBkYXRlKCl9fSx7a2V5OlwiX3VwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuX2J1aWxkQ2xhc3NBbmRTdHlsZSh0aGlzLl9wYXJzZUF0dHIoXCJpY29uXCIpLHRoaXMuX3BhcnNlQXR0cihcInNpemVcIikpLG49ZS5jbGFzc0xpc3QsaT1lLnN0eWxlO1EuZXh0ZW5kKHRoaXMuc3R5bGUsaSksbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNsYXNzTGlzdC5hZGQoZSl9KX19LHtrZXk6XCJfcGFyc2VBdHRyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIsbj0odGhpcy5nZXRBdHRyaWJ1dGUodCl8fHR8fFwiXCIpLnNwbGl0KC9cXHMqLFxccyovKSxpPW5bMF0sbz1uWzFdO3JldHVybiBvPShvfHxcIlwiKS5zcGxpdCgvXFxzKjpcXHMqLyksKGUmJlJlZ0V4cChcIihefFxcXFxzKylcIitvWzBdK1wiKCR8XFxcXHMrKVwiLFwiaVwiKS50ZXN0KGUpP29bMV06aSl8fFwiXCJ9fSx7a2V5OlwiX2NsZWFuQ2xhc3NBdHRyaWJ1dGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT10aGlzLl9wcmVmaXhJY29uKHRoaXMuX3BhcnNlQXR0cih0LGUpKSxvPWkuY2xhc3NOYW1lLHI9aS5wcmVmaXgsYT1vIT09cj9cInxcIityK1wiJHxcIityK1wiLVwiOlwifFwiK28rXCIkXCJ8fFwiXCIscz1uZXcgUmVnRXhwKFwiXihmYSR8ZmEtfGlvbi18em1kaSR8em1kaS18b25zLWljb24tLVwiK2ErXCIpXCIpO1EuYXJyYXlGcm9tKHRoaXMuY2xhc3NMaXN0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHMudGVzdCh0KX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG4uY2xhc3NMaXN0LnJlbW92ZSh0KX0pfX0se2tleTpcIl9wcmVmaXhJY29uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9Ym8rKGJvP1wiLVwiOlwiXCIpK3Q7cmV0dXJue2NsYXNzTmFtZTplLHByZWZpeDplLnNwbGl0KFwiLVwiKVswXX19fSx7a2V5OlwiX2J1aWxkQ2xhc3NBbmRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49W1wib25zLWljb25cIl0saT17fTtpZigwPT09dC5pbmRleE9mKFwiaW9uLVwiKSluLnB1c2godCksbi5wdXNoKFwib25zLWljb24tLWlvblwiKTtlbHNlIGlmKDA9PT10LmluZGV4T2YoXCJmYS1cIikpbi5wdXNoKHQpLG4ucHVzaChcImZhXCIpO2Vsc2UgaWYoMD09PXQuaW5kZXhPZihcIm1kLVwiKSluLnB1c2goXCJ6bWRpXCIpLG4ucHVzaChcInptZGktXCIrdC5zcGxpdCgvLSguKyk/LylbMV0pO2Vsc2V7dmFyIG89dGhpcy5fcHJlZml4SWNvbih0KSxyPW8uY2xhc3NOYW1lLGE9by5wcmVmaXg7YSYmbi5wdXNoKGEpLHImJm4ucHVzaChyKX1yZXR1cm4gZS5tYXRjaCgvXlsxLTVdeHxsZyQvKT8obi5wdXNoKFwib25zLWljb24tLVwiK2UpLHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJmb250LXNpemVcIikpOmkuZm9udFNpemU9ZSx7Y2xhc3NMaXN0Om4sc3R5bGU6aX19fV0sW3trZXk6XCJzZXRBdXRvUHJlZml4XCIsdmFsdWU6ZnVuY3Rpb24odCl7Ym89dD9cInN0cmluZ1wiPT10eXBlb2YgdCYmdHx8XCJmYVwiOlwiXCJ9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiaWNvblwiLFwic2l6ZVwiLFwibW9kaWZpZXJcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuSWNvbj15byxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtaWNvblwiLHlvKTt2YXIga289ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3AodGhpcyx0KSxcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpmKGUpKSYmbnVsbCE9PWV8fFEudGhyb3coJ1wiZGVsZWdhdGVcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBvYmplY3QnKSx0aGlzLl91c2VyRGVsZWdhdGU9ZSxuIGluc3RhbmNlb2YgRWxlbWVudHx8bnVsbD09PW58fFEudGhyb3coJ1widGVtcGxhdGVFbGVtZW50XCIgcGFyYW1ldGVyIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRWxlbWVudCBvciBudWxsJyksdGhpcy5fdGVtcGxhdGVFbGVtZW50PW59cmV0dXJuIGcodCxbe2tleTpcImhhc1JlbmRlckZ1bmN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlckRlbGVnYXRlLl9yZW5kZXIgaW5zdGFuY2VvZiBGdW5jdGlvbn19LHtrZXk6XCJfcmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91c2VyRGVsZWdhdGUuX3JlbmRlci5hcHBseSh0aGlzLl91c2VyRGVsZWdhdGUsYXJndW1lbnRzKX19LHtrZXk6XCJsb2FkSXRlbUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMuX3VzZXJEZWxlZ2F0ZS5sb2FkSXRlbUVsZW1lbnQgaW5zdGFuY2VvZiBGdW5jdGlvbil0aGlzLl91c2VyRGVsZWdhdGUubG9hZEl0ZW1FbGVtZW50KHQsZSk7ZWxzZXt2YXIgbj10aGlzLl91c2VyRGVsZWdhdGUuY3JlYXRlSXRlbUNvbnRlbnQodCx0aGlzLl90ZW1wbGF0ZUVsZW1lbnQpO24gaW5zdGFuY2VvZiBFbGVtZW50fHxRLnRocm93KCdcImNyZWF0ZUl0ZW1Db250ZW50XCIgbXVzdCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgRWxlbWVudCcpLGUoe2VsZW1lbnQ6bn0pfX19LHtrZXk6XCJjb3VudEl0ZW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl91c2VyRGVsZWdhdGUuY291bnRJdGVtcygpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0JiZRLnRocm93KCdcImNvdW50SXRlbXNcIiBtdXN0IHJldHVybiBhIG51bWJlcicpLHR9fSx7a2V5OlwidXBkYXRlSXRlbVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fdXNlckRlbGVnYXRlLnVwZGF0ZUl0ZW1Db250ZW50IGluc3RhbmNlb2YgRnVuY3Rpb24mJnRoaXMuX3VzZXJEZWxlZ2F0ZS51cGRhdGVJdGVtQ29udGVudCh0LGUpfX0se2tleTpcImNhbGN1bGF0ZUl0ZW1IZWlnaHRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl91c2VyRGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXt2YXIgZT10aGlzLl91c2VyRGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCh0KTtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZSYmUS50aHJvdygnXCJjYWxjdWxhdGVJdGVtSGVpZ2h0XCIgbXVzdCByZXR1cm4gYSBudW1iZXInKSxlfXJldHVybiAwfX0se2tleTpcImRlc3Ryb3lJdGVtXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveUl0ZW0gaW5zdGFuY2VvZiBGdW5jdGlvbiYmdGhpcy5fdXNlckRlbGVnYXRlLmRlc3Ryb3lJdGVtKHQsZSl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdXNlckRlbGVnYXRlLmRlc3Ryb3kgaW5zdGFuY2VvZiBGdW5jdGlvbiYmdGhpcy5fdXNlckRlbGVnYXRlLmRlc3Ryb3koKSx0aGlzLl91c2VyRGVsZWdhdGU9dGhpcy5fdGVtcGxhdGVFbGVtZW50PW51bGx9fSx7a2V5OlwiaXRlbUhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyRGVsZWdhdGUuaXRlbUhlaWdodH19XSksdH0oKSx3bz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksbiBpbnN0YW5jZW9mIGtvfHxRLnRocm93KCdcImRlbGVnYXRlXCIgcGFyYW1ldGVyIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgTGF6eVJlcGVhdERlbGVnYXRlJyksdGhpcy5fd3JhcHBlckVsZW1lbnQ9ZSx0aGlzLl9kZWxlZ2F0ZT1uLHRoaXMuX2luc2VydEluZGV4PXRoaXMuX3dyYXBwZXJFbGVtZW50LmNoaWxkcmVuWzBdJiZcIk9OUy1MQVpZLVJFUEVBVFwiPT09dGhpcy5fd3JhcHBlckVsZW1lbnQuY2hpbGRyZW5bMF0udGFnTmFtZT8xOjAsXCJvbnMtbGlzdFwiPT09ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJmUuY2xhc3NMaXN0LmFkZChcImxhenktbGlzdFwiKSx0aGlzLl9wYWdlQ29udGVudD10aGlzLl9maW5kUGFnZUNvbnRlbnRFbGVtZW50KGUpLHRoaXMuX3BhZ2VDb250ZW50fHxRLnRocm93KFwiTGF6eVJlcGVhdCBtdXN0IGJlIGRlc2NlbmRhbnQgb2YgYSBQYWdlIGVsZW1lbnRcIiksdGhpcy5sYXN0U2Nyb2xsVG9wPXRoaXMuX3BhZ2VDb250ZW50LnNjcm9sbFRvcCx0aGlzLnBhZGRpbmc9MCx0aGlzLl90b3BQb3NpdGlvbnM9WzBdLHRoaXMuX3JlbmRlcmVkSXRlbXM9e30sdGhpcy5fZGVsZWdhdGUuaXRlbUhlaWdodHx8dGhpcy5fZGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCgwKXx8KHRoaXMuX3Vua25vd25JdGVtSGVpZ2h0PSEwKSx0aGlzLl9hZGRFdmVudExpc3RlbmVycygpLHRoaXMuX29uQ2hhbmdlKCl9cmV0dXJuIGcodCxbe2tleTpcIl9maW5kUGFnZUNvbnRlbnRFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9US5maW5kUGFyZW50KHQsXCIucGFnZV9fY29udGVudFwiKTtpZihlKXJldHVybiBlO3ZhciBuPVEuZmluZFBhcmVudCh0LFwib25zLXBhZ2VcIik7aWYobil7dmFyIGk9US5maW5kQ2hpbGQobixcIi5jb250ZW50XCIpO2lmKGkpcmV0dXJuIGl9cmV0dXJuIG51bGx9fSx7a2V5OlwiX2NoZWNrSXRlbUhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fZGVsZWdhdGUubG9hZEl0ZW1FbGVtZW50KDAsZnVuY3Rpb24obil7ZS5fdW5rbm93bkl0ZW1IZWlnaHR8fFEudGhyb3coXCJJbnZhbGlkIHN0YXRlXCIpLGUuX3dyYXBwZXJFbGVtZW50LmFwcGVuZENoaWxkKG4uZWxlbWVudCk7dmFyIGk9ZnVuY3Rpb24oKXtlLl9kZWxlZ2F0ZS5kZXN0cm95SXRlbSgwLG4pLG4uZWxlbWVudCYmbi5lbGVtZW50LnJlbW92ZSgpLGRlbGV0ZSBlLl91bmtub3duSXRlbUhlaWdodCx0KCl9O2UuX2l0ZW1IZWlnaHQ9bi5lbGVtZW50Lm9mZnNldEhlaWdodCxlLl9pdGVtSGVpZ2h0PjA/aSgpOihlLl93cmFwcGVyRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsbi5lbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtlLl9pdGVtSGVpZ2h0PW4uZWxlbWVudC5vZmZzZXRIZWlnaHQsMD09ZS5faXRlbUhlaWdodCYmUS50aHJvdygnSW52YWxpZCBzdGF0ZTogXCJpdGVtSGVpZ2h0XCIgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybycpLGUuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJcIixpKCl9KSl9KX19LHtrZXk6XCJfY291bnRJdGVtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmNvdW50SXRlbXMoKX19LHtrZXk6XCJfZ2V0SXRlbUhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZW5kZXJlZEl0ZW1zLmhhc093blByb3BlcnR5KHQpPyh0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmhhc093blByb3BlcnR5KFwiaGVpZ2h0XCIpfHwodGhpcy5fcmVuZGVyZWRJdGVtc1t0XS5oZWlnaHQ9dGhpcy5fcmVuZGVyZWRJdGVtc1t0XS5lbGVtZW50Lm9mZnNldEhlaWdodCksdGhpcy5fcmVuZGVyZWRJdGVtc1t0XS5oZWlnaHQpOnRoaXMuX3RvcFBvc2l0aW9uc1t0KzFdJiZ0aGlzLl90b3BQb3NpdGlvbnNbdF0/dGhpcy5fdG9wUG9zaXRpb25zW3QrMV0tdGhpcy5fdG9wUG9zaXRpb25zW3RdOnRoaXMuc3RhdGljSXRlbUhlaWdodHx8dGhpcy5fZGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCh0KX19LHtrZXk6XCJfY2FsY3VsYXRlUmVuZGVyZWRIZWlnaHRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiBlK3QuX2dldEl0ZW1IZWlnaHQoK24pfSwwKX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcigpfX0se2tleTpcIl9sYXN0SXRlbVJlbmRlcmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCx3KE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpKSl9fSx7a2V5OlwiX2ZpcnN0SXRlbVJlbmRlcmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCx3KE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpKSl9fSx7a2V5OlwicmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9e2ZvcmNlU2Nyb2xsRG93bjohMH0sZT1NYXRoLm1pbih0aGlzLl9sYXN0SXRlbVJlbmRlcmVkKCksdGhpcy5fY291bnRJdGVtcygpLTEpLG49dGhpcy5fZmlyc3RJdGVtUmVuZGVyZWQoKTtRLmlzSW50ZWdlcihlKSYmKHQuZm9yY2VMYXN0SW5kZXg9ZSksUS5pc0ludGVnZXIobikmJih0aGlzLl93cmFwcGVyRWxlbWVudC5zdHlsZS5oZWlnaHQ9dGhpcy5fdG9wUG9zaXRpb25zW25dK3RoaXMuX2NhbGN1bGF0ZVJlbmRlcmVkSGVpZ2h0KCkrXCJweFwiLHRoaXMucGFkZGluZz10aGlzLl90b3BQb3NpdGlvbnNbbl0sdC5mb3JjZUZpcnN0SW5kZXg9biksdGhpcy5fcmVtb3ZlQWxsRWxlbWVudHMoKSx0aGlzLl9yZW5kZXIodCksdGhpcy5fd3JhcHBlckVsZW1lbnQuc3R5bGUuaGVpZ2h0PVwiaW5oZXJpdFwifX0se2tleTpcIl9yZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1lLmZvcmNlU2Nyb2xsRG93bixpPXZvaWQgMCE9PW4mJm4sbz1lLmZvcmNlRmlyc3RJbmRleCxyPWUuZm9yY2VMYXN0SW5kZXg7aWYodGhpcy5fdW5rbm93bkl0ZW1IZWlnaHQpcmV0dXJuIHRoaXMuX2NoZWNrSXRlbUhlaWdodCh0aGlzLl9yZW5kZXIuYmluZCh0aGlzLGFyZ3VtZW50c1swXSkpO3ZhciBhPSFpJiZ0aGlzLmxhc3RTY3JvbGxUb3A+dGhpcy5fcGFnZUNvbnRlbnQuc2Nyb2xsVG9wO3RoaXMubGFzdFNjcm9sbFRvcD10aGlzLl9wYWdlQ29udGVudC5zY3JvbGxUb3A7Zm9yKHZhciBzPXt9LGw9dGhpcy5fd3JhcHBlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLHU9NCp3aW5kb3cuaW5uZXJIZWlnaHQtbCxjPXRoaXMuX2NvdW50SXRlbXMoKSxoPW98fE1hdGgubWF4KDAsdGhpcy5fY2FsY3VsYXRlU3RhcnRJbmRleChsKS0zMCksZD1oLGY9dGhpcy5fdG9wUG9zaXRpb25zW2RdO2Q8YyYmZjx1O2QrKylkPj10aGlzLl90b3BQb3NpdGlvbnMubGVuZ3RoJiYodGhpcy5fdG9wUG9zaXRpb25zLmxlbmd0aCs9MTAwKSx0aGlzLl90b3BQb3NpdGlvbnNbZF09ZixmKz10aGlzLl9nZXRJdGVtSGVpZ2h0KGQpO2lmKHRoaXMuX2RlbGVnYXRlLmhhc1JlbmRlckZ1bmN0aW9uJiZ0aGlzLl9kZWxlZ2F0ZS5oYXNSZW5kZXJGdW5jdGlvbigpKXJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fcmVuZGVyKGgsZCxmdW5jdGlvbigpe3QucGFkZGluZz10Ll90b3BQb3NpdGlvbnNbaF19KTtpZihhKWZvcih2YXIgcD1kLTE7cD49aDtwLS0pc1twXT0hMCx0aGlzLl9yZW5kZXJFbGVtZW50KHAsYSk7ZWxzZSBmb3IodmFyIGc9cnx8TWF0aC5tYXguYXBwbHkoTWF0aCxbZC0xXS5jb25jYXQodyhPYmplY3Qua2V5cyh0aGlzLl9yZW5kZXJlZEl0ZW1zKSkpKSxtPWg7bTw9ZzttKyspc1ttXT0hMCx0aGlzLl9yZW5kZXJFbGVtZW50KG0sYSk7T2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gc1tlXXx8dC5fcmVtb3ZlRWxlbWVudChlLGEpfSl9fSx7a2V5OlwiX3JlbmRlckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT10aGlzLl9yZW5kZXJlZEl0ZW1zW3RdO2k/dGhpcy5fZGVsZWdhdGUudXBkYXRlSXRlbSh0LGkpOnRoaXMuX2RlbGVnYXRlLmxvYWRJdGVtRWxlbWVudCh0LGZ1bmN0aW9uKGkpe2U/KG4uX3dyYXBwZXJFbGVtZW50Lmluc2VydEJlZm9yZShpLmVsZW1lbnQsbi5fd3JhcHBlckVsZW1lbnQuY2hpbGRyZW5bbi5faW5zZXJ0SW5kZXhdKSxuLnBhZGRpbmc9bi5fdG9wUG9zaXRpb25zW3RdLGkuaGVpZ2h0PW4uX3RvcFBvc2l0aW9uc1t0KzFdLW4uX3RvcFBvc2l0aW9uc1t0XSk6bi5fd3JhcHBlckVsZW1lbnQuYXBwZW5kQ2hpbGQoaS5lbGVtZW50KSxuLl9yZW5kZXJlZEl0ZW1zW3RdPWl9KX19LHtrZXk6XCJfcmVtb3ZlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07dD0rdDt2YXIgbj10aGlzLl9yZW5kZXJlZEl0ZW1zW3RdO3RoaXMuX2RlbGVnYXRlLmRlc3Ryb3lJdGVtKHQsbiksZT90aGlzLl90b3BQb3NpdGlvbnNbdCsxXT12b2lkIDA6dGhpcy5wYWRkaW5nPXRoaXMucGFkZGluZyt0aGlzLl9nZXRJdGVtSGVpZ2h0KHQpLG4uZWxlbWVudC5wYXJlbnRFbGVtZW50JiZuLmVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChuLmVsZW1lbnQpLGRlbGV0ZSB0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdfX0se2tleTpcIl9yZW1vdmVBbGxFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0aGlzLl9yZW5kZXJlZEl0ZW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZW1vdmVFbGVtZW50KGUpfSl9fSx7a2V5OlwiX3JlY2FsY3VsYXRlVG9wUG9zaXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dDtuPD1lO24rKyl0aGlzLl90b3BQb3NpdGlvbnNbbisxXT10aGlzLl90b3BQb3NpdGlvbnNbbl0rdGhpcy5fZ2V0SXRlbUhlaWdodChuKX19LHtrZXk6XCJfY2FsY3VsYXRlU3RhcnRJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ZpcnN0SXRlbVJlbmRlcmVkKCksbj10aGlzLl9sYXN0SXRlbVJlbmRlcmVkKCk7dGhpcy5fcmVjYWxjdWxhdGVUb3BQb3NpdGlvbnMoZSxuKTtmb3IodmFyIGk9MCxvPXRoaXMuX2NvdW50SXRlbXMoKS0xOzspe3ZhciByPU1hdGguZmxvb3IoKGkrbykvMiksYT10K3RoaXMuX3RvcFBvc2l0aW9uc1tyXTtpZihvPGkpcmV0dXJuIDA7aWYoYTw9MCYmYSt0aGlzLl9nZXRJdGVtSGVpZ2h0KHIpPjApcmV0dXJuIHI7aXNOYU4oYSl8fGE+PTA/bz1yLTE6aT1yKzF9fX0se2tleTpcIl9kZWJvdW5jZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT12b2lkIDA7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG89dGhpcyxyPWFyZ3VtZW50cyxhPW4mJiFpO2NsZWFyVGltZW91dChpKSxhP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOmk9c2V0VGltZW91dChmdW5jdGlvbigpe2k9bnVsbCx0LmFwcGx5KG8scil9LGUpfX19LHtrZXk6XCJfZG91YmxlRmlyZU9uVG91Y2hlbmRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcigpLHRoaXMuX2RlYm91bmNlKHRoaXMuX3JlbmRlci5iaW5kKHRoaXMpLDEwMCl9fSx7a2V5OlwiX2FkZEV2ZW50TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLmJpbmRMaXN0ZW5lcnModGhpcyxbXCJfb25DaGFuZ2VcIixcIl9kb3VibGVGaXJlT25Ub3VjaGVuZFwiXSksQy5pc0lPUygpJiYodGhpcy5fYm91bmRPbkNoYW5nZT10aGlzLl9kZWJvdW5jZSh0aGlzLl9ib3VuZE9uQ2hhbmdlLDMwKSksdGhpcy5fcGFnZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApLEMuaXNJT1MoKSYmKFEuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9wYWdlQ29udGVudCxcInRvdWNobW92ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2Use2NhcHR1cmU6ITAscGFzc2l2ZTohMH0pLHRoaXMuX3BhZ2VDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMuX2JvdW5kRG91YmxlRmlyZU9uVG91Y2hlbmQsITApKSx3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApfX0se2tleTpcIl9yZW1vdmVFdmVudExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcGFnZUNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApLEMuaXNJT1MoKSYmKFEucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9wYWdlQ29udGVudCxcInRvdWNobW92ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2Use2NhcHR1cmU6ITAscGFzc2l2ZTohMH0pLHRoaXMuX3BhZ2VDb250ZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMuX2JvdW5kRG91YmxlRmlyZU9uVG91Y2hlbmQsITApKSx3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUFsbEVsZW1lbnRzKCksdGhpcy5fZGVsZWdhdGUuZGVzdHJveSgpLHRoaXMuX3BhcmVudEVsZW1lbnQ9dGhpcy5fZGVsZWdhdGU9dGhpcy5fcmVuZGVyZWRJdGVtcz1udWxsLHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCl9fSx7a2V5OlwicGFkZGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLl93cmFwcGVyRWxlbWVudC5zdHlsZS5wYWRkaW5nVG9wLDEwKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3A9dCtcInB4XCJ9fSx7a2V5Olwic3RhdGljSXRlbUhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5pdGVtSGVpZ2h0fHx0aGlzLl9pdGVtSGVpZ2h0fX1dKSx0fSgpLEVvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNBdHRyaWJ1dGUoXCJkZWxlZ2F0ZVwiKSYmKHRoaXMuZGVsZWdhdGU9d2luZG93W3RoaXMuZ2V0QXR0cmlidXRlKFwiZGVsZWdhdGVcIildKX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXImJnRoaXMuX2xhenlSZXBlYXRQcm92aWRlci5yZWZyZXNoKCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyJiYodGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyLmRlc3Ryb3koKSx0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXI9bnVsbCl9fSx7a2V5OlwiZGVsZWdhdGVcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyJiZ0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXIuZGVzdHJveSgpLCF0aGlzLl90ZW1wbGF0ZUVsZW1lbnQmJnRoaXMuY2hpbGRyZW5bMF0mJih0aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9dGhpcy5yZW1vdmVDaGlsZCh0aGlzLmNoaWxkcmVuWzBdKSk7dmFyIGU9bmV3IGtvKHQsdGhpcy5fdGVtcGxhdGVFbGVtZW50fHxudWxsKTt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXI9bmV3IHdvKHRoaXMucGFyZW50RWxlbWVudCxlKX0sZ2V0OmZ1bmN0aW9uKCl7US50aHJvdyhcIk5vIGRlbGVnYXRlIGdldHRlclwiKX19XSksZX0oKTtQLkxhenlSZXBlYXREZWxlZ2F0ZT1rbyxQLkxhenlSZXBlYXRQcm92aWRlcj13byxjLkxhenlSZXBlYXQ9RW8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxhenktcmVwZWF0XCIsRW8pO3ZhciBDbz17XCJcIjpcImxpc3QtaGVhZGVyLS0qXCJ9LEFvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWhlYWRlclwiKSxCLmluaXRNb2RpZmllcih0aGlzLENvKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImxpc3QtaGVhZGVyXCIsQ28pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxDbyl9fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuTGlzdEhlYWRlcj1BbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbGlzdC1oZWFkZXJcIixBbyk7dmFyIFNvPXtcIlwiOlwibGlzdC10aXRsZS0tKlwifSxQbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2NvbXBpbGUoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdC10aXRsZVwiKSxCLmluaXRNb2RpZmllcih0aGlzLFNvKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImxpc3QtdGl0bGVcIixTbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFNvKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5MaXN0VGl0bGU9UG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxpc3QtdGl0bGVcIixQbyk7dmFyIE9vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd0V4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVFeHBhbnNpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSx4bz17XCIubGlzdC1pdGVtXCI6XCJsaXN0LWl0ZW0tLSpcIixcIi5saXN0LWl0ZW1fX2xlZnRcIjpcImxpc3QtaXRlbS0tKl9fbGVmdFwiLFwiLmxpc3QtaXRlbV9fY2VudGVyXCI6XCJsaXN0LWl0ZW0tLSpfX2NlbnRlclwiLFwiLmxpc3QtaXRlbV9fcmlnaHRcIjpcImxpc3QtaXRlbS0tKl9fcmlnaHRcIixcIi5saXN0LWl0ZW1fX2xhYmVsXCI6XCJsaXN0LWl0ZW0tLSpfX2xhYmVsXCIsXCIubGlzdC1pdGVtX190aXRsZVwiOlwibGlzdC1pdGVtLS0qX190aXRsZVwiLFwiLmxpc3QtaXRlbV9fc3VidGl0bGVcIjpcImxpc3QtaXRlbS0tKl9fc3VidGl0bGVcIixcIi5saXN0LWl0ZW1fX3RodW1ibmFpbFwiOlwibGlzdC1pdGVtLS0qX190aHVtYm5haWxcIixcIi5saXN0LWl0ZW1fX2ljb25cIjpcImxpc3QtaXRlbS0tKl9faWNvblwifSxUbz17ZGVmYXVsdDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxPbyksZyhlLFt7a2V5Olwic2hvd0V4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUV4cGFuc2lvbih0LCEwLGUpfX0se2tleTpcImhpZGVFeHBhbnNpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2FuaW1hdGVFeHBhbnNpb24odCwhMSxlKX19LHtrZXk6XCJfYW5pbWF0ZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxvPXQuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0LHI9dC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5kaXNwbGF5O3QuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0PVwiYXV0b1wiLHQuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUodC5leHBhbmRhYmxlQ29udGVudCkscz1be2hlaWdodDowLHBhZGRpbmdUb3A6MCxwYWRkaW5nQm90dG9tOjB9LHtoZWlnaHQ6YS5oZWlnaHQscGFkZGluZ1RvcDphLnBhZGRpbmdUb3AscGFkZGluZ0JvdHRvbTphLnBhZGRpbmdCb3R0b219XSxsPVt7dHJhbnNmb3JtOlwicm90YXRlKDQ1ZGVnKVwifSx7dHJhbnNmb3JtOlwicm90YXRlKDIyNWRlZylcIn1dO2lmKHQuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0PW8sKGk9bnQodC5leHBhbmRhYmxlQ29udGVudCx7ZHVyYXRpb246dGhpcy5kdXJhdGlvbixwcm9wZXJ0eTpcImhlaWdodCBwYWRkaW5nLXRvcCBwYWRkaW5nLWJvdHRvbVwifSkpLmRlZmF1bHQuYXBwbHkoaSx3KGU/czpzLnJldmVyc2UoKSkpLnBsYXkoZnVuY3Rpb24oKXt0LmV4cGFuZGFibGVDb250ZW50LnN0eWxlLmRpc3BsYXk9cixuJiZuKCl9KSx0LmV4cGFuZENoZXZyb24pe3ZhciB1Oyh1PW50KHQuZXhwYW5kQ2hldnJvbix7ZHVyYXRpb246dGhpcy5kdXJhdGlvbixwcm9wZXJ0eTpcInRyYW5zZm9ybVwifSkpLmRlZmF1bHQuYXBwbHkodSx3KGU/bDpsLnJldmVyc2UoKSkpLnBsYXkoKX19fV0pLGV9KCksbm9uZTpPb30sTG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3QuX2FuaW1hdG9yRmFjdG9yeT10Ll91cGRhdGVBbmltYXRvckZhY3RvcnkoKSx0LnRvZ2dsZUV4cGFuc2lvbj10LnRvZ2dsZUV4cGFuc2lvbi5iaW5kKHQpO3ZhciBpPS9eb25zLSg/IWNvbCR8cm93JHxpZiQpL2k7cmV0dXJuIHQuX3Nob3VsZElnbm9yZVRhcD1mdW5jdGlvbih0KXtyZXR1cm4gdC5oYXNBdHRyaWJ1dGUoXCJwcmV2ZW50LXRhcFwiKXx8aS50ZXN0KHQudGFnTmFtZSl9LHQuc2hvdz10LnNob3dFeHBhbnNpb24sdC5oaWRlPXQuaGlkZUV4cGFuc2lvbixuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtXCIpLHRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSYmdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtLS1leHBhbmRhYmxlXCIpO2Zvcih2YXIgdD12b2lkIDAsZT12b2lkIDAsbj12b2lkIDAsaT12b2lkIDAsbz12b2lkIDAscj1RLmdldEFsbENoaWxkTm9kZXModGhpcyksYT0wO2E8ci5sZW5ndGg7YSsrKXt2YXIgcz1yW2FdO3MuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGVmdFwiKT8ocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19sZWZ0XCIpLHQ9cyk6cy5jbGFzc0xpc3QuY29udGFpbnMoXCJjZW50ZXJcIik/ZT1zOnMuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmlnaHRcIik/KHMuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fcmlnaHRcIiksbj1zKTpzLmNsYXNzTGlzdC5jb250YWlucyhcInRvcFwiKT8ocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX190b3BcIiksaT1zKTpzLmNsYXNzTGlzdC5jb250YWlucyhcImV4cGFuZGFibGUtY29udGVudFwiKSYmKHMuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fZXhwYW5kYWJsZS1jb250ZW50XCIpLG89cyl9aWYoIW4mJnRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSl7KG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fcmlnaHRcIixcInJpZ2h0XCIpO3ZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2wuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fZXhwYW5kLWNoZXZyb25cIiksbi5hcHBlbmRDaGlsZChsKX1pZighZSl7aWYoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHR8fG58fG8pZm9yKHZhciB1PXRoaXMuY2hpbGROb2Rlcy5sZW5ndGgtMTt1Pj0wO3UtLSl7dmFyIGM9dGhpcy5jaGlsZE5vZGVzW3VdO2MhPT10JiZjIT09biYmYyE9PW8mJlwiT05TLVJJUFBMRVwiIT09Yy50YWdOYW1lJiZlLmluc2VydEJlZm9yZShjLGUuZmlyc3RDaGlsZCl9ZWxzZSBmb3IoO3RoaXMuY2hpbGROb2Rlc1swXTspZS5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO298fHRoaXMuaW5zZXJ0QmVmb3JlKGUsbnx8bnVsbCl9ZS5jbGFzc0xpc3QuYWRkKFwiY2VudGVyXCIsXCJsaXN0LWl0ZW1fX2NlbnRlclwiKSxvJiYodGhpcy5fdG9wPWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fdG9wLmNsYXNzTGlzdC5hZGQoXCJ0b3BcIixcImxpc3QtaXRlbV9fdG9wXCIpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5fdG9wKSx0aGlzLl90b3AuYXBwZW5kQ2hpbGQoZSksdCYmdGhpcy5fdG9wLmFwcGVuZENoaWxkKHQpLG4mJnRoaXMuX3RvcC5hcHBlbmRDaGlsZChuKSksUS51cGRhdGVSaXBwbGUodGhpcyksQi5pbml0TW9kaWZpZXIodGhpcyx4byl9fSx7a2V5Olwic2hvd0V4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLmhhc0F0dHJpYnV0ZShcImV4cGFuZGFibGVcIikmJiF0aGlzLl9leHBhbmRpbmcpe3RoaXMuZXhwYW5kZWQ9ITAsdGhpcy5fZXhwYW5kaW5nPSEwO3RoaXMuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcigpLnNob3dFeHBhbnNpb24odGhpcyxmdW5jdGlvbigpe3QuY2xhc3NMaXN0LmFkZChcImV4cGFuZGVkXCIpLHQuX2V4cGFuZGluZz0hMX0pfX19LHtrZXk6XCJoaWRlRXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSYmIXRoaXMuX2V4cGFuZGluZyl7dGhpcy5leHBhbmRlZD0hMSx0aGlzLl9leHBhbmRpbmc9ITA7dGhpcy5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKCkuaGlkZUV4cGFuc2lvbih0aGlzLGZ1bmN0aW9uKCl7dC5jbGFzc0xpc3QucmVtb3ZlKFwiZXhwYW5kZWRcIiksdC5fZXhwYW5kaW5nPSExfSl9fX0se2tleTpcInRvZ2dsZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJleHBhbmRlZFwiKT90aGlzLmhpZGVFeHBhbnNpb24oKTp0aGlzLnNob3dFeHBhbnNpb24oKX19LHtrZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczpUbyxiYXNlQ2xhc3M6T28sYmFzZUNsYXNzTmFtZTpcIkxpc3RJdGVtQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfHxcImRlZmF1bHRcIn0pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdC1pdGVtXCIseG8pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyx4byk7YnJlYWs7Y2FzZVwicmlwcGxlXCI6US51cGRhdGVSaXBwbGUodGhpcyk7YnJlYWs7Y2FzZVwiYW5pbWF0aW9uXCI6dGhpcy5fYW5pbWF0b3JGYWN0b3J5PXRoaXMuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9zZXR1cExpc3RlbmVycyghMCksdC5fb3JpZ2luYWxCYWNrZ3JvdW5kQ29sb3I9dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IsdC50YXBwZWQ9ITF9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBMaXN0ZW5lcnMoITEpfX0se2tleTpcIl9zZXR1cExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSh0P1wiYWRkXCI6XCJyZW1vdmVcIikrXCJFdmVudExpc3RlbmVyXCI7UVtlXSh0aGlzLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2gse3Bhc3NpdmU6ITB9KSxRW2VdKHRoaXMsXCJ0b3VjaG1vdmVcIix0aGlzLl9vblJlbGVhc2Use3Bhc3NpdmU6ITB9KSx0aGlzW2VdKFwidG91Y2hjYW5jZWxcIix0aGlzLl9vblJlbGVhc2UpLHRoaXNbZV0oXCJ0b3VjaGVuZFwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcInRvdWNobGVhdmVcIix0aGlzLl9vblJlbGVhc2UpLHRoaXNbZV0oXCJkcmFnXCIsdGhpcy5fb25EcmFnKSx0aGlzW2VdKFwibW91c2Vkb3duXCIsdGhpcy5fb25Ub3VjaCksdGhpc1tlXShcIm1vdXNldXBcIix0aGlzLl9vblJlbGVhc2UpLHRoaXNbZV0oXCJtb3VzZW91dFwiLHRoaXMuX29uUmVsZWFzZSksdGhpcy5fdG9wJiZ0aGlzLl90b3BbZV0oXCJjbGlja1wiLHRoaXMudG9nZ2xlRXhwYW5zaW9uKX19LHtrZXk6XCJfb25EcmFnXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXN0dXJlO3RoaXMuaGFzQXR0cmlidXRlKFwibG9jay1vbi1kcmFnXCIpJiZbXCJsZWZ0XCIsXCJyaWdodFwiXS5pbmRleE9mKGUuZGlyZWN0aW9uKT4tMSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0se2tleTpcIl9vblRvdWNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighKHRoaXMudGFwcGVkfHx0aGlzIT09dC50YXJnZXQmJih0aGlzLl9zaG91bGRJZ25vcmVUYXAodC50YXJnZXQpfHxRLmZpbmRQYXJlbnQodC50YXJnZXQsdGhpcy5fc2hvdWxkSWdub3JlVGFwLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pKSkpe3RoaXMudGFwcGVkPSEwO3ZhciBuPXt0cmFuc2l0aW9uOlwiYmFja2dyb3VuZC1jb2xvciAwLjBzIGxpbmVhciAwLjAycywgYm94LXNoYWRvdyAwLjBzIGxpbmVhciAwLjAyc1wifTt0aGlzLmhhc0F0dHJpYnV0ZShcInRhcHBhYmxlXCIpJiYodGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3ImJih0aGlzLl9vcmlnaW5hbEJhY2tncm91bmRDb2xvcj10aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciksbi5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0YXAtYmFja2dyb3VuZC1jb2xvclwiKXx8XCIjZDlkOWQ5XCIsbi5ib3hTaGFkb3c9XCIwcHggLTFweCAwcHggMHB4IFwiK24uYmFja2dyb3VuZENvbG9yKSxkKHRoaXMsbil9fX0se2tleTpcIl9vblJlbGVhc2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGFwcGVkPSExLHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuX29yaWdpbmFsQmFja2dyb3VuZENvbG9yfHxcIlwiLGQuY2xlYXIodGhpcyxcInRyYW5zaXRpb24gYm94U2hhZG93XCIpfX0se2tleTpcImV4cGFuZGFibGVDb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW1fX2V4cGFuZGFibGUtY29udGVudFwiKX19LHtrZXk6XCJleHBhbmRDaGV2cm9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW1fX2V4cGFuZC1jaGV2cm9uXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCIsXCJyaXBwbGVcIixcImFuaW1hdGlvblwiXX19XSksZX0oKTtjLkxpc3RJdGVtPUxvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1saXN0LWl0ZW1cIixMbyk7dmFyIE1vPXtcIlwiOlwibGlzdC0tKlwifSxEbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2NvbXBpbGUoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdFwiKSxCLmluaXRNb2RpZmllcih0aGlzLE1vKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImxpc3RcIixNbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLE1vKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5MaXN0PURvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1saXN0XCIsRG8pO3ZhciBJbz1bXCJhdXRvY2FwaXRhbGl6ZVwiLFwiYXV0b2NvbXBsZXRlXCIsXCJhdXRvY29ycmVjdFwiLFwiYXV0b2ZvY3VzXCIsXCJkaXNhYmxlZFwiLFwiaW5wdXRtb2RlXCIsXCJtYXhcIixcIm1heGxlbmd0aFwiLFwibWluXCIsXCJtaW5sZW5ndGhcIixcIm5hbWVcIixcInBhdHRlcm5cIixcInBsYWNlaG9sZGVyXCIsXCJyZWFkb25seVwiLFwicmVxdWlyZWRcIixcInNpemVcIixcInN0ZXBcIixcInZhbGlkYXRvclwiLFwidmFsdWVcIl0sTm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmNvbnN0cnVjdG9yPT09ZSYmUS50aHJvd0Fic3RyYWN0KCksbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX2JvdW5kRGVsZWdhdGVFdmVudD10Ll9kZWxlZ2F0ZUV2ZW50LmJpbmQodCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfdXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19XSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lJiZ0aGlzLmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdENsYXNzTmFtZSksMD09PXRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYodGhpcy5hcHBlbmRDaGlsZChRLmNyZWF0ZUZyYWdtZW50KHRoaXMuX3RlbXBsYXRlKSksdGhpcy5fc2V0SW5wdXRJZCgpLHRoaXMuX3VwZGF0ZUJvdW5kQXR0cmlidXRlcygpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKSl9fSx7a2V5OlwiX3VwZGF0ZUJvdW5kQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztJby5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuaGFzQXR0cmlidXRlKGUpP3QuX2lucHV0LnNldEF0dHJpYnV0ZShlLHQuZ2V0QXR0cmlidXRlKGUpKTp0Ll9pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoZSl9KSx0aGlzLl91cGRhdGUoKX19LHtrZXk6XCJfZGVsZWdhdGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBDdXN0b21FdmVudCh0LnR5cGUse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMH0pO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoZSl9fSx7a2V5OlwiX3NldElucHV0SWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGFzQXR0cmlidXRlKFwiaW5wdXQtaWRcIikmJih0aGlzLl9pbnB1dC5pZD10aGlzLmdldEF0dHJpYnV0ZShcImlucHV0LWlkXCIpKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0Ll9ib3VuZERlbGVnYXRlRXZlbnQpLHQuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdC5fYm91bmREZWxlZ2F0ZUV2ZW50KX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHQuX2JvdW5kRGVsZWdhdGVFdmVudCksdC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0Ll9ib3VuZERlbGVnYXRlRXZlbnQpfSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcIm1vZGlmaWVyXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIEIub25Nb2RpZmllckNoYW5nZWQoZSxpLG8sby5fc2NoZW1lKX0pO2JyZWFrO2Nhc2VcImlucHV0LWlkXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3NldElucHV0SWQoKX0pO2JyZWFrO2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyx0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lLHRoaXMuX3NjaGVtZSl9SW8uaW5kZXhPZih0KT49MCYmbih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3VwZGF0ZUJvdW5kQXR0cmlidXRlcygpfSl9fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIlwifX0se2tleTpcIl9pbnB1dFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKX19LHtrZXk6XCJ2YWx1ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5faW5wdXQ/dGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTp0aGlzLl9pbnB1dC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dCBpbnN0YW5jZW9mIERhdGUmJih0PXQudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwxMCkpLGUuX2lucHV0LnZhbHVlPXQsZS5fdXBkYXRlKCl9KX19LHtrZXk6XCJkaXNhYmxlZFwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImlucHV0LWlkXCIsXCJjbGFzc1wiXS5jb25jYXQoSW8pfX1dKSxlfSgpLEJvPXtcIi50ZXh0LWlucHV0XCI6XCJ0ZXh0LWlucHV0LS0qXCIsXCIudGV4dC1pbnB1dF9fbGFiZWxcIjpcInRleHQtaW5wdXQtLSpfX2xhYmVsXCJ9LGpvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fYm91bmRPbklucHV0PXQuX3VwZGF0ZS5iaW5kKHQpLHQuX2JvdW5kT25Gb2N1c2luPXQuX3VwZGF0ZS5iaW5kKHQpLHR9cmV0dXJuIGIoZSxObyksZyhlLFt7a2V5OlwiX3VwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlTGFiZWwoKSx0aGlzLl91cGRhdGVMYWJlbENsYXNzKCl9fSx7a2V5OlwiX3VwZGF0ZUxhYmVsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpfHxcIlwiO3ZvaWQgMCE9PXRoaXMuX2hlbHBlci50ZXh0Q29udGVudD90aGlzLl9oZWxwZXIudGV4dENvbnRlbnQ9dDp0aGlzLl9oZWxwZXIuaW5uZXJUZXh0PXR9fSx7a2V5OlwiX3VwZGF0ZUxhYmVsQ2xhc3NcIix2YWx1ZTpmdW5jdGlvbigpe1wiXCI9PT10aGlzLnZhbHVlP3RoaXMuX2hlbHBlci5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1pbnB1dC0tbWF0ZXJpYWxfX2xhYmVsLS1hY3RpdmVcIik6dGhpcy5faGVscGVyLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWlucHV0LS1tYXRlcmlhbF9fbGFiZWwtLWFjdGl2ZVwiKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImNvbm5lY3RlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzKSxuKHRoaXMsZnVuY3Rpb24oKXt0Ll9pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIix0Ll9ib3VuZE9uSW5wdXQpLHQuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsdC5fYm91bmRPbkZvY3VzaW4pfSk7dmFyIGk9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO1tcImNoZWNrYm94XCIsXCJyYWRpb1wiXS5pbmRleE9mKGkpPj0wJiZRLndhcm4oJ1dhcm46IDxvbnMtaW5wdXQgdHlwZT1cIicraSsnXCI+IGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuNC4wLiBVc2UgPG9ucy0nK2krXCI+IGluc3RlYWQuXCIpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLG4odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLHQuX2JvdW5kT25JbnB1dCksdC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIix0Ll9ib3VuZE9uRm9jdXNpbil9KX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGksbyl7dmFyIHI9dGhpcztzd2l0Y2godCl7Y2FzZVwidHlwZVwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiByLl9pbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsci50eXBlKX0pO2JyZWFrO2RlZmF1bHQ6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxpLG8pfX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvfX0se2tleTpcIl90ZW1wbGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybidcXG4gICAgICA8aW5wdXQgdHlwZT1cIicrdGhpcy50eXBlKydcIiBjbGFzcz1cInRleHQtaW5wdXRcIj5cXG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtaW5wdXRfX2xhYmVsXCI+PC9zcGFuPlxcbiAgICAnfX0se2tleTpcInR5cGVcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIik7cmV0dXJuW1wiY2hlY2tib3hcIixcInJhZGlvXCJdLmluZGV4T2YodCk8MCYmdHx8XCJ0ZXh0XCJ9fSx7a2V5OlwiX2hlbHBlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcInR5cGVcIl0pfX1dKSxlfSgpO2MuSW5wdXQ9am8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWlucHV0XCIsam8pO3ZhciBIbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuY29uc3RydWN0b3I9PT1lJiZ1dGlsLnRocm93QWJzdHJhY3QoKSxuKHQsZnVuY3Rpb24oKXt0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcImNoZWNrZWRcIixudWxsLHQuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSl9KSx0fXJldHVybiBiKGUsTm8pLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXtzd2l0Y2godCl7Y2FzZVwiY2hlY2tlZFwiOnRoaXMuY2hlY2tlZD1udWxsIT09aTticmVhaztkZWZhdWx0OnYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX2lucHV0XCI+XFxuICAgICAgPHNwYW4gY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19fY2hlY2ttYXJrXCI+PC9zcGFuPlxcbiAgICAnfX0se2tleTpcIl9oZWxwZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwic3BhblwiKX19LHtrZXk6XCJjaGVja2VkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0LmNoZWNrZWR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO24odGhpcyxmdW5jdGlvbigpe2UuX2lucHV0LmNoZWNrZWQ9dH0pfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcImNoZWNrZWRcIl0pfX1dKSxlfSgpLFJvPXtcIi5jaGVja2JveFwiOlwiY2hlY2tib3gtLSpcIixcIi5jaGVja2JveF9faW5wdXRcIjpcImNoZWNrYm94LS0qX19pbnB1dFwiLFwiLmNoZWNrYm94X19jaGVja21hcmtcIjpcImNoZWNrYm94LS0qX19jaGVja21hcmtcIn0sRm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsSG8pLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUm99fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCJ9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIn19XSksZX0oKTtjLkNoZWNrYm94PUZvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jaGVja2JveFwiLEZvKTt2YXIgcW89e1wiLnJhZGlvLWJ1dHRvblwiOlwicmFkaW8tYnV0dG9uLS0qXCIsXCIucmFkaW8tYnV0dG9uX19pbnB1dFwiOlwicmFkaW8tYnV0dG9uLS0qX19pbnB1dFwiLFwiLnJhZGlvLWJ1dHRvbl9fY2hlY2ttYXJrXCI6XCJyYWRpby1idXR0b24tLSpfX2NoZWNrbWFya1wifSx6bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxIbyksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBxb319LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFkaW8tYnV0dG9uXCJ9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFkaW9cIn19XSksZX0oKTtjLlJhZGlvPXpvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yYWRpb1wiLHpvKTt2YXIgVm89e1wiLnNlYXJjaC1pbnB1dFwiOlwic2VhcmNoLWlucHV0LS0qXCJ9LFdvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLE5vKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFZvfX0se2tleTpcIl90ZW1wbGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybidcXG4gICAgICA8aW5wdXQgdHlwZT1cIicrdGhpcy50eXBlKydcIiBjbGFzcz1cInNlYXJjaC1pbnB1dFwiPlxcbiAgICAnfX0se2tleTpcInR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInNlYXJjaFwifX1dKSxlfSgpO2MuU2VhcmNoSW5wdXQ9V28sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNlYXJjaC1pbnB1dFwiLFdvKTt2YXIgVW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLFhvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxVbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX1dKSxlfSgpLFlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoIC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy40OmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVW8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDEwMCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMTAwJSwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KS5wbGF5KCl9fV0pLGV9KCksR289e1wiXCI6XCJtb2RhbC0tKlwiLG1vZGFsX19jb250ZW50OlwibW9kYWwtLSpfX2NvbnRlbnRcIn0sJG89e2RlZmF1bHQ6VW8sZmFkZTpYbyxsaWZ0OllvLG5vbmU6VW99LEtvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZGVmYXVsdERCQj1mdW5jdGlvbigpe30sbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6JG8sYmFzZUNsYXNzOlVvLGJhc2VDbGFzc05hbWU6XCJNb2RhbEFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5zdHlsZS56SW5kZXg9MTAwMDEsdGhpcy5jbGFzc0xpc3QuYWRkKFwibW9kYWxcIiksIVEuZmluZENoaWxkKHRoaXMsXCIubW9kYWxfX2NvbnRlbnRcIikpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKHQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19jb250ZW50XCIpO3RoaXMuY2hpbGROb2Rlc1swXTspe3ZhciBlPXRoaXMuY2hpbGROb2Rlc1swXTt0aGlzLnJlbW92ZUNoaWxkKGUpLHQuaW5zZXJ0QmVmb3JlKGUsbnVsbCl9dGhpcy5hcHBlbmRDaGlsZCh0KX1CLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3RvZ2dsZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5zdHlsZS5kaXNwbGF5PXQ/XCJ0YWJsZVwiOlwibm9uZVwifX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImNvbm5lY3RlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe1wiY2xhc3NcIj09PXQ/US5yZXN0b3JlQ2xhc3ModGhpcyxcIm1vZGFsXCIsR28pOnYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEdvfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBVb3x8US50aHJvd0FuaW1hdG9yKFwiTW9kYWxcIiksJG9bdF09ZX19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wiY2xhc3NcIl0pfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiAkb319LHtrZXk6XCJNb2RhbEFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFVvfX1dKSxlfSgpO2MuTW9kYWw9S28sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLW1vZGFsXCIsS28pO3ZhciBRbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49dGhpcztwKHRoaXMsdCksXCJlbGVtZW50IGlnbm9yZVN3aXBlIGlzSW5pdGlhbFN0YXRlIG9uRHJhZ0NhbGxiYWNrIHN3aXBlTWF4IHN3aXBlTWluIHN3aXBlTWlkXCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdPWVbdF19KSx0aGlzLmVsZW1lbnRIYW5kbGVyPWUuZWxlbWVudEhhbmRsZXJ8fGUuZWxlbWVudCx0aGlzLmdldFRocmVzaG9sZD1lLmdldFRocmVzaG9sZHx8ZnVuY3Rpb24oKXtyZXR1cm4uNX0sdGhpcy5nZXRTaWRlPWUuZ2V0U2lkZXx8ZnVuY3Rpb24oKXtyZXR1cm5cImxlZnRcIn0sdGhpcy5oYW5kbGVHZXN0dXJlPXRoaXMuaGFuZGxlR2VzdHVyZS5iaW5kKHRoaXMpLHRoaXMuX3Nob3VsZEZpeFNjcm9sbD1cImlvc1wiPT09US5nbG9iYWxzLmFjdHVhbE1vYmlsZU9TfXJldHVybiBnKHQsW3trZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwic3dpcGVhYmxlXCIpO3RoaXMuZ2VzdHVyZURldGVjdG9yfHwodGhpcy5nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMuZWxlbWVudEhhbmRsZXIse2RyYWdNaW5EaXN0YW5jZToxLHBhc3NpdmU6IXRoaXMuX3Nob3VsZEZpeFNjcm9sbH0pKTt2YXIgZT10P1wib25cIjpcIm9mZlwiO3RoaXMuZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZyBkcmFnc3RhcnQgZHJhZ2VuZFwiLHRoaXMuaGFuZGxlR2VzdHVyZSl9fSx7a2V5OlwiaGFuZGxlR2VzdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZ2VzdHVyZSYmKFwiZHJhZ3N0YXJ0XCI9PT10LnR5cGU/dGhpcy5vbkRyYWdTdGFydCh0KTp0aGlzLl9pZ25vcmVEcmFnfHwoXCJkcmFnZW5kXCI9PT10LnR5cGU/dGhpcy5vbkRyYWdFbmQodCk6dGhpcy5vbkRyYWcodCkpKX19LHtrZXk6XCJvbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faWdub3JlRHJhZz10LmNvbnN1bWVkfHwhUS5pc1ZhbGlkR2VzdHVyZSh0KXx8dGhpcy5pZ25vcmVTd2lwZSh0LFwibGVmdFwiPT09ZS5nZXRTaWRlKCk/dC5nZXN0dXJlLmNlbnRlci5jbGllbnRYOndpbmRvdy5pbm5lcldpZHRoLXQuZ2VzdHVyZS5jZW50ZXIuY2xpZW50WCksdGhpcy5faWdub3JlRHJhZ3x8KHQuY29uc3VtZSYmdC5jb25zdW1lKCksdC5jb25zdW1lZD0hMCx0aGlzLl93aWR0aD1mdW5jdGlvbih0KXt2YXIgZT1bcGFyc2VJbnQodCwxMCksL3B4Ly50ZXN0KHQpXSxuPWVbMF07cmV0dXJuIGVbMV0/bjpNYXRoLnJvdW5kKGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgqbi8xMDApfSh0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGh8fFwiMTAwJVwiKSx0aGlzLl9zdGFydERpc3RhbmNlPXRoaXMuX2Rpc3RhbmNlPXRoaXMuaXNJbml0aWFsU3RhdGUgaW5zdGFuY2VvZiBGdW5jdGlvbiYmIXRoaXMuaXNJbml0aWFsU3RhdGUoKT90aGlzLl93aWR0aDowLFEuaW9zUHJldmVudFNjcm9sbCh0aGlzLmdlc3R1cmVEZXRlY3RvcikpfX0se2tleTpcIm9uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGU9XCJsZWZ0XCI9PT10aGlzLmdldFNpZGUoKT90Lmdlc3R1cmUuZGVsdGFYOi10Lmdlc3R1cmUuZGVsdGFYLG49TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLl93aWR0aCx0aGlzLl9zdGFydERpc3RhbmNlK2UpKTtuIT09dGhpcy5fZGlzdGFuY2UmJih0aGlzLl9kaXN0YW5jZT1uLHRoaXMuc3dpcGVNaWQodGhpcy5fZGlzdGFuY2UsdGhpcy5fd2lkdGgpKX19LHtrZXk6XCJvbkRyYWdFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpO3ZhciBlPXQuZ2VzdHVyZS5pbnRlcmltRGlyZWN0aW9uO3RoaXMuZ2V0U2lkZSgpIT09ZSYmdGhpcy5fZGlzdGFuY2U+dGhpcy5fd2lkdGgqdGhpcy5nZXRUaHJlc2hvbGQoKT90aGlzLnN3aXBlTWF4KCk6dGhpcy5zd2lwZU1pbigpfX0se2tleTpcImRpc3Bvc2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2VzdHVyZURldGVjdG9yJiZ0aGlzLmdlc3R1cmVEZXRlY3Rvci5kaXNwb3NlKCksdGhpcy5nZXN0dXJlRGV0ZWN0b3I9dGhpcy5lbGVtZW50PXRoaXMuZWxlbWVudEhhbmRsZXI9bnVsbH19XSksdH0oKSxKbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBwKHRoaXMsZSksdD1RLmV4dGVuZCh7dGltaW5nOlwibGluZWFyXCIsZHVyYXRpb246XCIwLjRcIixkZWxheTpcIjBcIn0sdHx8e30pLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe24oKX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7bigpfX0se2tleTpcImJsb2NrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9US5jcmVhdGVFbGVtZW50KCdcXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgei1pbmRleDogMTAwMDAwXCI+PC9kaXY+XFxuICAgICcpO3JldHVybiB0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZSksZnVuY3Rpb24oKXtyZXR1cm4gZS5yZW1vdmUoKX19fV0pLGV9KCksWm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQuZHVyYXRpb25SZXN0b3JlLGk9dm9pZCAwPT09bj8uMTpuLG89dC5kdXJhdGlvblN3aXBlLHI9dm9pZCAwPT09bz8uMTU6byxhPXQudGltaW5nU3dpcGUscz12b2lkIDA9PT1hP1wibGluZWFyXCI6YSxsPXkodCxbXCJkdXJhdGlvblJlc3RvcmVcIixcImR1cmF0aW9uU3dpcGVcIixcInRpbWluZ1N3aXBlXCJdKTtwKHRoaXMsZSk7dmFyIHU9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsXyh7fSxsKSkpO3JldHVybiB1LmNvbnN0cnVjdG9yPT09ZSYmUS50aHJvd0Fic3RyYWN0KCksdS5kdXJhdGlvblJlc3RvcmU9aSx1LmR1cmF0aW9uU3dpcGU9cix1LnRpbWluZ1N3aXBlPXMsdS5vcHRTd2lwZT17dGltaW5nOnMsZHVyYXRpb246cn0sdS5vcHRSZXN0b3JlPXt0aW1pbmc6cyxkdXJhdGlvbjppfSx1LnN3aXBlU2hhZG93PVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTJweDsgcmlnaHQ6IDEwMCU7IHRvcDogMDsgYm90dG9tOiAwOyB6LWluZGV4OiAtMTtiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHRyYW5zcGFyZW50IDAsIHJnYmEoMCwwLDAsLjA0KSA0MCUsIHJnYmEoMCwwLDAsLjEyKSA4MCUsIHJnYmEoMCwwLDAsLjE2KSAxMDAlKTtcIj48L2Rpdj4nKSx1LmlzRHJhZ1N0YXJ0PSEwLHV9cmV0dXJuIGIoZSxKbyksZyhlLG51bGwsW3trZXk6XCJzd2lwZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH19XSksZyhlLFt7a2V5OlwiX2RlY29tcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9zaG91bGRBbmltYXRlVG9vbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9jYWxjdWxhdGVEZWx0YVwiLHZhbHVlOmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9kcmFnU3RhcnRTZXR1cFwiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dGhpcy5pc0RyYWdTdGFydD0hMSx0aGlzLnVuYmxvY2s9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyxuKSx0LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCksdGhpcy50YXJnZXQ9e2VudGVyOlEuZmluZFRvb2xiYXJQYWdlKHQpfHx0LGxlYXZlOlEuZmluZFRvb2xiYXJQYWdlKG4pfHxufSx0aGlzLmRlY29tcD17ZW50ZXI6dGhpcy5fZGVjb21wb3NlKHRoaXMudGFyZ2V0LmVudGVyKSxsZWF2ZTp0aGlzLl9kZWNvbXBvc2UodGhpcy50YXJnZXQubGVhdmUpfSx0aGlzLmRlbHRhPXRoaXMuX2NhbGN1bGF0ZURlbHRhKG4sdGhpcy5kZWNvbXAubGVhdmUpLHRoaXMuc2hvdWxkQW5pbWF0ZVRvb2xiYXI9dGhpcy5fc2hvdWxkQW5pbWF0ZVRvb2xiYXIodGhpcy50YXJnZXQuZW50ZXIsdGhpcy50YXJnZXQubGVhdmUpLHRoaXMuc2hvdWxkQW5pbWF0ZVRvb2xiYXI/KHRoaXMuc3dpcGVTaGFkb3cuc3R5bGUudG9wPXRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIub2Zmc2V0SGVpZ2h0K1wicHhcIix0aGlzLnRhcmdldC5sZWF2ZS5hcHBlbmRDaGlsZCh0aGlzLnN3aXBlU2hhZG93KSx0aGlzLl9zYXZlU3R5bGUodGhpcy50YXJnZXQuZW50ZXIsdGhpcy50YXJnZXQubGVhdmUpKToobi5hcHBlbmRDaGlsZCh0aGlzLnN3aXBlU2hhZG93KSx0aGlzLl9zYXZlU3R5bGUodCxuKSksbi5jbGFzc0xpc3QuYWRkKFwib3ZlcmZsb3ctdmlzaWJsZVwiKSx0aGlzLm92ZXJmbG93RWxlbWVudD1uLHRoaXMuZGVjb21wLmxlYXZlLmNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImNvbnRlbnQtc3dpcGluZ1wiKX19LHtrZXk6XCJ0cmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt0aGlzLmlzU3dpcGluZz0hMCxcIm5vbmVcIj09PW4uc3R5bGUuZGlzcGxheSYmKG4uc3R5bGUuZGlzcGxheT1cIlwiKSx0aGlzLmlzRHJhZ1N0YXJ0JiYodGhpcy5tYXhXaWR0aD1lLHRoaXMuX2RyYWdTdGFydFNldHVwKG4saSkpO3ZhciBvPSh0LWUpL2U7dGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj9udC5ydW5BbGwobnQoW3RoaXMuZGVjb21wLmVudGVyLmNvbnRlbnQsdGhpcy5kZWNvbXAuZW50ZXIuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5lbnRlci5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKzI1Km8rXCIlLCAwLCAwKVwiLG9wYWNpdHk6MSsxMCpvLzEwMH0pLG50KHRoaXMuZGVjb21wLmVudGVyLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLnRpdGxlKm8rXCJweCwgMCwgMClcIixvcGFjaXR5OjErb30pLG50KHRoaXMuZGVjb21wLmVudGVyLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe29wYWNpdHk6MSsxMCpvLzEwMCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLmxhYmVsKm8rXCJweCwgMCwgMClcIn0pLG50KHRoaXMuZGVjb21wLmVudGVyLm90aGVyKS5xdWV1ZSh7b3BhY2l0eToxK299KSxudChbdGhpcy5kZWNvbXAubGVhdmUuY29udGVudCx0aGlzLmRlY29tcC5sZWF2ZS5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmxlYXZlLmJhY2tncm91bmQsdGhpcy5zd2lwZVNoYWRvd10pLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0K1wicHgsIDAsIDApXCJ9KSxudCh0aGlzLmRlY29tcC5sZWF2ZS50b29sYmFyKS5xdWV1ZSh7b3BhY2l0eTotMSpvfSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKzEyNSooMStvKStcIiUsIDAsIDApXCJ9KSxudCh0aGlzLmRlY29tcC5sZWF2ZS5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHtvcGFjaXR5Oi0xKm8sdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrdGhpcy5kZWx0YS50aXRsZSooMStvKStcInB4LCAwLCAwKVwifSksbnQodGhpcy5zd2lwZVNoYWRvdykucXVldWUoe29wYWNpdHk6LTEqb30pKTpudC5ydW5BbGwobnQoaSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3QrXCJweCwgMCwgMClcIn0pLG50KG4pLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisyNSpvK1wiJSwgMCwgMClcIixvcGFjaXR5OjErMTAqby8xMDB9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTotMSpvfSkpfX0se2tleTpcInJlc3RvcmVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpczt0aGlzLmlzRHJhZ1N0YXJ0fHwodGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj9udC5ydW5BbGwobnQoW3RoaXMuZGVjb21wLmVudGVyLmNvbnRlbnQsdGhpcy5kZWNvbXAuZW50ZXIuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5lbnRlci5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC0yNSUsIDAsIDApXCIsb3BhY2l0eTouOX0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5lbnRlci50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLVwiK3RoaXMuZGVsdGEudGl0bGUrXCJweCwgMCwgMClcIix0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uUmVzdG9yZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblJlc3RvcmUrXCJzIFwiK3RoaXMudGltaW5nU3dpcGUsb3BhY2l0eTowfSksbnQodGhpcy5kZWNvbXAuZW50ZXIuYmFja0J1dHRvbkxhYmVsKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLVwiK3RoaXMuZGVsdGEubGFiZWwrXCJweCwgMCwgMClcIn0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5lbnRlci5vdGhlcikucXVldWUoe29wYWNpdHk6MH0sdGhpcy5vcHRSZXN0b3JlKSxudChbdGhpcy5kZWNvbXAubGVhdmUuY29udGVudCx0aGlzLmRlY29tcC5sZWF2ZS5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmxlYXZlLmJhY2tncm91bmQsdGhpcy5zd2lwZVNoYWRvd10pLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLm9wdFJlc3RvcmUpLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIpLnF1ZXVlKHtvcGFjaXR5OjF9LHRoaXMub3B0UmVzdG9yZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMub3B0UmVzdG9yZSksbnQodGhpcy5kZWNvbXAubGVhdmUuYmFja0J1dHRvbkxhYmVsKS5xdWV1ZSh7b3BhY2l0eToxLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrdGhpcy5kdXJhdGlvblJlc3RvcmUrXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3RoaXMuZHVyYXRpb25SZXN0b3JlK1wicyBcIit0aGlzLnRpbWluZ1N3aXBlfSksbnQodGhpcy5zd2lwZVNoYWRvdykucXVldWUoe29wYWNpdHk6MH0sdGhpcy5vcHRSZXN0b3JlKS5xdWV1ZShmdW5jdGlvbihlKXtpLl9yZXNldChpLnRhcmdldC5lbnRlcixpLnRhcmdldC5sZWF2ZSksdC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLG4mJm4oKSxlKCl9KSk6bnQucnVuQWxsKG50KHQpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgtMjUlLCAwLCAwKVwiLG9wYWNpdHk6Ljl9LHRoaXMub3B0UmVzdG9yZSksbnQoZSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCJ9LHRoaXMub3B0UmVzdG9yZSkucXVldWUoZnVuY3Rpb24obyl7aS5fcmVzZXQodCxlKSx0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbiYmbigpLG8oKX0pKSl9fSx7a2V5OlwicG9wU3dpcGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpczt0aGlzLmlzRHJhZ1N0YXJ0fHwodGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj9udC5ydW5BbGwobnQoW3RoaXMuZGVjb21wLmVudGVyLmNvbnRlbnQsdGhpcy5kZWNvbXAuZW50ZXIuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5lbnRlci5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSx0aGlzLm9wdFN3aXBlKSxudCh0aGlzLmRlY29tcC5lbnRlci50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIix0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uU3dpcGUrXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3RoaXMuZHVyYXRpb25Td2lwZStcInMgXCIrdGhpcy50aW1pbmdTd2lwZSxvcGFjaXR5OjF9KSxudCh0aGlzLmRlY29tcC5lbnRlci5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLm9wdFN3aXBlKSxudCh0aGlzLmRlY29tcC5lbnRlci5vdGhlcikucXVldWUoe29wYWNpdHk6MX0sdGhpcy5vcHRTd2lwZSksbnQoW3RoaXMuZGVjb21wLmxlYXZlLmNvbnRlbnQsdGhpcy5kZWNvbXAubGVhdmUuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5sZWF2ZS5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDEwMCUsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIpLnF1ZXVlKHtvcGFjaXR5OjB9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgxMjUlLCAwLCAwKVwifSx0aGlzLm9wdFN3aXBlKSxudCh0aGlzLmRlY29tcC5sZWF2ZS5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHtvcGFjaXR5OjAsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrdGhpcy5kZWx0YS50aXRsZStcInB4LCAwLCAwKVwiLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb25Td2lwZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblN3aXBlK1wicyBcIit0aGlzLnRpbWluZ1N3aXBlfSksbnQodGhpcy5zd2lwZVNoYWRvdykucXVldWUoe29wYWNpdHk6MCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLm1heFdpZHRoK1wicHgsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLnF1ZXVlKGZ1bmN0aW9uKHQpe2kuX3Jlc2V0KGkudGFyZ2V0LmVudGVyLGkudGFyZ2V0LmxlYXZlKSxuJiZuKCksdCgpfSkpOm50LnJ1bkFsbChudCh0KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHRoaXMub3B0U3dpcGUpLG50KGUpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgxMDAlLCAwLCAwKVwifSx0aGlzLm9wdFN3aXBlKS5xdWV1ZShmdW5jdGlvbihvKXtpLl9yZXNldCh0LGUpLG4mJm4oKSxvKCl9KSkpfX0se2tleTpcIl9zYXZlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc2F2ZWRTdHlsZT1uZXcgV2Vha01hcDtmb3IodmFyIGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3NhdmVkU3R5bGUuc2V0KGUsZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSl9LG49YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KG4pLG89MDtvPG47bysrKWlbb109YXJndW1lbnRzW29dO2kuZm9yRWFjaChlKSxPYmplY3Qua2V5cyh0aGlzLmRlY29tcCkuZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3Qua2V5cyh0LmRlY29tcFtuXSkuZm9yRWFjaChmdW5jdGlvbihpKXsodC5kZWNvbXBbbl1baV1pbnN0YW5jZW9mIEFycmF5P3QuZGVjb21wW25dW2ldOlt0LmRlY29tcFtuXVtpXV0pLmZvckVhY2goZSl9KX0pfX0se2tleTpcIl9yZXN0b3JlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9ZnVuY3Rpb24oZSl7bnVsbD09PXQuX3NhdmVkU3R5bGUuZ2V0KGUpP2UucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik6ZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHQuX3NhdmVkU3R5bGUuZ2V0KGUpKSx0Ll9zYXZlZFN0eWxlLmRlbGV0ZShlKX0sbj1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkobiksbz0wO288bjtvKyspaVtvXT1hcmd1bWVudHNbb107aS5mb3JFYWNoKGUpLE9iamVjdC5rZXlzKHRoaXMuZGVjb21wKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5rZXlzKHQuZGVjb21wW25dKS5mb3JFYWNoKGZ1bmN0aW9uKGkpeyh0LmRlY29tcFtuXVtpXWluc3RhbmNlb2YgQXJyYXk/dC5kZWNvbXBbbl1baV06W3QuZGVjb21wW25dW2ldXSkuZm9yRWFjaChlKX0pfSl9fSx7a2V5OlwiX3Jlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzU3dpcGluZz0hMSx0aGlzLl9zYXZlZFN0eWxlJiZ0aGlzLl9yZXN0b3JlU3R5bGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudW5ibG9jayYmdGhpcy51bmJsb2NrKCksdGhpcy5zd2lwZVNoYWRvdy5yZW1vdmUoKSx0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHRoaXMub3ZlcmZsb3dFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvdmVyZmxvdy12aXNpYmxlXCIpLHRoaXMuZGVjb21wLmxlYXZlLmNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRlbnQtc3dpcGluZ1wiKSx0aGlzLmRlY29tcD10aGlzLnRhcmdldD10aGlzLm92ZXJmbG93RWxlbWVudD10aGlzLl9zYXZlZFN0eWxlPW51bGwsdGhpcy5pc0RyYWdTdGFydD0hMH19XSksZX0oKSx0cj1mdW5jdGlvbigpe3JldHVyblwidHJhbnNsYXRlM2QoXCIrKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowKStcIiwgXCIrKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowKStcIiwgXCIrKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTowKStcIilcIn0sZXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllcigwLjMsIC40LCAwLCAuOSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YSxsPXkodCxbXCJ0aW1pbmdcIixcImRlbGF5XCIsXCJkdXJhdGlvblwiXSk7cCh0aGlzLGUpO3ZhciB1PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLF8oe3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30sbCkpKTtyZXR1cm4gdS5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IHotaW5kZXg6IDJcIj48L2Rpdj4nKSx1fXJldHVybiBiKGUsWm8pLGcoZSxbe2tleTpcIl9kZWNvbXBvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9nZXRUb29sYmFyRWxlbWVudCgpLG49ZS5fZ2V0VG9vbGJhckxlZnRJdGVtc0VsZW1lbnQoKSxpPWUuX2dldFRvb2xiYXJSaWdodEl0ZW1zRWxlbWVudCgpLG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKylcIm9ucy1iYWNrLWJ1dHRvblwiIT09dFtuXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9LHI9W10uY29uY2F0KDA9PT1uLmNoaWxkcmVuLmxlbmd0aD9uOm8obi5jaGlsZHJlbikpLmNvbmNhdCgwPT09aS5jaGlsZHJlbi5sZW5ndGg/aTpvKGkuY2hpbGRyZW4pKTtyZXR1cm57dG9vbGJhckNlbnRlcjplLl9nZXRUb29sYmFyQ2VudGVySXRlbXNFbGVtZW50KCksYmFja0J1dHRvbkljb246ZS5fZ2V0VG9vbGJhckJhY2tCdXR0b25JY29uRWxlbWVudCgpLGJhY2tCdXR0b25MYWJlbDplLl9nZXRUb29sYmFyQmFja0J1dHRvbkxhYmVsRWxlbWVudCgpLG90aGVyOnIsY29udGVudDp0Ll9nZXRDb250ZW50RWxlbWVudCgpLGJhY2tncm91bmQ6dC5fZ2V0QmFja2dyb3VuZEVsZW1lbnQoKSx0b29sYmFyOmUsYm90dG9tVG9vbGJhcjp0Ll9nZXRCb3R0b21Ub29sYmFyRWxlbWVudCgpfX19LHtrZXk6XCJfc2hvdWxkQW5pbWF0ZVRvb2xiYXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuX2NhbkFuaW1hdGVUb29sYmFyKCkmJmUuX2NhbkFuaW1hdGVUb29sYmFyKCksaT10Ll9nZXRUb29sYmFyRWxlbWVudCgpLG89ZS5fZ2V0VG9vbGJhckVsZW1lbnQoKSxyPWkuaGFzQXR0cmlidXRlKFwic3RhdGljXCIpfHxvLmhhc0F0dHJpYnV0ZShcInN0YXRpY1wiKSxhPVEuaGFzTW9kaWZpZXIoaSxcIm1hdGVyaWFsXCIpfHxRLmhhc01vZGlmaWVyKG8sXCJtYXRlcmlhbFwiKSxzPVEuaGFzTW9kaWZpZXIoaSxcInRyYW5zcGFyZW50XCIpfHxRLmhhc01vZGlmaWVyKG8sXCJ0cmFuc3BhcmVudFwiKTtyZXR1cm4gbiYmIXImJiFhJiYhc319LHtrZXk6XCJfY2FsY3VsYXRlRGVsdGFcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMCxpPXZvaWQgMCxvPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoZS5iYWNrQnV0dG9uTGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmFjay1idXR0b25fX2xhYmVsXCIpKXt2YXIgcj1lLmJhY2tCdXR0b25MYWJlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtuPU1hdGgucm91bmQoby53aWR0aC8yLXIud2lkdGgvMi1yLmxlZnQpfWVsc2Ugbj1NYXRoLnJvdW5kKG8ud2lkdGgvMiouNik7cmV0dXJuIGUuYmFja0J1dHRvbkljb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmFjay1idXR0b25fX2ljb25cIikmJihpPWUuYmFja0J1dHRvbkljb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQtMikse3RpdGxlOm4sbGFiZWw6aX19fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQsaSxvKXt2YXIgcj10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLGkpO3ZhciBhPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bih0LGZ1bmN0aW9uKCl7dmFyIGU9US5maW5kVG9vbGJhclBhZ2UodCl8fHQsbj1RLmZpbmRUb29sYmFyUGFnZShpKXx8aSxzPXIuX2RlY29tcG9zZShlKSxsPXIuX2RlY29tcG9zZShuKSx1PXIuX2NhbGN1bGF0ZURlbHRhKGkscyk7ci5fc2hvdWxkQW5pbWF0ZVRvb2xiYXIoZSxuKT9udC5ydW5BbGwobnQoW3MuY29udGVudCxzLmJvdHRvbVRvb2xiYXIscy5iYWNrZ3JvdW5kXSxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiMTAwJVwiKX0se3RyYW5zZm9ybTp0cigpfSksbnQocy50b29sYmFyLHIuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudChzLnRvb2xiYXJDZW50ZXIsci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cihcIjEyNSVcIiksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSksbnQocy5iYWNrQnV0dG9uTGFiZWwsci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cih1LnRpdGxlK1wicHhcIiksb3BhY2l0eTowfSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3IuZHVyYXRpb24rXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3IuZHVyYXRpb24rXCJzIFwiK3IudGltaW5nfSksbnQocy5vdGhlcixyLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7Y3NzOntvcGFjaXR5OjF9LHRpbWluZzpcImxpbmVhclwifSksbnQoW2wuY29udGVudCxsLmJvdHRvbVRvb2xiYXIsbC5iYWNrZ3JvdW5kXSxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSkucXVldWUoZnVuY3Rpb24odCl7ci5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxhKCksbygpLHQoKX0pLG50KGwudG9vbGJhckNlbnRlcixyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLVwiK3UudGl0bGUrXCJweFwiKSxvcGFjaXR5OjAsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrci5kdXJhdGlvbitcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrci5kdXJhdGlvbitcInMgXCIrci50aW1pbmd9KSxudChsLmJhY2tCdXR0b25MYWJlbCxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLVwiK3UubGFiZWwrXCJweFwiKSxvcGFjaXR5OjB9KSxudChsLm90aGVyLHIuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtjc3M6e29wYWNpdHk6MH0sdGltaW5nOlwibGluZWFyXCJ9KSk6bnQucnVuQWxsKG50KHQsci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cihcIjEwMCVcIil9LHt0cmFuc2Zvcm06dHIoKX0pLG50KGksci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MX0se3RyYW5zZm9ybTp0cihcIi0yNSVcIiksb3BhY2l0eTouOX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksYSgpLG8oKSx0KCl9KSl9KX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpcztpZih0aGlzLmlzU3dpcGluZylyZXR1cm4gdGhpcy5wb3BTd2lwZSh0LG4saSk7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KSxhPVEuZmluZFRvb2xiYXJQYWdlKHQpfHx0LHM9US5maW5kVG9vbGJhclBhZ2Uobil8fG4sbD10aGlzLl9kZWNvbXBvc2UoYSksdT10aGlzLl9kZWNvbXBvc2UocyksYz10aGlzLl9jYWxjdWxhdGVEZWx0YShuLHUpO3RoaXMuX3Nob3VsZEFuaW1hdGVUb29sYmFyKGEscyk/bnQucnVuQWxsKG50KFtsLmNvbnRlbnQsbC5ib3R0b21Ub29sYmFyLGwuYmFja2dyb3VuZF0sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cihcIi0yNSVcIiksb3BhY2l0eTouOX0se3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MX0pLG50KGwudG9vbGJhckNlbnRlcix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLVwiK2MudGl0bGUrXCJweFwiKSxvcGFjaXR5OjB9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjEsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrdGhpcy5kdXJhdGlvbitcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvbitcInMgXCIrdGhpcy50aW1pbmd9KSxudChsLmJhY2tCdXR0b25MYWJlbCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLVwiK2MubGFiZWwrXCJweFwiKX0se3RyYW5zZm9ybTp0cigpfSksbnQobC5vdGhlcix0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7Y3NzOntvcGFjaXR5OjF9LHRpbWluZzpcImxpbmVhclwifSksbnQoW3UuY29udGVudCx1LmJvdHRvbVRvb2xiYXIsdS5iYWNrZ3JvdW5kXSx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCl9LHt0cmFuc2Zvcm06dHIoXCIxMDAlXCIpfSkud2FpdCgwKS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHIoKSxpKCksdCgpfSksbnQodS50b29sYmFyLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh1LnRvb2xiYXJDZW50ZXIsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cigpfSx7dHJhbnNmb3JtOnRyKFwiMTI1JVwiKX0pLG50KHUuYmFja0J1dHRvbkxhYmVsLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoYy50aXRsZStcInB4XCIpLG9wYWNpdHk6MCx0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uK1wicyBcIit0aGlzLnRpbWluZ30pKTpudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCl9LHt0cmFuc2Zvcm06dHIoXCIxMDAlXCIpfSkucXVldWUoZnVuY3Rpb24odCl7by5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxyKCksaSgpLHQoKX0pKX19XSksZX0oKSxucj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy40OmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYmFja2dyb3VuZE1hc2s9US5jcmVhdGVFbGVtZW50KCc8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlO2JhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChibGFjaywgd2hpdGUpO1wiPjwvZGl2PicpLGx9cmV0dXJuIGIoZSxKbyksZyhlLFt7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLG4pO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDEwMCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwifSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAtMTAlLCAwKVwiLG9wYWNpdHk6Ljl9KS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHIoKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLHQpO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIC00M3B4LCAwKVwiLG9wYWNpdHk6Ljl9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCkscigpLGkoKSx0KCl9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMTAwJSwgMClcIn0pKX19XSksZX0oKSxpcj1cInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTppcixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06aXIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7bygpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTppcixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06aXIsb3BhY2l0eTowfSkucXVldWUoZnVuY3Rpb24odCl7bygpLGkoKSx0KCl9KSl9fV0pLGV9KCkscnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciguMSwgLjcsIC40LCAxKVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLmJsYWNrTWFza09wYWNpdHk9LjQsbC5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHotaW5kZXg6IDI7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IG9wYWNpdHk6IDA7XCI+PC9kaXY+JyksbH1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxuLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssbi5uZXh0U2libGluZyk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodGhpcy5iYWNrZ3JvdW5kTWFzayx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjB9LHtvcGFjaXR5OnRoaXMuYmxhY2tNYXNrT3BhY2l0eX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSksbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMTAwJSwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTQ1JSwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLHQubmV4dFNpYmxpbmcpO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHRoaXMuYmFja2dyb3VuZE1hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eTp0aGlzLmJsYWNrTWFza09wYWNpdHl9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQoKX0pLG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC00NSUsIDAsIDApXCIsb3BhY2l0eTouOX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDEwMCUsIDAsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtyKCksaSgpLHQoKX0pKX19XSksZX0oKSxhcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPy4wNTpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XCI+PC9kaXY+JyksbH1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssbik7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KSxhPW50KHRoaXMuYmFja2dyb3VuZE1hc2spLndhaXQodGhpcy5kZWxheSt0aGlzLmR1cmF0aW9uKS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQoKX0pO250LnJ1bkFsbChhLG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDEwMCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eToxfSx7b3BhY2l0eTouNH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLHQpO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHRoaXMuYmFja2dyb3VuZE1hc2spLndhaXQodGhpcy5kZWxheSt0aGlzLmR1cmF0aW9uKS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQoKX0pLG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6LjR9LHtvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtyKCksaSgpLHQoKX0pLG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAxMDAlLCAwKVwifSkpfX1dKSxlfSgpLHNyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpXCI6bixvPXQudGltaW5nUG9wLHI9dm9pZCAwPT09bz9cImN1YmljLWJlemllcigwLjQsIDAsIDEsIDEpXCI6byxhPXQuZGVsYXkscz12b2lkIDA9PT1hPzA6YSxsPXQuZHVyYXRpb24sdT12b2lkIDA9PT1sPy4yOmw7cCh0aGlzLGUpO3ZhciBjPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpzLGR1cmF0aW9uOnV9KSk7cmV0dXJuIGMudGltaW5nUG9wPXIsY31yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDQycHgsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHtjc3M6e3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDM4cHgsIDApXCIsb3BhY2l0eTowfSx0aW1pbmc6dGhpcy50aW1pbmdQb3B9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19XSksZX0oKSxscj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7bigpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtuKCl9fV0pLGV9KCksdXI9e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9zcjplcn0sc2xpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9ycjplcn0sbGlmdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP2FyOm5yfSxmYWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/c3I6b3J9LFwic2xpZGUtaW9zXCI6ZXIsXCJzbGlkZS1tZFwiOnJyLFwibGlmdC1pb3NcIjpucixcImxpZnQtbWRcIjphcixcImZhZGUtaW9zXCI6b3IsXCJmYWRlLW1kXCI6c3Isbm9uZTpscn0sY3I9e3JlYWR5OmZ1bmN0aW9uKHQsZSl7ZSgpfX0saHI9ZnVuY3Rpb24odCl7cmV0dXJuXCJPTlMtUEFHRVwiIT09dC5ub2RlTmFtZSYmUS50aHJvdyhcIk9ubHkgcGFnZSBlbGVtZW50cyBjYW4gYmUgY2hpbGRyZW4gb2YgbmF2aWdhdG9yXCIpfSxkcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2lzUnVubmluZz0hMSx0Ll9pbml0aWFsaXplZD0hMSx0Ll9wYWdlTG9hZGVyPWp0LHQuX3BhZ2VNYXA9bmV3IFdlYWtNYXAsdC5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhbmltYXRvckZhY3RvcnlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5pbWF0b3JGYWN0b3J5fX1dKSxnKGUsW3trZXk6XCJfZ2V0UGFnZVRhcmdldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V8fHRoaXMuZ2V0QXR0cmlidXRlKFwicGFnZVwiKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLm9uRGV2aWNlQmFja0J1dHRvbj10aGlzLl9vbkRldmljZUJhY2tCdXR0b24uYmluZCh0aGlzKSwhQy5pc0FuZHJvaWQoKXx8XCJmb3JjZVwiPT09dGhpcy5nZXRBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIikpe3ZhciBlPXZvaWQgMDt0aGlzLl9zd2lwZT1uZXcgUW8oe2VsZW1lbnQ6dGhpcyxnZXRUaHJlc2hvbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoLjIscGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZShcInN3aXBlLXRocmVzaG9sZFwiKSl8fDApfSxzd2lwZU1heDpmdW5jdGlvbigpe3QuX29uU3dpcGUmJnQuX29uU3dpcGUoMSx7ZHVyYXRpb246ZS5kdXJhdGlvblN3aXBlLHRpbWluZzplLnRpbWluZ1N3aXBlfSksdFt0LnN3aXBlTWF4P1wic3dpcGVNYXhcIjpcInBvcFBhZ2VcIl0oe2FuaW1hdG9yOmV9KSxlPW51bGx9LHN3aXBlTWlkOmZ1bmN0aW9uKG4saSl7dC5fb25Td2lwZSYmdC5fb25Td2lwZShuL2kpLGUudHJhbnNsYXRlKG4saSx0LnRvcFBhZ2UucHJldmlvdXNFbGVtZW50U2libGluZyx0LnRvcFBhZ2UpfSxzd2lwZU1pbjpmdW5jdGlvbigpe3QuX29uU3dpcGUmJnQuX29uU3dpcGUoMCx7ZHVyYXRpb246ZS5kdXJhdGlvblJlc3RvcmUsdGltaW5nOmUudGltaW5nU3dpcGV9KSxlLnJlc3RvcmUodC50b3BQYWdlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsdC50b3BQYWdlKSxlPW51bGx9LGlnbm9yZVN3aXBlOmZ1bmN0aW9uKG4saSl7aWYoIXQuX2lzUnVubmluZyYmdC5jaGlsZHJlbi5sZW5ndGg+MSl7dmFyIG89cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJzd2lwZS10YXJnZXQtd2lkdGhcIil8fDI1LDEwKTtpZihcInJpZ2h0XCI9PT1uLmdlc3R1cmUuZGlyZWN0aW9uJiZvPmkpe3ZhciByPWZ1bmN0aW9uKHQpe3JldHVybi9vbnMtYmFjay1idXR0b24vaS50ZXN0KHQudGFnTmFtZSl9O2lmKCFyKG4udGFyZ2V0KSYmIVEuZmluZFBhcmVudChuLnRhcmdldCxyLGZ1bmN0aW9uKHQpe3JldHVybi9vbnMtcGFnZS9pLnRlc3QodC50YWdOYW1lKX0pKXt2YXIgYT0odC50b3BQYWdlLnB1c2hlZE9wdGlvbnN8fHt9KS5hbmltYXRpb258fHQuYW5pbWF0b3JGYWN0b3J5Ll9hbmltYXRpb24scz11clthXWluc3RhbmNlb2YgRnVuY3Rpb24/dXJbYV0uY2FsbCgpOnVyW2FdO2lmKHZvaWQgMCE9PXMmJnMuc3dpcGVhYmxlKXJldHVybiBlPW5ldyBzLCExfX19cmV0dXJuITB9fSksdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXCJzd2lwZWFibGVcIil9aWYoIXRoaXMuX2luaXRpYWxpemVkKXt0aGlzLl9pbml0aWFsaXplZD0hMDt2YXIgaT1RLmRlZmVyKCk7dGhpcy5sb2FkZWQ9aS5wcm9taXNlLGNyLnJlYWR5KHRoaXMsZnVuY3Rpb24oKXt2YXIgZT0hUS5oYXNBbnlDb21wb25lbnRBc1BhcmVudCh0KSxvPXthbmltYXRpb246XCJub25lXCIsc2hvdzplfTtpZigwPT09dC5wYWdlcy5sZW5ndGgmJnQuX2dldFBhZ2VUYXJnZXQoKSl0LnB1c2hQYWdlKHQuX2dldFBhZ2VUYXJnZXQoKSxvKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkucmVzb2x2ZSgpfSk7ZWxzZSBpZih0LnBhZ2VzLmxlbmd0aD4wKXtmb3IodmFyIHI9MDtyPHQucGFnZXMubGVuZ3RoO3IrKylocih0LnBhZ2VzW3JdKTt0LnRvcFBhZ2UmJm4odC50b3BQYWdlLGZ1bmN0aW9uKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJlc29sdmUoKSxlJiZ0LnRvcFBhZ2UuX3Nob3coKSx0Ll91cGRhdGVMYXN0UGFnZUJhY2tCdXR0b24oKX0sMCl9KX1lbHNlIG4odCxmdW5jdGlvbigpezA9PT10LnBhZ2VzLmxlbmd0aCYmdC5fZ2V0UGFnZVRhcmdldCgpP3QucHVzaFBhZ2UodC5fZ2V0UGFnZVRhcmdldCgpLG8pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaS5yZXNvbHZlKCl9KTppLnJlc29sdmUoKX0pfSl9fX0se2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2FuaW1hdG9yRmFjdG9yeT1uZXcgTyh7YW5pbWF0b3JzOnVyLGJhc2VDbGFzczpKbyxiYXNlQ2xhc3NOYW1lOlwiTmF2aWdhdG9yQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1udWxsLHRoaXMuX3N3aXBlJiZ0aGlzLl9zd2lwZS5kaXNwb3NlKCksdGhpcy5fc3dpcGU9bnVsbH19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImFuaW1hdGlvblwiOnRoaXMuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpO2JyZWFrO2Nhc2VcInN3aXBlYWJsZVwiOnRoaXMuX3N3aXBlJiZ0aGlzLl9zd2lwZS51cGRhdGUoKX19fSx7a2V5OlwicG9wUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtlPXRoaXMuX3ByZXBhcmVQYWdlQW5kT3B0aW9ucyhudWxsLGUpLm9wdGlvbnMsUS5pc0ludGVnZXIoZS50aW1lcykmJmUudGltZXM+MSYmdGhpcy5fcmVtb3ZlUGFnZXMoZS50aW1lcyk7cmV0dXJuIHRoaXMuX3BvcFBhZ2UoZSxmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt0Ll9wYWdlTG9hZGVyLnVubG9hZCh0LnBhZ2VzW3QucGFnZXMubGVuZ3RoLTFdKSxlKCl9KX0pfX0se2tleTpcIl9wb3BQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07aWYodGhpcy5faXNSdW5uaW5nKXJldHVybiBQcm9taXNlLnJlamVjdChcInBvcFBhZ2UgaXMgYWxyZWFkeSBydW5uaW5nLlwiKTtpZih0aGlzLnBhZ2VzLmxlbmd0aDw9MSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJvbnMtbmF2aWdhdG9yJ3MgcGFnZSBzdGFjayBpcyBlbXB0eS5cIik7aWYodGhpcy5fZW1pdFByZVBvcEV2ZW50KCkpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlcG9wIGV2ZW50LlwiKTt2YXIgaT10aGlzLnBhZ2VzLmxlbmd0aDtyZXR1cm4gdGhpcy5faXNSdW5uaW5nPSEwLHRoaXMucGFnZXNbaS0yXS51cGRhdGVCYWNrQnV0dG9uKGktMj4wKSxuZXcgUHJvbWlzZShmdW5jdGlvbihvKXt2YXIgcj1lLnBhZ2VzW2ktMV0sYT1lLnBhZ2VzW2ktMl07KHQ9US5leHRlbmQoe30sZS5vcHRpb25zfHx7fSxyLnB1c2hlZE9wdGlvbnN8fHt9LHQpKS5kYXRhJiYoYS5kYXRhPVEuZXh0ZW5kKHt9LGEuZGF0YXx8e30sdC5kYXRhfHx7fSkpO3IuX2hpZGUoKSxhLnN0eWxlLmRpc3BsYXk9XCJcIjsodC5hbmltYXRvcnx8ZS5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKHQpKS5wb3AoZS5wYWdlc1tpLTJdLGUucGFnZXNbaS0xXSxmdW5jdGlvbigpe24oKS50aGVuKGZ1bmN0aW9uKCl7ZS5faXNSdW5uaW5nPSExLGEuX3Nob3coKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQoZSxcInBvc3Rwb3BcIix7bGVhdmVQYWdlOnIsZW50ZXJQYWdlOmEsbmF2aWdhdG9yOmV9KSx0LmNhbGxiYWNrJiZ0LmNhbGxiYWNrKGEpLG8oYSl9KX0pfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZS5faXNSdW5uaW5nPSExfSl9fSx7a2V5OlwicHVzaFBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKHQsbik7dD1pLnBhZ2U7dmFyIG89ZnVuY3Rpb24oaSl7aHIoaSksZS5fcGFnZU1hcC5zZXQoaSx0KSwoaT1RLmV4dGVuZChpLHtkYXRhOm4uZGF0YX0pKS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCJ9O3JldHVybihuPWkub3B0aW9ucykucGFnZUhUTUw/dGhpcy5fcHVzaFBhZ2UobixmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtIdC5sb2FkKHtwYWdlOm4ucGFnZUhUTUwscGFyZW50OmUscGFyYW1zOm4uZGF0YX0sZnVuY3Rpb24oZSl7byhlKSx0KCl9KX0pfSk6dGhpcy5fcHVzaFBhZ2UobixmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpKXtlLl9wYWdlTG9hZGVyLmxvYWQoe3BhZ2U6dCxwYXJlbnQ6ZSxwYXJhbXM6bi5kYXRhfSxmdW5jdGlvbih0KXtvKHQpLGkoKX0pfSl9KX19LHtrZXk6XCJfcHVzaFBhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O2lmKHRoaXMuX2lzUnVubmluZylyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJwdXNoUGFnZSBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO2lmKHRoaXMuX2VtaXRQcmVQdXNoRXZlbnQoKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZCBpbiBwcmVwdXNoIGV2ZW50LlwiKTt0aGlzLl9pc1J1bm5pbmc9ITA7dmFyIGk9Ty5wYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmcodGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKSk7ZT1RLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnN8fHt9LHthbmltYXRpb25PcHRpb25zOml9LGUpO3ZhciBvPXRoaXMuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcihlKTtyZXR1cm4gbigpLnRoZW4oZnVuY3Rpb24oKXt2YXIgbj10LnBhZ2VzLmxlbmd0aCxpPXQucGFnZXNbbi0xXSxyPWUubGVhdmVQYWdlfHx0LnBhZ2VzW24tMl07cmV0dXJuIGhyKGkpLGkudXBkYXRlQmFja0J1dHRvbihuPihlLl9yZXBsYWNlUGFnZT8yOjEpKSxpLnB1c2hlZE9wdGlvbnM9US5leHRlbmQoe30saS5wdXNoZWRPcHRpb25zfHx7fSxlfHx7fSksaS5kYXRhPVEuZXh0ZW5kKHt9LGkuZGF0YXx8e30sZS5kYXRhfHx7fSksaS51bmxvYWQ9aS51bmxvYWR8fGUudW5sb2FkLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBhPWZ1bmN0aW9uKCl7dC5faXNSdW5uaW5nPSExLCExIT09ZS5zaG93JiZzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gaS5fc2hvdygpfSksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHQsXCJwb3N0cHVzaFwiLHtsZWF2ZVBhZ2U6cixlbnRlclBhZ2U6aSxuYXZpZ2F0b3I6dH0pLHImJihyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLGUuY2FsbGJhY2smJmUuY2FsbGJhY2soaSksbihpKX07aS5zdHlsZS52aXNpYmlsaXR5PVwiXCIscj8oci5faGlkZSgpLG8ucHVzaChpLHIsYSkpOmEoKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7dGhyb3cgdC5faXNSdW5uaW5nPSExLGV9KX19LHtrZXk6XCJyZXBsYWNlUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIHRoaXMucHVzaFBhZ2UodCxuKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhZ2VzLmxlbmd0aD4xJiZlLl9wYWdlTG9hZGVyLnVubG9hZChlLnBhZ2VzW2UucGFnZXMubGVuZ3RoLTJdKSxlLl91cGRhdGVMYXN0UGFnZUJhY2tCdXR0b24oKSxQcm9taXNlLnJlc29sdmUodCl9KX19LHtrZXk6XCJpbnNlcnRQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LG89dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKGUsaSk7aWYoZT1vLnBhZ2UsaT1vLm9wdGlvbnMsKHQ9dGhpcy5fbm9ybWFsaXplSW5kZXgodCkpPj10aGlzLnBhZ2VzLmxlbmd0aClyZXR1cm4gdGhpcy5wdXNoUGFnZShlLGkpO2U9XCJzdHJpbmdcIj09dHlwZW9mIGkucGFnZUhUTUw/aS5wYWdlSFRNTDplO3ZhciByPVwic3RyaW5nXCI9PXR5cGVvZiBpLnBhZ2VIVE1MP0h0OnRoaXMuX3BhZ2VMb2FkZXI7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8pe3IubG9hZCh7cGFnZTplLHBhcmVudDpufSxmdW5jdGlvbihyKXtocihyKSxuLl9wYWdlTWFwLnNldChyLGUpLHI9US5leHRlbmQocix7ZGF0YTppLmRhdGEscHVzaGVkT3B0aW9uczppfSksaS5hbmltYXRpb25PcHRpb25zPVEuZXh0ZW5kKHt9LE8ucGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nKG4uZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpLGkuYW5pbWF0aW9uT3B0aW9uc3x8e30pLHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixuLmluc2VydEJlZm9yZShyLG4ucGFnZXNbdF0pLG4udG9wUGFnZS51cGRhdGVCYWNrQnV0dG9uKCEwKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cj1udWxsLG8obi5wYWdlc1t0XSl9LDFlMy82MCl9KX0pfX0se2tleTpcInJlbW92ZVBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybih0PXRoaXMuX25vcm1hbGl6ZUluZGV4KHQpKTx0aGlzLnBhZ2VzLmxlbmd0aC0xP25ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBpPWUucGFnZXNbdF0sbz1lLnRvcFBhZ2U7ZS5fcGFnZU1hcC5kZWxldGUoaSksZS5fcGFnZUxvYWRlci51bmxvYWQoaSksMT09PWUucGFnZXMubGVuZ3RoJiZlLnRvcFBhZ2UudXBkYXRlQmFja0J1dHRvbighMSksbihvKX0pOnRoaXMucG9wUGFnZShuKX19LHtrZXk6XCJyZXNldFRvUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnModCxuKTtpZih0PWkucGFnZSwobj1pLm9wdGlvbnMpLmFuaW1hdG9yfHxuLmFuaW1hdGlvbnx8bi5wb3B8fChuLmFuaW1hdGlvbj1cIm5vbmVcIiksbi5wYWdlfHxuLnBhZ2VIVE1MfHwhdGhpcy5fZ2V0UGFnZVRhcmdldCgpfHwodD1uLnBhZ2U9dGhpcy5fZ2V0UGFnZVRhcmdldCgpKSxuLnBvcClyZXR1cm4gdGhpcy5fcmVtb3ZlUGFnZXMoKSx0aGlzLmluc2VydFBhZ2UoMCx0LHtkYXRhOm4uZGF0YX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5wb3BQYWdlKG4pfSk7dmFyIG89bi5jYWxsYmFjaztyZXR1cm4gbi5jYWxsYmFjaz1mdW5jdGlvbih0KXtlLl9yZW1vdmVQYWdlcygpLHQudXBkYXRlQmFja0J1dHRvbighMSksbyYmbyh0KX0sdGhpcy5wdXNoUGFnZSh0LG4pfX0se2tleTpcImJyaW5nUGFnZVRvcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTstMT09PVtcIm51bWJlclwiLFwic3RyaW5nXCJdLmluZGV4T2Yodm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpJiZRLnRocm93KFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHBhZ2UgbmFtZSBvciB0aGUgaW5kZXggb2YgYW4gZXhpc3RpbmcgcGFnZS4gWW91IHN1cHBsaWVkIFwiK3QpO3ZhciBuPVwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMuX25vcm1hbGl6ZUluZGV4KHQpOnRoaXMuX2xhc3RJbmRleE9mUGFnZSh0KSxpPXRoaXMucGFnZXNbbl07aWYobjwwKXJldHVybiB0aGlzLnB1c2hQYWdlKHQsZSk7cmV0dXJuIGU9dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKGksZSkub3B0aW9ucyxuPT09dGhpcy5wYWdlcy5sZW5ndGgtMT9Qcm9taXNlLnJlc29sdmUoaSk6KGl8fFEudGhyb3coXCJGYWlsZWQgdG8gZmluZCBpdGVtIFwiK3QpLHRoaXMuX2lzUnVubmluZz9Qcm9taXNlLnJlamVjdChcInB1c2hQYWdlIGlzIGFscmVhZHkgcnVubmluZy5cIik6dGhpcy5fZW1pdFByZVB1c2hFdmVudCgpP1Byb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlcHVzaCBldmVudC5cIik6KGkuc3R5bGUuZGlzcGxheT1cIlwiLGkuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLGkucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChpKSx0aGlzLl9wdXNoUGFnZShlKSkpfX0se2tleTpcIl9wcmVwYXJlUGFnZUFuZE9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuXCJvYmplY3RcIiE9KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpmKGUpKSYmUS50aHJvdyhcIm9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QuIFlvdSBzdXBwbGllZCBcIitlKSxudWxsIT09dCYmdm9pZCAwIT09dHx8IWUucGFnZXx8KHQ9ZS5wYWdlKSxlPVEuZXh0ZW5kKHt9LHRoaXMub3B0aW9uc3x8e30sZSx7cGFnZTp0fSkse3BhZ2U6dCxvcHRpb25zOmV9fX0se2tleTpcIl9yZW1vdmVQYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFnZXMsbj12b2lkIDA9PT10PzA6ZS5sZW5ndGgtdDtuPW48MD8xOm47Zm9yKHZhciBpPWUubGVuZ3RoLTI7aT49bjtpLS0pdGhpcy5fcGFnZU1hcC5kZWxldGUoZVtpXSksdGhpcy5fcGFnZUxvYWRlci51bmxvYWQoZVtpXSl9fSx7a2V5OlwiX3VwZGF0ZUxhc3RQYWdlQmFja0J1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYWdlcy5sZW5ndGgtMTt0Pj0wJiZ0aGlzLnBhZ2VzW3RdLnVwZGF0ZUJhY2tCdXR0b24odD4wKX19LHtrZXk6XCJfbm9ybWFsaXplSW5kZXhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdD49MD90Ok1hdGguYWJzKHRoaXMucGFnZXMubGVuZ3RoK3QpJXRoaXMucGFnZXMubGVuZ3RofX0se2tleTpcIl9vbkRldmljZUJhY2tCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnBhZ2VzLmxlbmd0aD4xP3RoaXMucG9wUGFnZSgpOnQuY2FsbFBhcmVudEhhbmRsZXIoKX19LHtrZXk6XCJfbGFzdEluZGV4T2ZQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwO2ZvcihlPXRoaXMucGFnZXMubGVuZ3RoLTE7ZT49MCYmKHRoaXMuX3BhZ2VNYXAuaGFzKHRoaXMucGFnZXNbZV0pfHxRLnRocm93KFwiSW5jb3JyZWN0IHN0YXRlIG9mIHBhZ2VNYXBcIiksdCE9PXRoaXMuX3BhZ2VNYXAuZ2V0KHRoaXMucGFnZXNbZV0pKTtlLS0pO3JldHVybiBlfX0se2tleTpcIl9lbWl0UHJlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj0hMTtyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwcmVcIit0LFEuZXh0ZW5kKHtuYXZpZ2F0b3I6dGhpcyxjdXJyZW50UGFnZTp0aGlzLnBhZ2VzW3RoaXMucGFnZXMubGVuZ3RoLTFdLGNhbmNlbDpmdW5jdGlvbigpe3JldHVybiBuPSEwfX0sZSkpLG59fSx7a2V5OlwiX2VtaXRQcmVQdXNoRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbWl0UHJlRXZlbnQoXCJwdXNoXCIpfX0se2tleTpcIl9lbWl0UHJlUG9wRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMucGFnZXMubGVuZ3RoO3JldHVybiB0aGlzLl9lbWl0UHJlRXZlbnQoXCJwb3BcIix7bGVhdmVQYWdlOnRoaXMucGFnZXNbdC0xXSxlbnRlclBhZ2U6dGhpcy5wYWdlc1t0LTJdfSl9fSx7a2V5OlwiX2NyZWF0ZVBhZ2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9US5jcmVhdGVFbGVtZW50KFAubm9ybWFsaXplUGFnZUhUTUwodCkpO3JldHVybiBocihlKSxlfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMubG9hZGVkLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC50b3BQYWdlJiZ0LnRvcFBhZ2UuX3Nob3coKX0pfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvcFBhZ2UmJnRoaXMudG9wUGFnZS5faGlkZSgpfX0se2tleTpcIl9kZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYWdlcy5sZW5ndGgtMTt0Pj0wO3QtLSl0aGlzLl9wYWdlTG9hZGVyLnVubG9hZCh0aGlzLnBhZ2VzW3RdKTt0aGlzLnJlbW92ZSgpfX0se2tleTpcInBhZ2VMb2FkZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZUxvYWRlcn0sc2V0OmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBCdHx8US50aHJvd1BhZ2VMb2FkZXIoKSx0aGlzLl9wYWdlTG9hZGVyPXR9fSx7a2V5OlwicGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFnZT10fX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fSx7a2V5OlwidG9wUGFnZVwiLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmxhc3RFbGVtZW50Q2hpbGQ7dCYmXCJPTlMtUEFHRVwiIT09dC50YWdOYW1lOyl0PXQucHJldmlvdXNFbGVtZW50U2libGluZztyZXR1cm4gdH19LHtrZXk6XCJwYWdlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbSh0aGlzLmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJPTlMtUEFHRVwiPT09dC50YWdOYW1lfSl9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX0se2tleTpcIm9wdGlvbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnM9dH19LHtrZXk6XCJfaXNSdW5uaW5nXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuc2V0QXR0cmlidXRlKFwiX2lzLXJ1bm5pbmdcIix0P1widHJ1ZVwiOlwiZmFsc2VcIil9LGdldDpmdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKFwiX2lzLXJ1bm5pbmdcIikpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBKb3x8US50aHJvd0FuaW1hdG9yKFwiTmF2aWdhdG9yXCIpLHVyW3RdPWV9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiYW5pbWF0aW9uXCIsXCJzd2lwZWFibGVcIl19fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHVyfX0se2tleTpcIk5hdmlnYXRvckFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEpvfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcInByZXB1c2hcIixcInBvc3RwdXNoXCIsXCJwcmVwb3BcIixcInBvc3Rwb3BcIl19fSx7a2V5OlwicmV3cml0YWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY3J9fV0pLGV9KCk7Yy5OYXZpZ2F0b3I9ZHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLW5hdmlnYXRvclwiLGRyKTt2YXIgZnI9e1wiXCI6XCJ0b29sYmFyLS0qXCIsXCIudG9vbGJhcl9fbGVmdFwiOlwidG9vbGJhci0tKl9fbGVmdFwiLFwiLnRvb2xiYXJfX2NlbnRlclwiOlwidG9vbGJhci0tKl9fY2VudGVyXCIsXCIudG9vbGJhcl9fcmlnaHRcIjpcInRvb2xiYXItLSpfX3JpZ2h0XCJ9LHByPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInRvb2xiYXJcIixmcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLGZyKX19fSx7a2V5OlwiX2dldFRvb2xiYXJMZWZ0SXRlbXNFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmxlZnRcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJDZW50ZXJJdGVtc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuY2VudGVyXCIpfHxQLm51bGxFbGVtZW50fX0se2tleTpcIl9nZXRUb29sYmFyUmlnaHRJdGVtc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIucmlnaHRcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJCYWNrQnV0dG9uTGFiZWxFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwib25zLWJhY2stYnV0dG9uIC5iYWNrLWJ1dHRvbl9fbGFiZWxcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJCYWNrQnV0dG9uSWNvbkVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJvbnMtYmFjay1idXR0b24gLmJhY2stYnV0dG9uX19pY29uXCIpfHxQLm51bGxFbGVtZW50fX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwidG9vbGJhclwiKSx0aGlzLl9lbnN1cmVUb29sYmFySXRlbUVsZW1lbnRzKCksQi5pbml0TW9kaWZpZXIodGhpcyxmcil9fSx7a2V5OlwiX2Vuc3VyZVRvb2xiYXJJdGVtRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmNoaWxkTm9kZXMubGVuZ3RoLTE7dD49MDt0LS0pMSE9dGhpcy5jaGlsZE5vZGVzW3RdLm5vZGVUeXBlJiZ0aGlzLnJlbW92ZUNoaWxkKHRoaXMuY2hpbGROb2Rlc1t0XSk7dmFyIGU9dGhpcy5fZW5zdXJlVG9vbGJhckVsZW1lbnQoXCJjZW50ZXJcIik7aWYoZS5jbGFzc0xpc3QuYWRkKFwidG9vbGJhcl9fdGl0bGVcIiksMSE9PXRoaXMuY2hpbGRyZW4ubGVuZ3RofHwhdGhpcy5jaGlsZHJlblswXS5jbGFzc0xpc3QuY29udGFpbnMoXCJjZW50ZXJcIikpe3ZhciBuPXRoaXMuX2Vuc3VyZVRvb2xiYXJFbGVtZW50KFwibGVmdFwiKSxpPXRoaXMuX2Vuc3VyZVRvb2xiYXJFbGVtZW50KFwicmlnaHRcIik7dGhpcy5jaGlsZHJlblswXT09PW4mJnRoaXMuY2hpbGRyZW5bMV09PT1lJiZ0aGlzLmNoaWxkcmVuWzJdPT09aXx8KHRoaXMuYXBwZW5kQ2hpbGQobiksdGhpcy5hcHBlbmRDaGlsZChlKSx0aGlzLmFwcGVuZENoaWxkKGkpKX19fSx7a2V5OlwiX2Vuc3VyZVRvb2xiYXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoUS5maW5kQ2hpbGQodGhpcyxcIi50b29sYmFyX19cIit0KSl7dmFyIGU9US5maW5kQ2hpbGQodGhpcyxcIi50b29sYmFyX19cIit0KTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKHQpLGV9dmFyIG49US5maW5kQ2hpbGQodGhpcyxcIi5cIit0KXx8US5jcmVhdGUoXCIuXCIrdCk7cmV0dXJuIG4uY2xhc3NMaXN0LmFkZChcInRvb2xiYXJfX1wiK3QpLG59fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5Ub29sYmFyPXByLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy10b29sYmFyXCIscHIpO3ZhciBncj1cInBhZ2VcIixtcj17XCJcIjpcInBhZ2UtLSpcIixcIi5wYWdlX19jb250ZW50XCI6XCJwYWdlLS0qX19jb250ZW50XCIsXCIucGFnZV9fYmFja2dyb3VuZFwiOlwicGFnZS0tKl9fYmFja2dyb3VuZFwifSxfcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2Rlcml2ZUhvb2tzKCksdC5fZGVmYXVsdENsYXNzTmFtZT1ncix0LmNsYXNzTGlzdC5hZGQoZ3IpLHQuX2luaXRpYWxpemVkPSExLG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKSx0Ll9pc1Nob3duPSExLHQuX2NvbnRlbnRFbGVtZW50PXQuX2dldENvbnRlbnRFbGVtZW50KCksdC5fYmFja2dyb3VuZEVsZW1lbnQ9dC5fZ2V0QmFja2dyb3VuZEVsZW1lbnQoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7Ti5wcmVwYXJlKHRoaXMpO3ZhciBlPVEuZmluZENoaWxkKHRoaXMsXCJvbnMtdG9vbGJhclwiKSxuPVEuZmluZENoaWxkKHRoaXMsXCIucGFnZV9fYmFja2dyb3VuZFwiKXx8US5maW5kQ2hpbGQodGhpcyxcIi5iYWNrZ3JvdW5kXCIpfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NMaXN0LmFkZChcInBhZ2VfX2JhY2tncm91bmRcIiksdGhpcy5pbnNlcnRCZWZvcmUobiwhZSYmdGhpcy5maXJzdENoaWxkfHxlJiZlLm5leHRTaWJsaW5nKTt2YXIgaT1RLmZpbmRDaGlsZCh0aGlzLFwiLnBhZ2VfX2NvbnRlbnRcIil8fFEuZmluZENoaWxkKHRoaXMsXCIuY29udGVudFwiKXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTGlzdC5hZGQoXCJwYWdlX19jb250ZW50XCIpLGkucGFyZW50RWxlbWVudHx8US5hcnJheUZyb20odGhpcy5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpeygxIT09ZS5ub2RlVHlwZXx8dC5fZWxlbWVudFNob3VsZEJlTW92ZWQoZSkpJiZpLmFwcGVuZENoaWxkKGUpfSksdGhpcy5fdHJ5VG9GaWxsU3RhdHVzQmFyKGkpLHRoaXMuaW5zZXJ0QmVmb3JlKGksbi5uZXh0U2libGluZyksZSYmUS5oYXNNb2RpZmllcihlLFwidHJhbnNwYXJlbnRcIil8fDEhPT1pLmNoaWxkcmVuLmxlbmd0aHx8IVEuaXNQYWdlQ29udHJvbChpLmNoaWxkcmVuWzBdKXx8KHRoaXMuX2RlZmF1bHRDbGFzc05hbWUrPVwiIHBhZ2UtLXdyYXBwZXJcIix0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcImNsYXNzXCIpKSxCLmluaXRNb2RpZmllcih0aGlzLG1yKX19LHtrZXk6XCJfZWxlbWVudFNob3VsZEJlTW92ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0LmNsYXNzTGlzdC5jb250YWlucyhcInBhZ2VfX2JhY2tncm91bmRcIikpcmV0dXJuITE7dmFyIGU9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJvbnMtZmFiXCI9PT1lKXJldHVybiF0Lmhhc0F0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcImlubGluZVwiKXx8LTE9PT1bXCJzY3JpcHRcIixcIm9ucy10b29sYmFyXCIsXCJvbnMtYm90dG9tLXRvb2xiYXJcIixcIm9ucy1tb2RhbFwiLFwib25zLXNwZWVkLWRpYWxcIixcIm9ucy1kaWFsb2dcIixcIm9ucy1hbGVydC1kaWFsb2dcIixcIm9ucy1wb3BvdmVyXCIsXCJvbnMtYWN0aW9uLXNoZWV0XCJdLmluZGV4T2YoZSl9fSx7a2V5OlwiX3RyeVRvRmlsbFN0YXR1c0JhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLl9jb250ZW50RWxlbWVudDtQLmF1dG9TdGF0dXNCYXJGaWxsKGZ1bmN0aW9uKCl7US50b2dnbGVBdHRyaWJ1dGUodCxcInN0YXR1cy1iYXItZmlsbFwiLCFRLmZpbmRQYXJlbnQodCxmdW5jdGlvbih0KXtyZXR1cm4gdC5oYXNBdHRyaWJ1dGUoXCJzdGF0dXMtYmFyLWZpbGxcIil9KSYmKHQuX2NhbkFuaW1hdGVUb29sYmFyKGUpfHwhUS5maW5kQ2hpbGQoZSxRLmlzUGFnZUNvbnRyb2wpKSl9KX19LHtrZXk6XCJfY2FuQW5pbWF0ZVRvb2xiYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLl9jb250ZW50RWxlbWVudDtyZXR1cm4hIVEuZmluZENoaWxkKHRoaXMsXCJvbnMtdG9vbGJhclwiKXx8ISFRLmZpbmRDaGlsZCh0LGZ1bmN0aW9uKHQpe3JldHVybiBRLm1hdGNoKHQsXCJvbnMtdG9vbGJhclwiKSYmIXQuaGFzQXR0cmlidXRlKFwiaW5saW5lXCIpfSl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7US5pc0F0dGFjaGVkKHRoaXMpJiZuKHRoaXMsZnVuY3Rpb24oKXt0Ll90cnlUb0ZpbGxTdGF0dXNCYXIoKSx0Lmhhc0F0dHJpYnV0ZShcIm9uLWluZmluaXRlLXNjcm9sbFwiKSYmdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXCJvbi1pbmZpbml0ZS1zY3JvbGxcIixudWxsLHQuZ2V0QXR0cmlidXRlKFwib24taW5maW5pdGUtc2Nyb2xsXCIpKSx0Ll9pbml0aWFsaXplZHx8KHQuX2luaXRpYWxpemVkPSEwLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3Qub25Jbml0JiZ0Lm9uSW5pdCgpLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0LFwiaW5pdFwiKX0pLFEuaGFzQW55Q29tcG9uZW50QXNQYXJlbnQodCl8fHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9zaG93KCl9KSl9KX19LHtrZXk6XCJ1cGRhdGVCYWNrQnV0dG9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5iYWNrQnV0dG9uJiYodD90aGlzLmJhY2tCdXR0b24uc2hvdygpOnRoaXMuYmFja0J1dHRvbi5oaWRlKCkpfX0se2tleTpcIl9vblNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuX2NvbnRlbnRFbGVtZW50LG49KGUuc2Nyb2xsVG9wK2UuY2xpZW50SGVpZ2h0KS9lLnNjcm9sbEhlaWdodD49dGhpcy5faW5maW5pdGVTY3JvbGxMaW1pdDt0aGlzLl9vbkluZmluaXRlU2Nyb2xsJiYhdGhpcy5fbG9hZGluZ0NvbnRlbnQmJm4mJih0aGlzLl9sb2FkaW5nQ29udGVudD0hMCx0aGlzLl9vbkluZmluaXRlU2Nyb2xsKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2xvYWRpbmdDb250ZW50PSExfSkpfX0se2tleTpcIl9nZXRDb250ZW50RWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi5wYWdlX19jb250ZW50XCIpO2lmKHQpcmV0dXJuIHQ7US50aHJvdygnRmFpbCB0byBnZXQgXCIucGFnZV9fY29udGVudFwiIGVsZW1lbnQnKX19LHtrZXk6XCJfZ2V0QmFja2dyb3VuZEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVEuZmluZENoaWxkKHRoaXMsXCIucGFnZV9fYmFja2dyb3VuZFwiKTtpZih0KXJldHVybiB0O1EudGhyb3coJ0ZhaWwgdG8gZ2V0IFwiLnBhZ2VfX2JhY2tncm91bmRcIiBlbGVtZW50Jyl9fSx7a2V5OlwiX2dldEJvdHRvbVRvb2xiYXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1ib3R0b20tdG9vbGJhclwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLXRvb2xiYXJcIil8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvbnMtdG9vbGJhclwiKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcztzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUsbXIpO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxtcik7YnJlYWs7Y2FzZVwib24taW5maW5pdGUtc2Nyb2xsXCI6dGhpcy5vbkluZmluaXRlU2Nyb2xsPW51bGw9PT1uP251bGw6ZnVuY3Rpb24odCl7dmFyIGU9US5maW5kRnJvbVBhdGgobik7aS5vbkluZmluaXRlU2Nyb2xsPWUsZSh0KX19fX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXshdGhpcy5faXNTaG93biYmUS5pc0F0dGFjaGVkKHRoaXMpJiYodGhpcy5faXNTaG93bj0hMCx0aGlzLnNldEF0dHJpYnV0ZShcInNob3duXCIsXCJcIiksdGhpcy5vblNob3cmJnRoaXMub25TaG93KCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJzaG93XCIpLFEucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfc2hvd1wiKSl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzU2hvd24mJih0aGlzLl9pc1Nob3duPSExLHRoaXMucmVtb3ZlQXR0cmlidXRlKFwic2hvd25cIiksdGhpcy5vbkhpZGUmJnRoaXMub25IaWRlKCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJoaWRlXCIpLFEucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfaGlkZVwiKSl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hpZGUoKSx0aGlzLm9uRGVzdHJveSYmdGhpcy5vbkRlc3Ryb3koKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImRlc3Ryb3lcIiksdGhpcy5vbkRldmljZUJhY2tCdXR0b24mJnRoaXMub25EZXZpY2VCYWNrQnV0dG9uLmRlc3Ryb3koKSxRLnByb3BhZ2F0ZUFjdGlvbih0aGlzLFwiX2Rlc3Ryb3lcIiksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJfZGVyaXZlSG9va3NcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jb25zdHJ1Y3Rvci5ldmVudHMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1cIm9uXCIrZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnNsaWNlKDEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W1wiX1wiK25dfSxzZXQ6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxRLnRocm93KCdcIicrbisnXCIgaG9vayBtdXN0IGJlIGEgZnVuY3Rpb24nKSx0W1wiX1wiK25dPWUuYmluZCh0KX19KX0pfX0se2tleTpcIm5hbWVcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcIm5hbWVcIil9fSx7a2V5OlwiYmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJvbnMtYmFjay1idXR0b25cIil9fSx7a2V5Olwib25JbmZpbml0ZVNjcm9sbFwiLHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzOyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wib25JbmZpbml0ZVNjcm9sbFwiIG11c3QgYmUgZnVuY3Rpb24gb3IgbnVsbCcpLG4odGhpcyxmdW5jdGlvbigpe3Q/ZS5fb25JbmZpbml0ZVNjcm9sbHx8KGUuX2luZmluaXRlU2Nyb2xsTGltaXQ9LjksZS5fYm91bmRPblNjcm9sbD1lLl9vblNjcm9sbC5iaW5kKGUpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9jb250ZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZS5fYm91bmRPblNjcm9sbCl9KSk6ZS5fY29udGVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGUuX2JvdW5kT25TY3JvbGwpLGUuX29uSW5maW5pdGVTY3JvbGw9dH0pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25JbmZpbml0ZVNjcm9sbH19LHtrZXk6XCJvbkRldmljZUJhY2tCdXR0b25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja0J1dHRvbkhhbmRsZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrQnV0dG9uSGFuZGxlciYmdGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPVIuY3JlYXRlSGFuZGxlcih0aGlzLHQpfX0se2tleTpcInNjcm9sbFRvcFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZW50RWxlbWVudC5zY3JvbGxUb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb250ZW50RWxlbWVudC5zY3JvbGxUb3A9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJvbi1pbmZpbml0ZS1zY3JvbGxcIixcImNsYXNzXCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImluaXRcIixcInNob3dcIixcImhpZGVcIixcImRlc3Ryb3lcIl19fV0pLGV9KCk7Yy5QYWdlPV9yLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1wYWdlXCIsX3IpO3ZhciB2cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiX2FuaW1hdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuZnJvbSxpPWUudG8sbz1lLm9wdGlvbnMscj1lLmNhbGxiYWNrLGE9ZS5yZXN0b3JlLHM9dm9pZCAwIT09YSYmYSxsPWUuYW5pbWF0aW9uO3JldHVybiBvPVEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyxvKSxsJiYobj1sLmZyb20saT1sLnRvKSxsPW50KHQpLHMmJihsPWwuc2F2ZVN0eWxlKCkpLGw9bC5xdWV1ZShuKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtjc3M6aSxkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHRpbWluZzp0aGlzLnRpbWluZ30pLHMmJihsPWwucmVzdG9yZVN0eWxlKCkpLHImJihsPWwucXVldWUoZnVuY3Rpb24odCl7cigpLHQoKX0pKSxsfX0se2tleTpcIl9hbmltYXRlQWxsXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oaSl7cmV0dXJuIG4uX2FuaW1hdGUodFtpXSxlW2ldKS5wbGF5KCl9KX19XSksZX0oKSxicj17b3V0Ontmcm9tOntvcGFjaXR5OjF9LHRvOntvcGFjaXR5OjB9fSxpbjp7ZnJvbTp7b3BhY2l0eTowfSx0bzp7b3BhY2l0eToxfX19LHlyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLHZyKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9hbmltYXRlQWxsKHQse19tYXNrOmJyLmluLF9wb3BvdmVyOnthbmltYXRpb246YnIuaW4scmVzdG9yZTohMCxjYWxsYmFjazplfX0pfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2FuaW1hdGVBbGwodCx7X21hc2s6YnIub3V0LF9wb3BvdmVyOnthbmltYXRpb246YnIub3V0LHJlc3RvcmU6ITAsY2FsbGJhY2s6ZX19KX19XSksZX0oKSxrcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSx5ciksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUFsbCh0LHtfbWFzazpici5pbixfcG9wb3Zlcjp7ZnJvbTp7dHJhbnNmb3JtOlwic2NhbGUzZCgxLjMsIDEuMywgMS4wKVwiLG9wYWNpdHk6MH0sdG86e3RyYW5zZm9ybTpcInNjYWxlM2QoMS4wLCAxLjAsICAxLjApXCIsb3BhY2l0eToxfSxyZXN0b3JlOiEwLGNhbGxiYWNrOmV9fSl9fV0pLGV9KCksd3I9e1wiLnBvcG92ZXJcIjpcInBvcG92ZXItLSpcIixcIi5wb3BvdmVyLW1hc2tcIjpcInBvcG92ZXItbWFzay0tKlwiLFwiLnBvcG92ZXJfX2NvbnRlbnRcIjpcInBvcG92ZXItLSpfX2NvbnRlbnRcIixcIi5wb3BvdmVyX19hcnJvd1wiOlwicG9wb3Zlci0tKl9fYXJyb3dcIn0sRXI9e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT95cjprcn0sbm9uZTp2cixcImZhZGUtaW9zXCI6a3IsXCJmYWRlLW1kXCI6eXJ9LENyPXt1cDpcImJvdHRvbVwiLGxlZnQ6XCJyaWdodFwiLGRvd246XCJ0b3BcIixyaWdodDpcImxlZnRcIn0sQXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9ib3VuZE9uQ2hhbmdlPXQuX29uQ2hhbmdlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpLHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6RXIsYmFzZUNsYXNzOnZyLGJhc2VDbGFzc05hbWU6XCJQb3BvdmVyQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfHxcImRlZmF1bHRcIn0pfX0se2tleTpcIl90b2dnbGVTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0Pyh0aGlzLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMuX2N1cnJlbnRUYXJnZXQ9ZS50YXJnZXQsdGhpcy5fcG9zaXRpb25Qb3BvdmVyKGUudGFyZ2V0KSk6KHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLl9jbGVhclN0eWxlcygpKX19LHtrZXk6XCJfcG9zaXRpb25Qb3BvdmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmFkaXVzLG49dGhpcy5fY29udGVudCxpPXRoaXMuX21hcmdpbixvPUxpLmdldFNhZmVBcmVhTGVuZ3RocygpLHI9TGkuZ2V0U2FmZUFyZWFET01SZWN0KCksYT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHM9US5oYXNNb2RpZmllcih0aGlzLFwibWF0ZXJpYWxcIiksbD1zJiZ0aGlzLmhhc0F0dHJpYnV0ZShcImNvdmVyLXRhcmdldFwiKSx1PShRLmZpbmRQYXJlbnQodGhpcyxcIm9ucy1wYWdlXCIpfHxkb2N1bWVudC5ib2R5KS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPXt0b3A6TWF0aC5tYXgodS50b3Asci50b3ApLGxlZnQ6TWF0aC5tYXgodS5sZWZ0LHIubGVmdCksYm90dG9tOk1hdGgubWluKHUuYm90dG9tLHIuYm90dG9tKSxyaWdodDpNYXRoLm1pbih1LnJpZ2h0LHIucmlnaHQpfSxoPXt0b3A6YS50b3AtKGMudG9wK2kpLGxlZnQ6YS5sZWZ0LShjLmxlZnQraSksYm90dG9tOmMuYm90dG9tLWktYS5ib3R0b20scmlnaHQ6Yy5yaWdodC1pLWEucmlnaHR9LGQ9e3RvcDphLnRvcCtNYXRoLnJvdW5kKGEuaGVpZ2h0LzIpLShjLnRvcCtpKSxsZWZ0OmEubGVmdCtNYXRoLnJvdW5kKGEud2lkdGgvMiktKGMubGVmdCtpKSxib3R0b206Yy5ib3R0b20taS1hLmJvdHRvbStNYXRoLnJvdW5kKGEuaGVpZ2h0LzIpLHJpZ2h0OmMucmlnaHQtaS1hLnJpZ2h0K01hdGgucm91bmQoYS53aWR0aC8yKX0sZj10aGlzLl9jYWxjdWxhdGVEaXJlY3Rpb25zKGgpLHA9Zi52ZXJ0aWNhbCxnPWYucHJpbWFyeSxtPWYuc2Vjb25kYXJ5O3RoaXMuX2N1cnJlbnREaXJlY3Rpb249ZyxRLmFkZE1vZGlmaWVyKHRoaXMsZyk7dmFyIF89cD9cIndpZHRoXCI6XCJoZWlnaHRcIix2PWZ1bmN0aW9uKHQpe3JldHVybnt3aWR0aDpwYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiKSwxMCksaGVpZ2h0OnBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcImhlaWdodFwiKSwxMCl9fSh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShuKSksYj1sPzA6KHA/YS5oZWlnaHQ6YS53aWR0aCkrKHM/MDoxNCkseT1NYXRoLm1heChvW2ddK2ksb1tnXStpK2hbZ10rYiksaz1NYXRoLm1heChvW21dK2ksb1ttXStpK2RbbV0tdltfXS8yKTt0aGlzLl9wb3BvdmVyLnN0eWxlW2ddPXkrXCJweFwiLHRoaXMuX3BvcG92ZXIuc3R5bGVbbV09aytcInB4XCIsdGhpcy5fYXJyb3cuc3R5bGVbbV09TWF0aC5tYXgoZSxvW21dK2krZFttXS1rKStcInB4XCJ9fSx7a2V5OlwiX2NhbGN1bGF0ZURpcmVjdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0odGhpcy5nZXRBdHRyaWJ1dGUoXCJkaXJlY3Rpb25cIil8fFwidXAgZG93biBsZWZ0IHJpZ2h0XCIpLnNwbGl0KC9cXHMrLykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBDclt0XX0pLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdFtlXS10W25dfSlbMF0sbj1cInRvcFwiPT1lfHxcImJvdHRvbVwiPT1lLGk9dm9pZCAwO3JldHVybiBpPW4/dC5sZWZ0PHQucmlnaHQ/XCJsZWZ0XCI6XCJyaWdodFwiOnQudG9wPHQuYm90dG9tP1widG9wXCI6XCJib3R0b21cIix7dmVydGljYWw6bixwcmltYXJ5OmUsc2Vjb25kYXJ5Oml9fX0se2tleTpcIl9jbGVhclN0eWxlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9jdXJyZW50RGlyZWN0aW9uPW51bGwsW1widG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fYXJyb3cuc3R5bGVbZV09dC5fY29udGVudC5zdHlsZVtlXT10Ll9wb3BvdmVyLnN0eWxlW2VdPVwiXCIsUS5yZW1vdmVNb2RpZmllcih0LGUpfSl9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3QuX2N1cnJlbnRUYXJnZXQmJnQuX3Bvc2l0aW9uUG9wb3Zlcih0Ll9jdXJyZW50VGFyZ2V0KX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksIXRoaXMuX3BvcG92ZXJ8fCF0aGlzLl9tYXNrKXtpZih0aGlzLl9wb3BvdmVyJiZ0aGlzLl9jb250ZW50KXtpZighdGhpcy5fbWFzayl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJwb3BvdmVyLW1hc2tcIiksdGhpcy5pbnNlcnRCZWZvcmUodCx0aGlzLmZpcnN0Q2hpbGQpfWlmKCF0aGlzLl9hcnJvdyl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTGlzdC5hZGQoXCJwb3BvdmVyX19hcnJvd1wiKSx0aGlzLl9wb3BvdmVyLmFwcGVuZENoaWxkKGUpfX1lbHNle2Zvcih2YXIgbj1RLmNyZWF0ZUZyYWdtZW50KCdcXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLW1hc2tcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyX19jb250ZW50XCI+PC9kaXY+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyX19hcnJvd1wiPjwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgJyksaT1uLnF1ZXJ5U2VsZWN0b3IoXCIucG9wb3Zlcl9fY29udGVudFwiKTt0aGlzLmNoaWxkTm9kZXNbMF07KWkuYXBwZW5kQ2hpbGQodGhpcy5jaGlsZE5vZGVzWzBdKTt0aGlzLmFwcGVuZENoaWxkKG4pfXRoaXMuaGFzQXR0cmlidXRlKFwic3R5bGVcIikmJih0aGlzLl9wb3BvdmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZihuPSF0fHxcIm9iamVjdFwiIT09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpmKHQpKXx8dCBpbnN0YW5jZW9mIEV2ZW50fHx0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/Xyh7fSxuLHt0YXJnZXQ6dH0pOl8oe30sdCkpLnRhcmdldD9uLnRhcmdldD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKG4udGFyZ2V0KTpuLnRhcmdldCBpbnN0YW5jZW9mIEV2ZW50JiYobi50YXJnZXQ9bi50YXJnZXQudGFyZ2V0KSxuLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fHxRLnRocm93KFwiSW52YWxpZCB0YXJnZXQgdHlwZSBvciB1bmRlZmluZWRcIiksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJzaG93XCIsdGhpcykuY2FsbCh0aGlzLG4pfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMSksdGhpcy5fbWFyZ2luPXRoaXMuX21hcmdpbnx8cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcykuZ2V0UHJvcGVydHlWYWx1ZShcInRvcFwiKSksdGhpcy5fbWFyZ2luPXRoaXMuX21hcmdpbnx8NixuKHRoaXMsZnVuY3Rpb24oKXt0Ll9yYWRpdXM9cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodC5fY29udGVudCkuZ2V0UHJvcGVydHlWYWx1ZShcImJvcmRlci10b3AtbGVmdC1yYWRpdXNcIikpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe2lmKFwiZGlyZWN0aW9uXCI9PT10KXJldHVybiB0aGlzLl9ib3VuZE9uQ2hhbmdlKCk7XCJtb2RpZmllclwiPT09dCYmdGhpcy5fY3VycmVudERpcmVjdGlvbiYmUS5hZGRNb2RpZmllcih0aGlzLHRoaXMuX2N1cnJlbnREaXJlY3Rpb24pLHYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHdyfX0se2tleTpcIl9tYXNrXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIucG9wb3Zlci1tYXNrXCIpfX0se2tleTpcIl9wb3BvdmVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIucG9wb3ZlclwiKX19LHtrZXk6XCJfY29udGVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLl9wb3BvdmVyLFwiLnBvcG92ZXJfX2NvbnRlbnRcIil9fSx7a2V5OlwiX2Fycm93XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX3BvcG92ZXIsXCIucG9wb3Zlcl9fYXJyb3dcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHZyfHxRLnRocm93QW5pbWF0b3IoXCJQb3BvdmVyXCIpLEVyW3RdPWV9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcImRpcmVjdGlvblwiXSl9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEVyfX0se2tleTpcIlBvcG92ZXJBbmltYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB2cn19XSksZX0oKTtjLlBvcG92ZXI9QXIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXBvcG92ZXJcIixBcik7dmFyIFNyPXtcIi5wcm9ncmVzcy1iYXJcIjpcInByb2dyZXNzLWJhci0tKlwiLFwiLnByb2dyZXNzLWJhcl9fcHJpbWFyeVwiOlwicHJvZ3Jlc3MtYmFyLS0qX19wcmltYXJ5XCIsXCIucHJvZ3Jlc3MtYmFyX19zZWNvbmRhcnlcIjpcInByb2dyZXNzLWJhci0tKl9fc2Vjb25kYXJ5XCJ9LFByPVEuY3JlYXRlRWxlbWVudCgnXFxuICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyXCI+XFxuICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCI+PC9kaXY+XFxuICA8L2Rpdj5cXG4nKSxPcj1cImluZGV0ZXJtaW5hdGVcIix4cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0NvbXBpbGVkKCk/dGhpcy5fdGVtcGxhdGU9US5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1iYXJcIik6dGhpcy5fdGVtcGxhdGU9UHIuY2xvbmVOb2RlKCEwKSx0aGlzLl9wcmltYXJ5PVEuZmluZENoaWxkKHRoaXMuX3RlbXBsYXRlLFwiLnByb2dyZXNzLWJhcl9fcHJpbWFyeVwiKSx0aGlzLl9zZWNvbmRhcnk9US5maW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUsXCIucHJvZ3Jlc3MtYmFyX19zZWNvbmRhcnlcIiksdGhpcy5fdXBkYXRlRGV0ZXJtaW5hdGUoKSx0aGlzLl91cGRhdGVWYWx1ZSgpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUpLE4ucHJlcGFyZSh0aGlzKSxCLmluaXRNb2RpZmllcih0aGlzLFNyKX19LHtrZXk6XCJfaXNDb21waWxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtYmFyXCIpKXJldHVybiExO3ZhciB0PVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtYmFyXCIpO3JldHVybiEhUS5maW5kQ2hpbGQodCxcIi5wcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiKSYmISFRLmZpbmRDaGlsZCh0LFwiLnByb2dyZXNzLWJhcl9fcHJpbWFyeVwiKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7XCJtb2RpZmllclwiPT09dD8oQi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxTciksdGhpcy5oYXNBdHRyaWJ1dGUoT3IpJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpKTpcInZhbHVlXCI9PT10fHxcInNlY29uZGFyeS12YWx1ZVwiPT09dD90aGlzLl91cGRhdGVWYWx1ZSgpOnQ9PT1PciYmdGhpcy5fdXBkYXRlRGV0ZXJtaW5hdGUoKX19LHtrZXk6XCJfdXBkYXRlRGV0ZXJtaW5hdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIFEudG9nZ2xlTW9kaWZpZXIodCxPcix7Zm9yY2U6dC5oYXNBdHRyaWJ1dGUoT3IpfSl9KX19LHtrZXk6XCJfdXBkYXRlVmFsdWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5fcHJpbWFyeS5zdHlsZS53aWR0aD10Lmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpP3QuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikrXCIlXCI6XCIwJVwiLHQuX3NlY29uZGFyeS5zdHlsZS53aWR0aD10Lmhhc0F0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKT90LmdldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKStcIiVcIjpcIjAlXCJ9KX19LHtrZXk6XCJ2YWx1ZVwiLHNldDpmdW5jdGlvbih0KXsoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xMDApJiZRLnRocm93KFwiSW52YWxpZCB2YWx1ZVwiKSx0aGlzLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsTWF0aC5mbG9vcih0KSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfHxcIjBcIil9fSx7a2V5Olwic2Vjb25kYXJ5VmFsdWVcIixzZXQ6ZnVuY3Rpb24odCl7KFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MTAwKSYmUS50aHJvdyhcIkludmFsaWQgdmFsdWVcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIixNYXRoLmZsb29yKHQpKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpfHxcIjBcIil9fSx7a2V5OlwiaW5kZXRlcm1pbmF0ZVwiLHNldDpmdW5jdGlvbih0KXt0P3RoaXMuc2V0QXR0cmlidXRlKE9yLFwiXCIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKE9yKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKE9yKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJ2YWx1ZVwiLFwic2Vjb25kYXJ5LXZhbHVlXCIsT3JdfX1dKSxlfSgpO2MuUHJvZ3Jlc3NCYXI9eHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXByb2dyZXNzLWJhclwiLHhyKTt2YXIgVHI9e1wiLnByb2dyZXNzLWNpcmN1bGFyXCI6XCJwcm9ncmVzcy1jaXJjdWxhci0tKlwiLFwiLnByb2dyZXNzLWNpcmN1bGFyX19iYWNrZ3JvdW5kXCI6XCJwcm9ncmVzcy1jaXJjdWxhci0tKl9fYmFja2dyb3VuZFwiLFwiLnByb2dyZXNzLWNpcmN1bGFyX19wcmltYXJ5XCI6XCJwcm9ncmVzcy1jaXJjdWxhci0tKl9fcHJpbWFyeVwiLFwiLnByb2dyZXNzLWNpcmN1bGFyX19zZWNvbmRhcnlcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qX19zZWNvbmRhcnlcIn0sTHI9US5jcmVhdGVFbGVtZW50KCdcXG4gIDxzdmcgY2xhc3M9XCJwcm9ncmVzcy1jaXJjdWxhclwiPlxcbiAgICA8Y2lyY2xlIGNsYXNzPVwicHJvZ3Jlc3MtY2lyY3VsYXJfX2JhY2tncm91bmRcIiAvPlxcbiAgICA8Y2lyY2xlIGNsYXNzPVwicHJvZ3Jlc3MtY2lyY3VsYXJfX3NlY29uZGFyeVwiIGN4PVwiNTAlXCIgY3k9XCI1MCVcIiByPVwiNDAlXCIgLz5cXG4gICAgPGNpcmNsZSBjbGFzcz1cInByb2dyZXNzLWNpcmN1bGFyX19wcmltYXJ5XCIgY3g9XCI1MCVcIiBjeT1cIjUwJVwiIHI9XCI0MCVcIiAvPlxcbiAgPC9zdmc+XFxuJyksTXI9XCJpbmRldGVybWluYXRlXCIsRHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7XCJtb2RpZmllclwiPT09dD8oQi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxUciksdGhpcy5oYXNBdHRyaWJ1dGUoTXIpJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpKTpcInZhbHVlXCI9PT10fHxcInNlY29uZGFyeS12YWx1ZVwiPT09dD90aGlzLl91cGRhdGVWYWx1ZSgpOnQ9PT1NciYmdGhpcy5fdXBkYXRlRGV0ZXJtaW5hdGUoKX19LHtrZXk6XCJfdXBkYXRlRGV0ZXJtaW5hdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIFEudG9nZ2xlTW9kaWZpZXIodCxNcix7Zm9yY2U6dC5oYXNBdHRyaWJ1dGUoTXIpfSl9KX19LHtrZXk6XCJfdXBkYXRlVmFsdWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5oYXNBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSYmbih0aGlzLGZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5jZWlsKDI1MS4zMip0LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKi4wMSk7dC5fcHJpbWFyeS5zdHlsZVtcInN0cm9rZS1kYXNoYXJyYXlcIl09ZStcIiUsIDI1MS4zMiVcIn0pLHRoaXMuaGFzQXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpP24odGhpcyxmdW5jdGlvbigpe3ZhciBlPU1hdGguY2VpbCgyNTEuMzIqdC5nZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIikqLjAxKTt0Ll9zZWNvbmRhcnkuc3R5bGUuZGlzcGxheT1udWxsLHQuX3NlY29uZGFyeS5zdHlsZVtcInN0cm9rZS1kYXNoYXJyYXlcIl09ZStcIiUsIDI1MS4zMiVcIn0pOm4odGhpcyxmdW5jdGlvbigpe3QuX3NlY29uZGFyeS5zdHlsZS5kaXNwbGF5PVwibm9uZVwifSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzQ29tcGlsZWQoKT90aGlzLl90ZW1wbGF0ZT1RLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWNpcmN1bGFyXCIpOnRoaXMuX3RlbXBsYXRlPUxyLmNsb25lTm9kZSghMCksdGhpcy5fcHJpbWFyeT1RLmZpbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fcHJpbWFyeVwiKSx0aGlzLl9zZWNvbmRhcnk9US5maW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3NlY29uZGFyeVwiKSx0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpLHRoaXMuX3VwZGF0ZVZhbHVlKCksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSksTi5wcmVwYXJlKHRoaXMpLEIuaW5pdE1vZGlmaWVyKHRoaXMsVHIpfX0se2tleTpcIl9pc0NvbXBpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighUS5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1jaXJjdWxhclwiKSlyZXR1cm4hMTt2YXIgdD1RLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWNpcmN1bGFyXCIpO3JldHVybiEhUS5maW5kQ2hpbGQodCxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fc2Vjb25kYXJ5XCIpJiYhIVEuZmluZENoaWxkKHQsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3ByaW1hcnlcIil9fSx7a2V5OlwidmFsdWVcIixzZXQ6ZnVuY3Rpb24odCl7KFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MTAwKSYmUS50aHJvdyhcIkludmFsaWQgdmFsdWVcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLE1hdGguZmxvb3IodCkpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKXx8XCIwXCIpfX0se2tleTpcInNlY29uZGFyeVZhbHVlXCIsc2V0OmZ1bmN0aW9uKHQpeyhcIm51bWJlclwiIT10eXBlb2YgdHx8dDwwfHx0PjEwMCkmJlEudGhyb3coXCJJbnZhbGlkIHZhbHVlXCIpLHRoaXMuc2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIsTWF0aC5mbG9vcih0KSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKXx8XCIwXCIpfX0se2tleTpcImluZGV0ZXJtaW5hdGVcIixzZXQ6ZnVuY3Rpb24odCl7dD90aGlzLnNldEF0dHJpYnV0ZShNcixcIlwiKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZShNcil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShNcil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwidmFsdWVcIixcInNlY29uZGFyeS12YWx1ZVwiLE1yXX19XSksZX0oKTtjLlByb2dyZXNzQ2lyY3VsYXI9RHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXByb2dyZXNzLWNpcmN1bGFyXCIsRHIpO3ZhciBJcj1cImluaXRpYWxcIixOcj1mdW5jdGlvbih0LGUpe3JldHVybiBRLnRocm93KCdcIicrdCsnXCIgbXVzdCBiZSAnK2UpfSxCcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3Nob3VsZEZpeFNjcm9sbD1RLmdsb2JhbHMuaXNVSVdlYlZpZXcsdC5fb25EcmFnPXQuX29uRHJhZy5iaW5kKHQpLHQuX29uRHJhZ1N0YXJ0PXQuX29uRHJhZ1N0YXJ0LmJpbmQodCksdC5fb25EcmFnRW5kPXQuX29uRHJhZ0VuZC5iaW5kKHQpLHQuX29uU2Nyb2xsPXQuX29uU2Nyb2xsLmJpbmQodCksdC5fc2V0U3RhdGUoSXIsITApLHQuX2hpZGUoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9zZXRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oZWlnaHQrXCJweFwiO2QodGhpcyx7aGVpZ2h0OnQsbGluZUhlaWdodDp0fSksXCJcIj09PXRoaXMuc3R5bGUuZGlzcGxheSYmdGhpcy5fc2hvdygpfX0se2tleTpcIl9vblNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3BhZ2VFbGVtZW50O2Uuc2Nyb2xsVG9wPDAmJihlLnNjcm9sbFRvcD0wKX19LHtrZXk6XCJfY2FuQ29uc3VtZUdlc3R1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInVwXCI9PT10LmRpcmVjdGlvbnx8XCJkb3duXCI9PT10LmRpcmVjdGlvbn19LHtrZXk6XCJfb25EcmFnU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuZ2VzdHVyZSYmIXRoaXMuZGlzYWJsZWQpe3ZhciBuPXQuZ2VzdHVyZS5jZW50ZXIuY2xpZW50WSt0aGlzLl9wYWdlRWxlbWVudC5zY3JvbGxUb3AsaT13aW5kb3cuaW5uZXJIZWlnaHQsbz10aGlzLl9zaG91bGRGaXhTY3JvbGw/Ljg6MTtpZih0aGlzLl9pZ25vcmVEcmFnPXQuY29uc3VtZWR8fG4+aSpvLCF0aGlzLl9pZ25vcmVEcmFnKXt2YXIgcj10LmNvbnN1bWU7dC5jb25zdW1lPWZ1bmN0aW9uKCl7ciYmcigpLGUuX2lnbm9yZURyYWc9ITAsZS5faGlkZSgpfSx0aGlzLl9jYW5Db25zdW1lR2VzdHVyZSh0Lmdlc3R1cmUpJiYociYmcigpLHQuY29uc3VtZWQ9ITAsdGhpcy5fc2hvdygpKX10aGlzLl9zdGFydFNjcm9sbD10aGlzLl9wYWdlRWxlbWVudC5zY3JvbGxUb3B9fX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuZ2VzdHVyZSYmIXRoaXMuZGlzYWJsZWQmJiF0aGlzLl9pZ25vcmVEcmFnJiZ0aGlzLl9jYW5Db25zdW1lR2VzdHVyZSh0Lmdlc3R1cmUpKXtcIm5vbmVcIj09PXRoaXMuc3R5bGUuZGlzcGxheSYmdGhpcy5fc2hvdygpLHQuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIG49dC5nZXN0dXJlLmNlbnRlci5jbGllbnRZK3RoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcCxpPXdpbmRvdy5pbm5lckhlaWdodDt0aGlzLl9zaG91bGRGaXhTY3JvbGwmJih0aGlzLl9wYWdlRWxlbWVudC5zY3JvbGxUb3A9dGhpcy5fc3RhcnRTY3JvbGwtdC5nZXN0dXJlLmRlbHRhWSwoXCJ1cFwiIT09dC5nZXN0dXJlLmludGVyaW1EaXJlY3Rpb258fG48PS41KmkpJiZ0Lmdlc3R1cmUucHJldmVudERlZmF1bHQoKSk7dmFyIG89TWF0aC5tYXgodC5nZXN0dXJlLmRlbHRhWS10aGlzLl9zdGFydFNjcm9sbCwwKTtpZihvIT09dGhpcy5fY3VycmVudFRyYW5zbGF0aW9uKXt2YXIgcj10aGlzLnRocmVzaG9sZEhlaWdodDtyPjAmJm8+PXI/KHQuZ2VzdHVyZS5zdG9wRGV0ZWN0KCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2ZpbmlzaCgpfSkpOm8+PXRoaXMuaGVpZ2h0P3RoaXMuX3NldFN0YXRlKFwicHJlYWN0aW9uXCIpOnRoaXMuX3NldFN0YXRlKElyKSx0aGlzLl90cmFuc2xhdGVUbyhvKX19fX0se2tleTpcIl9vbkRyYWdFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0Lmdlc3R1cmUmJiF0aGlzLmRpc2FibGVkJiYhdGhpcy5faWdub3JlRHJhZyYmKHQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5fY3VycmVudFRyYW5zbGF0aW9uPjApKXt0aGlzLl9jdXJyZW50VHJhbnNsYXRpb24+dGhpcy5oZWlnaHQ/dGhpcy5fZmluaXNoKCk6dGhpcy5fdHJhbnNsYXRlVG8oMCx7YW5pbWF0ZTohMH0pfX19LHtrZXk6XCJfZmluaXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3NldFN0YXRlKFwiYWN0aW9uXCIpLHRoaXMuX3RyYW5zbGF0ZVRvKHRoaXMuaGVpZ2h0LHthbmltYXRlOiEwfSk7KHRoaXMub25BY3Rpb258fGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KShmdW5jdGlvbigpe3QuX3RyYW5zbGF0ZVRvKDAse2FuaW1hdGU6ITB9KSx0Ll9zZXRTdGF0ZShJcil9KX19LHtrZXk6XCJfc2V0U3RhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc3RhdGU7dGhpcy5zZXRBdHRyaWJ1dGUoXCJzdGF0ZVwiLHQpLGV8fG49PT10aGlzLnN0YXRlfHxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImNoYW5nZXN0YXRlXCIse3B1bGxIb29rOnRoaXMsc3RhdGU6dCxsYXN0U3RhdGU6bn0pfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3Quc3R5bGUuZGlzcGxheT1cIlwiLHQuX3BhZ2VFbGVtZW50JiYodC5fcGFnZUVsZW1lbnQuc3R5bGUubWFyZ2luVG9wPVwiLVwiK3QuaGVpZ2h0K1wicHhcIil9KX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuX3BhZ2VFbGVtZW50JiYodGhpcy5fcGFnZUVsZW1lbnQuc3R5bGUubWFyZ2luVG9wPVwiXCIpfX0se2tleTpcIl90cmFuc2xhdGVUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZigwIT10aGlzLl9jdXJyZW50VHJhbnNsYXRpb258fDAhPXQpe3RoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbj10O3ZhciBuPWUuYW5pbWF0ZT97ZHVyYXRpb246LjMsdGltaW5nOlwiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCJ9Ont9O3RoaXMuX29uUHVsbCYmdGhpcy5fb25QdWxsKCh0L3RoaXMuaGVpZ2h0KS50b0ZpeGVkKDIpLG4pO3ZhciBpPXRoaXMuaGFzQXR0cmlidXRlKFwiZml4ZWQtY29udGVudFwiKT90aGlzOnRoaXMuX3BhZ2VFbGVtZW50O250KGkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwcHgsIFwiK3QrXCJweCwgMHB4KVwifSxuKS5wbGF5KGZ1bmN0aW9uKCl7MD09PXQmJmQuY2xlYXIoaSxcInRyYW5zaXRpb24gdHJhbnNmb3JtXCIpLGUuY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5jYWxsYmFjaygpfSl9fX0se2tleTpcIl9kaXNhYmxlRHJhZ0xvY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2RyYWdMb2NrRGlzYWJsZWQ9ITAsdGhpcy5fc2V0dXBMaXN0ZW5lcnMoITApfX0se2tleTpcIl9zZXR1cExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1mdW5jdGlvbih0KXtyZXR1cm4gZS5fcGFnZUVsZW1lbnRbdCtcIkV2ZW50TGlzdGVuZXJcIl0oXCJzY3JvbGxcIixlLl9vblNjcm9sbCwhMSl9LGk9ZnVuY3Rpb24odCl7dmFyIG49e3Bhc3NpdmU6ITB9O2UuX2dlc3R1cmVEZXRlY3Rvclt0XShcImRyYWdcIixlLl9vbkRyYWcsbiksZS5fZ2VzdHVyZURldGVjdG9yW3RdKFwiZHJhZ3N0YXJ0XCIsZS5fb25EcmFnU3RhcnQsbiksZS5fZ2VzdHVyZURldGVjdG9yW3RdKFwiZHJhZ2VuZFwiLGUuX29uRHJhZ0VuZCxuKX07dGhpcy5fZ2VzdHVyZURldGVjdG9yJiYoaShcIm9mZlwiKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3IuZGlzcG9zZSgpLHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1udWxsKSxuKFwicmVtb3ZlXCIpLHQmJih0aGlzLl9nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMuX3BhZ2VFbGVtZW50LHtkcmFnTWluRGlzdGFuY2U6MSxkcmFnRGlzdGFuY2VDb3JyZWN0aW9uOiExLGRyYWdMb2NrVG9BeGlzOiF0aGlzLl9kcmFnTG9ja0Rpc2FibGVkLHBhc3NpdmU6IXRoaXMuX3Nob3VsZEZpeFNjcm9sbH0pLGkoXCJvblwiKSxuKFwiYWRkXCIpKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudFRyYW5zbGF0aW9uPTAsdGhpcy5fcGFnZUVsZW1lbnQ9dGhpcy5wYXJlbnROb2RlLHRoaXMuX3NldHVwTGlzdGVuZXJzKCEwKSx0aGlzLl9zZXRTdHlsZSgpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9oaWRlKCksdGhpcy5fc2V0dXBMaXN0ZW5lcnMoITEpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtcImhlaWdodFwiPT09dCYmdGhpcy5fcGFnZUVsZW1lbnQmJnRoaXMuX3NldFN0eWxlKCl9fSx7a2V5Olwib25BY3Rpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BY3Rpb259LHNldDpmdW5jdGlvbih0KXshdHx8dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxOcihcIm9uQWN0aW9uXCIsXCJmdW5jdGlvbiBvciBudWxsXCIpLHRoaXMuX29uQWN0aW9uPXR9fSx7a2V5Olwib25QdWxsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUHVsbH0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fE5yKFwib25QdWxsXCIsXCJmdW5jdGlvbiBvciBudWxsXCIpLHRoaXMuX29uUHVsbD10fX0se2tleTpcImhlaWdodFwiLHNldDpmdW5jdGlvbih0KXtRLmlzSW50ZWdlcih0KXx8TnIoXCJoZWlnaHRcIixcImludGVnZXJcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0K1wicHhcIil9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKXx8XCI2NFwiLDEwKX19LHtrZXk6XCJ0aHJlc2hvbGRIZWlnaHRcIixzZXQ6ZnVuY3Rpb24odCl7US5pc0ludGVnZXIodCl8fE5yKFwidGhyZXNob2xkSGVpZ2h0XCIsXCJpbnRlZ2VyXCIpLHRoaXMuc2V0QXR0cmlidXRlKFwidGhyZXNob2xkLWhlaWdodFwiLHQrXCJweFwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwidGhyZXNob2xkLWhlaWdodFwiKXx8XCI5NlwiLDEwKX19LHtrZXk6XCJzdGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInN0YXRlXCIpfX0se2tleTpcInB1bGxEaXN0YW5jZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VHJhbnNsYXRpb259fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImhlaWdodFwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJjaGFuZ2VzdGF0ZVwiXX19XSksZX0oKTtjLlB1bGxIb29rPUJyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1wdWxsLWhvb2tcIixCcik7dmFyIGpyPXtcIlwiOlwicmFuZ2UtLSpcIixcIi5yYW5nZV9faW5wdXRcIjpcInJhbmdlLS0qX19pbnB1dFwiLFwiLnJhbmdlX19mb2N1cy1yaW5nXCI6XCJyYW5nZS0tKl9fZm9jdXMtcmluZ1wifSxIcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX29uTW91c2VEb3duPXQuX29uTW91c2VEb3duLmJpbmQodCksdC5fb25Nb3VzZVVwPXQuX29uTW91c2VVcC5iaW5kKHQpLHQuX29uVG91Y2hTdGFydD10Ll9vblRvdWNoU3RhcnQuYmluZCh0KSx0Ll9vblRvdWNoRW5kPXQuX29uVG91Y2hFbmQuYmluZCh0KSx0Ll9vbklucHV0PXQuX3VwZGF0ZS5iaW5kKHQpLHQuX29uRHJhZ3N0YXJ0PXQuX29uRHJhZ3N0YXJ0LmJpbmQodCksdC5fb25EcmFnZW5kPXQuX29uRHJhZ2VuZC5iaW5kKHQpLHR9cmV0dXJuIGIoZSxObyksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiX2NvbXBpbGVcIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX3VwZGF0ZURpc2FibGVkKHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfX0se2tleTpcIl91cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2lucHV0LGU9dGhpcy5fZm9jdXNSaW5nO3Quc3R5bGUuYmFja2dyb3VuZFNpemU9MTAwKnRoaXMuX3JhdGlvK1wiJSAycHhcIixlLnZhbHVlPXRoaXMudmFsdWUsXCJcIj09PXQubWluJiZcIjBcIj09PXQudmFsdWV8fHQubWluPT09dC52YWx1ZT90LnNldEF0dHJpYnV0ZShcIl96ZXJvXCIsXCJcIik6dC5yZW1vdmVBdHRyaWJ1dGUoXCJfemVyb1wiKSxbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiBlW25dPXRbbl19KX19LHtrZXk6XCJfb25Nb3VzZURvd25cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJyYW5nZV9faW5wdXQtLWFjdGl2ZVwiKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5faW5wdXQuZm9jdXMoKX0pfX0se2tleTpcIl9vblRvdWNoU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9vbk1vdXNlRG93bigpfX0se2tleTpcIl9vbk1vdXNlVXBcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwicmFuZ2VfX2lucHV0LS1hY3RpdmVcIil9fSx7a2V5OlwiX29uVG91Y2hFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9vbk1vdXNlVXAodCl9fSx7a2V5OlwiX29uRHJhZ3N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5jb25zdW1lZD0hMCx0Lmdlc3R1cmUuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5faW5wdXQuY2xhc3NMaXN0LmFkZChcInJhbmdlX19pbnB1dC0tYWN0aXZlXCIpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdcIix0aGlzLl9vbkRyYWcpfX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfX0se2tleTpcIl9vbkRyYWdlbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwicmFuZ2VfX2lucHV0LS1hY3RpdmVcIiksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ1wiLHRoaXMuX29uRHJhZyl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe1wiZGlzYWJsZWRcIj09PXQmJnRoaXMuX3VwZGF0ZURpc2FibGVkKGkpLHYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfdXBkYXRlRGlzYWJsZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0P3RoaXMuY2xhc3NMaXN0LmFkZChcInJhbmdlLS1kaXNhYmxlZFwiKTp0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJyYW5nZS0tZGlzYWJsZWRcIil9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NldHVwTGlzdGVuZXJzKCEwKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBMaXN0ZW5lcnMoITEpfX0se2tleTpcIl9zZXR1cExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSh0P1wiYWRkXCI6XCJyZW1vdmVcIikrXCJFdmVudExpc3RlbmVyXCI7UVtlXSh0aGlzLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2hTdGFydCx7cGFzc2l2ZTohMH0pLHRoaXNbZV0oXCJtb3VzZWRvd25cIix0aGlzLl9vbk1vdXNlRG93biksdGhpc1tlXShcIm1vdXNldXBcIix0aGlzLl9vbk1vdXNlVXApLHRoaXNbZV0oXCJ0b3VjaGVuZFwiLHRoaXMuX29uVG91Y2hFbmQpLHRoaXNbZV0oXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdzdGFydCksdGhpc1tlXShcImRyYWdlbmRcIix0aGlzLl9vbkRyYWdlbmQpLHRoaXNbZV0oXCJpbnB1dFwiLHRoaXMuX29uSW5wdXQpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ganJ9fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX2lucHV0XCI+XFxuICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIGNsYXNzPVwicmFuZ2VfX2ZvY3VzLXJpbmdcIiB0YWJJbmRleD1cIi0xXCI+XFxuICAgICd9fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJhbmdlXCJ9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFuZ2VcIn19LHtrZXk6XCJfZm9jdXNSaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMV19fSx7a2V5OlwiX3JhdGlvXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJcIj09PXRoaXMuX2lucHV0Lm1pbj8wOnBhcnNlSW50KHRoaXMuX2lucHV0Lm1pbiksZT1cIlwiPT09dGhpcy5faW5wdXQubWF4PzEwMDpwYXJzZUludCh0aGlzLl9pbnB1dC5tYXgpO3JldHVybih0aGlzLnZhbHVlLXQpLyhlLXQpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiZGlzYWJsZWRcIl0uY29uY2F0KHcoTm8ub2JzZXJ2ZWRBdHRyaWJ1dGVzKSl9fV0pLGV9KCk7Yy5SYW5nZT1IcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcmFuZ2VcIixIcik7dmFyIFJyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9xdWV1ZT1bXSx0aGlzLl9pbmRleD0wfXJldHVybiBnKHQsW3trZXk6XCJhbmltYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MjAwLGk9KG5ldyBEYXRlKS5nZXRUaW1lKCksbz17fSxyPSExLGE9ITEscz0hMSxsPU9iamVjdC5rZXlzKGUpLHU9e3N0b3A6ZnVuY3Rpb24oKXt2YXIgYz1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cyYmY2xlYXJUaW1lb3V0KHMpO3ZhciBoPU1hdGgubWluKDEsKChuZXcgRGF0ZSkuZ2V0VGltZSgpLWkpL24pO3JldHVybiBsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT0oMS1oKSpvW25dK2gqZVtuXSsoXCJvcGFjaXR5XCI9PW4/XCJcIjpcInB4XCIpfSksdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb249XCIwc1wiLGMuc3RvcE5leHQ/YT0hMTpyfHwocj0hMCxhJiZhKCkpLHV9LHRoZW46ZnVuY3Rpb24odCl7cmV0dXJuIGE9dCxyJiZhJiZhKCksdX0sc3BlZWQ6ZnVuY3Rpb24oYSl7aWYoUC5jb25maWcuYW5pbWF0aW9uc0Rpc2FibGVkJiYoYT0wKSwhcil7cyYmY2xlYXJUaW1lb3V0KHMpO3ZhciBjPSgobmV3IERhdGUpLmdldFRpbWUoKS1pKS9uLGg9YSooMS1jKTtsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT0oMS1jKSpvW25dK2MqZVtuXSsoXCJvcGFjaXR5XCI9PW4/XCJcIjpcInB4XCIpfSksZnVuY3Rpb24oKXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KTtsLmZvckVhY2goZS5nZXRQcm9wZXJ0eVZhbHVlLmJpbmQoZSkpLGU9dC5vZmZzZXRIZWlnaHR9KCksaT10LnNwZWVkVXBUaW1lLG49aCx0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj1uLzFlMytcInNcIixsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT1lW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSxzPXNldFRpbWVvdXQodS5zdG9wLGgpfXJldHVybiB1fSxmaW5pc2g6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06NTAsZT0oKG5ldyBEYXRlKS5nZXRUaW1lKCktaSkvbjtyZXR1cm4gdS5zcGVlZCh0LygxLWUpKSx1fX07aWYodC5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKXx8cnx8UC5jb25maWcuYW5pbWF0aW9uc0Rpc2FibGVkKXJldHVybiB1O3ZhciBjPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpO3JldHVybiBsLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9cGFyc2VGbG9hdChjLmdldFByb3BlcnR5VmFsdWUodCkpO29bdF09aXNOYU4oZSk/MDplfSkscnx8KHQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5PWwuam9pbihcIixcIiksdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb249bi8xZTMrXCJzXCIsbC5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Quc3R5bGVbbl09ZVtuXSsoXCJvcGFjaXR5XCI9PW4/XCJcIjpcInB4XCIpfSkpLHM9c2V0VGltZW91dCh1LnN0b3AsbiksdGhpcy5fb25TdG9wQW5pbWF0aW9ucyh0LHUuc3RvcCksdX19XSksZyh0LFt7a2V5OlwiX29uU3RvcEFuaW1hdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3F1ZXVlLGk9dGhpcy5faW5kZXgrKztuW3RdPW5bdF18fFtdLG5bdF1baV09ZnVuY3Rpb24obyl7cmV0dXJuIGRlbGV0ZSBuW3RdW2ldLG5bdF0mJjA9PW5bdF0ubGVuZ3RoJiZkZWxldGUgblt0XSxlKG8pfX19LHtrZXk6XCJzdG9wQW5pbWF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uuc3RvcEFuaW1hdGlvbnModCxuKX0pOyh0aGlzLl9xdWV1ZVt0XXx8W10pLmZvckVhY2goZnVuY3Rpb24odCl7dChufHx7fSl9KX19LHtrZXk6XCJzdG9wQWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5zdG9wQW5pbWF0aW9ucyhPYmplY3Qua2V5cyh0aGlzLl9xdWV1ZSksdCl9fSx7a2V5OlwiZmFkZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToyMDA7cmV0dXJuIHRoaXMuYW5pbWF0ZSh0LHtvcGFjaXR5OjB9LGUpfX1dKSx0fSgpLEZyPXtcIlwiOlwicmlwcGxlLS0qXCIsXCIucmlwcGxlX193YXZlXCI6XCJyaXBwbGUtLSpfX3dhdmVcIixcIi5yaXBwbGVfX2JhY2tncm91bmRcIjpcInJpcHBsZS0tKl9fYmFja2dyb3VuZFwifSxxcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX29uVGFwPXQuX29uVGFwLmJpbmQodCksdC5fb25Ib2xkPXQuX29uSG9sZC5iaW5kKHQpLHQuX29uRHJhZ1N0YXJ0PXQuX29uRHJhZ1N0YXJ0LmJpbmQodCksdC5fb25SZWxlYXNlPXQuX29uUmVsZWFzZS5iaW5kKHQpLG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0Ll9hbmltYXRvcj1uZXcgUnIsW1wiY29sb3JcIixcImNlbnRlclwiLFwic3RhcnQtcmFkaXVzXCIsXCJiYWNrZ3JvdW5kXCIsXCJtb2RpZmllclwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGUsbnVsbCx0LmdldEF0dHJpYnV0ZShlKSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC5hZGQoXCJyaXBwbGVcIiksdGhpcy5fd2F2ZT10aGlzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVfX3dhdmVcIilbMF0sdGhpcy5fYmFja2dyb3VuZD10aGlzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVfX2JhY2tncm91bmRcIilbMF0sdGhpcy5fYmFja2dyb3VuZCYmdGhpcy5fd2F2ZXx8KHRoaXMuX3dhdmU9US5jcmVhdGUoXCIucmlwcGxlX193YXZlXCIpLHRoaXMuX2JhY2tncm91bmQ9US5jcmVhdGUoXCIucmlwcGxlX19iYWNrZ3JvdW5kXCIpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5fd2F2ZSksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl9iYWNrZ3JvdW5kKSksQi5pbml0TW9kaWZpZXIodGhpcyxGcil9fSx7a2V5OlwiX2dldEVmZmVjdFNpemVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGFzQXR0cmlidXRlKFwic2l6ZVwiKSl7dmFyIHQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJzaXplXCIpO2lmKC0xIT09W1wiY292ZXJcIixcImNvbnRhaW5cIl0uaW5kZXhPZih0KSlyZXR1cm4gdH1yZXR1cm5cImNvdmVyXCJ9fSx7a2V5OlwiX2NhbGN1bGF0ZUNvb3Jkc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXZvaWQgMCxuPXZvaWQgMCxpPXZvaWQgMCxvPXZvaWQgMCxyPXZvaWQgMCxhPXRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz10aGlzLl9nZXRFZmZlY3RTaXplKCksbD1mdW5jdGlvbigpe3JldHVybiBRLnRocm93KFwiUmlwcGxlIGludmFsaWQgc3RhdGVcIil9O3JldHVybiB0aGlzLl9jZW50ZXI/KGU9YS53aWR0aC8yLG49YS5oZWlnaHQvMixcImNvdmVyXCI9PT1zP3I9TWF0aC5zcXJ0KGUqZStuKm4pOlwiY29udGFpblwiPT09cz9yPU1hdGgubWluKGUsbik6bCgpKTooZT0oXCJudW1iZXJcIj09dHlwZW9mIHQuY2xpZW50WD90LmNsaWVudFg6dC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYKS1hLmxlZnQsbj0oXCJudW1iZXJcIj09dHlwZW9mIHQuY2xpZW50WT90LmNsaWVudFk6dC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKS1hLnRvcCxpPU1hdGgubWF4KG4sYS5oZWlnaHQtbiksbz1NYXRoLm1heChlLGEud2lkdGgtZSksXCJjb3ZlclwiPT09cz9yPU1hdGguc3FydChpKmkrbypvKTpcImNvbnRhaW5cIj09PXM/cj1NYXRoLm1pbihNYXRoLnJvdW5kKGkvMiksTWF0aC5yb3VuZChvLzIpKTpsKCkpLHt4OmUseTpuLHI6cn19fSx7a2V5OlwiX3JpcHBsZUFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTozMDAsbj10aGlzLl9hbmltYXRvcixpPXRoaXMuX3dhdmUsbz10aGlzLl9iYWNrZ3JvdW5kLHI9dGhpcy5fbWluUixhPXRoaXMuX2NhbGN1bGF0ZUNvb3Jkcyh0KSxzPWEueCxsPWEueSx1PWEucjtyZXR1cm4gbi5zdG9wQWxsKHtzdG9wTmV4dDoxfSksbi5hbmltYXRlKG8se29wYWNpdHk6MX0sZSksUS5leHRlbmQoaS5zdHlsZSx7b3BhY2l0eToxLHRvcDpsLXIrXCJweFwiLGxlZnQ6cy1yK1wicHhcIix3aWR0aDoyKnIrXCJweFwiLGhlaWdodDoyKnIrXCJweFwifSksbi5hbmltYXRlKGkse3RvcDpsLXUsbGVmdDpzLXUsaGVpZ2h0OjIqdSx3aWR0aDoyKnV9LGUpfX0se2tleTpcIl91cGRhdGVQYXJlbnRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9wYXJlbnRVcGRhdGVkJiZ0aGlzLnBhcmVudE5vZGUpe1wic3RhdGljXCI9PT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnBhcmVudE5vZGUpLmdldFByb3BlcnR5VmFsdWUoXCJwb3NpdGlvblwiKSYmKHRoaXMucGFyZW50Tm9kZS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLHRoaXMuX3BhcmVudFVwZGF0ZWQ9ITB9fX0se2tleTpcIl9vblRhcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5kaXNhYmxlZHx8dC5yaXBwbGV8fCh0LnJpcHBsZT0hMCx0aGlzLl91cGRhdGVQYXJlbnQoKSx0aGlzLl9yaXBwbGVBbmltYXRpb24odC5nZXN0dXJlLnNyY0V2ZW50KS50aGVuKGZ1bmN0aW9uKCl7ZS5fYW5pbWF0b3IuZmFkZShlLl93YXZlKSxlLl9hbmltYXRvci5mYWRlKGUuX2JhY2tncm91bmQpfSkpfX0se2tleTpcIl9vbkhvbGRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRpc2FibGVkfHx0LnJpcHBsZXx8KHQucmlwcGxlPSEwLHRoaXMuX3VwZGF0ZVBhcmVudCgpLHRoaXMuX2hvbGRpbmc9dGhpcy5fcmlwcGxlQW5pbWF0aW9uKHQuZ2VzdHVyZS5zcmNFdmVudCwyZTMpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKSl9fSx7a2V5OlwiX29uUmVsZWFzZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faG9sZGluZyYmIXQucmlwcGxlJiYodC5yaXBwbGU9ITAsdGhpcy5faG9sZGluZy5zcGVlZCgzMDApLnRoZW4oZnVuY3Rpb24oKXtlLl9hbmltYXRvci5zdG9wQWxsKHtzdG9wTmV4dDohMH0pLGUuX2FuaW1hdG9yLmZhZGUoZS5fd2F2ZSksZS5fYW5pbWF0b3IuZmFkZShlLl9iYWNrZ3JvdW5kKX0pLHRoaXMuX2hvbGRpbmc9ITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKX19LHtrZXk6XCJfb25EcmFnU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9ob2xkaW5nKXJldHVybiB0aGlzLl9vblJlbGVhc2UodCk7LTEhPVtcImxlZnRcIixcInJpZ2h0XCJdLmluZGV4T2YodC5nZXN0dXJlLmRpcmVjdGlvbikmJnRoaXMuX29uVGFwKHQpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wYXJlbnROb2RlPXRoaXMucGFyZW50Tm9kZSxQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ/dGhpcy5kaXNhYmxlZD0hMDoodGhpcy5fcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwidGFwXCIsdGhpcy5fb25UYXApLHRoaXMuX3BhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImhvbGRcIix0aGlzLl9vbkhvbGQpLHRoaXMuX3BhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3BhcmVudE5vZGV8fHRoaXMucGFyZW50Tm9kZTt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLl9vblRhcCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiaG9sZFwiLHRoaXMuX29uSG9sZCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJyaXBwbGVcIixGcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsaSx0aGlzLEZyKTticmVhaztjYXNlXCJzdGFydC1yYWRpdXNcIjp0aGlzLl9taW5SPU1hdGgubWF4KDAscGFyc2VGbG9hdChpKXx8MCk7YnJlYWs7Y2FzZVwiY29sb3JcIjppJiZuKHRoaXMsZnVuY3Rpb24oKXtvLl93YXZlLnN0eWxlLmJhY2tncm91bmQ9aSxvLmhhc0F0dHJpYnV0ZShcImJhY2tncm91bmRcIil8fChvLl9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmQ9aSl9KTticmVhaztjYXNlXCJiYWNrZ3JvdW5kXCI6KGl8fGUpJiYoXCJub25lXCI9PT1pP24odGhpcyxmdW5jdGlvbigpe28uX2JhY2tncm91bmQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLG8uX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZD1cInRyYW5zcGFyZW50XCJ9KTpuKHRoaXMsZnVuY3Rpb24oKXtvLl9iYWNrZ3JvdW5kLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpJiZvLl9iYWNrZ3JvdW5kLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLG8uX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZD1pfSkpO2JyZWFrO2Nhc2VcImNlbnRlclwiOlwiY2VudGVyXCI9PT10JiYodGhpcy5fY2VudGVyPW51bGwhPWkmJlwiZmFsc2VcIiE9aSl9fX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJzdGFydC1yYWRpdXNcIixcImNvbG9yXCIsXCJiYWNrZ3JvdW5kXCIsXCJjZW50ZXJcIixcImNsYXNzXCIsXCJtb2RpZmllclwiXX19XSksZX0oKTtjLlJpcHBsZT1xcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcmlwcGxlXCIscXIpO3ZhciB6cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxQaSksZX0oKTtjLlJvdz16cixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcm93XCIsenIpO3ZhciBWcj17XCJcIjpcInNlZ21lbnQtLSpcIixcIi5zZWdtZW50X19pdGVtXCI6XCJzZWdtZW50LS0qX19pdGVtXCIsXCIuc2VnbWVudF9faW5wdXRcIjpcInNlZ21lbnQtLSpfX2lucHV0XCIsXCIuc2VnbWVudF9fYnV0dG9uXCI6XCJzZWdtZW50LS0qX19idXR0b25cIn0sV3I9ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVyblwib25zLXNlZ21lbnQtZ2VuLVwiK3QrK319KCksVXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9zZWdtZW50SWQ9V3IoKSx0Ll90YWJiYXI9bnVsbCx0Ll9vbkNoYW5nZT10Ll9vbkNoYW5nZS5iaW5kKHQpLHQuX29uVGFiYmFyUHJlQ2hhbmdlPXQuX29uVGFiYmFyUHJlQ2hhbmdlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9sYXN0QWN0aXZlSW5kZXg9dC5fdGFiYmFyP3QuX3RhYmJhci5nZXRBY3RpdmVUYWJJbmRleCgpOnQuZ2V0QWN0aXZlQnV0dG9uSW5kZXgoKX0pfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcInNlZ21lbnRcIik7Zm9yKHZhciB0PXRoaXMuY2hpbGRyZW4ubGVuZ3RoLTE7dD49MDt0LS0pe3ZhciBlPXRoaXMuY2hpbGRyZW5bdF07ZS5jbGFzc0xpc3QuYWRkKFwic2VnbWVudF9faXRlbVwiKTt2YXIgbj1RLmZpbmRDaGlsZChlLFwiLnNlZ21lbnRfX2lucHV0XCIpfHxRLmNyZWF0ZShcImlucHV0LnNlZ21lbnRfX2lucHV0XCIpO24udHlwZT1cInJhZGlvXCIsbi52YWx1ZT10LG4ubmFtZT1uLm5hbWV8fHRoaXMuX3NlZ21lbnRJZCxuLmNoZWNrZWQ9IXRoaXMuaGFzQXR0cmlidXRlKFwidGFiYmFyLWlkXCIpJiZ0PT09KHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiYWN0aXZlLWluZGV4XCIpKXx8MCk7dmFyIGk9US5maW5kQ2hpbGQoZSxcIi5zZWdtZW50X19idXR0b25cIil8fFEuY3JlYXRlKFwiLnNlZ21lbnRfX2J1dHRvblwiKTtpZihpLnBhcmVudEVsZW1lbnQhPT1lKWZvcig7ZS5maXJzdENoaWxkOylpLmFwcGVuZENoaWxkKGUuZmlyc3RDaGlsZCk7ZS5hcHBlbmRDaGlsZChuKSxlLmFwcGVuZENoaWxkKGkpfUIuaW5pdE1vZGlmaWVyKHRoaXMsVnIpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaGFzQXR0cmlidXRlKFwidGFiYmFyLWlkXCIpJiZuKHRoaXMsZnVuY3Rpb24oKXt2YXIgZT1RLmZpbmRQYXJlbnQodCxcIm9ucy1wYWdlXCIpO3QuX3RhYmJhcj1lJiZlLnF1ZXJ5U2VsZWN0b3IoXCIjXCIrdC5nZXRBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikpLHQuX3RhYmJhciYmXCJPTlMtVEFCQkFSXCI9PT10Ll90YWJiYXIudGFnTmFtZXx8US50aHJvdyhcIk5vIHRhYmJhciB3aXRoIGlkIFwiK3QuZ2V0QXR0cmlidXRlKFwidGFiYmFyLWlkXCIpK1wiIHdhcyBmb3VuZC5cIiksdC5fdGFiYmFyLnNldEF0dHJpYnV0ZShcImhpZGUtdGFic1wiLFwiXCIpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9zZXRDaGVja2VkKHQuX3RhYmJhci5nZXRBY3RpdmVUYWJJbmRleCgpKX0pLHQuX3RhYmJhci5hZGRFdmVudExpc3RlbmVyKFwicHJlY2hhbmdlXCIsdC5fb25UYWJiYXJQcmVDaGFuZ2UpfSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5fb25DaGFuZ2UpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX3RhYmJhciYmKHQuX3RhYmJhci5yZW1vdmVFdmVudExpc3RlbmVyKFwicHJlY2hhbmdlXCIsdC5fb25UYWJiYXJQcmVDaGFuZ2UpLHQuX3RhYmJhcj1udWxsKX0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHRoaXMuX29uQ2hhbmdlKX19LHtrZXk6XCJfc2V0Q2hlY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY2hpbGRyZW5bdF0uZmlyc3RFbGVtZW50Q2hpbGQuY2hlY2tlZD0hMH19LHtrZXk6XCJzZXRBY3RpdmVCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl90YWJiYXI/dGhpcy5fdGFiYmFyLnNldEFjdGl2ZVRhYih0LGUpOih0aGlzLl9zZXRDaGVja2VkKHQpLHRoaXMuX3Bvc3RDaGFuZ2UodCksUHJvbWlzZS5yZXNvbHZlKHQpKX19LHtrZXk6XCJnZXRBY3RpdmVCdXR0b25JbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuY2hpbGRyZW4ubGVuZ3RoLTE7dD49MDt0LS0paWYodGhpcy5jaGlsZHJlblt0XS5maXJzdEVsZW1lbnRDaGlsZC5jaGVja2VkKXJldHVybiB0O3JldHVybi0xfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5fdGFiYmFyP3RoaXMuX3RhYmJhci5zZXRBY3RpdmVUYWIodGhpcy5nZXRBY3RpdmVCdXR0b25JbmRleCgpLHtyZWplY3Q6ITF9KTp0aGlzLl9wb3N0Q2hhbmdlKHRoaXMuZ2V0QWN0aXZlQnV0dG9uSW5kZXgoKSl9fSx7a2V5OlwiX29uVGFiYmFyUHJlQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXt0LmRldGFpbC5jYW5jZWxlZHx8KGUuX3NldENoZWNrZWQodC5pbmRleCksZS5fcG9zdENoYW5nZSh0LmluZGV4KSl9KX19LHtrZXk6XCJfcG9zdENoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe1EudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwicG9zdGNoYW5nZVwiLHtpbmRleDp0LGFjdGl2ZUluZGV4OnQsbGFzdEFjdGl2ZUluZGV4OnRoaXMuX2xhc3RBY3RpdmVJbmRleCxzZWdtZW50SXRlbTp0aGlzLmNoaWxkcmVuW3RdfSksdGhpcy5fbGFzdEFjdGl2ZUluZGV4PXR9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJzZWdtZW50XCIsVnIpO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxWcil9fX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJjbGFzc1wiLFwibW9kaWZpZXJcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicG9zdGNoYW5nZVwiXX19XSksZX0oKTtjLlNlZ21lbnQ9VXIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNlZ21lbnRcIixVcik7dmFyIFhyPXtcIlwiOlwic2VsZWN0LSogc2VsZWN0LS0qXCIsXCIuc2VsZWN0LWlucHV0XCI6XCJzZWxlY3QtaW5wdXQtLSpcIn0sWXI9W1wiYXV0b2ZvY3VzXCIsXCJkaXNhYmxlZFwiLFwiZm9ybVwiLFwibXVsdGlwbGVcIixcIm5hbWVcIixcInJlcXVpcmVkXCIsXCJzaXplXCJdLEdyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX2Rlcml2ZUdldHRlcnMoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJzZWxlY3RcIixYcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsaSx0aGlzLFhyKX1Zci5pbmRleE9mKHQpPj0wJiZuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlQm91bmRBdHRyaWJ1dGVzKCl9KX19LHtrZXk6XCJfdXBkYXRlQm91bmRBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1lyLmZvckVhY2goZnVuY3Rpb24oZSl7dC5oYXNBdHRyaWJ1dGUoZSk/dC5fc2VsZWN0LnNldEF0dHJpYnV0ZShlLHQuZ2V0QXR0cmlidXRlKGUpKTp0Ll9zZWxlY3QucmVtb3ZlQXR0cmlidXRlKGUpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RcIik7dmFyIHQ9dGhpcy5fc2VsZWN0fHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpOyF0LmlkJiZ0aGlzLmhhc0F0dHJpYnV0ZShcInNlbGVjdC1pZFwiKSYmKHQuaWQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJzZWxlY3QtaWRcIikpLHQuY2xhc3NMaXN0LmFkZChcInNlbGVjdC1pbnB1dFwiKSx0aGlzLl9zZWxlY3R8fChRLmFycmF5RnJvbSh0aGlzLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoZSl9KSx0aGlzLmFwcGVuZENoaWxkKHQpKSxCLmluaXRNb2RpZmllcih0aGlzLFhyKX19LHtrZXk6XCJfZGVyaXZlR2V0dGVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztbXCJkaXNhYmxlZFwiLFwibGVuZ3RoXCIsXCJtdWx0aXBsZVwiLFwibmFtZVwiLFwib3B0aW9uc1wiLFwic2VsZWN0ZWRJbmRleFwiLFwic2l6ZVwiLFwidmFsdWVcIixcImZvcm1cIixcInR5cGVcIl0uZm9yRWFjaChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fc2VsZWN0W2VdfSxzZXQ6LTE9PT1bXCJmb3JtXCIsXCJ0eXBlXCJdLmluZGV4T2YoZSk/ZnVuY3Rpb24oaSl7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9zZWxlY3RbZV09aX0pfTp2b2lkIDB9KX0pfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3RoaXMuX3NlbGVjdC5hZGQodCxlKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zZWxlY3QucmVtb3ZlKHQpfX0se2tleTpcIl9zZWxlY3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCJdLmNvbmNhdChZcil9fV0pLGV9KCk7Yy5TZWxlY3Q9R3IsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNlbGVjdFwiLEdyKTt2YXIgJHI9e1wiXCI6XCJmYWItLSogc3BlZWQtZGlhbF9faXRlbS0tKlwifSxLcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2NvbXBpbGUoKSx0Ll9ib3VuZE9uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJmYWIgZmFiLS1taW5pIHNwZWVkLWRpYWxfX2l0ZW1cIiwkcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLCRyKSxRLmFkZE1vZGlmaWVyKHRoaXMsXCJtaW5pXCIpO2JyZWFrO2Nhc2VcInJpcHBsZVwiOnRoaXMuX3VwZGF0ZVJpcHBsZSgpfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7US51cGRhdGVSaXBwbGUodGhpcyl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO04ucHJlcGFyZSh0aGlzKSxcImZhYiBmYWItLW1pbmkgc3BlZWQtZGlhbF9faXRlbVwiLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5jbGFzc0xpc3QuYWRkKGUpfSksUS5hZGRNb2RpZmllcih0aGlzLFwibWluaVwiKSx0aGlzLl91cGRhdGVSaXBwbGUoKSxCLmluaXRNb2RpZmllcih0aGlzLCRyKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuU3BlZWREaWFsSXRlbT1LcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3BlZWQtZGlhbC1pdGVtXCIsS3IpO3ZhciBRcj17XCJcIjpcInNwZWVkLWRpYWwtLSpcIn0sSnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0Ll9pdGVtU2hvd249ITEsdC5fYm91bmRPbkNsaWNrPXQuX29uQ2xpY2suYmluZCh0KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC5hZGQoXCJzcGVlZC1kaWFsXCIpLE4ucHJlcGFyZSh0aGlzKSx0aGlzLl91cGRhdGVSaXBwbGUoKSxCLmluaXRNb2RpZmllcih0aGlzLFFyKSx0aGlzLmhhc0F0dHJpYnV0ZShcImRpcmVjdGlvblwiKT90aGlzLl91cGRhdGVEaXJlY3Rpb24odGhpcy5nZXRBdHRyaWJ1dGUoXCJkaXJlY3Rpb25cIikpOnRoaXMuX3VwZGF0ZURpcmVjdGlvbihcInVwXCIpLHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInNwZWVkLWRpYWxcIixRcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsaSx0aGlzLFFyKTticmVhaztjYXNlXCJyaXBwbGVcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlUmlwcGxlKCl9KTticmVhaztjYXNlXCJkaXJlY3Rpb25cIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlRGlyZWN0aW9uKGkpfSk7YnJlYWs7Y2FzZVwicG9zaXRpb25cIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlUG9zaXRpb24oKX0pfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vbkNsaWNrPyh0aGlzLm9uQ2xpY2suYXBwbHkodGhpcyksUHJvbWlzZS5yZXNvbHZlKCkpOiF0aGlzLmRpc2FibGVkJiZ0aGlzLnZpc2libGU/dGhpcy50b2dnbGVJdGVtcygpOnZvaWQgMH19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5saW5lP1Byb21pc2UucmVzb2x2ZSgpOnRoaXMuc2hvdygpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt0LmlubGluZT9lKCk6c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaGlkZSgpLnRoZW4oZSl9KX0pfX0se2tleTpcIl91cGRhdGVSaXBwbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2ZhYiYmKHRoaXMuaGFzQXR0cmlidXRlKFwicmlwcGxlXCIpP3RoaXMuX2ZhYi5zZXRBdHRyaWJ1dGUoXCJyaXBwbGVcIixcIlwiKTp0aGlzLl9mYWIucmVtb3ZlQXR0cmlidXRlKFwicmlwcGxlXCIpKX19LHtrZXk6XCJfdXBkYXRlRGlyZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaXRlbXMsbj0wO248ZS5sZW5ndGg7bisrKWQoZVtuXSx7dHJhbnNpdGlvbkRlbGF5OjI1Km4rXCJtc1wiLGJvdHRvbTpcImF1dG9cIixyaWdodDpcImF1dG9cIix0b3A6XCJhdXRvXCIsbGVmdDpcImF1dG9cIn0pO3N3aXRjaCh0KXtjYXNlXCJ1cFwiOmZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKWVbaV0uc3R5bGUuYm90dG9tPTcyKzU2KmkrXCJweFwiLGVbaV0uc3R5bGUucmlnaHQ9XCI4cHhcIjticmVhaztjYXNlXCJkb3duXCI6Zm9yKHZhciBvPTA7bzxlLmxlbmd0aDtvKyspZVtvXS5zdHlsZS50b3A9NzIrNTYqbytcInB4XCIsZVtvXS5zdHlsZS5sZWZ0PVwiOHB4XCI7YnJlYWs7Y2FzZVwibGVmdFwiOmZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWVbcl0uc3R5bGUudG9wPVwiOHB4XCIsZVtyXS5zdHlsZS5yaWdodD03Mis1NipyK1wicHhcIjticmVhaztjYXNlXCJyaWdodFwiOmZvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWVbYV0uc3R5bGUudG9wPVwiOHB4XCIsZVthXS5zdHlsZS5sZWZ0PTcyKzU2KmErXCJweFwiO2JyZWFrO2RlZmF1bHQ6US50aHJvdyhcIkFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHVwLCBkb3duLCBsZWZ0IG9yIHJpZ2h0LlwiKX19fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3N3aXRjaCh0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJmYWItLXRvcF9fbGVmdFwiLFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIsXCJmYWItLWJvdHRvbV9fbGVmdFwiLFwiZmFiLS10b3BfX3JpZ2h0XCIsXCJmYWItLXRvcF9fY2VudGVyXCIsXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpLHQpe2Nhc2VcInRvcCByaWdodFwiOmNhc2VcInJpZ2h0IHRvcFwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19yaWdodFwiKTticmVhaztjYXNlXCJ0b3AgbGVmdFwiOmNhc2VcImxlZnQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2xlZnRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIHJpZ2h0XCI6Y2FzZVwicmlnaHQgYm90dG9tXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcImJvdHRvbSBsZWZ0XCI6Y2FzZVwibGVmdCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fbGVmdFwiKTticmVhaztjYXNlXCJjZW50ZXIgdG9wXCI6Y2FzZVwidG9wIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19jZW50ZXJcIik7YnJlYWs7Y2FzZVwiY2VudGVyIGJvdHRvbVwiOmNhc2VcImJvdHRvbSBjZW50ZXJcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpfX19LHtrZXk6XCJfZ2V0VHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKXx8XCJcIikuaW5kZXhPZihcImJvdHRvbVwiKT49MD9cInRyYW5zbGF0ZTNkKDBweCwgLVwiKyhRLmdsb2JhbHMuZmFiT2Zmc2V0fHwwKStcInB4LCAwcHgpIFwiOlwiXCJ9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZhYi5zaG93KCksZCh0aGlzLHt0cmFuc2Zvcm06dGhpcy5fZ2V0VHJhbnNsYXRlfSksUHJvbWlzZS5yZXNvbHZlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5oaWRlSXRlbXMoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2ZhYi5oaWRlKCl9KX19LHtrZXk6XCJzaG93SXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGFzQXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpP3RoaXMuX3VwZGF0ZURpcmVjdGlvbih0aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKSk6dGhpcy5fdXBkYXRlRGlyZWN0aW9uKFwidXBcIik7dmFyIHQ9MDtpZighdGhpcy5faXRlbVNob3duKXtmb3IodmFyIGU9dGhpcy5pdGVtcyxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPTI1Km47dCs9aSxkKGVbbl0se3RyYW5zZm9ybTpcInNjYWxlKDEpXCIsdHJhbnNpdGlvbkRlbGF5OmkrXCJtc1wifSl9dCs9NTAsdGhpcy5faXRlbVNob3duPSEwLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwib3BlblwiKX12YXIgbz1RLmRlZmVyKCk7cmV0dXJuIHNldFRpbWVvdXQoby5yZXNvbHZlLHQpLG8ucHJvbWlzZX19LHtrZXk6XCJoaWRlSXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PTA7aWYodGhpcy5faXRlbVNob3duKXtmb3IodmFyIGU9dGhpcy5pdGVtcyxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPTI1KihlLmxlbmd0aC1uKTt0Kz1pLGQoZVtuXSx7dHJhbnNmb3JtOlwic2NhbGUoMClcIix0cmFuc2l0aW9uRGVsYXk6aStcIm1zXCJ9KX10Kz01MCx0aGlzLl9pdGVtU2hvd249ITEsUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJjbG9zZVwiKX12YXIgbz1RLmRlZmVyKCk7cmV0dXJuIHNldFRpbWVvdXQoby5yZXNvbHZlLHQpLG8ucHJvbWlzZX19LHtrZXk6XCJpc09wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVtU2hvd259fSx7a2V5OlwidG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpYmxlP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfX0se2tleTpcInRvZ2dsZUl0ZW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc09wZW4oKT90aGlzLmhpZGVJdGVtcygpOnRoaXMuc2hvd0l0ZW1zKCl9fSx7a2V5OlwiaXRlbXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5hcnJheUZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwib25zLXNwZWVkLWRpYWwtaXRlbVwiKSl9fSx7a2V5OlwiX2ZhYlwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLWZhYlwiKX19LHtrZXk6XCJkaXNhYmxlZFwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5oaWRlSXRlbXMoKSxRLmFycmF5RnJvbSh0aGlzLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1EubWF0Y2goZSxcIi5mYWJcIikmJlEudG9nZ2xlQXR0cmlidXRlKGUsXCJkaXNhYmxlZFwiLHQpfSksUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfX0se2tleTpcImlubGluZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImlubGluZVwiKX19LHtrZXk6XCJ2aXNpYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZhYi52aXNpYmxlJiZcIm5vbmVcIiE9PXRoaXMuc3R5bGUuZGlzcGxheX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImNsYXNzXCIsXCJtb2RpZmllclwiLFwicmlwcGxlXCIsXCJkaXJlY3Rpb25cIixcInBvc2l0aW9uXCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm9wZW5cIixcImNsb3NlXCJdfX1dKSxlfSgpO2MuU3BlZWREaWFsPUpyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGVlZC1kaWFsXCIsSnIpO3ZhciBacj17cmVhZHk6ZnVuY3Rpb24odCxlKXtzZXRJbW1lZGlhdGUoZSl9fSx0YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3BhZ2U9bnVsbCx0Ll9wYWdlTG9hZGVyPWp0LG4odCxmdW5jdGlvbigpe1pyLnJlYWR5KHQsZnVuY3Rpb24oKXt2YXIgZT10Ll9nZXRQYWdlVGFyZ2V0KCk7ZSYmdC5sb2FkKGUpfSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLm1hdGNoKHRoaXMucGFyZW50Tm9kZSxcIm9ucy1zcGxpdHRlclwiKXx8US50aHJvdygnXCJvbnMtc3BsaXR0ZXItY29udGVudFwiIG11c3QgaGF2ZSBcIm9ucy1zcGxpdHRlclwiIGFzIHBhcmVudCcpfX0se2tleTpcIl9nZXRQYWdlVGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJwYWdlXCIpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0aGlzLl9wYWdlPXQ7dmFyIGk9bi5jYWxsYmFja3x8ZnVuY3Rpb24oKXt9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt2YXIgbz1lLl9jb250ZW50fHxudWxsO2UuX3BhZ2VMb2FkZXIubG9hZCh7cGFnZTp0LHBhcmVudDplfSxmdW5jdGlvbih0KXtvJiYoZS5fcGFnZUxvYWRlci51bmxvYWQobyksbz1udWxsKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5fc2hvdygpfSksaSh0KSxuKHQpfSl9KX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fY29udGVudC5fc2hvdygpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMuX2NvbnRlbnQpLHRoaXMucmVtb3ZlKCl9fSx7a2V5OlwicGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFnZT10fX0se2tleTpcIl9jb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMF19fSx7a2V5OlwicGFnZUxvYWRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdfX0se2tleTpcInJld3JpdGFibGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFpyfX1dKSxlfSgpO2MuU3BsaXR0ZXJDb250ZW50PXRhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlci1jb250ZW50XCIsdGEpO3ZhciBlYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2JvdW5kT25DbGljaz10Ll9vbkNsaWNrLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7dC5wYXJlbnROb2RlLl9zaWRlcy5ldmVyeShmdW5jdGlvbih0KXtyZXR1cm5cInNwbGl0XCI9PT10Lm1vZGV9KSYmdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwiZGlzcGxheTogbm9uZSAhaW1wb3J0YW50XCIpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMub25DbGljayBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMub25DbGljaygpOlEubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXNwbGl0dGVyXCIpJiZ0aGlzLnBhcmVudE5vZGUuX3NpZGVzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvc2UoXCJsZWZ0XCIpLmNhdGNoKGZ1bmN0aW9uKCl7fSl9KSx0LnN0b3BQcm9wYWdhdGlvbigpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrKSxRLmlvc01hc2tTY3JvbGxGaXgodGhpcywhMCl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrKSxRLmlvc01hc2tTY3JvbGxGaXgodGhpcywhMSl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19XSksZX0oKTtjLlNwbGl0dGVyTWFzaz1lYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3BsaXR0ZXItbWFza1wiLGVhKTt2YXIgbmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciguMSwgLjcsIC4xLCAxKVwiOm4sbz10LmR1cmF0aW9uLHI9dm9pZCAwPT09bz8uMzpvLGE9dC5kZWxheSxzPXZvaWQgMD09PWE/MDphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGR1cmF0aW9uOnIsZGVsYXk6c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJ1cGRhdGVPcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307US5leHRlbmQodGhpcyx7dGltaW5nOnRoaXMudGltaW5nLGR1cmF0aW9uOnRoaXMuZHVyYXRpb24sZGVsYXk6dGhpcy5kZWxheX0sdCl9fSx7a2V5OlwiYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9dC5wYXJlbnROb2RlO24oaSxmdW5jdGlvbigpe2UuX3NpZGU9dCxlLl9vcHBvc2l0ZVNpZGU9aS5yaWdodCE9PXQmJmkucmlnaHR8fGkubGVmdCE9PXQmJmkubGVmdCxlLl9jb250ZW50PWkuY29udGVudCxlLl9tYXNrPWkubWFza30pfX0se2tleTpcImRlYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xlYXJUcmFuc2l0aW9uKCksdGhpcy5fbWFzayYmdGhpcy5jbGVhck1hc2soKSx0aGlzLl9jb250ZW50PXRoaXMuX3NpZGU9dGhpcy5fb3Bwb3NpdGVTaWRlPXRoaXMuX21hc2s9bnVsbH19LHtrZXk6XCJjbGVhclRyYW5zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7XCJzaWRlIG1hc2sgY29udGVudFwiLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdFtcIl9cIitlXSYmZC5jbGVhcih0W1wiX1wiK2VdLFwidHJhbnNmb3JtIHRyYW5zaXRpb25cIil9KX19LHtrZXk6XCJjbGVhck1hc2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29wcG9zaXRlU2lkZSYmXCJzcGxpdFwiIT09dGhpcy5fb3Bwb3NpdGVTaWRlLm1vZGUmJnRoaXMuX29wcG9zaXRlU2lkZS5pc09wZW58fCh0aGlzLl9tYXNrLnN0eWxlLm9wYWNpdHk9XCJcIix0aGlzLl9tYXNrLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpfX0se2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe319LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCgpfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCgpfX0se2tleTpcIm1pbnVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyaWdodFwiPT09dGhpcy5fc2lkZS5zaWRlP1wiLVwiOlwiXCJ9fV0pLGV9KCksaWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsbmEpLGcoZSxbe2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsbnQodGhpcy5fc2lkZSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzK3QpK1wicHgsIDAsIDApXCJ9KS5wbGF5KCl9fSx7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKHQpe250LnJ1bkFsbChudCh0aGlzLl9zaWRlKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLm1pbnVzK1wiMTAwJSwgMCwgMClcIn0sdGhpcy5kZWYpLnF1ZXVlKGZ1bmN0aW9uKGUpe2UoKSx0JiZ0KCl9KSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5OlwiYmxvY2tcIn0pLnF1ZXVlKHtvcGFjaXR5OlwiMVwifSx7ZHVyYXRpb246dGhpcy5kdXJhdGlvbix0aW1pbmc6XCJsaW5lYXJcIn0pKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe250LnJ1bkFsbChudCh0aGlzLl9zaWRlKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLmRlZikucXVldWUoZnVuY3Rpb24oZSl7dCYmdCgpLGUoKX0pLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6XCIwXCJ9LHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHRpbWluZzpcImxpbmVhclwifSkucXVldWUoe2Rpc3BsYXk6XCJub25lXCJ9KSl9fV0pLGV9KCksb2E9e2RlZmF1bHQ6aWEsb3ZlcmxheTppYSxwdXNoOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLG5hKSxnKGUsW3trZXk6XCJfZ2V0U2xpZGluZ0VsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1bdGhpcy5fc2lkZSx0aGlzLl9jb250ZW50XTtyZXR1cm4gdGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCI9PT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZSYmdC5wdXNoKHRoaXMuX29wcG9zaXRlU2lkZSksdH19LHtrZXk6XCJ0cmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zbGlkaW5nRWxlbWVudHN8fCh0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCkpLHRoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsbnQodGhpcy5fc2xpZGluZ0VsZW1lbnRzKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXMrdCkrXCJweCwgMCwgMClcIn0pLnBsYXkoKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuX3NpZGUub2Zmc2V0V2lkdGg7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzK24pK1wicHgsIDAsIDApXCJ9LHRoaXMuZGVmKS5xdWV1ZShmdW5jdGlvbihuKXtlLl9zbGlkaW5nRWxlbWVudHM9bnVsbCxuKCksdCYmdCgpfSksbnQodGhpcy5fbWFzaykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7ZGlzcGxheTpcImJsb2NrXCJ9KSl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3RoaXMuX3NsaWRpbmdFbGVtZW50cz10aGlzLl9nZXRTbGlkaW5nRWxlbWVudHMoKSxudC5ydW5BbGwobnQodGhpcy5fc2xpZGluZ0VsZW1lbnRzKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLmRlZikucXVldWUoZnVuY3Rpb24oaSl7bi5fc2xpZGluZ0VsZW1lbnRzPW51bGwsdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJjbGVhclRyYW5zaXRpb25cIixuKS5jYWxsKG4pLHQmJnQoKSxpKCl9KSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5Olwibm9uZVwifSkpfX1dKSxlfSgpLHJldmVhbDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxuYSksZyhlLFt7a2V5OlwiX2dldFNsaWRpbmdFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9W3RoaXMuX2NvbnRlbnQsdGhpcy5fbWFza107cmV0dXJuIHRoaXMuX29wcG9zaXRlU2lkZSYmXCJzcGxpdFwiPT09dGhpcy5fb3Bwb3NpdGVTaWRlLm1vZGUmJnQucHVzaCh0aGlzLl9vcHBvc2l0ZVNpZGUpLHR9fSx7a2V5OlwiYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImFjdGl2YXRlXCIsdGhpcykuY2FsbCh0aGlzLHQpLFwiY29sbGFwc2VcIj09PXQubW9kZSYmdGhpcy5fc2V0U3R5bGVzKHQpfX0se2tleTpcImRlYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NpZGUmJnRoaXMuX3Vuc2V0U3R5bGVzKHRoaXMuX3NpZGUpLHYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGVhY3RpdmF0ZVwiLHRoaXMpLmNhbGwodGhpcyl9fSx7a2V5OlwiX3NldFN0eWxlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2QodCx7bGVmdDpcInJpZ2h0XCI9PT10LnNpZGU/XCJhdXRvXCI6MCxyaWdodDpcInJpZ2h0XCI9PT10LnNpZGU/MDpcImF1dG9cIix6SW5kZXg6MCxiYWNrZ3JvdW5kQ29sb3I6XCJibGFja1wiLHRyYW5zZm9ybTp0aGlzLl9nZW5lcmF0ZUJlaGluZFBhZ2VTdHlsZSgwKS5jb250YWluZXIudHJhbnNmb3JtLGRpc3BsYXk6XCJub25lXCJ9KTt2YXIgZT10LnBhcmVudEVsZW1lbnQ7bihlLGZ1bmN0aW9uKCl7cmV0dXJuIGUuY29udGVudCYmZChlLmNvbnRlbnQse2JveFNoYWRvdzpcIjAgMCAxMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpXCJ9KX0pfX0se2tleTpcIl91bnNldFN0eWxlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2QuY2xlYXIodCxcImxlZnQgcmlnaHQgekluZGV4IGJhY2tncm91bmRDb2xvciBkaXNwbGF5XCIpLHQuX2NvbnRlbnQmJih0Ll9jb250ZW50LnN0eWxlLm9wYWNpdHk9XCJcIiksdGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCIhPT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZXx8dC5wYXJlbnRFbGVtZW50LmNvbnRlbnQmJmQuY2xlYXIodC5wYXJlbnRFbGVtZW50LmNvbnRlbnQsXCJib3hTaGFkb3dcIil9fSx7a2V5OlwiX2dlbmVyYXRlQmVoaW5kUGFnZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tYXhXaWR0aCxuPSh0LWUpL2UqMTA7cmV0dXJue2NvbnRlbnQ6e29wYWNpdHk6MSsobj1pc05hTihuKT8wOk1hdGgubWF4KE1hdGgubWluKG4sMCksLTEwKSkvMTAwfSxjb250YWluZXI6e3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzPy0xOjEpKm4rXCIlLCAwLCAwKVwifX19fSx7a2V5OlwidHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fc2lkZS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fc2lkZS5zdHlsZS56SW5kZXg9MSx0aGlzLm1heFdpZHRoPXRoaXMubWF4V2lkdGh8fHRoaXMuX2dldE1heFdpZHRoKCk7dmFyIGU9dGhpcy5fZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGUoTWF0aC5taW4odCx0aGlzLm1heFdpZHRoKSk7dGhpcy5fc2xpZGluZ0VsZW1lbnRzfHwodGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpKSx0aGlzLl9tYXNrLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisodGhpcy5taW51cyt0KStcInB4LCAwLCAwKVwifSksbnQodGhpcy5fc2lkZS5fY29udGVudCkucXVldWUoZS5jb250ZW50KSxudCh0aGlzLl9zaWRlKS5xdWV1ZShlLmNvbnRhaW5lcikpfX0se2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3NpZGUuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuX3NpZGUuc3R5bGUuekluZGV4PTEsdGhpcy5tYXhXaWR0aD10aGlzLm1heFdpZHRofHx0aGlzLl9nZXRNYXhXaWR0aCgpO3ZhciBuPXRoaXMuX2dlbmVyYXRlQmVoaW5kUGFnZVN0eWxlKHRoaXMubWF4V2lkdGgpO3RoaXMuX3NsaWRpbmdFbGVtZW50cz10aGlzLl9nZXRTbGlkaW5nRWxlbWVudHMoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bnQucnVuQWxsKG50KGUuX3NsaWRpbmdFbGVtZW50cykud2FpdChlLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKGUubWludXMrZS5tYXhXaWR0aCkrXCJweCwgMCwgMClcIn0sZS5kZWYpLG50KGUuX21hc2spLndhaXQoZS5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJibG9ja1wifSksbnQoZS5fc2lkZS5fY29udGVudCkud2FpdChlLmRlbGF5KS5xdWV1ZShuLmNvbnRlbnQsZS5kZWYpLG50KGUuX3NpZGUpLndhaXQoZS5kZWxheSkucXVldWUobi5jb250YWluZXIsZS5kZWYpLnF1ZXVlKGZ1bmN0aW9uKG4pe2UuX3NsaWRpbmdFbGVtZW50cz1udWxsLG4oKSx0JiZ0KCl9KSl9LDFlMy82MCl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5fZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGUoMCk7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMuZGVmKSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5Olwibm9uZVwifSksbnQodGhpcy5fc2lkZS5fY29udGVudCkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZShuLmNvbnRlbnQsdGhpcy5kZWYpLG50KHRoaXMuX3NpZGUpLndhaXQodGhpcy5kZWxheSkucXVldWUobi5jb250YWluZXIsdGhpcy5kZWYpLnF1ZXVlKGZ1bmN0aW9uKG4pe2UuX3NsaWRpbmdFbGVtZW50cz1udWxsLGUuX3NpZGUuc3R5bGUuekluZGV4PTAsZS5fc2lkZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGUuX3NpZGUuX2NvbnRlbnQuc3R5bGUub3BhY2l0eT1cIlwiLHQmJnQoKSxuKCl9KSl9fSx7a2V5OlwiX2dldE1heFdpZHRoXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lkZS5vZmZzZXRXaWR0aH19XSksZX0oKX0scmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9vbk1vZGVDaGFuZ2U9dC5fb25Nb2RlQ2hhbmdlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7IXQubWFzayYmdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib25zLXNwbGl0dGVyLW1hc2tcIikpLHQuX2xheW91dCgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfZ2V0U2lkZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiBRLm1hdGNoKGUsXCJvbnMtc3BsaXR0ZXItc2lkZVwiKSYmZS5nZXRBdHRyaWJ1dGUoXCJzaWRlXCIpPT09dH0pfX0se2tleTpcIl9vbkRldmljZUJhY2tCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zaWRlcy5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiEhdC5pc09wZW4mJnQuY2xvc2UoKX0pfHx0LmNhbGxQYXJlbnRIYW5kbGVyKCl9fSx7a2V5OlwiX29uTW9kZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dC50YXJnZXQucGFyZW50Tm9kZSYmbih0aGlzLGZ1bmN0aW9uKCl7ZS5fbGF5b3V0KCl9KX19LHtrZXk6XCJfbGF5b3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3NpZGVzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5jb250ZW50JiYodC5jb250ZW50LnN0eWxlW2Uuc2lkZV09XCJzcGxpdFwiPT09ZS5tb2RlP2Uuc3R5bGUud2lkdGg6MCl9KX19LHtrZXk6XCJsZWZ0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNpZGUoXCJsZWZ0XCIpfX0se2tleTpcInJpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNpZGUoXCJyaWdodFwiKX19LHtrZXk6XCJzaWRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJvbnMtc3BsaXR0ZXItc2lkZVwiKX19LHtrZXk6XCJfc2lkZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMucmlnaHRdLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdH0pfX0se2tleTpcImNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1zcGxpdHRlci1jb250ZW50XCIpfX0se2tleTpcInRvcFBhZ2VcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Ll9jb250ZW50fX0se2tleTpcIm1hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1zcGxpdHRlci1tYXNrXCIpfX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fV0pLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9uRGV2aWNlQmFja0J1dHRvbj10aGlzLl9vbkRldmljZUJhY2tCdXR0b24uYmluZCh0aGlzKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb2RlY2hhbmdlXCIsdGhpcy5fb25Nb2RlQ2hhbmdlLCExKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPW51bGwsdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW9kZWNoYW5nZVwiLHRoaXMuX29uTW9kZUNoYW5nZSwhMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7US5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9zaG93XCIpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnByb3BhZ2F0ZUFjdGlvbih0aGlzLFwiX2hpZGVcIil9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe1EucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfZGVzdHJveVwiKSx0aGlzLnJlbW92ZSgpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSBpbnN0YW5jZW9mIFNwbGl0dGVyQW5pbWF0b3J8fFEudGhyb3dBbmltYXRvcihcIlNwbGl0dGVyXCIpLG9hW3RdPWV9fSx7a2V5OlwiU3BsaXR0ZXJBbmltYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiBTcGxpdHRlckFuaW1hdG9yfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBvYX19XSksZX0oKTtjLlNwbGl0dGVyPXJhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlclwiLHJhKTt2YXIgYWE9XCJjbG9zZWRcIixzYT17cmVhZHk6ZnVuY3Rpb24odCxlKXtzZXRJbW1lZGlhdGUoZSl9fSxsYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksdGhpcy5fZWxlbWVudD1lLHRoaXMuX29uQ2hhbmdlPXRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcyksbiYmdGhpcy5jaGFuZ2VUYXJnZXQobil9cmV0dXJuIGcodCxbe2tleTpcImNoYW5nZVRhcmdldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzYWJsZSgpLHRoaXMuX3RhcmdldD10LHQmJih0aGlzLl9vcmllbnRhdGlvbj0tMSE9PVtcInBvcnRyYWl0XCIsXCJsYW5kc2NhcGVcIl0uaW5kZXhPZih0KSx0aGlzLmFjdGl2YXRlKCkpfX0se2tleTpcIl9tYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbj90aGlzLl90YXJnZXQ9PT0odC5pc1BvcnRyYWl0P1wicG9ydHJhaXRcIjpcImxhbmRzY2FwZVwiKTp0Lm1hdGNoZXN9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fZWxlbWVudC5fdXBkYXRlTW9kZSh0aGlzLl9tYXRjaCh0KT9cImNvbGxhcHNlXCI6XCJzcGxpdFwiKX19LHtrZXk6XCJhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb3JpZW50YXRpb24/KE90Lm9uKFwiY2hhbmdlXCIsdGhpcy5fb25DaGFuZ2UpLHRoaXMuX29uQ2hhbmdlKHtpc1BvcnRyYWl0Ok90LmlzUG9ydHJhaXQoKX0pKToodGhpcy5fcXVlcnlSZXN1bHQ9d2luZG93Lm1hdGNoTWVkaWEodGhpcy5fdGFyZ2V0KSx0aGlzLl9xdWVyeVJlc3VsdC5hZGRMaXN0ZW5lcih0aGlzLl9vbkNoYW5nZSksdGhpcy5fb25DaGFuZ2UodGhpcy5fcXVlcnlSZXN1bHQpKX19LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vcmllbnRhdGlvbj9PdC5vZmYoXCJjaGFuZ2VcIix0aGlzLl9vbkNoYW5nZSk6dGhpcy5fcXVlcnlSZXN1bHQmJih0aGlzLl9xdWVyeVJlc3VsdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vbkNoYW5nZSksdGhpcy5fcXVlcnlSZXN1bHQ9bnVsbCl9fV0pLHR9KCksdWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9wYWdlPW51bGwsdC5fc3RhdGU9YWEsdC5fbG9jaz1uZXcgTnQsdC5fcGFnZUxvYWRlcj1qdCx0Ll9jb2xsYXBzZURldGVjdGlvbj1uZXcgbGEodCksdC5fYW5pbWF0b3JGYWN0b3J5PW5ldyBPKHthbmltYXRvcnM6cmEuYW5pbWF0b3JzLGJhc2VDbGFzczpuYSxiYXNlQ2xhc3NOYW1lOlwiU3BsaXR0ZXJBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dC5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KSxuKHQsZnVuY3Rpb24oKXt0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcIndpZHRoXCIpLHQuaGFzQXR0cmlidXRlKFwic2lkZVwiKXx8dC5zZXRBdHRyaWJ1dGUoXCJzaWRlXCIsXCJsZWZ0XCIpLHNhLnJlYWR5KHQsZnVuY3Rpb24oKXt2YXIgZT10Ll9wYWdlfHx0LmdldEF0dHJpYnV0ZShcInBhZ2VcIik7ZSYmdC5sb2FkKGUpfSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1EubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXNwbGl0dGVyXCIpfHxRLnRocm93KFwiUGFyZW50IG11c3QgYmUgYW4gb25zLXNwbGl0dGVyIGVsZW1lbnRcIiksdGhpcy5fc3dpcGU9bmV3IFFvKHtlbGVtZW50OnRoaXMsZWxlbWVudEhhbmRsZXI6dGhpcy5wYXJlbnRFbGVtZW50LHN3aXBlTWF4OmZ1bmN0aW9uKCl7dC5fb25Td2lwZSYmdC5fb25Td2lwZSgxLHQuX2FuaW1hdGlvbk9wdCksdC5vcGVuKCl9LHN3aXBlTWlkOmZ1bmN0aW9uKGUsbil7dC5fb25Td2lwZSYmdC5fb25Td2lwZShlL24pLHQuX2FuaW1hdG9yLnRyYW5zbGF0ZShlKX0sc3dpcGVNaW46ZnVuY3Rpb24oKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKDAsdC5fYW5pbWF0aW9uT3B0KSx0LmNsb3NlKCl9LGdldFRocmVzaG9sZDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKDEscGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZShcIm9wZW4tdGhyZXNob2xkXCIpKXx8LjMpKX0sZ2V0U2lkZTpmdW5jdGlvbigpe3JldHVybiB0LnNpZGV9LGlzSW5pdGlhbFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGU9dC5fc3RhdGU9PT1hYTtyZXR1cm4gdC5fc3RhdGU9XCJjaGFuZ2luZ1wiLGV9LGlnbm9yZVN3aXBlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dC5pc09wZW4sbz1NYXRoLm1heCgwLHBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwic3dpcGUtdGFyZ2V0LXdpZHRoXCIpLDEwKXx8MCk7cmV0dXJuXCJzcGxpdFwiPT09dC5fbW9kZXx8dC5fbG9jay5pc0xvY2tlZCgpfHx0Ll9pc090aGVyU2lkZU9wZW4oKXx8IWZ1bmN0aW9uKGUpe3JldHVyblwibGVmdFwiPT09dC5zaWRlP1wibGVmdFwiPT09ZSYmaXx8XCJyaWdodFwiPT09ZSYmIWk6XCJsZWZ0XCI9PT1lJiYhaXx8XCJyaWdodFwiPT09ZSYmaX0oZS5nZXN0dXJlLmRpcmVjdGlvbil8fCFpJiYwIT09byYmbj5vfX0pLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwic3dpcGVhYmxlXCIpLG4odGhpcyxmdW5jdGlvbigpe3QuY29uc3RydWN0b3Iub2JzZXJ2ZWRBdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGUsbnVsbCx0LmdldEF0dHJpYnV0ZShlKSl9KX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZSYmdGhpcy5fc3dpcGUuZGlzcG9zZSgpLHRoaXMuX2FuaW1hdG9yPXRoaXMuX2FuaW1hdGlvbk9wdD10aGlzLl9zd2lwZT1udWxsfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwic3dpcGVhYmxlXCI6dGhpcy5fc3dpcGUmJnRoaXMuX3N3aXBlLnVwZGF0ZSgpO2JyZWFrO2Nhc2VcIndpZHRoXCI6bj10aGlzLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpLHRoaXMuc3R5bGUud2lkdGg9L15cXGQrKHB4fCUpJC8udGVzdChuKT9uOlwiODAlXCI7YnJlYWs7ZGVmYXVsdDp0aGlzW1EuY2FtZWxpemUoXCJfdXBkYXRlLVwiK3QpXShuKX19fSx7a2V5OlwiX2VtaXRFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKFwicHJlXCIhPT10LnNsaWNlKDAsMykpcmV0dXJuIFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLHQse3NpZGU6dGhpc30pO3ZhciBlPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyx0LHtzaWRlOnRoaXMsY2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuIGU9ITB9fSksZX19LHtrZXk6XCJfaXNPdGhlclNpZGVPcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiEhUS5maW5kQ2hpbGQodGhpcy5wYXJlbnRFbGVtZW50LGZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5jb25zdHJ1Y3RvciYmZSE9PXQmJlwiY29sbGFwc2VcIj09PWUuX21vZGUmJmUuaXNPcGVufSl9fSx7a2V5OlwiX3VwZGF0ZUNvbGxhcHNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5nZXRBdHRyaWJ1dGUoXCJjb2xsYXBzZVwiKTtyZXR1cm4gbnVsbD09PXR8fFwic3BsaXRcIj09PXQ/KHRoaXMuX2NvbGxhcHNlRGV0ZWN0aW9uLmRpc2FibGUoKSx0aGlzLl91cGRhdGVNb2RlKFwic3BsaXRcIikpOlwiXCI9PT10fHxcImNvbGxhcHNlXCI9PT10Pyh0aGlzLl9jb2xsYXBzZURldGVjdGlvbi5kaXNhYmxlKCksdGhpcy5fdXBkYXRlTW9kZShcImNvbGxhcHNlXCIpKTp2b2lkIHRoaXMuX2NvbGxhcHNlRGV0ZWN0aW9uLmNoYW5nZVRhcmdldCh0KX19LHtrZXk6XCJfdXBkYXRlTW9kZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QhPT10aGlzLl9tb2RlJiYodGhpcy5fbW9kZT10LHRoaXMuc2V0QXR0cmlidXRlKFwibW9kZVwiLHQpLFwic3BsaXRcIj09PXQ/KHRoaXMuX2FuaW1hdG9yJiZ0aGlzLl9hbmltYXRvci5kZWFjdGl2YXRlKCksdGhpcy5fc3RhdGU9YWEpOih0aGlzLl9hbmltYXRvciYmdGhpcy5fYW5pbWF0b3IuYWN0aXZhdGUodGhpcyksXCJvcGVuXCI9PT10aGlzLl9zdGF0ZSYmdGhpcy5fYW5pbWF0b3Iub3BlbigpKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcIm1vZGVjaGFuZ2VcIix7c2lkZTp0aGlzLG1vZGU6dH0pKX19LHtrZXk6XCJfdXBkYXRlQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIik7dGhpcy5wYXJlbnROb2RlJiYodGhpcy5fYW5pbWF0b3ImJnRoaXMuX2FuaW1hdG9yLmRlYWN0aXZhdGUoKSx0aGlzLl9hbmltYXRvcj10aGlzLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3Ioe2FuaW1hdGlvbjp0fSksdGhpcy5fYW5pbWF0b3IuYWN0aXZhdGUodGhpcyksdGhpcy5fYW5pbWF0aW9uT3B0PXt0aW1pbmc6dGhpcy5fYW5pbWF0b3IuZHVyYXRpb24sZHVyYXRpb246dGhpcy5fYW5pbWF0b3IuZHVyYXRpb259KX19LHtrZXk6XCJfdXBkYXRlQW5pbWF0aW9uT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIik7dGhpcy5fYW5pbWF0b3IudXBkYXRlT3B0aW9ucyhPLnBhcnNlQW5pbWF0aW9uT3B0aW9uc1N0cmluZyh0KSl9fSx7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRvZ2dsZSh0LCEwKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRvZ2dsZSh0LCExKX19LHtrZXk6XCJ0b2dnbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1hcmd1bWVudHNbMV0saT1cImJvb2xlYW5cIj09dHlwZW9mIG4/bjohdGhpcy5pc09wZW4sbz1pP1wib3BlblwiOlwiY2xvc2VcIixyPWk/XCJvcGVuXCI6YWE7aWYoXCJzcGxpdFwiPT09dGhpcy5fbW9kZSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCExKTtpZih0aGlzLl9zdGF0ZT09PXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzKTtpZih0aGlzLl9sb2NrLmlzTG9ja2VkKCkpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQW5vdGhlciBzcGxpdHRlci1zaWRlIGFjdGlvbiBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO2lmKGkmJnRoaXMuX2lzT3RoZXJTaWRlT3BlbigpKXJldHVybiBQcm9taXNlLnJlamVjdChcIkFub3RoZXIgbWVudSBpcyBhbHJlYWR5IG9wZW4uXCIpO2lmKHRoaXMuX2VtaXRFdmVudChcInByZVwiK28pKXJldHVybiBQcm9taXNlLnJlamVjdChcIkNhbmNlbGVkIGluIHByZVwiK28rXCIgZXZlbnQuXCIpO3ZhciBhPXRoaXMuX2xvY2subG9jaygpO3JldHVybiB0aGlzLl9zdGF0ZT1cImNoYW5naW5nXCIsbmV3IFByb21pc2UoZnVuY3Rpb24obil7dC5fYW5pbWF0b3Jbb10oZnVuY3Rpb24oKXtRLmlvc1BhZ2VTY3JvbGxGaXgoaSksdC5fc3RhdGU9cixhKCksdC5fZW1pdEV2ZW50KFwicG9zdFwiK28pLGUuY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5jYWxsYmFjayh0KSxuKHQpfSl9KX19LHtrZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0aGlzLl9wYWdlPXQ7dmFyIGk9bi5jYWxsYmFja3x8ZnVuY3Rpb24oKXt9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt2YXIgbz1lLl9jb250ZW50fHxudWxsO2UuX3BhZ2VMb2FkZXIubG9hZCh7cGFnZTp0LHBhcmVudDplfSxmdW5jdGlvbih0KXtvJiYoZS5fcGFnZUxvYWRlci51bmxvYWQobyksbz1udWxsKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5fc2hvdygpfSksaSh0KSxuKHQpfSl9KX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fY29udGVudC5fc2hvdygpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMuX2NvbnRlbnQpLHRoaXMucmVtb3ZlKCl9fSx7a2V5Olwic2lkZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmlnaHRcIj09PXRoaXMuZ2V0QXR0cmlidXRlKFwic2lkZVwiKT9cInJpZ2h0XCI6XCJsZWZ0XCJ9fSx7a2V5OlwicGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFnZT10fX0se2tleTpcIl9jb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMF19fSx7a2V5OlwicGFnZUxvYWRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH19LHtrZXk6XCJtb2RlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGV9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX0se2tleTpcImlzT3BlblwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY29sbGFwc2VcIj09PXRoaXMuX21vZGUmJnRoaXMuX3N0YXRlIT09YWF9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJhbmltYXRpb25cIixcIndpZHRoXCIsXCJjb2xsYXBzZVwiLFwic3dpcGVhYmxlXCIsXCJhbmltYXRpb24tb3B0aW9uc1wiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVvcGVuXCIsXCJwb3N0b3BlblwiLFwicHJlY2xvc2VcIixcInBvc3RjbG9zZVwiLFwibW9kZWNoYW5nZVwiXX19LHtrZXk6XCJyZXdyaXRhYmxlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBzYX19XSksZX0oKTtjLlNwbGl0dGVyU2lkZT11YSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3BsaXR0ZXItc2lkZVwiLHVhKTt2YXIgY2E9e1wiXCI6XCJzd2l0Y2gtLSpcIixcIi5zd2l0Y2hfX2lucHV0XCI6XCJzd2l0Y2gtLSpfX2lucHV0XCIsXCIuc3dpdGNoX19oYW5kbGVcIjpcInN3aXRjaC0tKl9faGFuZGxlXCIsXCIuc3dpdGNoX190b2dnbGVcIjpcInN3aXRjaC0tKl9fdG9nZ2xlXCJ9LGhhPXtpb3M6WzEsMjFdLG1hdGVyaWFsOlswLDE2XX0sZGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXt0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcIm1vZGlmaWVyXCIsbnVsbCx0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKX0pLHQuX29uQ2hhbmdlPXQuX29uQ2hhbmdlLmJpbmQodCksdC5fb25SZWxlYXNlPXQuX29uUmVsZWFzZS5iaW5kKHQpLHQuX2xhc3RUaW1lU3RhbXA9MCx0fXJldHVybiBiKGUsSG8pLGcoZSxbe2tleTpcIl9nZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2xvY2F0aW9ucztyZXR1cm4gTWF0aC5taW4oZVsxXSxNYXRoLm1heChlWzBdLHRoaXMuX3N0YXJ0WCt0Lmdlc3R1cmUuZGVsdGFYKSl9fSx7a2V5OlwiX2VtaXRDaGFuZ2VFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy5jaGVja2VkLHN3aXRjaDp0aGlzLGlzSW50ZXJhY3RpdmU6ITB9KX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0JiZ0LnN0b3BQcm9wYWdhdGlvbiYmdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9lbWl0Q2hhbmdlRXZlbnQoKX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpeyh0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5kZWZhdWx0RWxlbWVudENsYXNzK1wiX190b3VjaFwiKXx8dC50aW1lU3RhbXAtdGhpcy5fbGFzdFRpbWVTdGFtcDw1MCkmJnQucHJldmVudERlZmF1bHQoKSx0aGlzLl9sYXN0VGltZVN0YW1wPXQudGltZVN0YW1wfX0se2tleTpcIl9vbkhvbGRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRpc2FibGVkfHwoQi5hZGRNb2RpZmllcih0aGlzLFwiYWN0aXZlXCIpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKSl9fSx7a2V5OlwiX29uRHJhZ1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5kaXNhYmxlZHx8LTE9PT1bXCJsZWZ0XCIsXCJyaWdodFwiXS5pbmRleE9mKHQuZ2VzdHVyZS5kaXJlY3Rpb24pP0IucmVtb3ZlTW9kaWZpZXIodGhpcyxcImFjdGl2ZVwiKToodC5jb25zdW1lZD0hMCxCLmFkZE1vZGlmaWVyKHRoaXMsXCJhY3RpdmVcIiksdGhpcy5fc3RhcnRYPXRoaXMuX2xvY2F0aW9uc1t0aGlzLmNoZWNrZWQ/MTowXSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsdGhpcy5fb25EcmFnKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVsZWFzZVwiLHRoaXMuX29uUmVsZWFzZSkpfX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuX2hhbmRsZS5zdHlsZS5sZWZ0PXRoaXMuX2dldFBvc2l0aW9uKHQpK1wicHhcIn19LHtrZXk6XCJfb25SZWxlYXNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbG9jYXRpb25zLG49dGhpcy5fZ2V0UG9zaXRpb24odCksaT10aGlzLmNoZWNrZWQ7dGhpcy5jaGVja2VkPW4+PShlWzBdK2VbMV0pLzIsdGhpcy5jaGVja2VkIT09aSYmdGhpcy5fZW1pdENoYW5nZUV2ZW50KCksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ1wiLHRoaXMuX29uRHJhZyksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpLHRoaXMuX2hhbmRsZS5zdHlsZS5sZWZ0PVwiXCIsQi5yZW1vdmVNb2RpZmllcih0aGlzLFwiYWN0aXZlXCIpfX0se2tleTpcImNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5kaXNhYmxlZHx8KHRoaXMuY2hlY2tlZD0hdGhpcy5jaGVja2VkLHRoaXMuX2VtaXRDaGFuZ2VFdmVudCgpLHRoaXMuX2xhc3RUaW1lU3RhbXA9dC50aW1lU3RhbXB8fDApfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0Ll9vbkNoYW5nZSl9KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdTdGFydCksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiaG9sZFwiLHRoaXMuX29uSG9sZCksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidGFwXCIsdGhpcy5jbGljayksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMse2RyYWdNaW5EaXN0YW5jZToxLGhvbGRUaW1lb3V0OjI1MSxwYXNzaXZlOiEwfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHQuX29uQ2hhbmdlKX0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJob2xkXCIsdGhpcy5fb25Ib2xkKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLmNsaWNrKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2spLHRoaXMuX2dlc3R1cmVEZXRlY3RvciYmdGhpcy5fZ2VzdHVyZURldGVjdG9yLmRpc3Bvc2UoKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7aWYoXCJtb2RpZmllclwiPT09dCl7dmFyIG89LTEhPT0oaXx8XCJcIikuaW5kZXhPZihcIm1hdGVyaWFsXCIpO3RoaXMuX2xvY2F0aW9ucz1oYVtvP1wibWF0ZXJpYWxcIjpcImlvc1wiXX12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyx0LG4saSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBjYX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwic3dpdGNoXCJ9fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX2lucHV0XCI+XFxuICAgICAgPGRpdiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX190b2dnbGVcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faGFuZGxlXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19fdG91Y2hcIj48L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICAnfX0se2tleTpcInR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCJ9fSx7a2V5OlwiX2hhbmRsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5fZGVmYXVsdENsYXNzTmFtZStcIl9faGFuZGxlXCIpfX0se2tleTpcImNoZWNrYm94XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcIm1vZGlmaWVyXCJdKX19XSksZX0oKTtjLlN3aXRjaD1kYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3dpdGNoXCIsZGEpO3ZhciBmYT17XCIudGFiYmFyX19jb250ZW50XCI6XCJ0YWJiYXItLSpfX2NvbnRlbnRcIixcIi50YWJiYXJfX2JvcmRlclwiOlwidGFiYmFyLS0qX19ib3JkZXJcIixcIi50YWJiYXJcIjpcInRhYmJhci0tKlwifSxwYT17cmVhZHk6ZnVuY3Rpb24odCxlKXtlKCl9fSxnYT1mdW5jdGlvbih0LGUsbil7cmV0dXJuKDEtbikqdCtuKmV9LG1hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fbG9hZEluYWN0aXZlPVEuZGVmZXIoKSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9zd2lwZXJ8fCh0aGlzLl9zd2lwZXI9bmV3IHJvKHtnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbnRlbnRFbGVtZW50fSxnZXRJbml0aWFsSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJhY3RpdmVJbmRleFwiKXx8dC5nZXRBdHRyaWJ1dGUoXCJhY3RpdmUtaW5kZXhcIil9LGdldEF1dG9TY3JvbGxSYXRpbzp0aGlzLl9nZXRBdXRvU2Nyb2xsUmF0aW8uYmluZCh0aGlzKSxnZXRCdWJibGVXaWR0aDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0LmdldEF0dHJpYnV0ZShcImlnbm9yZS1lZGdlLXdpZHRoXCIpfHwyNSwxMCl9LGlzQXV0b1Njcm9sbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0scHJlQ2hhbmdlSG9vazp0aGlzLl9vblByZUNoYW5nZS5iaW5kKHRoaXMpLHBvc3RDaGFuZ2VIb29rOnRoaXMuX29uUG9zdENoYW5nZS5iaW5kKHRoaXMpLHJlZnJlc2hIb29rOnRoaXMuX29uUmVmcmVzaC5iaW5kKHRoaXMpLHNjcm9sbEhvb2s6dGhpcy5fb25TY3JvbGwuYmluZCh0aGlzKX0pLG4odGhpcyxmdW5jdGlvbigpe3QuX3RhYmJhckJvcmRlcj1RLmZpbmRDaGlsZCh0Ll90YWJiYXJFbGVtZW50LFwiLnRhYmJhcl9fYm9yZGVyXCIpLHQuX3N3aXBlci5pbml0KHtzd2lwZWFibGU6dC5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIil9KX0pKSxuKHRoaXMsZnVuY3Rpb24oKXt0Ll91cGRhdGVQb3NpdGlvbigpLFEuZmluZFBhcmVudCh0LFwib25zLXBhZ2VcIixmdW5jdGlvbih0KXtyZXR1cm4gdD09PWRvY3VtZW50LmJvZHl9KXx8dC5fc2hvdygpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlciYmdGhpcy5fc3dpcGVyLmluaXRpYWxpemVkJiYodGhpcy5fc3dpcGVyLmRpc3Bvc2UoKSx0aGlzLl9zd2lwZXI9bnVsbCx0aGlzLl90YWJiYXJCb3JkZXI9bnVsbCx0aGlzLl90YWJzUmVjdD1udWxsKX19LHtrZXk6XCJfbm9ybWFsaXplRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gXyh7fSx0LHtpbmRleDp0LmFjdGl2ZUluZGV4LHRhYkl0ZW06dGhpcy50YWJzW3QuYWN0aXZlSW5kZXhdfSl9fSx7a2V5OlwiX29uUG9zdENoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9dGhpcy5fbm9ybWFsaXplRXZlbnQodCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwb3N0Y2hhbmdlXCIsdCk7dmFyIGU9dC50YWJJdGVtLnBhZ2VFbGVtZW50O2UmJmUuX3Nob3coKX19LHtrZXk6XCJfb25QcmVDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0PXRoaXMuX25vcm1hbGl6ZUV2ZW50KHQpLHQuY2FuY2VsPWZ1bmN0aW9uKCl7cmV0dXJuIHQuY2FuY2VsZWQ9ITB9LFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwicHJlY2hhbmdlXCIsdCksIXQuY2FuY2VsZWQpe3ZhciBlPXQsbj1lLmFjdGl2ZUluZGV4LGk9ZS5sYXN0QWN0aXZlSW5kZXgsbz10aGlzLnRhYnM7aWYob1tuXS5zZXRBY3RpdmUoITApLGk+PTApe3ZhciByPW9baV07ci5zZXRBY3RpdmUoITEpLHIucGFnZUVsZW1lbnQmJnIucGFnZUVsZW1lbnQuX2hpZGUoKX19cmV0dXJuIHQuY2FuY2VsZWR9fSx7a2V5OlwiX29uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKHRoaXMuX3RhYmJhckJvcmRlcilpZih0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUudHJhbnNpdGlvbj1cImFsbCBcIisoZS5kdXJhdGlvbnx8MCkrXCJzIFwiKyhlLnRpbWluZ3x8XCJcIiksdGhpcy5fYXV0b2dyb3cmJnRoaXMuX3RhYnNSZWN0Lmxlbmd0aD4wKXt2YXIgbj1NYXRoLmZsb29yKHQpLGk9TWF0aC5jZWlsKHQpLG89dCUxO3RoaXMuX3RhYmJhckJvcmRlci5zdHlsZS53aWR0aD1nYSh0aGlzLl90YWJzUmVjdFtuXS53aWR0aCx0aGlzLl90YWJzUmVjdFtpXS53aWR0aCxvKStcInB4XCIsdGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZTNkKFwiK2dhKHRoaXMuX3RhYnNSZWN0W25dLmxlZnQsdGhpcy5fdGFic1JlY3RbaV0ubGVmdCxvKStcInB4LCAwLCAwKVwifWVsc2UgdGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZTNkKFwiKzEwMCp0K1wiJSwgMCwgMClcIjt0aGlzLl9vblN3aXBlJiZ0aGlzLl9vblN3aXBlKHQsZSl9fSx7a2V5OlwiX29uUmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fYXV0b2dyb3c9US5oYXNNb2RpZmllcih0aGlzLFwiYXV0b2dyb3dcIiksdGhpcy5fdGFic1JlY3Q9dGhpcy50YWJzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX0pLHRoaXMuX3RhYmJhckJvcmRlcil7dGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLmRpc3BsYXk9dGhpcy5oYXNBdHRyaWJ1dGUoXCJ0YWItYm9yZGVyXCIpfHxRLmhhc01vZGlmaWVyKHRoaXMsXCJtYXRlcmlhbFwiKT9cImJsb2NrXCI6XCJub25lXCI7dmFyIHQ9dGhpcy5nZXRBY3RpdmVUYWJJbmRleCgpO3RoaXMuX3RhYnNSZWN0Lmxlbmd0aD4wJiZ0Pj0wJiYodGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLndpZHRoPXRoaXMuX3RhYnNSZWN0W3RdLndpZHRoK1wicHhcIil9fX0se2tleTpcIl9nZXRBdXRvU2Nyb2xsUmF0aW9cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9bi8zMDAqKHQ/LTE6MSk7cmV0dXJuIE1hdGgubWluKDEsTWF0aC5tYXgoMCwuNitlKmkpKX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpO3ZhciB0PXRoaXMuX2NvbnRlbnRFbGVtZW50fHxRLmNyZWF0ZShcIi50YWJiYXJfX2NvbnRlbnRcIik7dC5jbGFzc0xpc3QuYWRkKFwib25zLXRhYmJhcl9fY29udGVudFwiKTt2YXIgZT10aGlzLl90YWJiYXJFbGVtZW50fHxRLmNyZWF0ZShcIi50YWJiYXJcIik7aWYoZS5jbGFzc0xpc3QuYWRkKFwib25zLXRhYmJhcl9fZm9vdGVyXCIpLCFlLnBhcmVudE5vZGUpZm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTt2YXIgbj1OdW1iZXIodGhpcy5nZXRBdHRyaWJ1dGUoXCJhY3RpdmVJbmRleFwiKSk7ZS5jaGlsZHJlbi5sZW5ndGg+biYmIVEuZmluZENoaWxkKGUsXCJbYWN0aXZlXVwiKSYmZS5jaGlsZHJlbltuXS5zZXRBdHRyaWJ1dGUoXCJhY3RpdmVcIixcIlwiKSx0aGlzLl90YWJiYXJCb3JkZXI9US5maW5kQ2hpbGQoZSxcIi50YWJiYXJfX2JvcmRlclwiKXx8US5jcmVhdGUoXCIudGFiYmFyX19ib3JkZXJcIiksZS5hcHBlbmRDaGlsZCh0aGlzLl90YWJiYXJCb3JkZXIpLGUuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXItdGFiYmFyXCIpLCF0LmNoaWxkcmVuWzBdJiZ0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLCF0LmNoaWxkcmVuWzFdJiZ0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHQuYXBwZW5kQ2hpbGQ9dC5hcHBlbmRDaGlsZC5iaW5kKHQuY2hpbGRyZW5bMF0pLHQuaW5zZXJ0QmVmb3JlPXQuaW5zZXJ0QmVmb3JlLmJpbmQodC5jaGlsZHJlblswXSksdGhpcy5hcHBlbmRDaGlsZCh0KSx0aGlzLmFwcGVuZENoaWxkKGUpLEIuaW5pdE1vZGlmaWVyKHRoaXMsZmEpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLGk9dGhpcy5fdG9wPVwidG9wXCI9PT1lfHxcImF1dG9cIj09PWUmJlEuaGFzTW9kaWZpZXIodGhpcyxcIm1hdGVyaWFsXCIpLG89aT9RLmFkZE1vZGlmaWVyOlEucmVtb3ZlTW9kaWZpZXI7byh0aGlzLFwidG9wXCIpO3ZhciByPVEuZmluZFBhcmVudCh0aGlzLFwib25zLXBhZ2VcIik7ciYmbihyLGZ1bmN0aW9uKCl7dmFyIGU9MDtyLmNoaWxkcmVuWzBdJiZRLm1hdGNoKHIuY2hpbGRyZW5bMF0sXCJvbnMtdG9vbGJhclwiKSYmKG8oci5jaGlsZHJlblswXSxcIm5vc2hhZG93XCIpLGU9MSk7dmFyIG49ci5fZ2V0Q29udGVudEVsZW1lbnQoKSxhPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHIuX2dldENvbnRlbnRFbGVtZW50KCksbnVsbCk7dC5zdHlsZS50b3A9aT9wYXJzZUludChhLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nLXRvcFwiKSwxMCktZStcInB4XCI6XCJcIixuLnN0eWxlLnRvcD1hLnRvcCxuLnN0eWxlLnRvcD1cIlwifSksUC5hdXRvU3RhdHVzQmFyRmlsbChmdW5jdGlvbigpe3ZhciBlPVEuZmluZFBhcmVudCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcInN0YXR1cy1iYXItZmlsbFwiKX0pO1EudG9nZ2xlQXR0cmlidXRlKHQsXCJzdGF0dXMtYmFyLWZpbGxcIixpJiYhZSl9KX19LHtrZXk6XCJzZXRBY3RpdmVUYWJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9dGhpcy5nZXRBY3RpdmVUYWJJbmRleCgpLG89dGhpcy50YWJzW2ldLHI9dGhpcy50YWJzW3RdO2lmKCFyKXJldHVybiBQcm9taXNlLnJlamVjdChcIlNwZWNpZmllZCBpbmRleCBkb2VzIG5vdCBtYXRjaCBhbnkgdGFiLlwiKTtpZih0PT09aSlyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJyZWFjdGl2ZVwiLHtpbmRleDp0LGFjdGl2ZUluZGV4OnQsdGFiSXRlbTpyfSksUHJvbWlzZS5yZXNvbHZlKHIucGFnZUVsZW1lbnQpO3ZhciBhPXIucGFnZUVsZW1lbnQ7cmV0dXJuKGE/UHJvbWlzZS5yZXNvbHZlKGEpOnIubG9hZGVkKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBlLl9zd2lwZXIuc2V0QWN0aXZlSW5kZXgodCxfKHtyZWplY3Q6ITB9LG4se2FuaW1hdGlvbjpvJiZpP24uYW5pbWF0aW9ufHxlLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKTpcIm5vbmVcIixhbmltYXRpb25PcHRpb25zOlEuZXh0ZW5kKHtkdXJhdGlvbjouMyx0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjQsIC43LCAuNSwgMSlcIn0sZS5oYXNBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKT9RLmFuaW1hdGlvbk9wdGlvbnNQYXJzZShlLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpKTp7fSxuLmFuaW1hdGlvbk9wdGlvbnN8fHt9KX0pKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmbi5jYWxsYmFjayhpKSxpfSl9KX19LHtrZXk6XCJzZXRUYWJiYXJWaXNpYmlsaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXtlLl9jb250ZW50RWxlbWVudC5zdHlsZVtlLl90b3A/XCJ0b3BcIjpcImJvdHRvbVwiXT10P1wiXCI6XCIwcHhcIixlLl90YWJiYXJFbGVtZW50LnN0eWxlLmRpc3BsYXk9dD9cIlwiOlwibm9uZVwiLHQmJmUuX29uUmVmcmVzaCgpfSl9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXRUYWJiYXJWaXNpYmlsaXR5KCEwKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNldFRhYmJhclZpc2liaWxpdHkoITEpfX0se2tleTpcImdldEFjdGl2ZVRhYkluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMudGFicyxlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXSYmXCJPTlMtVEFCXCI9PT10W2VdLnRhZ05hbWUmJnRbZV0uaXNBY3RpdmUoKSlyZXR1cm4gZTtyZXR1cm4tMX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9zd2lwZXIuc2hvdygpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3ZhciBlPXQudGFicyxuPXQuZ2V0QWN0aXZlVGFiSW5kZXgoZSk7dC5fbG9hZEluYWN0aXZlLnJlc29sdmUoKSxlLmxlbmd0aD4wJiZuPj0wJiZlW25dLmxvYWRlZC50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5fc2hvdygpfSl9KX0pfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZXIuaGlkZSgpO3ZhciB0PXRoaXMudG9wUGFnZTt0JiZ0Ll9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGFicy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlbW92ZSgpfSksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoXCJtb2RpZmllclwiPT09dCl7Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxmYSk7dmFyIGk9ZnVuY3Rpb24odCl7cmV0dXJuLyhefFxccyspdG9wKCR8XFxzKykvaS50ZXN0KHQpfTtpKGUpIT09aShuKSYmdGhpcy5fdXBkYXRlUG9zaXRpb24oKX1lbHNlXCJwb3NpdGlvblwiPT09dD9RLmlzQXR0YWNoZWQodGhpcykmJnRoaXMuX3VwZGF0ZVBvc2l0aW9uKCk6XCJzd2lwZWFibGVcIj09PXQ/dGhpcy5fc3dpcGVyJiZ0aGlzLl9zd2lwZXIudXBkYXRlU3dpcGVhYmxlKHRoaXMuaGFzQXR0cmlidXRlKFwic3dpcGVhYmxlXCIpKTpcImhpZGUtdGFic1wiPT09dCYmdGhpcy5zZXRUYWJiYXJWaXNpYmlsaXR5KCF0aGlzLmhhc0F0dHJpYnV0ZShcImhpZGUtdGFic1wiKXx8XCJmYWxzZVwiPT09bil9fSx7a2V5OlwiX3RhYmJhckVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi50YWJiYXJcIil9fSx7a2V5OlwiX2NvbnRlbnRFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIudGFiYmFyX19jb250ZW50XCIpfX0se2tleTpcIl90YXJnZXRFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29udGVudEVsZW1lbnQ7cmV0dXJuIHQmJnQuY2hpbGRyZW5bMF18fG51bGx9fSx7a2V5OlwidG9wUGFnZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMudGFicyxlPXRoaXMuZ2V0QWN0aXZlVGFiSW5kZXgoKTtyZXR1cm4gdFtlXT90W2VdLnBhZ2VFbGVtZW50fHx0aGlzLnBhZ2VzWzBdfHxudWxsOm51bGx9fSx7a2V5OlwicGFnZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5hcnJheUZyb20odGhpcy5fdGFyZ2V0RWxlbWVudC5jaGlsZHJlbil9fSx7a2V5OlwidGFic1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5fdGFiYmFyRWxlbWVudC5jaGlsZHJlbixmdW5jdGlvbih0KXtyZXR1cm5cIk9OUy1UQUJcIj09PXQudGFnTmFtZX0pfX0se2tleTpcInZpc2libGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIm5vbmVcIiE9PXRoaXMuX3RhYmJhckVsZW1lbnQuc3R5bGUuZGlzcGxheX19LHtrZXk6XCJzd2lwZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcInN3aXBlYWJsZVwiLHQpfX0se2tleTpcIm9uU3dpcGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Td2lwZX0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wib25Td2lwZVwiIG11c3QgYmUgYSBmdW5jdGlvbicpLHRoaXMuX29uU3dpcGU9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJwb3NpdGlvblwiLFwic3dpcGVhYmxlXCIsXCJ0YWItYm9yZGVyXCIsXCJoaWRlLXRhYnNcIl19fSx7a2V5OlwicmV3cml0YWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGF9fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicHJlY2hhbmdlXCIsXCJwb3N0Y2hhbmdlXCIsXCJyZWFjdGl2ZVwiXX19XSksZX0oKTtjLlRhYmJhcj1tYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdGFiYmFyXCIsbWEpO3ZhciBfYT17XCJcIjpcInRhYmJhci0tKl9faXRlbVwiLFwiLnRhYmJhcl9fYnV0dG9uXCI6XCJ0YWJiYXItLSpfX2J1dHRvblwifSx2YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuW1wibGFiZWxcIixcImljb25cIixcImJhZGdlXCJdLnNvbWUodC5oYXNBdHRyaWJ1dGUuYmluZCh0KSk/dC5fY29tcGlsZSgpOm4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0Ll9wYWdlTG9hZGVyPWp0LHQuX29uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJ0YWJiYXJfX2l0ZW1cIiksIXRoaXMuX2J1dHRvbil7Zm9yKHZhciB0PVEuY3JlYXRlKFwiYnV0dG9uLnRhYmJhcl9fYnV0dG9uXCIpO3RoaXMuY2hpbGROb2Rlc1swXTspdC5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO3ZhciBlPVEuY3JlYXRlKFwiaW5wdXRcIix7ZGlzcGxheTpcIm5vbmVcIn0pO2UudHlwZT1cInJhZGlvXCIsdGhpcy5hcHBlbmRDaGlsZChlKSx0aGlzLmFwcGVuZENoaWxkKHQpLHRoaXMuX3VwZGF0ZUJ1dHRvbkNvbnRlbnQoKSxCLmluaXRNb2RpZmllcih0aGlzLF9hKSx0aGlzLl91cGRhdGVSaXBwbGUoKX19fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYnV0dG9uJiZRLnVwZGF0ZVJpcHBsZSh0aGlzLl9idXR0b24sdGhpcy5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIikpfX0se2tleTpcIl91cGRhdGVCdXR0b25Db250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fYnV0dG9uLG49dGhpcy5faWNvbjtpZih0aGlzLmhhc0F0dHJpYnV0ZShcImljb25cIikpe3ZhciBpPShuPW58fFEuY3JlYXRlRWxlbWVudCgnPGRpdiBjbGFzcz1cInRhYmJhcl9faWNvblwiPjxvbnMtaWNvbj48L29ucy1pY29uPjwvZGl2PicpKS5jaGlsZHJlblswXSxvPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBpLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcImljb25cIixlLHQuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSl9fShpLmdldEF0dHJpYnV0ZShcImljb25cIikpO2kuc2V0QXR0cmlidXRlKFwiaWNvblwiLHRoaXMuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSksbi5wYXJlbnRFbGVtZW50IT09ZSYmZS5pbnNlcnRCZWZvcmUobixlLmZpcnN0Q2hpbGQpLGkuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24/bygpOnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBpLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZvKCl9KX1lbHNlIG4mJm4ucmVtb3ZlKCk7W1wibGFiZWxcIixcImJhZGdlXCJdLmZvckVhY2goZnVuY3Rpb24obixpKXt2YXIgbz10LnF1ZXJ5U2VsZWN0b3IoXCIudGFiYmFyX19cIituKTt0Lmhhc0F0dHJpYnV0ZShuKT8oKG89b3x8US5jcmVhdGUoXCIudGFiYmFyX19cIituKyhcImJhZGdlXCI9PT1uP1wiIG5vdGlmaWNhdGlvblwiOlwiXCIpKSkudGV4dENvbnRlbnQ9dC5nZXRBdHRyaWJ1dGUobiksby5wYXJlbnRFbGVtZW50IT09ZSYmZS5hcHBlbmRDaGlsZChvKSk6byYmby5yZW1vdmUoKX0pfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9uQ2xpY2sgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLm9uQ2xpY2soKTp0aGlzLl90YWJiYXIuc2V0QWN0aXZlVGFiKHRoaXMuaW5kZXgse3JlamVjdDohMX0pfX0se2tleTpcInNldEFjdGl2ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTt0aGlzLl9pbnB1dC5jaGVja2VkPXQsdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIsdCksUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImFjdGl2ZVwiLHQpLHRoaXMuaGFzQXR0cmlidXRlKFwiaWNvblwiKSYmdGhpcy5oYXNBdHRyaWJ1dGUoXCJhY3RpdmUtaWNvblwiKSYmdGhpcy5faWNvbi5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoXCJpY29uXCIsdGhpcy5nZXRBdHRyaWJ1dGUodD9cImFjdGl2ZS1pY29uXCI6XCJpY29uXCIpKX19LHtrZXk6XCJfbG9hZFBhZ2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl9oYXNMb2FkZWQ9ITAsbmV3IFByb21pc2UoZnVuY3Rpb24oaSl7bi5fcGFnZUxvYWRlci5sb2FkKHtwYXJlbnQ6dCxwYWdlOmV9LGZ1bmN0aW9uKGUpe3QucmVwbGFjZUNoaWxkKGUsdC5jaGlsZHJlbltuLmluZGV4XSksbi5fbG9hZGVkUGFnZT1lLGkoZSl9KX0pfX0se2tleTpcImlzQWN0aXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIil9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljaywhMSksdGhpcy5fbG9hZGVkUGFnZSYmKHRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMuX2xvYWRlZFBhZ2UpLHRoaXMuX2xvYWRlZFBhZ2U9bnVsbCx0aGlzLl9oYXNMb2FkZWQ9ITEsdGhpcy5sb2FkZWQ9bnVsbCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrLCExKSxRLmlzQXR0YWNoZWQodGhpcykmJiF0aGlzLmxvYWRlZCl7dmFyIGU9US5kZWZlcigpO3RoaXMubG9hZGVkPWUucHJvbWlzZSxuKHRoaXMsZnVuY3Rpb24oKXt2YXIgbj10LmluZGV4LGk9dC5fdGFiYmFyO2l8fFEudGhyb3coXCJUYWIgZWxlbWVudHMgbXVzdCBiZSBjaGlsZHJlbiBvZiBUYWJiYXJcIiksaS5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSYmUS5hZGRNb2RpZmllcih0LGkuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIikpLHQuX2hhc0xvYWRlZHx8KHQuaGFzQXR0cmlidXRlKFwiYWN0aXZlXCIpJiYodC5zZXRBY3RpdmUoITApLGkuc2V0QXR0cmlidXRlKFwiYWN0aXZlSW5kZXhcIixuKSksbj09PWkudGFicy5sZW5ndGgtMSYmKGkuX29uUmVmcmVzaCgpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBpLl9vblJlZnJlc2goKX0pKSxtYS5yZXdyaXRhYmxlcy5yZWFkeShpLGZ1bmN0aW9uKCl7dmFyIG89dC5wYWdlfHx0LmdldEF0dHJpYnV0ZShcInBhZ2VcIik7aWYoIXQucGFnZUVsZW1lbnQmJm8pe3ZhciByPWkuX3RhcmdldEVsZW1lbnQsYT1RLmNyZWF0ZShcImRpdlwiLHtoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwifSk7ci5pbnNlcnRCZWZvcmUoYSxyLmNoaWxkcmVuW25dKTt2YXIgcz1mdW5jdGlvbigpe3JldHVybiB0Ll9sb2FkUGFnZUVsZW1lbnQocixvKS50aGVuKGUucmVzb2x2ZSl9O3JldHVybiB0LmlzQWN0aXZlKCk/cygpOmkuX2xvYWRJbmFjdGl2ZS5wcm9taXNlLnRoZW4ocyl9cmV0dXJuIGUucmVzb2x2ZSh0LnBhZ2VFbGVtZW50KX0pKX0pfX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG89dGhpcztzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwidGFiYmFyX19pdGVtXCIsX2EpO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIEIub25Nb2RpZmllckNoYW5nZWQoZSxpLG8sX2EpfSk7YnJlYWs7Y2FzZVwicmlwcGxlXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3VwZGF0ZVJpcHBsZSgpfSk7YnJlYWs7Y2FzZVwiaWNvblwiOmNhc2VcImxhYmVsXCI6Y2FzZVwiYmFkZ2VcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlQnV0dG9uQ29udGVudCgpfSk7YnJlYWs7Y2FzZVwicGFnZVwiOnRoaXMucGFnZT1pfHxcIlwifX19LHtrZXk6XCJwYWdlTG9hZGVyXCIsc2V0OmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBCdHx8US50aHJvd1BhZ2VMb2FkZXIoKSx0aGlzLl9wYWdlTG9hZGVyPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfX0se2tleTpcIl9pbnB1dFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiaW5wdXRcIil9fSx7a2V5OlwiX2J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLnRhYmJhcl9fYnV0dG9uXCIpfX0se2tleTpcIl9pY29uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi50YWJiYXJfX2ljb25cIil9fSx7a2V5OlwiX3RhYmJhclwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRQYXJlbnQodGhpcyxcIm9ucy10YWJiYXJcIil9fSx7a2V5OlwiaW5kZXhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4sdGhpcyl9fSx7a2V5OlwicGFnZUVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9sb2FkZWRQYWdlKXJldHVybiB0aGlzLl9sb2FkZWRQYWdlO3ZhciB0PXRoaXMuX3RhYmJhcjtyZXR1cm4gdC5wYWdlcy5sZW5ndGg9PT10LnRhYnMubGVuZ3RoP3QucGFnZXNbdGhpcy5pbmRleF06bnVsbH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcImljb25cIixcImxhYmVsXCIsXCJwYWdlXCIsXCJiYWRnZVwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5UYWI9dmEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRhYlwiLHZhKTt2YXIgYmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLHlhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxiYSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX1dKSxlfSgpLGthPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yNTphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLm1lc3NhZ2VEZWxheT0uNCpsLmR1cmF0aW9uK2wuZGVsYXksQy5pc0FuZHJvaWQoKT9sLmFzY2Vuc2lvbj00ODpMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5hc2NlbnNpb249OTg6TGkuaXNJUGhvbmVYTGFuZHNjYXBlUGF0Y2hBY3RpdmUoKT9sLmFzY2Vuc2lvbj04NTpsLmFzY2Vuc2lvbj02NCxsfXJldHVybiBiKGUsYmEpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9dC5fdG9hc3QsUS5nbG9iYWxzLmZhYk9mZnNldD10aGlzLmFzY2Vuc2lvbixudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5hc2NlbnNpb24rXCJweCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSksbnQodGhpcy5fZ2V0RmFicygpKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAtXCIrdGhpcy5hc2NlbnNpb24rXCJweCwgMCkgc2NhbGUoMSlcIn0sdGhpcy5kZWYpLG50KFEuYXJyYXlGcm9tKHQuY2hpbGRyZW4pLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD10Ll90b2FzdCxRLmdsb2JhbHMuZmFiT2Zmc2V0PTAsbnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmFzY2Vuc2lvbitcInB4LCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pLG50KHRoaXMuX2dldEZhYnMoKSx0aGlzLmRlZikud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMCkgc2NhbGUoMSlcIn0sdGhpcy5kZWYpLG50KFEuYXJyYXlGcm9tKHQuY2hpbGRyZW4pLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSl9fSx7a2V5OlwiX2dldEZhYnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwib25zLWZhYltwb3NpdGlvbn49Ym90dG9tXSwgb25zLXNwZWVkLWRpYWxbcG9zaXRpb25+PWJvdHRvbV1cIikpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC52aXNpYmxlfSl9fV0pLGV9KCksd2E9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2VcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM1OmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYm9keUhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgMzRweClcIjpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP2wubGlmdEFtb3VudD1cImNhbGMoMTAwJSArIDIxcHgpXCI6bC5saWZ0QW1vdW50PVwiMTAwJVwiLGx9cmV0dXJuIGIoZSxiYSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD10Ll90b2FzdCxudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5saWZ0QW1vdW50K1wiLCAwKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMubGlmdEFtb3VudCtcIiwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpezA9PT1wYXJzZUludCh0LnN0eWxlLnRvcCwxMCkmJih0LnN0eWxlLnRvcD10LnN0eWxlLmJvdHRvbT1cIlwiKX19XSksZX0oKSxFYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzU6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gTGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZSgpP2wuZmFsbEFtb3VudD1cImNhbGMoLTEwMCUgLSA0NHB4KVwiOmwuZmFsbEFtb3VudD1cIi0xMDAlXCIsbH1yZXR1cm4gYihlLGJhKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHQpLG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmZhbGxBbW91bnQrXCIsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dD10Ll90b2FzdCx0aGlzLl91cGRhdGVQb3NpdGlvbih0KSxudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmZhbGxBbW91bnQrXCIsIDApXCIsb3BhY2l0eTowfSkucXVldWUoZnVuY3Rpb24oaSl7bi5fdXBkYXRlUG9zaXRpb24odCwhMCksZSYmZSgpLGkoKX0pKX19LHtrZXk6XCJfdXBkYXRlUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMDtuPUxpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9cIjQ0cHhcIjpcIjBcIix0LnN0eWxlLnRvcCE9PW4mJih0LnN0eWxlLnRvcD1uLHQuc3R5bGUuYm90dG9tPVwiaW5pdGlhbFwiKX19XSksZX0oKSxDYT17XCIudG9hc3RcIjpcInRvYXN0LS0qXCIsXCIudG9hc3RfX21lc3NhZ2VcIjpcInRvYXN0LS0qX19tZXNzYWdlXCIsXCIudG9hc3RfX2J1dHRvblwiOlwidG9hc3QtLSpfX2J1dHRvblwifSxBYT17ZGVmYXVsdDpDLmlzQW5kcm9pZCgpP2thOndhLGZhZGU6eWEsYXNjZW5kOmthLGxpZnQ6d2EsZmFsbDpFYSxub25lOmJhfSxTYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2RlZmF1bHREQkI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FsbFBhcmVudEhhbmRsZXIoKX0sbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvYXN0JiYodGhpcy5fdG9hc3Quc3R5bGUudG9wPXRoaXMuX3RvYXN0LnN0eWxlLmJvdHRvbT1cIlwiKSxuZXcgTyh7YW5pbWF0b3JzOkFhLGJhc2VDbGFzczpiYSxiYXNlQ2xhc3NOYW1lOlwiVG9hc3RBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xZTQ7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi50b2FzdFwiKTtpZighdClmb3IoKHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuY2xhc3NMaXN0LmFkZChcInRvYXN0XCIpO3RoaXMuY2hpbGROb2Rlc1swXTspdC5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO3ZhciBlPVEuZmluZENoaWxkKHQsXCIudG9hc3RfX2J1dHRvblwiKTtpZihlfHwoZT1RLmZpbmRDaGlsZCh0LGZ1bmN0aW9uKHQpe3JldHVybiBRLm1hdGNoKHQsXCIuYnV0dG9uXCIpfHxRLm1hdGNoKHQsXCJidXR0b25cIil9KSkmJihlLmNsYXNzTGlzdC5yZW1vdmUoXCJidXR0b25cIiksZS5jbGFzc0xpc3QuYWRkKFwidG9hc3RfX2J1dHRvblwiKSx0LmFwcGVuZENoaWxkKGUpKSwhUS5maW5kQ2hpbGQodCxcIi50b2FzdF9fbWVzc2FnZVwiKSl7dmFyIG49US5maW5kQ2hpbGQodCxcIi5tZXNzYWdlXCIpO2lmKCFuKXtuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKHZhciBpPXQuY2hpbGROb2Rlcy5sZW5ndGgtMTtpPj0wO2ktLSl0LmNoaWxkTm9kZXNbaV0hPT1lJiZuLmluc2VydEJlZm9yZSh0LmNoaWxkTm9kZXNbaV0sbi5maXJzdENoaWxkKX1uLmNsYXNzTGlzdC5hZGQoXCJ0b2FzdF9fbWVzc2FnZVwiKSx0Lmluc2VydEJlZm9yZShuLHQuZmlyc3RDaGlsZCl9dC5wYXJlbnROb2RlIT09dGhpcyYmdGhpcy5hcHBlbmRDaGlsZCh0KSxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBDYX19LHtrZXk6XCJfdG9hc3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi50b2FzdFwiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgYmF8fFEudGhyb3coJ1wiQW5pbWF0b3JcIiBwYXJhbSBtdXN0IGluaGVyaXQgT25zVG9hc3RFbGVtZW50LlRvYXN0QW5pbWF0b3InKSxBYVt0XT1lfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBBYX19LHtrZXk6XCJUb2FzdEFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGJhfX1dKSxlfSgpO2MuVG9hc3Q9U2EsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRvYXN0XCIsU2EpO3ZhciBQYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwidG9vbGJhci1idXR0b24tLSpcIn19fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInRvb2xiYXItYnV0dG9uXCJ9fSx7a2V5OlwiX3JpcHBsZU9wdFwiLGdldDpmdW5jdGlvbigpe3JldHVyblt0aGlzLHZvaWQgMCx7Y2VudGVyOlwiXCIsc2l6ZTpcImNvbnRhaW5cIixiYWNrZ3JvdW5kOlwidHJhbnNwYXJlbnRcIn1dfX1dKSxlfSgpO3JldHVybiBjLlRvb2xiYXJCdXR0b249UGEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRvb2xiYXItYnV0dG9uXCIsUGEpLGZ1bmN0aW9uKHQpe3dpbmRvdy5fb25zTG9hZGVkJiZ0Ll91dGlsLndhcm4oXCJPbnNlbiBVSSBpcyBsb2FkZWQgbW9yZSB0aGFuIG9uY2UuXCIpLHdpbmRvdy5fb25zTG9hZGVkPSEwLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7dC5mYXN0Q2xpY2s9enQuYXR0YWNoKGRvY3VtZW50LmJvZHkpO3ZhciBlPVwidG91Y2gtYWN0aW9uXCJpbiBkb2N1bWVudC5ib2R5LnN0eWxlO3QucGxhdGZvcm0uX3J1bk9uQWN0dWFsUGxhdGZvcm0oZnVuY3Rpb24oKXt0LnBsYXRmb3JtLmlzQW5kcm9pZCgpP3QuZmFzdENsaWNrLmRlc3Ryb3koKTp0LnBsYXRmb3JtLmlzSU9TKCkmJmUmJih0LnBsYXRmb3JtLmlzSU9TU2FmYXJpKCl8fHQucGxhdGZvcm0uaXNXS1dlYlZpZXcoKSkmJnQuZmFzdENsaWNrLmRlc3Ryb3koKX0pfSwhMSksdC5yZWFkeShmdW5jdGlvbigpe3QuZW5hYmxlRGV2aWNlQmFja0J1dHRvbkhhbmRsZXIoKSx0Ll9kZWZhdWx0RGV2aWNlQmFja0J1dHRvbkhhbmRsZXI9dC5faW50ZXJuYWwuZGJiRGlzcGF0Y2hlci5jcmVhdGVIYW5kbGVyKHdpbmRvdy5kb2N1bWVudC5ib2R5LGZ1bmN0aW9uKCl7T2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobmF2aWdhdG9yLFwiYXBwXCIpP25hdmlnYXRvci5hcHAuZXhpdEFwcCgpOmNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBjbG9zZSB0aGUgYXBwLiBJcyAnY29yZG92YS5qcycgaW5jbHVkZWQ/XFxuRXJyb3I6ICd3aW5kb3cubmF2aWdhdG9yLmFwcCcgaXMgdW5kZWZpbmVkLlwiKX0pLGRvY3VtZW50LmJvZHkuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgdC5HZXN0dXJlRGV0ZWN0b3IoZG9jdW1lbnQuYm9keSx7cGFzc2l2ZTohMH0pLHQucGxhdGZvcm0uaXNXZWJWaWV3KCl8fGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihlKXsyNz09PWUua2V5Q29kZSYmdC5maXJlRGV2aWNlQmFja0J1dHRvbkV2ZW50KCl9KSx0Ll9zZXR1cExvYWRpbmdQbGFjZUhvbGRlcnMoKX0pLFZpZXdwb3J0LnNldHVwKCl9KFJ0KSx3aW5kb3cuX3N1cGVyU2VjcmV0T25zPVJ0LFJ0fSk7IiwiXHJcbmZ1bmN0aW9uIGdldEpTT04odXJsLCBjYikge1xyXG4gICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHZhciBvbkVycm9yID0gd2luZG93Lm9ucy5ub3RpZmljYXRpb24uYWxlcnQuYmluZCh3aW5kb3cub25zLm5vdGlmaWNhdGlvbiwge1xyXG4gICAgICAgIG1lc3NhZ2U6ICdKZSBiZW50IG5pZXQgdmVyYm9uZGVuIG1ldCBkZSBzZXJ2ZXIuIERlIGdlZ2V2ZW5zIGRpZSB3b3JkZW4gd2VlcmdlZ2V2ZW4gemlqbiBtb2dlbGlqayB2ZXJvdWRlcmQuJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG15QXJyID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBjYihKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgeG1saHR0cC5vbmVycm9yID0gb25FcnJvcjtcclxuICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgeG1saHR0cC5zZW5kKCk7XHJcbn07IiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICB2YXIgd2Vic2l0ZVRpdGxlID0gZG9jdW1lbnQudGl0bGU7XHJcbiAgICBpZiAod2luZG93Lm9ucy5wbGF0Zm9ybS5pc1dlYlZpZXcoKSAmJiB3aW5kb3cuaGlzdG9yeSkge1xyXG4gICAgICAgIHdpbmRvdy5mbi5uYXZpZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcigncG9zdHB1c2gnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5kZXRhaWwuZW50ZXJQYWdlLmlkID09PSAnc3BsaXR0ZXInKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IGUuZGV0YWlsLmVudGVyUGFnZS5xdWVyeVNlbGVjdG9yKCcudG9vbGJhcl9fY2VudGVyJykuaW5uZXJUZXh0O1xyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHdlYnNpdGVUaXRsZSArICcgLSAnICsgdGl0bGU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGhpc3RvcnlBUEkgPSB0cnVlO1xyXG4gICAgICAgIHdpbmRvdy5mbi5uYXZpZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcigncG9zdHBvcCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGhpc3RvcnlBUEkgPSAhIWUuZGV0YWlsLmVudGVyUGFnZS5kYXRhLmhpc3RvcnlBUEk7XHJcbiAgICAgICAgICAgIGlmICghZS5kZXRhaWwuZW50ZXJQYWdlLmRhdGEuaGlzdG9yeUFQSSkgaGlzdG9yeS5iYWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGhpc3RvcnlBUEkpIHdpbmRvdy5mbi5uYXZpZ2F0b3IucG9wUGFnZSh7IGRhdGE6IHsgaGlzdG9yeUFQSTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgICAgICBoaXN0b3J5QVBJID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7IiwidmFyIGNvcmRvdmFfcmVhZHkgPSBmYWxzZTtcclxuXHJcbnZhciBpc09ubGluZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbn0sIGlzT2ZmbGluZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcclxufTtcclxuXHJcbndpbmRvdy5vbnMuZGlzYWJsZUF1dG9TdGF0dXNCYXJGaWxsKCk7XHJcblxyXG5pZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuXHQvKlxyXG5cdFx0V29ya3Mgd2VsbCBpbiBGaXJlZm94IGFuZCBPcGVyYSB3aXRoIHRoZSBcclxuXHRcdFdvcmsgT2ZmbGluZSBvcHRpb24gaW4gdGhlIEZpbGUgbWVudS5cclxuXHRcdFB1bGxpbmcgdGhlIGV0aGVybmV0IGNhYmxlIGRvZXNuJ3Qgc2VlbSB0byB0cmlnZ2VyIGl0LlxyXG5cdFx0TGF0ZXIgR29vZ2xlIENocm9tZSBhbmQgU2FmYXJpIHNlZW0gdG8gdHJpZ2dlciBpdCB3ZWxsXHJcblx0Ki9cclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCBpc09ubGluZSwgZmFsc2UpO1xyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCBpc09mZmxpbmUsIGZhbHNlKTtcclxufVxyXG5lbHNlIHtcclxuXHQvKlxyXG5cdFx0V29ya3MgaW4gSUUgd2l0aCB0aGUgV29yayBPZmZsaW5lIG9wdGlvbiBpbiB0aGUgXHJcblx0XHRGaWxlIG1lbnUgYW5kIHB1bGxpbmcgdGhlIGV0aGVybmV0IGNhYmxlXHJcblx0Ki9cclxuXHRkb2N1bWVudC5ib2R5Lm9ub25saW5lID0gaXNPbmxpbmU7XHJcblx0ZG9jdW1lbnQuYm9keS5vbm9mZmxpbmUgPSBpc09mZmxpbmU7XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXN1bWVcIiwgZnVuY3Rpb24gKCkge1xyXG5cdGlmIChuYXZpZ2F0b3Iub25MaW5lID09PSBmYWxzZSkge1xyXG5cdFx0XHJcblx0fVxyXG59LCBmYWxzZSlcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2luaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHR2YXIgcGFnZSA9IGV2ZW50LnRhcmdldDtcclxuXHJcblx0aWYgKHBhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdhcHAtcGFnZScpKSB7XHJcblx0XHR2YXIgY29udHJvbCA9IHBhZ2UucXVlcnlTZWxlY3Rvcihmbi5uYXZpZ2F0b3IucGFnZXMubGVuZ3RoID4gMVxyXG5cdFx0XHQ/ICdvbnMtYmFjay1idXR0b24nXHJcblx0XHRcdDogJy5wYWdlLXRvb2xiYXItYmFjay1idXR0b24nKVxyXG5cdFx0aWYgKGNvbnRyb2wpIGNvbnRyb2wuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblx0XHRpbml0UGFnZShwYWdlKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcclxuXHRjb3Jkb3ZhX3JlYWR5ID0gdHJ1ZTtcclxuXHRpZiAoY29yZG92YS5wbGF0Zm9ybUlkID09PSAnYnJvd3NlcicpIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpLnNyYyA9ICcuL2pzL2Jyb3dzZXIuanMnO1xyXG5cdH1cclxuXHRpZiAobmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpLnNyYyA9ICcuL2pzL2FkbW9iLmpzJztcclxuXHR9XHJcbn0sIGZhbHNlKTtcclxuXHJcbndpbmRvdy5mbiA9IHt9O1xyXG5cclxud2luZG93LmZuLm5hdmlnYXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0b3InKTtcclxuXHJcbndpbmRvdy5mbi5vcGVuID0gZnVuY3Rpb24gKCkge1xyXG5cdHZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUnKTtcclxuXHRtZW51Lm9wZW4oKTtcclxufTtcclxuXHJcbndpbmRvdy5mbi5sb2FkID0gZnVuY3Rpb24gKHBhZ2UpIHtcclxuXHR2YXIgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XHJcblx0dmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xyXG5cdGNvbnRlbnQubG9hZChwYWdlKVxyXG5cdFx0LnRoZW4obWVudS5jbG9zZS5iaW5kKG1lbnUpKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGluaXRQYWdlKHBhZ2UpIHtcclxuXHRwYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbGlzdCcpLmZvckVhY2goZnVuY3Rpb24gKGxpc3QpIHtcclxuXHRcdGxpc3QuY2xhc3NMaXN0LmFkZCgnbGlzdCcpO1xyXG5cdFx0bGlzdC5zdHlsZS5tYXJnaW5MZWZ0ID0gJy0xMHB4JztcclxuXHRcdGxpc3Quc3R5bGUubWFyZ2luUmlnaHQgPSAnLTEwcHgnO1xyXG5cdFx0bGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpLmZvckVhY2goZnVuY3Rpb24gKGxpKSB7XHJcblx0XHRcdGxpLmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbScpO1xyXG5cdFx0XHR2YXIgY2VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGNlbnRlci5jbGFzc0xpc3QuYWRkKCdsaXN0LWl0ZW1fX2NlbnRlcicpO1xyXG5cdFx0XHRsaS5hcHBlbmRDaGlsZChjZW50ZXIpO1xyXG5cclxuXHRcdFx0dmFyIHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbV9fcmlnaHQnKTtcclxuXHRcdFx0dmFyIGJ0biA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ29ucy1idXR0b24nKTtcclxuXHRcdFx0YnRuLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi0tb3V0bGluZScpO1xyXG5cdFx0XHRsaS5yZW1vdmVDaGlsZChidG4pO1xyXG5cdFx0XHRyaWdodC5hcHBlbmRDaGlsZChidG4pO1xyXG5cdFx0XHRsaS5hcHBlbmRDaGlsZChyaWdodCk7XHJcblx0XHRcdHZhciB0ZXh0ID0gYnRuLmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHR0ZXh0ID0gdGV4dFswXS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zbGljZSgxKTtcclxuXHRcdFx0Y2VudGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTtcclxuXHRcdFx0YnRuLmlubmVyVGV4dCA9ICdCZWdpbic7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0cGFnZS5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLWNoZWNrYm94LWxpc3QnKS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0KSB7XHJcblx0XHRsaXN0LmNsYXNzTGlzdC5hZGQoJ2xpc3QnKTtcclxuXHRcdGxpc3Quc3R5bGUubWFyZ2luTGVmdCA9ICctMTBweCc7XHJcblx0XHRsaXN0LnN0eWxlLm1hcmdpblJpZ2h0ID0gJy0xMHB4JztcclxuXHRcdGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKS5mb3JFYWNoKGZ1bmN0aW9uIChsaSkge1xyXG5cdFx0XHRsaS5jbGFzc0xpc3QuYWRkKCdsaXN0LWl0ZW0nKTtcclxuXHRcdFx0dmFyIGNlbnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRjZW50ZXIuY2xhc3NMaXN0LmFkZCgnbGlzdC1pdGVtX19jZW50ZXInKTtcclxuXHRcdFx0bGkuYXBwZW5kQ2hpbGQoY2VudGVyKTtcclxuXHJcblx0XHRcdHZhciBjaGVja2VkID0gISFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2hlY2tib3hlcy0nICsgbGkuZ2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrYm94JykpO1xyXG5cdFx0XHR2YXIgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbV9fbGVmdCcpO1xyXG5cdFx0XHR2YXIgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvbnMtY2hlY2tib3gnKTtcclxuXHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGNoZWNrZWQ7XHJcblx0XHRcdGNoZWNrYm94Lm9uaW5wdXQgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NoZWNrYm94ZXMtJyArIGxpLmdldEF0dHJpYnV0ZSgnZGF0YS1jaGVja2JveCcpLCBlLnRhcmdldC5jaGVja2VkID8gJ3NldCcgOiAnJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGVmdC5hcHBlbmRDaGlsZChjaGVja2JveCk7XHJcblx0XHRcdGxpLmFwcGVuZENoaWxkKGxlZnQpO1xyXG5cclxuXHRcdFx0dmFyIHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbV9fcmlnaHQnKTtcclxuXHRcdFx0dmFyIGJ0biA9IGxpLnF1ZXJ5U2VsZWN0b3IoJ29ucy1idXR0b24nKTtcclxuXHRcdFx0YnRuLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi0tb3V0bGluZScpO1xyXG5cdFx0XHRsaS5yZW1vdmVDaGlsZChidG4pO1xyXG5cdFx0XHRyaWdodC5hcHBlbmRDaGlsZChidG4pO1xyXG5cdFx0XHRsaS5hcHBlbmRDaGlsZChyaWdodCk7XHJcblx0XHRcdHZhciB0ZXh0ID0gYnRuLmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHR0ZXh0ID0gdGV4dFswXS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zbGljZSgxKTtcclxuXHRcdFx0Y2VudGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTtcclxuXHRcdFx0YnRuLmlubmVyVGV4dCA9ICdCZWdpbic7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0cGFnZS5xdWVyeVNlbGVjdG9yQWxsKCcubGluay1saXN0JykuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkge1xyXG5cdFx0bGlzdC5jbGFzc0xpc3QuYWRkKCdsaXN0Jyk7XHJcblx0XHRsaXN0LnN0eWxlLm1hcmdpbkxlZnQgPSAnLTEwcHgnO1xyXG5cdFx0bGlzdC5zdHlsZS5tYXJnaW5SaWdodCA9ICctMTBweCc7XHJcblx0XHRsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykuZm9yRWFjaChmdW5jdGlvbiAobGkpIHtcclxuXHRcdFx0bGkuY2xhc3NMaXN0LmFkZCgnbGlzdC1pdGVtJyk7XHJcblx0XHRcdHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb25zLWljb24nKTtcclxuXHRcdFx0aWNvbi5zZXRBdHRyaWJ1dGUoJ2ljb24nLCAnaW9uLWxpbmsnKTtcclxuXHRcdFx0aWNvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICcxMHB4JztcclxuXHRcdFx0bGkuaW5zZXJ0QmVmb3JlKGljb24sIGxpLmZpcnN0Q2hpbGQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdH0pO1xyXG5cclxuXHRwYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZXJnZWxpamtlcnMtb3ZlcnppY2h0IC5yb3cnKS5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcclxuXHRcdHJvdy5jbGFzc0xpc3QuYWRkKCdsaXN0Jyk7XHJcblx0XHRyb3cuc3R5bGUubWFyZ2luTGVmdCA9ICctMTBweCc7XHJcblx0XHRyb3cuc3R5bGUubWFyZ2luUmlnaHQgPSAnLTEwcHgnO1xyXG5cdFx0cm93LnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZXJnZWxpamtlcicpLmZvckVhY2goZnVuY3Rpb24gKHZlcmdlbGlqa2VyKSB7XHJcblx0XHRcdHZlcmdlbGlqa2VyLmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbScpO1xyXG5cdFx0XHR2ZXJnZWxpamtlci5xdWVyeVNlbGVjdG9yKCcucGFuZWwnKS5jbGFzc0xpc3QuYWRkKCdsaXN0LWl0ZW1fX2NlbnRlcicpO1xyXG5cdFx0XHR2YXIgYnRuID0gdmVyZ2VsaWprZXIucXVlcnlTZWxlY3RvcignLmJ1dHRvbicpO1xyXG5cdFx0XHRidG4ucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChidG4pO1xyXG5cclxuXHRcdFx0dmFyIGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0bGVmdC5jbGFzc0xpc3QuYWRkKCdsaXN0LWl0ZW1fX2xlZnQnKTtcclxuXHRcdFx0dmFyIGltZyA9IHZlcmdlbGlqa2VyLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG5cdFx0XHRpbWcucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChpbWcpO1xyXG5cdFx0XHRpbWcuY2xhc3NMaXN0LmFkZCgnbGlzdC1pdGVtX190aHVtYm5haWwnKTtcclxuXHRcdFx0bGVmdC5hcHBlbmRDaGlsZChpbWcpO1xyXG5cclxuXHRcdFx0dmFyIHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ2xpc3QtaXRlbV9fcmlnaHQnKTtcclxuXHRcdFx0cmlnaHQuYXBwZW5kQ2hpbGQoYnRuKTtcclxuXHJcblx0XHRcdHZlcmdlbGlqa2VyLmFwcGVuZENoaWxkKGxlZnQpO1xyXG5cdFx0XHR2ZXJnZWxpamtlci5hcHBlbmRDaGlsZChyaWdodCk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcblxyXG4iXX0=
